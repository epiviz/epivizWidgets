(function(a,c){function b(a){var b=eb[a]={};p.each(a.split(Pa),function(a,c){b[c]=!0});return b}function d(a,b,d){if(d===c&&1===a.nodeType)if(d="data-"+b.replace(fb,"-$1").toLowerCase(),d=a.getAttribute(d),"string"===typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:gb.test(d)?p.parseJSON(d):d}catch(e){}p.data(a,b,d)}else d=c;return d}function e(a){for(var b in a)if(("data"!==b||!p.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function f(){return!1}function g(){return!0}
function h(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function l(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function m(a,b,c){b=b||0;if(p.isFunction(b))return p.grep(a,function(a,d){return!!b.call(a,d,a)===c});if(b.nodeType)return p.grep(a,function(a,d){return a===b===c});if("string"===typeof b){var d=p.grep(a,function(a){return 1===a.nodeType});if(S.test(b))return p.filter(b,d,!c);b=p.filter(b,d)}return p.grep(a,function(a,d){return 0<=p.inArray(a,b)===c})}function n(a){var b=ma.split("|");
a=a.createDocumentFragment();if(a.createElement)for(;b.length;)a.createElement(b.pop());return a}function q(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function t(a,b){if(1===b.nodeType&&p.hasData(a)){var c,d,e;d=p._data(a);var f=p._data(b,d),g=d.events;if(g)for(c in delete f.handle,f.events={},g)for(d=0,e=g[c].length;d<e;d++)p.event.add(b,c,g[c][d]);f.data&&(f.data=p.extend({},f.data))}}function x(a,b){var c;1===b.nodeType&&(b.clearAttributes&&b.clearAttributes(),
b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),p.support.html5Clone&&a.innerHTML&&!p.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&Hb.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.selected=a.defaultSelected:"input"===c||"textarea"===c?b.defaultValue=a.defaultValue:"script"===c&&b.text!==a.text&&(b.text=a.text),b.removeAttribute(p.expando))}function u(a){return"undefined"!==
typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function E(a){Hb.test(a.type)&&(a.defaultChecked=a.checked)}function A(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Ed.length;e--;)if(b=Ed[e]+c,b in a)return b;return d}function H(a,b){a=b||a;return"none"===p.css(a,"display")||!p.contains(a.ownerDocument,a)}function I(a,b){for(var c,d,e=[],f=0,g=a.length;f<g;f++)c=a[f],c.style&&(e[f]=p._data(c,
"olddisplay"),b?(e[f]||"none"!==c.style.display||(c.style.display=""),""===c.style.display&&H(c)&&(e[f]=p._data(c,"olddisplay",G(c.nodeName)))):(d=hb(c,"display"),e[f]||"none"===d||p._data(c,"olddisplay",d)));for(f=0;f<g;f++)c=a[f],!c.style||b&&"none"!==c.style.display&&""!==c.style.display||(c.style.display=b?e[f]||"":"none");return a}function y(a,b,c){return(a=Fd.exec(b))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):b}function D(a,b,c,d){b=c===(d?"border":"content")?4:"width"===b?1:0;for(var e=0;4>b;b+=
2)"margin"===c&&(e+=p.css(a,c+Db[b],!0)),d?("content"===c&&(e-=parseFloat(hb(a,"padding"+Db[b]))||0),"margin"!==c&&(e-=parseFloat(hb(a,"border"+Db[b]+"Width"))||0)):(e+=parseFloat(hb(a,"padding"+Db[b]))||0,"padding"!==c&&(e+=parseFloat(hb(a,"border"+Db[b]+"Width"))||0));return e}function F(a,b,c){var d="width"===b?a.offsetWidth:a.offsetHeight,e=!0,f=p.support.boxSizing&&"border-box"===p.css(a,"boxSizing");if(0>=d||null==d){d=hb(a,b);if(0>d||null==d)d=a.style[b];if(sc.test(d))return d;e=f&&(p.support.boxSizingReliable||
d===a.style[b]);d=parseFloat(d)||0}return d+D(a,b,c||(f?"border":"content"),e)+"px"}function G(a){if(tc[a])return tc[a];var b=p("<"+a+">").appendTo(Q.body),c=b.css("display");b.remove();if("none"===c||""===c)Ib=Q.body.appendChild(Ib||p.extend(Q.createElement("iframe"),{frameBorder:0,width:0,height:0})),gc&&Ib.createElement||(gc=(Ib.contentWindow||Ib.contentDocument).document,gc.write("<!doctype html><html><body>"),gc.close()),b=gc.body.appendChild(gc.createElement(a)),c=hb(b,"display"),Q.body.removeChild(Ib);
return tc[a]=c}function N(a,b,c,d){var e;if(p.isArray(b))p.each(b,function(b,e){c||fe.test(a)?d(a,e):N(a+"["+("object"===typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==p.type(b))d(a,b);else for(e in b)N(a+"["+e+"]",b[e],c,d)}function M(a){return function(b,c){"string"!==typeof b&&(c=b,b="*");var d,e,f=b.toLowerCase().split(Pa),g=0,h=f.length;if(p.isFunction(c))for(;g<h;g++)d=f[g],(e=/^\+/.test(d))&&(d=d.substr(1)||"*"),d=a[d]=a[d]||[],d[e?"unshift":"push"](c)}}function P(a,b,d,e,f,g){f=f||b.dataTypes[0];
g=g||{};g[f]=!0;var h;f=a[f];for(var l=0,m=f?f.length:0,C=a===md;l<m&&(C||!h);l++)h=f[l](b,d,e),"string"===typeof h&&(!C||g[h]?h=c:(b.dataTypes.unshift(h),h=P(a,b,d,e,h,g)));!C&&h||g["*"]||(h=P(a,b,d,e,"*",g));return h}function O(a,b){var d,e,f=p.ajaxSettings.flatOptions||{};for(d in b)b[d]!==c&&((f[d]?a:e||(e={}))[d]=b[d]);e&&p.extend(!0,a,e)}function pa(){try{return new a.XMLHttpRequest}catch(b){}}function ka(){setTimeout(function(){Kc=c},0);return Kc=p.now()}function Ca(a,b){p.each(b,function(b,
c){for(var d=(Zc[b]||[]).concat(Zc["*"]),e=0,f=d.length;e<f&&!d[e].call(a,b,c);e++);})}function ra(a,b,c){var d=0,e=Wb.length,f=p.Deferred().always(function(){delete g.elem}),g=function(){for(var b=Kc||ka(),b=Math.max(0,h.startTime+h.duration-b),c=1-(b/h.duration||0),d=0,e=h.tweens.length;d<e;d++)h.tweens[d].run(c);f.notifyWith(a,[h,c,b]);if(1>c&&e)return b;f.resolveWith(a,[h]);return!1},h=f.promise({elem:a,props:p.extend({},b),opts:p.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,
startTime:Kc||ka(),duration:c.duration,tweens:[],createTween:function(b,c,d){b=p.Tween(a,h.opts,b,c,h.opts.specialEasing[b]||h.opts.easing);h.tweens.push(b);return b},stop:function(b){for(var c=0,d=b?h.tweens.length:0;c<d;c++)h.tweens[c].run(1);b?f.resolveWith(a,[h,b]):f.rejectWith(a,[h,b]);return this}});c=h.props;for(aa(c,h.opts.specialEasing);d<e;d++)if(b=Wb[d].call(h,a,c,h.opts))return b;Ca(h,c);p.isFunction(h.opts.start)&&h.opts.start.call(a,h);p.fx.timer(p.extend(g,{anim:h,queue:h.opts.queue,
elem:a}));return h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always)}function aa(a,b){var c,d,e,f,g;for(c in a)if(d=p.camelCase(c),e=b[d],f=a[c],p.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),(g=p.cssHooks[d])&&"expand"in g)for(c in f=g.expand(f),delete a[d],f)c in a||(a[c]=f[c],b[c]=e);else b[d]=e}function wa(a,b,c,d,e){return new wa.prototype.init(a,b,c,d,e)}function va(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=Db[e],d["margin"+
c]=d["padding"+c]=a;b&&(d.opacity=d.width=a);return d}function sa(a){return p.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var qa,na,Q=a.document,da=a.location,nb=a.navigator,ib=a.jQuery,Ga=a.$,ta=Array.prototype.push,Da=Array.prototype.slice,bb=Array.prototype.indexOf,ca=Object.prototype.toString,ob=Object.prototype.hasOwnProperty,tb=String.prototype.trim,p=function(a,b){return new p.fn.init(a,b,qa)},lb=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,Jb=/\S/,Pa=/\s+/,Eb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
Ra=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,ub=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,vb=/^[\],:{}\s]*$/,Kb=/(?:^|:|,)(?:\s*\[)+/g,Ab=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,wb=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,Ia=/^-ms-/,Lb=/-([\da-z])/gi,Ya=function(a,b){return(b+"").toUpperCase()},Qb=function(){Q.addEventListener?(Q.removeEventListener("DOMContentLoaded",Qb,!1),p.ready()):"complete"===Q.readyState&&(Q.detachEvent("onreadystatechange",Qb),p.ready())},Za={};p.fn=p.prototype=
{constructor:p,init:function(a,b,d){var e;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("string"===typeof a){e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:Ra.exec(a);if(!e||!e[1]&&b)return!b||b.jquery?(b||d).find(a):this.constructor(b).find(a);if(e[1])return a=(b=b instanceof p?b[0]:b)&&b.nodeType?b.ownerDocument||b:Q,a=p.parseHTML(e[1],a,!0),ub.test(e[1])&&p.isPlainObject(b)&&this.attr.call(a,b,!0),p.merge(this,a);if((b=Q.getElementById(e[2]))&&
b.parentNode){if(b.id!==e[2])return d.find(a);this.length=1;this[0]=b}this.context=Q;this.selector=a;return this}if(p.isFunction(a))return d.ready(a);a.selector!==c&&(this.selector=a.selector,this.context=a.context);return p.makeArray(a,this)},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return Da.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a,b,c){a=p.merge(this.constructor(),a);a.prevObject=
this;a.context=this.context;"find"===b?a.selector=this.selector+(this.selector?" ":"")+c:b&&(a.selector=this.selector+"."+b+"("+c+")");return a},each:function(a,b){return p.each(this,a,b)},ready:function(a){p.ready.promise().done(a);return this},eq:function(a){a=+a;return-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(Da.apply(this,arguments),"slice",Da.call(arguments).join(","))},map:function(a){return this.pushStack(p.map(this,
function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:ta,sort:[].sort,splice:[].splice};p.fn.init.prototype=p.fn;p.extend=p.fn.extend=function(){var a,b,d,e,f,g=arguments[0]||{},h=1,l=arguments.length,m=!1;"boolean"===typeof g&&(m=g,g=arguments[1]||{},h=2);"object"===typeof g||p.isFunction(g)||(g={});l===h&&(g=this,--h);for(;h<l;h++)if(null!=(a=arguments[h]))for(b in a)d=g[b],e=a[b],g!==e&&(m&&e&&(p.isPlainObject(e)||(f=p.isArray(e)))?(f?(f=!1,
d=d&&p.isArray(d)?d:[]):d=d&&p.isPlainObject(d)?d:{},g[b]=p.extend(m,d,e)):e!==c&&(g[b]=e));return g};p.extend({noConflict:function(b){a.$===p&&(a.$=Ga);b&&a.jQuery===p&&(a.jQuery=ib);return p},isReady:!1,readyWait:1,holdReady:function(a){a?p.readyWait++:p.ready(!0)},ready:function(a){if(!0===a?!--p.readyWait:!p.isReady){if(!Q.body)return setTimeout(p.ready,1);p.isReady=!0;!0!==a&&0<--p.readyWait||(na.resolveWith(Q,[p]),p.fn.trigger&&p(Q).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===
p.type(a)},isArray:Array.isArray||function(a){return"array"===p.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):Za[ca.call(a)]||"object"},isPlainObject:function(a){if(!a||"object"!==p.type(a)||a.nodeType||p.isWindow(a))return!1;try{if(a.constructor&&!ob.call(a,"constructor")&&!ob.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}for(var d in a);return d===c||
ob.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw Error(a);},parseHTML:function(a,b,c){var d;if(!a||"string"!==typeof a)return null;"boolean"===typeof b&&(c=b,b=0);b=b||Q;if(d=ub.exec(a))return[b.createElement(d[1])];d=p.buildFragment([a],b,c?null:[]);return p.merge([],(d.cacheable?p.clone(d.fragment):d.fragment).childNodes)},parseJSON:function(b){if(!b||"string"!==typeof b)return null;b=p.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(vb.test(b.replace(Ab,
"@").replace(wb,"]").replace(Kb,"")))return(new Function("return "+b))();p.error("Invalid JSON: "+b)},parseXML:function(b){var d,e;if(!b||"string"!==typeof b)return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(b,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(b))}catch(f){d=c}d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||p.error("Invalid XML: "+b);return d},noop:function(){},globalEval:function(b){b&&Jb.test(b)&&(a.execScript||function(b){a.eval.call(a,
b)})(b)},camelCase:function(a){return a.replace(Ia,"ms-").replace(Lb,Ya)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=g===c||p.isFunction(a);if(d)if(h)for(e in a){if(!1===b.apply(a[e],d))break}else for(;f<g&&!1!==b.apply(a[f++],d););else if(h)for(e in a){if(!1===b.call(a[e],e,a[e]))break}else for(;f<g&&!1!==b.call(a[f],f,a[f++]););return a},trim:tb&&!tb.call("\ufeff\u00a0")?function(a){return null==a?"":tb.call(a)}:
function(a){return null==a?"":(a+"").replace(Eb,"")},makeArray:function(a,b){var c,d=b||[];null!=a&&(c=p.type(a),null==a.length||"string"===c||"function"===c||"regexp"===c||p.isWindow(a)?ta.call(d,a):p.merge(d,a));return d},inArray:function(a,b,c){var d;if(b){if(bb)return bb.call(b,a,c);d=b.length;for(c=c?0>c?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var d=b.length,e=a.length,f=0;if("number"===typeof d)for(;f<d;f++)a[e++]=b[f];else for(;b[f]!==c;)a[e++]=
b[f++];a.length=e;return a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;f<g;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,b,d){var e,f,g=[],h=0,l=a.length;if(a instanceof p||l!==c&&"number"===typeof l&&(0<l&&a[0]&&a[l-1]||0===l||p.isArray(a)))for(;h<l;h++)e=b(a[h],h,d),null!=e&&(g[g.length]=e);else for(f in a)e=b(a[f],f,d),null!=e&&(g[g.length]=e);return g.concat.apply([],g)},guid:1,proxy:function(a,b){var d,e;"string"===typeof b&&(d=a[b],b=a,a=d);if(!p.isFunction(a))return c;
e=Da.call(arguments,2);d=function(){return a.apply(b,e.concat(Da.call(arguments)))};d.guid=a.guid=a.guid||p.guid++;return d},access:function(a,b,d,e,f,g,h){var l,m=null==d,C=0,K=a.length;if(d&&"object"===typeof d){for(C in d)p.access(a,b,C,d[C],1,g,e);f=1}else if(e!==c){l=h===c&&p.isFunction(e);m&&(l?(l=b,b=function(a,b,c){return l.call(p(a),c)}):(b.call(a,e),b=null));if(b)for(;C<K;C++)b(a[C],d,l?e.call(a[C],C,b(a[C],d)):e,h);f=1}return f?a:m?b.call(a):K?b(a[0],d):g},now:function(){return(new Date).getTime()}});
p.ready.promise=function(b){if(!na)if(na=p.Deferred(),"complete"===Q.readyState)setTimeout(p.ready,1);else if(Q.addEventListener)Q.addEventListener("DOMContentLoaded",Qb,!1),a.addEventListener("load",p.ready,!1);else{Q.attachEvent("onreadystatechange",Qb);a.attachEvent("onload",p.ready);var c=!1;try{c=null==a.frameElement&&Q.documentElement}catch(d){}c&&c.doScroll&&function Yc(){if(!p.isReady){try{c.doScroll("left")}catch(a){return setTimeout(Yc,50)}p.ready()}}()}return na.promise(b)};p.each("Boolean Number String Function Array Date RegExp Object".split(" "),
function(a,b){Za["[object "+b+"]"]=b.toLowerCase()});qa=p(Q);var eb={};p.Callbacks=function(a){a="string"===typeof a?eb[a]||b(a):p.extend({},a);var d,e,f,g,h,l,m=[],C=!a.once&&[],K=function(b){d=a.memory&&b;e=!0;l=g||0;g=0;h=m.length;for(f=!0;m&&l<h;l++)if(!1===m[l].apply(b[0],b[1])&&a.stopOnFalse){d=!1;break}f=!1;m&&(C?C.length&&K(C.shift()):d?m=[]:n.disable())},n={add:function(){if(m){var b=m.length;(function he(b){p.each(b,function(b,c){var d=p.type(c);"function"!==d||a.unique&&n.has(c)?c&&c.length&&
"string"!==d&&he(c):m.push(c)})})(arguments);f?h=m.length:d&&(g=b,K(d))}return this},remove:function(){m&&p.each(arguments,function(a,b){for(var c;-1<(c=p.inArray(b,m,c));)m.splice(c,1),f&&(c<=h&&h--,c<=l&&l--)});return this},has:function(a){return-1<p.inArray(a,m)},empty:function(){m=[];return this},disable:function(){m=C=d=c;return this},disabled:function(){return!m},lock:function(){C=c;d||n.disable();return this},locked:function(){return!C},fireWith:function(a,b){b=b||[];b=[a,b.slice?b.slice():
b];!m||e&&!C||(f?C.push(b):K(b));return this},fire:function(){n.fireWith(this,arguments);return this},fired:function(){return!!e}};return n};p.extend({Deferred:function(a){var b=[["resolve","done",p.Callbacks("once memory"),"resolved"],["reject","fail",p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){e.done(arguments).fail(arguments);return this},then:function(){var a=arguments;return p.Deferred(function(c){p.each(b,
function(b,d){var f=d[0],g=a[b];e[d[1]](p.isFunction(g)?function(){var a=g.apply(this,arguments);if(a&&p.isFunction(a.promise))a.promise().done(c.resolve).fail(c.reject).progress(c.notify);else c[f+"With"](this===e?c:this,[a])}:c[f])});a=null}).promise()},promise:function(a){return null!=a?p.extend(a,d):d}},e={};d.pipe=d.then;p.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add;h&&g.add(function(){c=h},b[a^1][2].disable,b[2][2].lock);e[f[0]]=g.fire;e[f[0]+"With"]=g.fireWith});d.promise(e);a&&a.call(e,
e);return e},when:function(a){var b=0,c=Da.call(arguments),d=c.length,e=1!==d||a&&p.isFunction(a.promise)?d:0,f=1===e?a:p.Deferred(),g=function(a,b,c){return function(d){b[a]=this;c[a]=1<arguments.length?Da.call(arguments):d;c===h?f.notifyWith(b,c):--e||f.resolveWith(b,c)}},h,l,m;if(1<d)for(h=Array(d),l=Array(d),m=Array(d);b<d;b++)c[b]&&p.isFunction(c[b].promise)?c[b].promise().done(g(b,m,c)).fail(f.reject).progress(g(b,l,h)):--e;e||f.resolveWith(m,c);return f.promise()}});p.support=function(){var b,
c,d,e,f,g,h,l=Q.createElement("div");l.setAttribute("className","t");l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";c=l.getElementsByTagName("*");d=l.getElementsByTagName("a")[0];d.style.cssText="top:1px;float:left;opacity:.5";if(!c||!c.length)return{};e=Q.createElement("select");f=e.appendChild(Q.createElement("option"));c=l.getElementsByTagName("input")[0];b={leadingWhitespace:3===l.firstChild.nodeType,tbody:!l.getElementsByTagName("tbody").length,htmlSerialize:!!l.getElementsByTagName("link").length,
style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:"on"===c.value,optSelected:f.selected,getSetAttribute:"t"!==l.className,enctype:!!Q.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==Q.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===Q.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,
reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1};c.checked=!0;b.noCloneChecked=c.cloneNode(!0).checked;e.disabled=!0;b.optDisabled=!f.disabled;try{delete l.test}catch(m){b.deleteExpando=!1}!l.addEventListener&&l.attachEvent&&l.fireEvent&&(l.attachEvent("onclick",d=function(){b.noCloneEvent=!1}),l.cloneNode(!0).fireEvent("onclick"),l.detachEvent("onclick",d));c=Q.createElement("input");c.value="t";c.setAttribute("type","radio");b.radioValue="t"===c.value;c.setAttribute("checked","checked");
c.setAttribute("name","t");l.appendChild(c);d=Q.createDocumentFragment();d.appendChild(l.lastChild);b.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked;b.appendChecked=c.checked;d.removeChild(c);d.appendChild(l);if(l.attachEvent)for(g in{submit:!0,change:!0,focusin:!0})c="on"+g,h=c in l,h||(l.setAttribute(c,"return;"),h="function"===typeof l[c]),b[g+"Bubbles"]=h;p(function(){var c,d,e,f=Q.getElementsByTagName("body")[0];f&&(c=Q.createElement("div"),c.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",
f.insertBefore(c,f.firstChild),d=Q.createElement("div"),c.appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=d.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",h=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",b.reliableHiddenOffsets=h&&0===e[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",
b.boxSizing=4===d.offsetWidth,b.doesNotIncludeMarginInBodyOffset=1!==f.offsetTop,a.getComputedStyle&&(b.pixelPosition="1%"!==(a.getComputedStyle(d,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(d,null)||{width:"4px"}).width,e=Q.createElement("div"),e.style.cssText=d.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;",e.style.marginRight=e.style.width="0",d.style.width="1px",d.appendChild(e),b.reliableMarginRight=!parseFloat((a.getComputedStyle(e,null)||{}).marginRight)),
"undefined"!==typeof d.style.zoom&&(d.innerHTML="",d.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.style.overflow="visible",d.innerHTML="<div></div>",d.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==d.offsetWidth,c.style.zoom=1),f.removeChild(c))});d.removeChild(l);c=d=e=f=c=d=l=null;return b}();var gb=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,fb=/([A-Z])/g;p.extend({cache:{},
deletedIds:[],uuid:0,expando:"jQuery"+(p.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?p.cache[a[p.expando]]:a[p.expando];return!!a&&!e(a)},data:function(a,b,d,e){if(p.acceptData(a)){var f=p.expando,g="string"===typeof b,h=a.nodeType,l=h?p.cache:a,m=h?a[f]:a[f]&&f;if(m&&l[m]&&(e||l[m].data)||!g||d!==c){m||(h?a[f]=m=p.deletedIds.pop()||p.guid++:m=f);l[m]||(l[m]={},h||(l[m].toJSON=p.noop));
if("object"===typeof b||"function"===typeof b)e?l[m]=p.extend(l[m],b):l[m].data=p.extend(l[m].data,b);a=l[m];e||(a.data||(a.data={}),a=a.data);d!==c&&(a[p.camelCase(b)]=d);g?(d=a[b],null==d&&(d=a[p.camelCase(b)])):d=a;return d}}},removeData:function(a,b,c){if(p.acceptData(a)){var d,f,g,h=a.nodeType,l=h?p.cache:a,m=h?a[p.expando]:p.expando;if(l[m]){if(b&&(d=c?l[m]:l[m].data)){p.isArray(b)||(b in d?b=[b]:(b=p.camelCase(b),b=b in d?[b]:b.split(" ")));f=0;for(g=b.length;f<g;f++)delete d[b[f]];if(!(c?
e:p.isEmptyObject)(d))return}if(!c&&(delete l[m].data,!e(l[m])))return;h?p.cleanData([a],!0):p.support.deleteExpando||l!=l.window?delete l[m]:l[m]=null}}},_data:function(a,b,c){return p.data(a,b,c,!0)},acceptData:function(a){var b=a.nodeName&&p.noData[a.nodeName.toLowerCase()];return!b||!0!==b&&a.getAttribute("classid")===b}});p.fn.extend({data:function(a,b){var e,f,g,h,l,m=this[0],C=0,K=null;if(a===c){if(this.length&&(K=p.data(m),1===m.nodeType&&!p._data(m,"parsedAttrs"))){g=m.attributes;for(l=g.length;C<
l;C++)h=g[C].name,h.indexOf("data-")||(h=p.camelCase(h.substring(5)),d(m,h,K[h]));p._data(m,"parsedAttrs",!0)}return K}if("object"===typeof a)return this.each(function(){p.data(this,a)});e=a.split(".",2);e[1]=e[1]?"."+e[1]:"";f=e[1]+"!";return p.access(this,function(b){if(b===c)return K=this.triggerHandler("getData"+f,[e[0]]),K===c&&m&&(K=p.data(m,a),K=d(m,a,K)),K===c&&e[1]?this.data(e[0]):K;e[1]=b;this.each(function(){var c=p(this);c.triggerHandler("setData"+f,e);p.data(this,a,b);c.triggerHandler("changeData"+
f,e)})},null,b,1<arguments.length,null,!1)},removeData:function(a){return this.each(function(){p.removeData(this,a)})}});p.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=p._data(a,b),c&&(!d||p.isArray(c)?d=p._data(a,b,p.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=p.queue(a,b),d=c.length,e=c.shift(),f=p._queueHooks(a,b),g=function(){p.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--);e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f));
!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return p._data(a,c)||p._data(a,c,{empty:p.Callbacks("once memory").add(function(){p.removeData(a,b+"queue",!0);p.removeData(a,c,!0)})})}});p.fn.extend({queue:function(a,b){var d=2;"string"!==typeof a&&(b=a,a="fx",d--);return arguments.length<d?p.queue(this[0],a):b===c?this:this.each(function(){var c=p.queue(this,a,b);p._queueHooks(this,a);"fx"===a&&"inprogress"!==c[0]&&p.dequeue(this,a)})},dequeue:function(a){return this.each(function(){p.dequeue(this,
a)})},delay:function(a,b){a=p.fx?p.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var d,e=1,f=p.Deferred(),g=this,h=this.length,l=function(){--e||f.resolveWith(g,[g])};"string"!==typeof a&&(b=a,a=c);for(a=a||"fx";h--;)(d=p._data(g[h],a+"queueHooks"))&&d.empty&&(e++,d.empty.add(l));l();return f.promise(b)}});var fa,Ba,pb,xb=/[\t\r\n]/g,Rb=/\r/g,ea=/^(?:button|input)$/i,
Sb=/^(?:button|input|object|select|textarea)$/i,Ua=/^a(?:rea|)$/i,$a=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,cb=p.support.getSetAttribute;p.fn.extend({attr:function(a,b){return p.access(this,p.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){p.removeAttr(this,a)})},prop:function(a,b){return p.access(this,p.prop,a,b,1<arguments.length)},removeProp:function(a){a=p.propFix[a]||a;return this.each(function(){try{this[a]=
c,delete this[a]}catch(b){}})},addClass:function(a){var b,c,d,e,f,g,h;if(p.isFunction(a))return this.each(function(b){p(this).addClass(a.call(this,b,this.className))});if(a&&"string"===typeof a)for(b=a.split(Pa),c=0,d=this.length;c<d;c++)if(e=this[c],1===e.nodeType)if(e.className||1!==b.length){f=" "+e.className+" ";g=0;for(h=b.length;g<h;g++)0>f.indexOf(" "+b[g]+" ")&&(f+=b[g]+" ");e.className=p.trim(f)}else e.className=a;return this},removeClass:function(a){var b,d,e,f,g,h,l;if(p.isFunction(a))return this.each(function(b){p(this).removeClass(a.call(this,
b,this.className))});if(a&&"string"===typeof a||a===c)for(b=(a||"").split(Pa),h=0,l=this.length;h<l;h++)if(e=this[h],1===e.nodeType&&e.className){d=(" "+e.className+" ").replace(xb," ");f=0;for(g=b.length;f<g;f++)for(;0<=d.indexOf(" "+b[f]+" ");)d=d.replace(" "+b[f]+" "," ");e.className=a?p.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a,d="boolean"===typeof b;return p.isFunction(a)?this.each(function(c){p(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===
c)for(var e,f=0,g=p(this),h=b,l=a.split(Pa);e=l[f++];)h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e);else if("undefined"===c||"boolean"===c)this.className&&p._data(this,"__className__",this.className),this.className=this.className||!1===a?"":p._data(this,"__className__")||""})},hasClass:function(a){a=" "+a+" ";for(var b=0,c=this.length;b<c;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace(xb," ").indexOf(a))return!0;return!1},val:function(a){var b,d,e,f=this[0];if(arguments.length)return e=
p.isFunction(a),this.each(function(d){var f=p(this);1===this.nodeType&&(d=e?a.call(this,d,f.val()):a,null==d?d="":"number"===typeof d?d+="":p.isArray(d)&&(d=p.map(d,function(a){return null==a?"":a+""})),b=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&b.set(this,d,"value")!==c||(this.value=d))});if(f){if((b=p.valHooks[f.type]||p.valHooks[f.nodeName.toLowerCase()])&&"get"in b&&(d=b.get(f,"value"))!==c)return d;d=f.value;return"string"===typeof d?d.replace(Rb,""):null==
d?"":d}}});p.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d=a.selectedIndex,e=[],f=a.options,g="select-one"===a.type;if(0>d)return null;a=g?d:0;for(c=g?d+1:f.length;a<c;a++)if(b=f[a],!(!b.selected||(p.support.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&p.nodeName(b.parentNode,"optgroup"))){b=p(b).val();if(g)return b;e.push(b)}return g&&!e.length&&f.length?p(f[d]).val():
e},set:function(a,b){var c=p.makeArray(b);p(a).find("option").each(function(){this.selected=0<=p.inArray(p(this).val(),c)});c.length||(a.selectedIndex=-1);return c}}},attrFn:{},attr:function(a,b,d,e){var f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h){if(e&&p.isFunction(p.fn[b]))return p(a)[b](d);if("undefined"===typeof a.getAttribute)return p.prop(a,b,d);if(e=1!==h||!p.isXMLDoc(a))b=b.toLowerCase(),g=p.attrHooks[b]||($a.test(b)?Ba:fa);if(d!==c)if(null===d)p.removeAttr(a,b);else{if(g&&"set"in g&&e&&(f=
g.set(a,d,b))!==c)return f;a.setAttribute(b,d+"");return d}else{if(g&&"get"in g&&e&&null!==(f=g.get(a,b)))return f;f=a.getAttribute(b);return null===f?c:f}}},removeAttr:function(a,b){var c,d,e,f,g=0;if(b&&1===a.nodeType)for(d=b.split(Pa);g<d.length;g++)if(e=d[g])c=p.propFix[e]||e,(f=$a.test(e))||p.attr(a,e,""),a.removeAttribute(cb?e:c),f&&c in a&&(a[c]=!1)},attrHooks:{type:{set:function(a,b){if(ea.test(a.nodeName)&&a.parentNode)p.error("type property can't be changed");else if(!p.support.radioValue&&
"radio"===b&&p.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}},value:{get:function(a,b){return fa&&p.nodeName(a,"button")?fa.get(a,b):b in a?a.value:null},set:function(a,b,c){if(fa&&p.nodeName(a,"button"))return fa.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",
contenteditable:"contentEditable"},prop:function(a,b,d){var e,f,g;g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g){if(g=1!==g||!p.isXMLDoc(a))b=p.propFix[b]||b,f=p.propHooks[b];return d!==c?f&&"set"in f&&(e=f.set(a,d,b))!==c?e:a[b]=d:f&&"get"in f&&null!==(e=f.get(a,b))?e:a[b]}},propHooks:{tabIndex:{get:function(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?parseInt(b.value,10):Sb.test(a.nodeName)||Ua.test(a.nodeName)&&a.href?0:c}}}});Ba={get:function(a,b){var d,e=p.prop(a,b);return!0===e||
"boolean"!==typeof e&&(d=a.getAttributeNode(b))&&!1!==d.nodeValue?b.toLowerCase():c},set:function(a,b,c){!1===b?p.removeAttr(a,c):(b=p.propFix[c]||c,b in a&&(a[b]=!0),a.setAttribute(c,c.toLowerCase()));return c}};cb||(pb={name:!0,id:!0,coords:!0},fa=p.valHooks.button={get:function(a,b){var d;return(d=a.getAttributeNode(b))&&(pb[b]?""!==d.value:d.specified)?d.value:c},set:function(a,b,c){var d=a.getAttributeNode(c);d||(d=Q.createAttribute(c),a.setAttributeNode(d));return d.value=b+""}},p.each(["width",
"height"],function(a,b){p.attrHooks[b]=p.extend(p.attrHooks[b],{set:function(a,c){if(""===c)return a.setAttribute(b,"auto"),c}})}),p.attrHooks.contenteditable={get:fa.get,set:function(a,b,c){""===b&&(b="false");fa.set(a,b,c)}});p.support.hrefNormalized||p.each(["href","src","width","height"],function(a,b){p.attrHooks[b]=p.extend(p.attrHooks[b],{get:function(a){a=a.getAttribute(b,2);return null===a?c:a}})});p.support.style||(p.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||
c},set:function(a,b){return a.style.cssText=b+""}});p.support.optSelected||(p.propHooks.selected=p.extend(p.propHooks.selected,{get:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex;return null}}));p.support.enctype||(p.propFix.enctype="encoding");p.support.checkOn||p.each(["radio","checkbox"],function(){p.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}});p.each(["radio","checkbox"],function(){p.valHooks[this]=p.extend(p.valHooks[this],
{set:function(a,b){if(p.isArray(b))return a.checked=0<=p.inArray(p(a).val(),b)}})});var Z=/^(?:textarea|input|select)$/i,Qa=/^([^\.]*|)(?:\.(.+)|)$/,T=/(?:^|\s)hover(\.\S+|)\b/,jb=/^key/,Va=/^(?:mouse|contextmenu)|click/,xa=/^(?:focusinfocus|focusoutblur)$/,ba=function(a){return p.event.special.hover?a:a.replace(T,"mouseenter$1 mouseleave$1")};p.event={add:function(a,b,d,e,f){var g,h,l,m,C,K,n,Y,q;if(3!==a.nodeType&&8!==a.nodeType&&b&&d&&(g=p._data(a))){d.handler&&(n=d,d=n.handler,f=n.selector);d.guid||
(d.guid=p.guid++);l=g.events;l||(g.events=l={});h=g.handle;h||(g.handle=h=function(a){return"undefined"===typeof p||a&&p.event.triggered===a.type?c:p.event.dispatch.apply(h.elem,arguments)},h.elem=a);b=p.trim(ba(b)).split(" ");for(g=0;g<b.length;g++)m=Qa.exec(b[g])||[],C=m[1],K=(m[2]||"").split(".").sort(),q=p.event.special[C]||{},C=(f?q.delegateType:q.bindType)||C,q=p.event.special[C]||{},m=p.extend({type:C,origType:m[1],data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&p.expr.match.needsContext.test(f),
namespace:K.join(".")},n),Y=l[C],Y||(Y=l[C]=[],Y.delegateCount=0,q.setup&&!1!==q.setup.call(a,e,K,h)||(a.addEventListener?a.addEventListener(C,h,!1):a.attachEvent&&a.attachEvent("on"+C,h))),q.add&&(q.add.call(a,m),m.handler.guid||(m.handler.guid=d.guid)),f?Y.splice(Y.delegateCount++,0,m):Y.push(m),p.event.global[C]=!0;a=null}},global:{},remove:function(a,b,c,d,e){var f,g,h,l,m,C,K,n,Y,q,La=p.hasData(a)&&p._data(a);if(La&&(K=La.events)){b=p.trim(ba(b||"")).split(" ");for(f=0;f<b.length;f++)if(g=Qa.exec(b[f])||
[],h=l=g[1],g=g[2],h){n=p.event.special[h]||{};h=(d?n.delegateType:n.bindType)||h;Y=K[h]||[];m=Y.length;g=g?new RegExp("(^|\\.)"+g.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(C=0;C<Y.length;C++)q=Y[C],!e&&l!==q.origType||c&&c.guid!==q.guid||g&&!g.test(q.namespace)||d&&d!==q.selector&&("**"!==d||!q.selector)||(Y.splice(C--,1),q.selector&&Y.delegateCount--,n.remove&&n.remove.call(a,q));0===Y.length&&m!==Y.length&&(n.teardown&&!1!==n.teardown.call(a,g,La.handle)||p.removeEvent(a,h,La.handle),
delete K[h])}else for(h in K)p.event.remove(a,h+b[f],c,d,!0);p.isEmptyObject(K)&&(delete La.handle,p.removeData(a,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(b,d,e,f){if(!e||3!==e.nodeType&&8!==e.nodeType){var g,h,l,m,C,K,n=b.type||b;l=[];if(!xa.test(n+p.event.triggered)&&(0<=n.indexOf("!")&&(n=n.slice(0,-1),g=!0),0<=n.indexOf(".")&&(l=n.split("."),n=l.shift(),l.sort()),e&&!p.event.customEvent[n]||p.event.global[n]))if(b="object"===typeof b?b[p.expando]?b:new p.Event(n,
b):new p.Event(n),b.type=n,b.isTrigger=!0,b.exclusive=g,b.namespace=l.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+l.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l=0>n.indexOf(":")?"on"+n:"",e){if(b.result=c,b.target||(b.target=e),d=null!=d?p.makeArray(d):[],d.unshift(b),m=p.event.special[n]||{},!m.trigger||!1!==m.trigger.apply(e,d)){K=[[e,m.bindType||n]];if(!f&&!m.noBubble&&!p.isWindow(e)){C=m.delegateType||n;g=xa.test(C+n)?e:e.parentNode;for(h=e;g;g=g.parentNode)K.push([g,C]),h=g;h===(e.ownerDocument||
Q)&&K.push([h.defaultView||h.parentWindow||a,C])}for(h=0;h<K.length&&!b.isPropagationStopped();h++)g=K[h][0],b.type=K[h][1],(C=(p._data(g,"events")||{})[b.type]&&p._data(g,"handle"))&&C.apply(g,d),(C=l&&g[l])&&p.acceptData(g)&&C.apply&&!1===C.apply(g,d)&&b.preventDefault();b.type=n;f||b.isDefaultPrevented()||m._default&&!1!==m._default.apply(e.ownerDocument,d)||"click"===n&&p.nodeName(e,"a")||!p.acceptData(e)||!l||!e[n]||("focus"===n||"blur"===n)&&0===b.target.offsetWidth||p.isWindow(e)||((h=e[l])&&
(e[l]=null),p.event.triggered=n,e[n](),p.event.triggered=c,h&&(e[l]=h));return b.result}}else for(h in e=p.cache,e)e[h].events&&e[h].events[n]&&p.event.trigger(b,d,e[h].handle.elem,!0)}},dispatch:function(b){b=p.event.fix(b||a.event);var d,e,f,g,h,l,m=(p._data(this,"events")||{})[b.type]||[],C=m.delegateCount,K=Da.call(arguments),n=!b.exclusive&&!b.namespace,Y=p.event.special[b.type]||{},q=[];K[0]=b;b.delegateTarget=this;if(!Y.preDispatch||!1!==Y.preDispatch.call(this,b)){if(C&&(!b.button||"click"!==
b.type))for(e=b.target;e!=this;e=e.parentNode||this)if(!0!==e.disabled||"click"!==b.type){g={};h=[];for(d=0;d<C;d++)f=m[d],l=f.selector,g[l]===c&&(g[l]=f.needsContext?0<=p(l,this).index(e):p.find(l,this,null,[e]).length),g[l]&&h.push(f);h.length&&q.push({elem:e,matches:h})}m.length>C&&q.push({elem:this,matches:m.slice(C)});for(d=0;d<q.length&&!b.isPropagationStopped();d++)for(g=q[d],b.currentTarget=g.elem,e=0;e<g.matches.length&&!b.isImmediatePropagationStopped();e++)if(f=g.matches[e],n||!b.namespace&&
!f.namespace||b.namespace_re&&b.namespace_re.test(f.namespace))b.data=f.data,b.handleObj=f,f=((p.event.special[f.origType]||{}).handle||f.handler).apply(g.elem,K),f!==c&&(b.result=f,!1===f&&(b.preventDefault(),b.stopPropagation()));Y.postDispatch&&Y.postDispatch.call(this,b);return b.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char",
"charCode","key","keyCode"],filter:function(a,b){null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var d,e,f=b.button,g=b.fromElement;null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||Q,e=d.documentElement,d=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||d&&d.scrollLeft||0)-(e&&e.clientLeft||d&&d.clientLeft||0),a.pageY=b.clientY+
(e&&e.scrollTop||d&&d.scrollTop||0)-(e&&e.clientTop||d&&d.clientTop||0));!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g);a.which||f===c||(a.which=f&1?1:f&2?3:f&4?2:0);return a}},fix:function(a){if(a[p.expando])return a;var b,c,d=a,e=p.event.fixHooks[a.type]||{},f=e.props?this.props.concat(e.props):this.props;a=p.Event(d);for(b=f.length;b;)c=f[--b],a[c]=d[c];a.target||(a.target=d.srcElement||Q);3===a.target.nodeType&&(a.target=a.target.parentNode);a.metaKey=!!a.metaKey;return e.filter?
e.filter(a,d):a},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){p.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){a=p.extend(new p.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?p.event.trigger(a,null,b):p.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};p.event.handle=p.event.dispatch;p.removeEvent=
Q.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){b="on"+b;a.detachEvent&&("undefined"===typeof a[b]&&(a[b]=null),a.detachEvent(b,c))};p.Event=function(a,b){if(!(this instanceof p.Event))return new p.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?g:f):this.type=a;b&&p.extend(this,b);this.timeStamp=a&&a.timeStamp||p.now();
this[p.expando]=!0};p.Event.prototype={preventDefault:function(){this.isDefaultPrevented=g;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=g;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=g;this.stopPropagation()},isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f};p.each({mouseenter:"mouseover",
mouseleave:"mouseout"},function(a,b){p.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=a.relatedTarget,e=a.handleObj;if(!d||d!==this&&!p.contains(this,d))a.type=e.origType,c=e.handler.apply(this,arguments),a.type=b;return c}}});p.support.submitBubbles||(p.event.special.submit={setup:function(){if(p.nodeName(this,"form"))return!1;p.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=p.nodeName(a,"input")||p.nodeName(a,"button")?a.form:c)&&!p._data(a,"_submit_attached")&&
(p.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),p._data(a,"_submit_attached",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&p.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(p.nodeName(this,"form"))return!1;p.event.remove(this,"._submit")}});p.support.changeBubbles||(p.event.special.change={setup:function(){if(Z.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)p.event.add(this,"propertychange._change",
function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),p.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1);p.event.simulate("change",this,a,!0)});return!1}p.event.add(this,"beforeactivate._change",function(a){a=a.target;Z.test(a.nodeName)&&!p._data(a,"_change_attached")&&(p.event.add(a,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||p.event.simulate("change",this.parentNode,a,!0)}),p._data(a,"_change_attached",
!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){p.event.remove(this,"._change");return!Z.test(this.nodeName)}});p.support.focusinBubbles||p.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){p.event.simulate(b,a.target,p.event.fix(a),!0)};p.event.special[b]={setup:function(){0===c++&&Q.addEventListener(a,d,!0)},teardown:function(){0===
--c&&Q.removeEventListener(a,d,!0)}}});p.fn.extend({on:function(a,b,d,e,g){var h,l;if("object"===typeof a){"string"!==typeof b&&(d=d||b,b=c);for(l in a)this.on(l,b,d,a[l],g);return this}null==d&&null==e?(e=b,d=b=c):null==e&&("string"===typeof b?(e=d,d=c):(e=d,d=b,b=c));if(!1===e)e=f;else if(!e)return this;1===g&&(h=e,e=function(a){p().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=p.guid++));return this.each(function(){p.event.add(this,a,e,d,b)})},one:function(a,b,c,d){return this.on(a,
b,c,d,1)},off:function(a,b,d){var e;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,p(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"===typeof a){for(e in a)this.off(e,b,a[e]);return this}if(!1===b||"function"===typeof b)d=b,b=c;!1===d&&(d=f);return this.each(function(){p.event.remove(this,a,d,b)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){p(this.context).on(a,
this.selector,b,c);return this},die:function(a,b){p(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,b){return this.each(function(){p.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return p.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||p.guid++,d=0,e=function(c){var e=(p._data(this,
"lastToggle"+a.guid)||0)%d;p._data(this,"lastToggle"+a.guid,e+1);c.preventDefault();return b[e].apply(this,arguments)||!1};for(e.guid=c;d<b.length;)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){p.fn[b]=function(a,
c){null==c&&(c=a,a=null);return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)};jb.test(b)&&(p.event.fixHooks[b]=p.event.keyHooks);Va.test(b)&&(p.event.fixHooks[b]=p.event.mouseHooks)});(function(a,b){function c(a,b,d,e){d=d||[];b=b||Na;var f,g,h,l,m=b.nodeType;if(!a||"string"!==typeof a)return d;if(1!==m&&9!==m)return[];h=u(b);if(!h&&!e&&(f=sa.exec(a)))if(l=f[1])if(9===m)if((g=b.getElementById(l))&&g.parentNode){if(g.id===l)return d.push(g),d}else return d;else{if(b.ownerDocument&&(g=b.ownerDocument.getElementById(l))&&
ab(b,g)&&g.id===l)return d.push(g),d}else{if(f[2])return Xb.apply(d,ra.call(b.getElementsByTagName(a),0)),d;if((l=f[3])&&ba&&b.getElementsByClassName)return Xb.apply(d,ra.call(b.getElementsByClassName(l),0)),d}return q(a.replace(M,"$1"),b,d,e,h)}function d(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function e(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function f(a){return T(function(b){b=+b;return T(function(c,
d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function g(a,b,c){if(a===b)return c;for(a=a.nextSibling;a;){if(a===b)return-1;a=a.nextSibling}return 1}function h(a,b){var d,e,f,g,l,m,C;if(l=mb[E][a])return b?0:l.slice(0);l=a;m=[];for(C=t.preFilter;l;){if(!d||(e=wa.exec(l)))e&&(l=l.slice(e[0].length)),m.push(f=[]);d=!1;if(e=P.exec(l))f.push(d=new G(e.shift())),l=l.slice(d.length),d.type=e[0].replace(M," ");for(g in t.filter)!(e=Q[g].exec(l))||C[g]&&!(e=C[g](e,Na,
!0))||(f.push(d=new G(e.shift())),l=l.slice(d.length),d.type=g,d.matches=e);if(!d)break}return b?l.length:l?c.error(a):mb(a,m).slice(0)}function l(a,b,c){var d=b.dir,e=c&&"parentNode"===b.dir,f=I++;return b.first?function(b,c,f){for(;b=b[d];)if(e||1===b.nodeType)return a(b,c,f)}:function(b,c,g){if(!g)for(var h,l=O+" "+f+" ",m=l+Hb;b=b[d];){if(e||1===b.nodeType){if((h=b[E])===m)return b.sizset;if("string"===typeof h&&0===h.indexOf(l)){if(b.sizset)return b}else{b[E]=m;if(a(b,c,g))return b.sizset=!0,
b;b.sizset=!1}}}else for(;b=b[d];)if((e||1===b.nodeType)&&a(b,c,g))return b}}function m(a){return 1<a.length?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function C(a,b,c,d,e){for(var f,g=[],h=0,l=a.length,m=null!=b;h<l;h++)if(f=a[h])if(!c||c(f,d,e))g.push(f),m&&b.push(h);return g}function K(a,b,d,e,f,g){e&&!e[E]&&(e=K(e));f&&!f[E]&&(f=K(f,g));return T(function(g,h,l,m){if(!g||!f){var K,n,Y=[],q=[],La=h.length;if(!(n=g)){n=b||"*";var p=l.nodeType?[l]:l,t=[];K=0;
for(var Hb=p.length;K<Hb;K++)c(n,p[K],t,g);n=t}p=!a||!g&&b?n:C(n,Y,a,l,m);t=d?f||(g?a:La||e)?[]:h:p;d&&d(p,t,l,m);if(e)for(n=C(t,q),e(n,[],l,m),l=n.length;l--;)if(K=n[l])t[q[l]]=!(p[q[l]]=K);if(g)for(l=a&&t.length;l--;){if(K=t[l])g[Y[l]]=!(h[Y[l]]=K)}else t=C(t===h?t.splice(La,t.length):t),f?f(null,h,t,m):Xb.apply(h,t)}})}function n(a){var b,c,d,e=a.length,f=t.relative[a[0].type];c=f||t.relative[" "];for(var g=f?1:0,h=l(function(a){return a===b},c,!0),C=l(function(a){return-1<N.call(b,a)},c,!0),Y=
[function(a,c,d){return!f&&(d||c!==H)||((b=c).nodeType?h(a,c,d):C(a,c,d))}];g<e;g++)if(c=t.relative[a[g].type])Y=[l(m(Y),c)];else{c=t.filter[a[g].type].apply(null,a[g].matches);if(c[E]){for(d=++g;d<e&&!t.relative[a[d].type];d++);return K(1<g&&m(Y),1<g&&a.slice(0,g-1).join("").replace(M,"$1"),c,g<d&&n(a.slice(g,d)),d<e&&n(a=a.slice(d)),d<e&&a.join(""))}Y.push(c)}return m(Y)}function Y(a,b){var d=0<b.length,e=0<a.length,f=function(g,h,l,m,K){var n,Y,q=[],La=0,p="0",Ma=g&&[],x=null!=K,u=H,ab=g||e&&t.find.TAG("*",
K&&h.parentNode||h),y=O+=null==u?1:Math.E;x&&(H=h!==Na&&h,Hb=f.el);for(;null!=(K=ab[p]);p++){if(e&&K){for(n=0;Y=a[n];n++)if(Y(K,h,l)){m.push(K);break}x&&(O=y,Hb=++f.el)}d&&((K=!Y&&K)&&La--,g&&Ma.push(K))}La+=p;if(d&&p!==La){for(n=0;Y=b[n];n++)Y(Ma,q,h,l);if(g){if(0<La)for(;p--;)Ma[p]||q[p]||(q[p]=pa.call(m));q=C(q)}Xb.apply(m,q);x&&!g&&0<q.length&&1<La+b.length&&c.uniqueSort(m)}x&&(O=y,H=u);return Ma};f.el=0;return d?T(f):f}function q(a,b,c,d,e){var f,g,l,m,C=h(a);if(!d&&1===C.length){g=C[0]=C[0].slice(0);
if(2<g.length&&"ID"===(l=g[0]).type&&9===b.nodeType&&!e&&t.relative[g[1].type]){b=t.find.ID(l.matches[0].replace(na,""),b,e)[0];if(!b)return c;a=a.slice(g.shift().length)}for(f=Q.POS.test(a)?-1:g.length-1;0<=f;f--){l=g[f];if(t.relative[m=l.type])break;if(m=t.find[m])if(d=m(l.matches[0].replace(na,""),xa.test(g[0].type)&&b.parentNode||b,e)){g.splice(f,1);a=d.length&&g.join("");if(!a)return Xb.apply(c,ra.call(d,0)),c;break}}}y(a,C)(d,b,e,c,xa.test(a));return c}function La(){}var Hb,Ma,t,x,u,ab,y,D,
F,H,A=!0,E=("sizcache"+Math.random()).replace(".",""),G=String,Na=a.document,ka=Na.documentElement,O=0,I=0,pa=[].pop,Xb=[].push,ra=[].slice,N=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},T=function(a,b){a[E]=null==b||b;return a},Ea=function(){var a={},b=[];return T(function(c,d){b.push(c)>t.cacheLength&&delete a[b.shift()];return a[c]=d},a)},Ca=Ea(),mb=Ea(),va=Ea(),Ea="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+
"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w#")+")|)|)[\\x20\\t\\r\\n\\f]*\\]",aa=":((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+Ea+")|[^:]|\\\\.)*|.*))\\)|)",M=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),wa=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,P=/^[\x20\t\r\n\f]*([\x20\t\r\n\f>+~])[\x20\t\r\n\f]*/,vc=new RegExp(aa),sa=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,xa=/[\x20\t\r\n\f]*[+~]/,hb=/h\d/i,jb=/input|select|textarea|button/i,
na=/\\(?!\\)/g,Q={ID:/^#((?:\\.|[-\w]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[-\w]|[^\x00-\xa0])+)/,NAME:/^\[name=['"]?((?:\\.|[-\w]|[^\x00-\xa0])+)['"]?\]/,TAG:new RegExp("^("+"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:new RegExp("^"+Ea),PSEUDO:new RegExp("^"+aa),POS:/:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i,CHILD:/^:(only|nth|first|last)-child(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,
needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},Va=function(a){var b=Na.createElement("div");try{return a(b)}catch(c){return!1}finally{}},Ea=Va(function(a){a.appendChild(Na.createComment(""));return!a.getElementsByTagName("*").length}),qa=Va(function(a){a.innerHTML="<a href='#'></a>";return a.firstChild&&"undefined"!==typeof a.firstChild.getAttribute&&"#"===a.firstChild.getAttribute("href")}),Ib=Va(function(a){a.innerHTML=
"<select></select>";a=typeof a.lastChild.getAttribute("multiple");return"boolean"!==a&&"string"!==a}),ba=Va(function(a){a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!a.getElementsByClassName||!a.getElementsByClassName("e").length)return!1;a.lastChild.className="e";return 2===a.getElementsByClassName("e").length}),R=Va(function(a){a.id=E+0;a.innerHTML="<a name='"+E+"'></a><div name='"+E+"'></div>";ka.insertBefore(a,ka.firstChild);var b=Na.getElementsByName&&Na.getElementsByName(E).length===
2+Na.getElementsByName(E+0).length;Ma=!Na.getElementById(E);ka.removeChild(a);return b});try{ra.call(ka.childNodes,0)[0].nodeType}catch(S){ra=function(a){for(var b,c=[];b=this[a];a++)c.push(b);return c}}c.matches=function(a,b){return c(a,null,null,b)};c.matchesSelector=function(a,b){return 0<c(b,null,null,[a]).length};x=c.getText=function(a){var b,c="",d=0;if(b=a.nodeType)if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=x(a)}else{if(3===
b||4===b)return a.nodeValue}else for(;b=a[d];d++)c+=x(b);return c};u=c.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};ab=c.contains=ka.contains?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!!(d&&1===d.nodeType&&c.contains&&c.contains(d))}:ka.compareDocumentPosition?function(a,b){return b&&!!(a.compareDocumentPosition(b)&16)}:function(a,b){for(;b=b.parentNode;)if(b===a)return!0;return!1};c.attr=function(a,b){var c,
d=u(a);d||(b=b.toLowerCase());return(c=t.attrHandle[b])?c(a):d||Ib?a.getAttribute(b):(c=a.getAttributeNode(b))?"boolean"===typeof a[b]?a[b]?b:null:c.specified?c.value:null:null};t=c.selectors={cacheLength:50,createPseudo:T,match:Q,attrHandle:qa?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},find:{ID:Ma?function(a,b,c){if("undefined"!==typeof b.getElementById&&!c)return(a=b.getElementById(a))&&a.parentNode?[a]:[]}:function(a,c,d){if("undefined"!==
typeof c.getElementById&&!d)return(c=c.getElementById(a))?c.id===a||"undefined"!==typeof c.getAttributeNode&&c.getAttributeNode("id").value===a?[c]:b:[]},TAG:Ea?function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a)}:function(a,b){var c=b.getElementsByTagName(a);if("*"===a){for(var d,e=[],f=0;d=c[f];f++)1===d.nodeType&&e.push(d);return e}return c},NAME:R&&function(a,b){if("undefined"!==typeof b.getElementsByName)return b.getElementsByName(name)},CLASS:ba&&function(a,
b,c){if("undefined"!==typeof b.getElementsByClassName&&!c)return b.getElementsByClassName(a)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=a[1].replace(na,"");a[3]=(a[4]||a[5]||"").replace(na,"");"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1]?(a[2]||c.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*("even"===a[2]||"odd"===a[2])),
a[4]=+(a[6]+a[7]||"odd"===a[2])):a[2]&&c.error(a[0]);return a},PSEUDO:function(a){var b,c;if(Q.CHILD.test(a[0]))return null;if(a[3])a[2]=a[3];else if(b=a[4])vc.test(b)&&(c=h(b,!0))&&(c=b.indexOf(")",b.length-c)-b.length)&&(b=b.slice(0,c),a[0]=a[0].slice(0,c)),a[2]=b;return a.slice(0,3)}},filter:{ID:Ma?function(a){a=a.replace(na,"");return function(b){return b.getAttribute("id")===a}}:function(a){a=a.replace(na,"");return function(b){return(b="undefined"!==typeof b.getAttributeNode&&b.getAttributeNode("id"))&&
b.value===a}},TAG:function(a){if("*"===a)return function(){return!0};a=a.replace(na,"").toLowerCase();return function(b){return b.nodeName&&b.nodeName.toLowerCase()===a}},CLASS:function(a){var b=Ca[E][a];b||(b=Ca(a,new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)")));return function(a){return b.test(a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")}},ATTR:function(a,b,d){return function(e,f){var g=c.attr(e,a);if(null==g)return"!="===b;if(!b)return!0;g+=
"";return"="===b?g===d:"!="===b?g!==d:"^="===b?d&&0===g.indexOf(d):"*="===b?d&&-1<g.indexOf(d):"$="===b?d&&g.substr(g.length-d.length)===d:"~="===b?-1<(" "+g+" ").indexOf(d):"|="===b?g===d||g.substr(0,d.length+1)===d+"-":!1}},CHILD:function(a,b,c,d){return"nth"===a?function(a){var b,e;b=a.parentNode;if(1===c&&0===d)return!0;if(b)for(e=0,b=b.firstChild;b&&(1!==b.nodeType||(e++,a!==b));b=b.nextSibling);e-=d;return e===c||0===e%c&&0<=e/c}:function(b){var c=b;switch(a){case "only":case "first":for(;c=
c.previousSibling;)if(1===c.nodeType)return!1;if("first"===a)return!0;c=b;case "last":for(;c=c.nextSibling;)if(1===c.nodeType)return!1;return!0}}},PSEUDO:function(a,b){var d,e=t.pseudos[a]||t.setFilters[a.toLowerCase()]||c.error("unsupported pseudo: "+a);return e[E]?e(b):1<e.length?(d=[a,a,"",b],t.setFilters.hasOwnProperty(a.toLowerCase())?T(function(a,c){for(var d,f=e(a,b),g=f.length;g--;)d=N.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,d)}):e}},pseudos:{not:T(function(a){var b=[],c=
[],d=y(a.replace(M,"$1"));return d[E]?T(function(a,b,c,e){e=d(a,null,e,[]);for(var f=a.length;f--;)if(c=e[f])a[f]=!(b[f]=c)}):function(a,e,f){b[0]=a;d(b,null,f,c);return!c.pop()}}),has:T(function(a){return function(b){return 0<c(a,b).length}}),contains:T(function(a){return function(b){return-1<(b.textContent||b.innerText||x(b)).indexOf(a)}}),enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&
!!a.checked||"option"===b&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},parent:function(a){return!t.pseudos.empty(a)},empty:function(a){var b;for(a=a.firstChild;a;){if("@"<a.nodeName||3===(b=a.nodeType)||4===b)return!1;a=a.nextSibling}return!0},header:function(a){return hb.test(a.nodeName)},text:function(a){var b,c;return"input"===a.nodeName.toLowerCase()&&"text"===(b=a.type)&&(null==(c=a.getAttribute("type"))||c.toLowerCase()===b)},radio:d("radio"),
checkbox:d("checkbox"),file:d("file"),password:d("password"),image:d("image"),submit:e("submit"),reset:e("reset"),button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return jb.test(a.nodeName)},focus:function(a){var b=a.ownerDocument;return a===b.activeElement&&(!b.hasFocus||b.hasFocus())&&!(!a.type&&!a.href)},active:function(a){return a===a.ownerDocument.activeElement},first:f(function(a,b,c){return[0]}),last:f(function(a,b,c){return[b-
1]}),eq:f(function(a,b,c){return[0>c?c+b:c]}),even:f(function(a,b,c){for(c=0;c<b;c+=2)a.push(c);return a}),odd:f(function(a,b,c){for(c=1;c<b;c+=2)a.push(c);return a}),lt:f(function(a,b,c){for(b=0>c?c+b:c;0<=--b;)a.push(b);return a}),gt:f(function(a,b,c){for(c=0>c?c+b:c;++c<b;)a.push(c);return a})}};D=ka.compareDocumentPosition?function(a,b){return a===b?(F=!0,0):(a.compareDocumentPosition&&b.compareDocumentPosition?a.compareDocumentPosition(b)&4:a.compareDocumentPosition)?-1:1}:function(a,b){if(a===
b)return F=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[];c=a.parentNode;d=b.parentNode;var h=c;if(c===d)return g(a,b);if(!c)return-1;if(!d)return 1;for(;h;)e.unshift(h),h=h.parentNode;for(h=d;h;)f.unshift(h),h=h.parentNode;c=e.length;d=f.length;for(h=0;h<c&&h<d;h++)if(e[h]!==f[h])return g(e[h],f[h]);return h===c?g(a,f[h],-1):g(e[h],b,1)};[0,0].sort(D);A=!F;c.uniqueSort=function(a){var b,c=1;F=A;a.sort(D);if(F)for(;b=a[c];c++)b===a[c-1]&&a.splice(c--,1);
return a};c.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};y=c.compile=function(a,b){var c,d=[],e=[],f=va[E][a];if(!f){b||(b=h(a));for(c=b.length;c--;)f=n(b[c]),f[E]?d.push(f):e.push(f);f=va(a,Y(e,d))}return f};Na.querySelectorAll&&function(){var a,b=q,d=/'|\\/g,e=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,f=[":focus"],g=[":active",":focus"],l=ka.matchesSelector||ka.mozMatchesSelector||ka.webkitMatchesSelector||ka.oMatchesSelector||ka.msMatchesSelector;Va(function(a){a.innerHTML=
"<select><option selected=''></option></select>";a.querySelectorAll("[selected]").length||f.push("\\[[\\x20\\t\\r\\n\\f]*(?:checked|disabled|ismap|multiple|readonly|selected|value)");a.querySelectorAll(":checked").length||f.push(":checked")});Va(function(a){a.innerHTML="<p test=''></p>";a.querySelectorAll("[test^='']").length&&f.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:\"\"|'')");a.innerHTML="<input type='hidden'/>";a.querySelectorAll(":enabled").length||f.push(":enabled",":disabled")});f=new RegExp(f.join("|"));
q=function(a,c,e,g,l){if(!(g||l||f&&f.test(a))){var m,C,K=!0,n=E;C=c;m=9===c.nodeType&&a;if(1===c.nodeType&&"object"!==c.nodeName.toLowerCase()){m=h(a);(K=c.getAttribute("id"))?n=K.replace(d,"\\$&"):c.setAttribute("id",n);n="[id='"+n+"'] ";for(C=m.length;C--;)m[C]=n+m[C].join("");C=xa.test(a)&&c.parentNode||c;m=m.join(",")}if(m)try{return Xb.apply(e,ra.call(C.querySelectorAll(m),0)),e}catch(Y){}finally{K||c.removeAttribute("id")}}return b(a,c,e,g,l)};l&&(Va(function(b){a=l.call(b,"div");try{l.call(b,
"[test!='']:sizzle"),g.push("!=",aa)}catch(c){}}),g=new RegExp(g.join("|")),c.matchesSelector=function(b,d){d=d.replace(e,"='$1']");if(!(u(b)||g.test(d)||f&&f.test(d)))try{var h=l.call(b,d);if(h||a||b.document&&11!==b.document.nodeType)return h}catch(m){}return 0<c(d,null,null,[b]).length})}();t.pseudos.nth=t.pseudos.eq;t.filters=La.prototype=t.pseudos;t.setFilters=new La;c.attr=p.attr;p.find=c;p.expr=c.selectors;p.expr[":"]=p.expr.pseudos;p.unique=c.uniqueSort;p.text=c.getText;p.isXMLDoc=c.isXML;
p.contains=c.contains})(a);var Cb=/Until$/,Ub=/^(?:parents|prev(?:Until|All))/,S=/^.[^:#\[\.,]*$/,R=p.expr.match.needsContext,Sa={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({find:function(a){var b,c,d,e,f,g,h=this;if("string"!==typeof a)return p(a).filter(function(){b=0;for(c=h.length;b<c;b++)if(p.contains(h[b],this))return!0});g=this.pushStack("","find",a);b=0;for(c=this.length;b<c;b++)if(d=g.length,p.find(a,this[b],g),0<b)for(e=d;e<g.length;e++)for(f=0;f<d;f++)if(g[f]===g[e]){g.splice(e--,
1);break}return g},has:function(a){var b,c=p(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++)if(p.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(m(this,a,!1),"not",a)},filter:function(a){return this.pushStack(m(this,a,!0),"filter",a)},is:function(a){return!!a&&("string"===typeof a?R.test(a)?0<=p(a,this.context).index(this[0]):0<p.filter(a,this).length:0<this.filter(a).length)},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=R.test(a)||"string"!==typeof a?
p(a,b||this.context):0;d<e;d++)for(c=this[d];c&&c.ownerDocument&&c!==b&&11!==c.nodeType;){if(g?-1<g.index(c):p.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}f=1<f.length?p.unique(f):f;return this.pushStack(f,"closest",a)},index:function(a){return a?"string"===typeof a?p.inArray(this[0],p(a)):p.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c="string"===typeof a?p(a,b):p.makeArray(a&&a.nodeType?[a]:a),d=p.merge(this.get(),c);return this.pushStack(h(c[0])||
h(d[0])?d:p.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});p.fn.andSelf=p.fn.addBack;p.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return p.dir(a,"parentNode")},parentsUntil:function(a,b,c){return p.dir(a,"parentNode",c)},next:function(a){return l(a,"nextSibling")},prev:function(a){return l(a,"previousSibling")},nextAll:function(a){return p.dir(a,"nextSibling")},prevAll:function(a){return p.dir(a,
"previousSibling")},nextUntil:function(a,b,c){return p.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return p.dir(a,"previousSibling",c)},siblings:function(a){return p.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return p.sibling(a.firstChild)},contents:function(a){return p.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:p.merge([],a.childNodes)}},function(a,b){p.fn[a]=function(c,d){var e=p.map(this,b,c);Cb.test(a)||(d=c);d&&"string"===typeof d&&(e=p.filter(d,
e));e=1<this.length&&!Sa[a]?p.unique(e):e;1<this.length&&Ub.test(a)&&(e=e.reverse());return this.pushStack(e,a,Da.call(arguments).join(","))}});p.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return 1===b.length?p.find.matchesSelector(b[0],a)?[b[0]]:[]:p.find.matches(a,b)},dir:function(a,b,d){var e=[];for(a=a[b];a&&9!==a.nodeType&&(d===c||1!==a.nodeType||!p(a).is(d));)1===a.nodeType&&e.push(a),a=a[b];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);
return c}});var ma="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ya=/ jQuery\d+="(?:null|\d+)"/g,Ka=/^\s+/,X=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ja=/<([\w:]+)/,C=/<tbody/i,K=/<|&#?\w+;/,Y=/<(?:script|style|link)/i,La=/<(?:script|object|embed|option|style)/i,Ma=new RegExp("<(?:"+ma+")[\\s/>]","i"),Hb=/^(?:checkbox|radio)$/,ab=/checked\s*(?:[^=]|=\s*.checked.)/i,
Na=/\/(java|ecma)script/i,Xb=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Ea={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},mb=n(Q),vc=mb.appendChild(Q.createElement("div"));Ea.optgroup=Ea.option;Ea.tbody=Ea.tfoot=Ea.colgroup=
Ea.caption=Ea.thead;Ea.th=Ea.td;p.support.htmlSerialize||(Ea._default=[1,"X<div>","</div>"]);p.fn.extend({text:function(a){return p.access(this,function(a){return a===c?p.text(this):this.empty().append((this[0]&&this[0].ownerDocument||Q).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(p.isFunction(a))return this.each(function(b){p(this).wrapAll(a.call(this,b))});if(this[0]){var b=p(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=
this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return p.isFunction(a)?this.each(function(b){p(this).wrapInner(a.call(this,b))}):this.each(function(){var b=p(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=p.isFunction(a);return this.each(function(c){p(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes)}).end()},
append:function(){return this.domManip(arguments,!0,function(a){1!==this.nodeType&&11!==this.nodeType||this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){1!==this.nodeType&&11!==this.nodeType||this.insertBefore(a,this.firstChild)})},before:function(){if(!h(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(a,this),"before",this.selector)}},after:function(){if(!h(this[0]))return this.domManip(arguments,
!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(this,a),"after",this.selector)}},remove:function(a,b){for(var c,d=0;null!=(c=this[d]);d++)if(!a||p.filter(a,[c]).length)b||1!==c.nodeType||(p.cleanData(c.getElementsByTagName("*")),p.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c);return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)for(1===a.nodeType&&p.cleanData(a.getElementsByTagName("*"));a.firstChild;)a.removeChild(a.firstChild);
return this},clone:function(a,b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return p.clone(this,a,b)})},html:function(a){return p.access(this,function(a){var b=this[0]||{},d=0,e=this.length;if(a===c)return 1===b.nodeType?b.innerHTML.replace(ya,""):c;if(!("string"!==typeof a||Y.test(a)||!p.support.htmlSerialize&&Ma.test(a)||!p.support.leadingWhitespace&&Ka.test(a)||Ea[(Ja.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(X,"<$1></$2>");try{for(;d<e;d++)b=this[d]||{},1===b.nodeType&&(p.cleanData(b.getElementsByTagName("*")),
b.innerHTML=a);b=0}catch(f){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){if(!h(this[0])){if(p.isFunction(a))return this.each(function(b){var c=p(this),d=c.html();c.replaceWith(a.call(this,b,d))});"string"!==typeof a&&(a=p(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;p(this).remove();b?p(b).before(a):p(c).append(a)})}return this.length?this.pushStack(p(p.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,
!0)},domManip:function(a,b,d){a=[].concat.apply([],a);var e,f,g,h=0,l=a[0],m=[],C=this.length;if(!p.support.checkClone&&1<C&&"string"===typeof l&&ab.test(l))return this.each(function(){p(this).domManip(a,b,d)});if(p.isFunction(l))return this.each(function(e){var f=p(this);a[0]=l.call(this,e,b?f.html():c);f.domManip(a,b,d)});if(this[0]){e=p.buildFragment(a,this,m);g=e.fragment;f=g.firstChild;1===g.childNodes.length&&(g=f);if(f)for(b=b&&p.nodeName(f,"tr"),e=e.cacheable||C-1;h<C;h++)d.call(b&&p.nodeName(this[h],
"table")?q(this[h],"tbody"):this[h],h===e?g:p.clone(g,!0,!0));g=f=null;m.length&&p.each(m,function(a,b){b.src?p.ajax?p.ajax({url:b.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):p.error("no ajax"):p.globalEval((b.text||b.textContent||b.innerHTML||"").replace(Xb,""));b.parentNode&&b.parentNode.removeChild(b)})}return this}});p.buildFragment=function(a,b,d){var e,f,g,h=a[0];b=b||Q;b=!b.nodeType&&b[0]||b;b=b.ownerDocument||b;!(1===a.length&&"string"===typeof h&&512>h.length&&b===Q&&
"<"===h.charAt(0))||La.test(h)||!p.support.checkClone&&ab.test(h)||!p.support.html5Clone&&Ma.test(h)||(f=!0,e=p.fragments[h],g=e!==c);e||(e=b.createDocumentFragment(),p.clean(a,b,e,d),f&&(p.fragments[h]=g&&e));return{fragment:e,cacheable:f}};p.fragments={};p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){p.fn[a]=function(c){var d,e=0,f=[];c=p(c);var g=c.length;d=1===this.length&&this[0].parentNode;if((null==d||d&&11===
d.nodeType&&1===d.childNodes.length)&&1===g)return c[b](this[0]),this;for(;e<g;e++)d=(0<e?this.clone(!0):this).get(),p(c[e])[b](d),f=f.concat(d);return this.pushStack(f,a,c.selector)}});p.extend({clone:function(a,b,c){var d,e,f,g;p.support.html5Clone||p.isXMLDoc(a)||!Ma.test("<"+a.nodeName+">")?g=a.cloneNode(!0):(vc.innerHTML=a.outerHTML,vc.removeChild(g=vc.firstChild));if(!(p.support.noCloneEvent&&p.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||p.isXMLDoc(a)))for(x(a,g),d=u(a),e=u(g),
f=0;d[f];++f)e[f]&&x(d[f],e[f]);if(b&&(t(a,g),c))for(d=u(a),e=u(g),f=0;d[f];++f)t(d[f],e[f]);return g},clean:function(a,b,c,d){var e,f,g,h,l,m,Y=b===Q&&mb,q=[];b&&"undefined"!==typeof b.createDocumentFragment||(b=Q);for(e=0;null!=(g=a[e]);e++)if("number"===typeof g&&(g+=""),g){if("string"===typeof g)if(K.test(g)){Y=Y||n(b);m=b.createElement("div");Y.appendChild(m);g=g.replace(X,"<$1></$2>");f=(Ja.exec(g)||["",""])[1].toLowerCase();h=Ea[f]||Ea._default;l=h[0];for(m.innerHTML=h[1]+g+h[2];l--;)m=m.lastChild;
if(!p.support.tbody)for(l=C.test(g),h="table"!==f||l?"<table>"!==h[1]||l?[]:m.childNodes:m.firstChild&&m.firstChild.childNodes,f=h.length-1;0<=f;--f)p.nodeName(h[f],"tbody")&&!h[f].childNodes.length&&h[f].parentNode.removeChild(h[f]);!p.support.leadingWhitespace&&Ka.test(g)&&m.insertBefore(b.createTextNode(Ka.exec(g)[0]),m.firstChild);g=m.childNodes;m.parentNode.removeChild(m)}else g=b.createTextNode(g);g.nodeType?q.push(g):p.merge(q,g)}m&&(g=m=Y=null);if(!p.support.appendChecked)for(e=0;null!=(g=
q[e]);e++)p.nodeName(g,"input")?E(g):"undefined"!==typeof g.getElementsByTagName&&p.grep(g.getElementsByTagName("input"),E);if(c)for(a=function(a){if(!a.type||Na.test(a.type))return d?d.push(a.parentNode?a.parentNode.removeChild(a):a):c.appendChild(a)},e=0;null!=(g=q[e]);e++)p.nodeName(g,"script")&&a(g)||(c.appendChild(g),"undefined"!==typeof g.getElementsByTagName&&(g=p.grep(p.merge([],g.getElementsByTagName("script")),a),q.splice.apply(q,[e+1,0].concat(g)),e+=g.length));return q},cleanData:function(a,
b){for(var c,d,e,f,g=0,h=p.expando,l=p.cache,m=p.support.deleteExpando,C=p.event.special;null!=(e=a[g]);g++)if(b||p.acceptData(e))if(c=(d=e[h])&&l[d]){if(c.events)for(f in c.events)C[f]?p.event.remove(e,f):p.removeEvent(e,f,c.handle);l[d]&&(delete l[d],m?delete e[h]:e.removeAttribute?e.removeAttribute(h):e[h]=null,p.deletedIds.push(d))}}});(function(){var a,b;p.uaMatch=function(a){a=a.toLowerCase();a=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||
/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}};a=p.uaMatch(nb.userAgent);b={};a.browser&&(b[a.browser]=!0,b.version=a.version);b.chrome?b.webkit=!0:b.webkit&&(b.safari=!0);p.browser=b;p.sub=function(){function a(b,c){return new a.fn.init(b,c)}p.extend(!0,a,this);a.superclass=this;a.fn=a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function(c,d){d&&d instanceof p&&!(d instanceof a)&&(d=a(d));
return p.fn.init.call(this,c,d,b)};a.fn.init.prototype=a.fn;var b=a(Q);return a}})();var hb,Ib,gc,Mb=/alpha\([^)]*\)/i,wc=/opacity=([^)]*)/,pd=/^(top|right|bottom|left)$/,Kd=/^(none|table(?!-c[ea]).+)/,qd=/^margin/,Fd=new RegExp("^("+lb+")(.*)$","i"),sc=new RegExp("^("+lb+")(?!px)[a-z%]+$","i"),rd=new RegExp("^([-+])=("+lb+")","i"),tc={},Qc={position:"absolute",visibility:"hidden",display:"block"},re={letterSpacing:0,fontWeight:400},Db=["Top","Right","Bottom","Left"],Ed=["Webkit","O","Moz","ms"],
se=p.fn.toggle;p.fn.extend({css:function(a,b){return p.access(this,function(a,b,d){return d!==c?p.style(a,b,d):p.css(a,b)},a,b,1<arguments.length)},show:function(){return I(this,!0)},hide:function(){return I(this)},toggle:function(a,b){var c="boolean"===typeof a;return p.isFunction(a)&&p.isFunction(b)?se.apply(this,arguments):this.each(function(){(c?a:H(this))?p(this).show():p(this).hide()})}});p.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=hb(a,"opacity");return""===c?"1":c}}}},cssNumber:{fillOpacity:!0,
fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":p.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,l=p.camelCase(b),m=a.style;b=p.cssProps[l]||(p.cssProps[l]=A(m,l));h=p.cssHooks[b]||p.cssHooks[l];if(d!==c){if(g=typeof d,"string"===g&&(f=rd.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(p.css(a,b)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"!==g||p.cssNumber[l]||(d+="px"),
h&&"set"in h&&(d=h.set(a,d,e))===c)))try{m[b]=d}catch(C){}}else return h&&"get"in h&&(f=h.get(a,!1,e))!==c?f:m[b]}},css:function(a,b,d,e){var f,g;g=p.camelCase(b);b=p.cssProps[g]||(p.cssProps[g]=A(a.style,g));(g=p.cssHooks[b]||p.cssHooks[g])&&"get"in g&&(f=g.get(a,!0,e));f===c&&(f=hb(a,b));"normal"===f&&b in re&&(f=re[b]);return d||e!==c?(a=parseFloat(f),d||p.isNumeric(a)?a||0:f):f},swap:function(a,b,c){var d,e={};for(d in b)e[d]=a.style[d],a.style[d]=b[d];c=c.call(a);for(d in b)a.style[d]=e[d];return c}});
a.getComputedStyle?hb=function(b,c){var d,e,f,g,h=a.getComputedStyle(b,null),l=b.style;h&&(d=h[c],""!==d||p.contains(b.ownerDocument,b)||(d=p.style(b,c)),sc.test(d)&&qd.test(c)&&(e=l.width,f=l.minWidth,g=l.maxWidth,l.minWidth=l.maxWidth=l.width=d,d=h.width,l.width=e,l.minWidth=f,l.maxWidth=g));return d}:Q.documentElement.currentStyle&&(hb=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;null==e&&f&&f[b]&&(e=f[b]);if(sc.test(e)&&!pd.test(b)){c=f.left;if(d=a.runtimeStyle&&a.runtimeStyle.left)a.runtimeStyle.left=
a.currentStyle.left;f.left="fontSize"===b?"1em":e;e=f.pixelLeft+"px";f.left=c;d&&(a.runtimeStyle.left=d)}return""===e?"auto":e});p.each(["height","width"],function(a,b){p.cssHooks[b]={get:function(a,c,d){if(c)return 0===a.offsetWidth&&Kd.test(hb(a,"display"))?p.swap(a,Qc,function(){return F(a,b,d)}):F(a,b,d)},set:function(a,c,d){return y(a,c,d?D(a,b,d,p.support.boxSizing&&"border-box"===p.css(a,"boxSizing")):0)}}});p.support.opacity||(p.cssHooks.opacity={get:function(a,b){return wc.test((b&&a.currentStyle?
a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=p.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1;if(1<=b&&""===p.trim(f.replace(Mb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),d&&!d.filter))return;c.filter=Mb.test(f)?f.replace(Mb,e):f+" "+e}});p(function(){p.support.reliableMarginRight||(p.cssHooks.marginRight={get:function(a,b){return p.swap(a,{display:"inline-block"},function(){if(b)return hb(a,
"marginRight")})}});!p.support.pixelPosition&&p.fn.position&&p.each(["top","left"],function(a,b){p.cssHooks[b]={get:function(a,c){if(c){var d=hb(a,b);return sc.test(d)?p(a).position()[b]+"px":d}}}})});p.expr&&p.expr.filters&&(p.expr.filters.hidden=function(a){return 0===a.offsetWidth&&0===a.offsetHeight||!p.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||hb(a,"display"))},p.expr.filters.visible=function(a){return!p.expr.filters.hidden(a)});p.each({margin:"",padding:"",border:"Width"},
function(a,b){p.cssHooks[a+b]={expand:function(c){var d="string"===typeof c?c.split(" "):[c],e={};for(c=0;4>c;c++)e[a+Db[c]+b]=d[c]||d[c-2]||d[0];return e}};qd.test(a)||(p.cssHooks[a+b].set=y)});var Ld=/%20/g,fe=/\[\]$/,Ye=/\r?\n/g,te=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Ze=/^(?:select|textarea)/i;p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?
p.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Ze.test(this.nodeName)||te.test(this.type))}).map(function(a,b){var c=p(this).val();return null==c?null:p.isArray(c)?p.map(c,function(a,c){return{name:b.name,value:a.replace(Ye,"\r\n")}}):{name:b.name,value:c.replace(Ye,"\r\n")}}).get()}});p.param=function(a,b){var d,e=[],f=function(a,b){b=p.isFunction(b)?b():null==b?"":b;e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};b===c&&(b=p.ajaxSettings&&
p.ajaxSettings.traditional);if(p.isArray(a)||a.jquery&&!p.isPlainObject(a))p.each(a,function(){f(this.name,this.value)});else for(d in a)N(d,a[d],b,f);return e.join("&").replace(Ld,"+")};var xc,Yb,ue=/#.*$/,$e=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Md=/^(?:GET|HEAD)$/,Nd=/^\/\//,ve=/\?/,af=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Rc=/([?&])_=[^&]*/,mc=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,cd=p.fn.load,md={},dd={},bf=["*/"]+["*"];try{Yb=da.href}catch(Od){Yb=Q.createElement("a"),Yb.href=
"",Yb=Yb.href}xc=mc.exec(Yb.toLowerCase())||[];p.fn.load=function(a,b,d){if("string"!==typeof a&&cd)return cd.apply(this,arguments);if(!this.length)return this;var e,f,g,h=this,l=a.indexOf(" ");0<=l&&(e=a.slice(l,a.length),a=a.slice(0,l));p.isFunction(b)?(d=b,b=c):b&&"object"===typeof b&&(f="POST");p.ajax({url:a,type:f,dataType:"html",data:b,complete:function(a,b){d&&h.each(d,g||[a.responseText,b,a])}}).done(function(a){g=arguments;h.html(e?p("<div>").append(a.replace(af,"")).find(e):a)});return this};
p.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){p.fn[b]=function(a){return this.on(b,a)}});p.each(["get","post"],function(a,b){p[b]=function(a,d,e,f){p.isFunction(d)&&(f=f||e,e=d,d=c);return p.ajax({type:b,url:a,data:d,success:e,dataType:f})}});p.extend({getScript:function(a,b){return p.get(a,c,b,"script")},getJSON:function(a,b,c){return p.get(a,b,c,"json")},ajaxSetup:function(a,b){b?O(a,p.ajaxSettings):(b=a,a=p.ajaxSettings);O(a,b);return a},ajaxSettings:{url:Yb,
isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(xc[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bf},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},
flatOptions:{context:!0,url:!0}},ajaxPrefilter:M(md),ajaxTransport:M(dd),ajax:function(a,b){function d(a,b,g,m){var K,Ma,x,ab,D=b;if(2!==u){u=2;l&&clearTimeout(l);h=c;f=m||"";y.readyState=0<a?4:0;if(g){ab=n;m=y;var F,H,A,E,G=ab.contents,Na=ab.dataTypes,ka=ab.responseFields;for(H in ka)H in g&&(m[ka[H]]=g[H]);for(;"*"===Na[0];)Na.shift(),F===c&&(F=ab.mimeType||m.getResponseHeader("content-type"));if(F)for(H in G)if(G[H]&&G[H].test(F)){Na.unshift(H);break}if(Na[0]in g)A=Na[0];else{for(H in g){if(!Na[0]||
ab.converters[H+" "+Na[0]]){A=H;break}E||(E=H)}A=A||E}A?(A!==Na[0]&&Na.unshift(A),ab=g[A]):ab=void 0}if(200<=a&&300>a||304===a)if(n.ifModified&&((g=y.getResponseHeader("Last-Modified"))&&(p.lastModified[e]=g),(g=y.getResponseHeader("Etag"))&&(p.etag[e]=g)),304===a)D="notmodified",K=!0;else{a:{Ma=n;x=ab;var O,I,D=Ma.dataTypes.slice();F=D[0];H={};A=0;Ma.dataFilter&&(x=Ma.dataFilter(x,Ma.dataType));if(D[1])for(O in Ma.converters)H[O.toLowerCase()]=Ma.converters[O];for(;g=D[++A];)if("*"!==g){if("*"!==
F&&F!==g){O=H[F+" "+g]||H["* "+g];if(!O)for(I in H)if(K=I.split(" "),K[1]===g&&(O=H[F+" "+K[0]]||H["* "+K[0]])){!0===O?O=H[I]:!0!==H[I]&&(g=K[0],D.splice(A--,0,g));break}if(!0!==O)if(O&&Ma["throws"])x=O(x);else try{x=O(x)}catch(pa){K={state:"parsererror",error:O?pa:"No conversion from "+F+" to "+g};break a}}F=g}K={state:"success",data:x}}D=K.state;Ma=K.data;x=K.error;K=!x}else if(x=D,!D||a)D="error",0>a&&(a=0);y.status=a;y.statusText=(b||D)+"";K?La.resolveWith(Y,[Ma,D,y]):La.rejectWith(Y,[y,D,x]);
y.statusCode(Hb);Hb=c;C&&q.trigger("ajax"+(K?"Success":"Error"),[y,n,K?Ma:x]);t.fireWith(Y,[y,D]);C&&(q.trigger("ajaxComplete",[y,n]),--p.active||p.event.trigger("ajaxStop"))}}"object"===typeof a&&(b=a,a=c);b=b||{};var e,f,g,h,l,m,C,K,n=p.ajaxSetup({},b),Y=n.context||n,q=Y!==n&&(Y.nodeType||Y instanceof p)?p(Y):p.event,La=p.Deferred(),t=p.Callbacks("once memory"),Hb=n.statusCode||{},Ma={},x={},u=0,ab="canceled",y={readyState:0,setRequestHeader:function(a,b){if(!u){var c=a.toLowerCase();a=x[c]=x[c]||
a;Ma[a]=b}return this},getAllResponseHeaders:function(){return 2===u?f:null},getResponseHeader:function(a){var b;if(2===u){if(!g)for(g={};b=$e.exec(f);)g[b[1].toLowerCase()]=b[2];b=g[a.toLowerCase()]}return b===c?null:b},overrideMimeType:function(a){u||(n.mimeType=a);return this},abort:function(a){a=a||ab;h&&h.abort(a);d(0,a);return this}};La.promise(y);y.success=y.done;y.error=y.fail;y.complete=t.add;y.statusCode=function(a){if(a){var b;if(2>u)for(b in a)Hb[b]=[Hb[b],a[b]];else b=a[y.status],y.always(b)}return this};
n.url=((a||n.url)+"").replace(ue,"").replace(Nd,xc[1]+"//");n.dataTypes=p.trim(n.dataType||"*").toLowerCase().split(Pa);null==n.crossDomain&&(m=mc.exec(n.url.toLowerCase())||!1,n.crossDomain=m&&m.join(":")+(m[3]?"":"http:"===m[1]?80:443)!==xc.join(":")+(xc[3]?"":"http:"===xc[1]?80:443));n.data&&n.processData&&"string"!==typeof n.data&&(n.data=p.param(n.data,n.traditional));P(md,n,b,y);if(2===u)return y;C=n.global;n.type=n.type.toUpperCase();n.hasContent=!Md.test(n.type);C&&0===p.active++&&p.event.trigger("ajaxStart");
if(!n.hasContent&&(n.data&&(n.url+=(ve.test(n.url)?"&":"?")+n.data,delete n.data),e=n.url,!1===n.cache)){m=p.now();var D=n.url.replace(Rc,"$1_="+m);n.url=D+(D===n.url?(ve.test(n.url)?"&":"?")+"_="+m:"")}(n.data&&n.hasContent&&!1!==n.contentType||b.contentType)&&y.setRequestHeader("Content-Type",n.contentType);n.ifModified&&(e=e||n.url,p.lastModified[e]&&y.setRequestHeader("If-Modified-Since",p.lastModified[e]),p.etag[e]&&y.setRequestHeader("If-None-Match",p.etag[e]));y.setRequestHeader("Accept",n.dataTypes[0]&&
n.accepts[n.dataTypes[0]]?n.accepts[n.dataTypes[0]]+("*"!==n.dataTypes[0]?", "+bf+"; q=0.01":""):n.accepts["*"]);for(K in n.headers)y.setRequestHeader(K,n.headers[K]);if(n.beforeSend&&(!1===n.beforeSend.call(Y,y,n)||2===u))return y.abort();ab="abort";for(K in{success:1,error:1,complete:1})y[K](n[K]);if(h=P(dd,n,b,y)){y.readyState=1;C&&q.trigger("ajaxSend",[y,n]);n.async&&0<n.timeout&&(l=setTimeout(function(){y.abort("timeout")},n.timeout));try{u=1,h.send(Ma,d)}catch(F){if(2>u)d(-1,F);else throw F;
}}else d(-1,"No Transport");return y},active:0,lastModified:{},etag:{}});var sd=[],td=/\?/,ac=/(=)\?(?=&|$)|\?\?/,Zb=p.now();p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=sd.pop()||p.expando+"_"+Zb++;this[a]=!0;return a}});p.ajaxPrefilter("json jsonp",function(b,d,e){var f,g,h,l=b.data,m=b.url,C=!1!==b.jsonp,n=C&&ac.test(m),K=C&&!n&&"string"===typeof l&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&ac.test(l);if("jsonp"===b.dataTypes[0]||n||K)return f=b.jsonpCallback=
p.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,g=a[f],n?b.url=m.replace(ac,"$1"+f):K?b.data=l.replace(ac,"$1"+f):C&&(b.url+=(td.test(m)?"&":"?")+b.jsonp+"="+f),b.converters["script json"]=function(){h||p.error(f+" was not called");return h[0]},b.dataTypes[0]="json",a[f]=function(){h=arguments},e.always(function(){a[f]=g;b[f]&&(b.jsonpCallback=d.jsonpCallback,sd.push(f));h&&p.isFunction(g)&&g(h[0]);h=g=c}),"script"});p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){p.globalEval(a);return a}}});p.ajaxPrefilter("script",function(a){a.cache===c&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});p.ajaxTransport("script",function(a){if(a.crossDomain){var b,d=Q.head||Q.getElementsByTagName("head")[0]||Q.documentElement;return{send:function(e,f){b=Q.createElement("script");b.async="async";a.scriptCharset&&(b.charset=a.scriptCharset);b.src=a.url;b.onload=b.onreadystatechange=function(a,
e){if(e||!b.readyState||/loaded|complete/.test(b.readyState))b.onload=b.onreadystatechange=null,d&&b.parentNode&&d.removeChild(b),b=c,e||f(200,"success")};d.insertBefore(b,d.firstChild)},abort:function(){if(b)b.onload(0,1)}}}});var Vb,Sc=a.ActiveXObject?function(){for(var a in Vb)Vb[a](0,1)}:!1,bc=0;p.ajaxSettings.xhr=a.ActiveXObject?function(){var b;if(!(b=!this.isLocal&&pa()))a:{try{b=new a.ActiveXObject("Microsoft.XMLHTTP");break a}catch(c){}b=void 0}return b}:pa;(function(a){p.extend(p.support,
{ajax:!!a,cors:!!a&&"withCredentials"in a})})(p.ajaxSettings.xhr());p.support.ajax&&p.ajaxTransport(function(b){if(!b.crossDomain||p.support.cors){var d;return{send:function(e,f){var g,h,l=b.xhr();b.username?l.open(b.type,b.url,b.async,b.username,b.password):l.open(b.type,b.url,b.async);if(b.xhrFields)for(h in b.xhrFields)l[h]=b.xhrFields[h];b.mimeType&&l.overrideMimeType&&l.overrideMimeType(b.mimeType);b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)l.setRequestHeader(h,
e[h])}catch(m){}l.send(b.hasContent&&b.data||null);d=function(a,e){var h,m,C,n,K;try{if(d&&(e||4===l.readyState))if(d=c,g&&(l.onreadystatechange=p.noop,Sc&&delete Vb[g]),e)4!==l.readyState&&l.abort();else{h=l.status;C=l.getAllResponseHeaders();n={};(K=l.responseXML)&&K.documentElement&&(n.xml=K);try{n.text=l.responseText}catch(Y){}try{m=l.statusText}catch(q){m=""}h||!b.isLocal||b.crossDomain?1223===h&&(h=204):h=n.text?200:404}}catch(La){e||f(-1,La)}n&&f(h,m,n,C)};b.async?4===l.readyState?setTimeout(d,
0):(g=++bc,Sc&&(Vb||(Vb={},p(a).unload(Sc)),Vb[g]=d),l.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var Kc,Tc,Pd=/^(?:toggle|show|hide)$/,ua=new RegExp("^(?:([-+])=|)("+lb+")([a-z%]*)$","i"),Qd=/queueHooks$/,Wb=[function(a,b,c){var d,e,f,g,h,l,m=this,C=a.style,n={},K=[],Y=a.nodeType&&H(a);c.queue||(h=p._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,l=h.empty.fire,h.empty.fire=function(){h.unqueued||l()}),h.unqueued++,m.always(function(){m.always(function(){h.unqueued--;p.queue(a,
"fx").length||h.empty.fire()})}));1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[C.overflow,C.overflowX,C.overflowY],"inline"===p.css(a,"display")&&"none"===p.css(a,"float")&&(p.support.inlineBlockNeedsLayout&&"inline"!==G(a.nodeName)?C.zoom=1:C.display="inline-block"));c.overflow&&(C.overflow="hidden",p.support.shrinkWrapBlocks||m.done(function(){C.overflow=c.overflow[0];C.overflowX=c.overflow[1];C.overflowY=c.overflow[2]}));for(d in b)e=b[d],Pd.exec(e)&&(delete b[d],e!==(Y?"hide":"show")&&
K.push(d));if(e=K.length)for(f=p._data(a,"fxshow")||p._data(a,"fxshow",{}),Y?p(a).show():m.done(function(){p(a).hide()}),m.done(function(){var b;p.removeData(a,"fxshow",!0);for(b in n)p.style(a,b,n[b])}),d=0;d<e;d++)b=K[d],g=m.createTween(b,Y?f[b]:0),n[b]=f[b]||p.style(a,b),b in f||(f[b]=g.start,Y&&(g.end=g.start,g.start="width"===b||"height"===b?1:0))}],Zc={"*":[function(a,b){var c,d,e=this.createTween(a,b),f=ua.exec(b),g=e.cur(),h=+g||0,l=1,m=20;if(f){c=+f[2];d=f[3]||(p.cssNumber[a]?"":"px");if("px"!==
d&&h){h=p.css(e.elem,a,!0)||c||1;do l=l||".5",h/=l,p.style(e.elem,a,h+d);while(l!==(l=e.cur()/g)&&1!==l&&--m)}e.unit=d;e.start=h;e.end=f[1]?h+(f[1]+1)*c:c}return e}]};p.Animation=p.extend(ra,{tweener:function(a,b){p.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;d<e;d++)c=a[d],Zc[c]=Zc[c]||[],Zc[c].unshift(b)},prefilter:function(a,b){b?Wb.unshift(a):Wb.push(a)}});p.Tween=wa;wa.prototype={constructor:wa,init:function(a,b,c,d,e,f){this.elem=a;this.prop=c;this.easing=e||"swing";
this.options=b;this.start=this.now=this.cur();this.end=d;this.unit=f||(p.cssNumber[c]?"":"px")},cur:function(){var a=wa.propHooks[this.prop];return a&&a.get?a.get(this):wa.propHooks._default.get(this)},run:function(a){var b,c=wa.propHooks[this.prop];this.pos=this.options.duration?b=p.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):b=a;this.now=(this.end-this.start)*b+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);c&&c.set?c.set(this):wa.propHooks._default.set(this);
return this}};wa.prototype.init.prototype=wa.prototype;wa.propHooks={_default:{get:function(a){return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(a=p.css(a.elem,a.prop,!1,""))&&"auto"!==a?a:0:a.elem[a.prop]},set:function(a){if(p.fx.step[a.prop])p.fx.step[a.prop](a);else a.elem.style&&(null!=a.elem.style[p.cssProps[a.prop]]||p.cssHooks[a.prop])?p.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};wa.propHooks.scrollTop=wa.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&
a.elem.parentNode&&(a.elem[a.prop]=a.now)}};p.each(["toggle","show","hide"],function(a,b){var c=p.fn[b];p.fn[b]=function(d,e,f){return null==d||"boolean"===typeof d||!a&&p.isFunction(d)&&p.isFunction(e)?c.apply(this,arguments):this.animate(va(b,!0),d,e,f)}});p.fn.extend({fadeTo:function(a,b,c,d){return this.filter(H).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=p.isEmptyObject(a),f=p.speed(b,c,d);b=function(){var b=ra(this,p.extend({},a),f);e&&b.stop(!0)};
return e||!1===f.queue?this.each(b):this.queue(f.queue,b)},stop:function(a,b,d){var e=function(a){var b=a.stop;delete a.stop;b(d)};"string"!==typeof a&&(d=b,b=a,a=c);b&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=p.timers,g=p._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&Qd.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(f[c].anim.stop(d),b=!1,f.splice(c,1));!b&&d||p.dequeue(this,a)})}});
p.each({slideDown:va("show"),slideUp:va("hide"),slideToggle:va("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){p.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});p.speed=function(a,b,c){var d=a&&"object"===typeof a?p.extend({},a):{complete:c||!c&&b||p.isFunction(a)&&a,duration:a,easing:c&&b||b&&!p.isFunction(b)&&b};d.duration=p.fx.off?0:"number"===typeof d.duration?d.duration:d.duration in p.fx.speeds?p.fx.speeds[d.duration]:p.fx.speeds._default;
if(null==d.queue||!0===d.queue)d.queue="fx";d.old=d.complete;d.complete=function(){p.isFunction(d.old)&&d.old.call(this);d.queue&&p.dequeue(this,d.queue)};return d};p.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}};p.timers=[];p.fx=wa.prototype.init;p.fx.tick=function(){for(var a,b=p.timers,c=0;c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||p.fx.stop()};p.fx.timer=function(a){a()&&p.timers.push(a)&&!Tc&&(Tc=setInterval(p.fx.tick,p.fx.interval))};
p.fx.interval=13;p.fx.stop=function(){clearInterval(Tc);Tc=null};p.fx.speeds={slow:600,fast:200,_default:400};p.fx.step={};p.expr&&p.expr.filters&&(p.expr.filters.animated=function(a){return p.grep(p.timers,function(b){return a===b.elem}).length});var Rd=/^(?:body|html)$/i;p.fn.offset=function(a){if(arguments.length)return a===c?this:this.each(function(b){p.offset.setOffset(this,a,b)});var b,d,e,f,g,h={top:0,left:0};if(e=(f=this[0])&&f.ownerDocument){if((d=e.body)===f)return p.offset.bodyOffset(f);
b=e.documentElement;if(!p.contains(b,f))return h;"undefined"!==typeof f.getBoundingClientRect&&(h=f.getBoundingClientRect());e=sa(e);f=b.clientTop||d.clientTop||0;d=b.clientLeft||d.clientLeft||0;g=e.pageYOffset||b.scrollTop;b=e.pageXOffset||b.scrollLeft;return{top:h.top+g-f,left:h.left+b-d}}};p.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;p.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(p.css(a,"marginTop"))||0,c+=parseFloat(p.css(a,"marginLeft"))||0);return{top:b,left:c}},
setOffset:function(a,b,c){var d=p.css(a,"position");"static"===d&&(a.style.position="relative");var e=p(a),f=e.offset(),g=p.css(a,"top"),h=p.css(a,"left"),l={},m={};("absolute"===d||"fixed"===d)&&-1<p.inArray("auto",[g,h])?(m=e.position(),d=m.top,h=m.left):(d=parseFloat(g)||0,h=parseFloat(h)||0);p.isFunction(b)&&(b=b.call(a,c,f));null!=b.top&&(l.top=b.top-f.top+d);null!=b.left&&(l.left=b.left-f.left+h);"using"in b?b.using.call(a,l):e.css(l)}};p.fn.extend({position:function(){if(this[0]){var a=this[0],
b=this.offsetParent(),c=this.offset(),d=Rd.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(p.css(a,"marginTop"))||0;c.left-=parseFloat(p.css(a,"marginLeft"))||0;d.top+=parseFloat(p.css(b[0],"borderTopWidth"))||0;d.left+=parseFloat(p.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||Q.body;a&&!Rd.test(a.nodeName)&&"static"===p.css(a,"position");)a=a.offsetParent;return a||Q.body})}});
p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var d=/Y/.test(b);p.fn[a]=function(e){return p.access(this,function(a,e,f){var g=sa(a);if(f===c)return g?b in g?g[b]:g.document.documentElement[e]:a[e];g?g.scrollTo(d?p(g).scrollLeft():f,d?f:p(g).scrollTop()):a[e]=f},a,e,arguments.length,null)}});p.each({Height:"height",Width:"width"},function(a,b){p.each({padding:"inner"+a,content:b,"":"outer"+a},function(d,e){p.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!==typeof e),
h=d||(!0===e||!0===f?"margin":"border");return p.access(this,function(b,d,e){return p.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(d=b.documentElement,Math.max(b.body["scroll"+a],d["scroll"+a],b.body["offset"+a],d["offset"+a],d["client"+a])):e===c?p.css(b,d,e,h):p.style(b,d,e,h)},b,g?e:c,g,null)}})});a.jQuery=a.$=p;"function"===typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return p})})(window);
(function(a,c){function b(b,c){var e,f;e=b.nodeName.toLowerCase();if("area"===e){e=b.parentNode;f=e.name;if(!b.href||!f||"map"!==e.nodeName.toLowerCase())return!1;e=a("img[usemap=#"+f+"]")[0];return!!e&&d(e)}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"===e?b.href||c:c)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().andSelf().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{};a.ui.version||(a.extend(a.ui,
{version:"1.9.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({_focus:a.fn.focus,focus:function(b,c){return"number"===typeof b?this.each(function(){var d=this;setTimeout(function(){a(d).focus();c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;
b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?a(document):
b},zIndex:function(b){if(b!==c)return this.css("zIndex",b);if(this.length){b=a(this[0]);for(var d;b.length&&b[0]!==document;){d=b.css("position");if("absolute"===d||"relative"===d||"fixed"===d)if(d=parseInt(b.css("zIndex"),10),!isNaN(d)&&0!==d)return d;b=b.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a("<a>").outerWidth(1).jquery||a.each(["Width",
"Height"],function(b,d){function e(b,c,d,g){a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0;d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0);g&&(c-=parseFloat(a.css(b,"margin"+this))||0)});return c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],n=d.toLowerCase(),q={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(b){return b===c?q["inner"+d].call(this):this.each(function(){a(this).css(n,
e(this,b)+"px")})};a.fn["outer"+d]=function(b,c){return"number"!==typeof b?q["outer"+d].call(this,b):this.each(function(){a(this).css(n,e(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(c){return b(c,!isNaN(a.attr(c,"tabindex")))},tabbable:function(c){var d=a.attr(c,"tabindex"),e=isNaN(d);return(e||0<=d)&&b(c,!e)}}),a(function(){var b=document.body,
c=b.appendChild(c=document.createElement("div"));c.offsetHeight;a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=100===c.offsetHeight;a.support.selectstart="onselectstart"in c;b.removeChild(c).style.display="none"}),function(){var b=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];a.ui.ie=b.length?!0:!1;a.ui.ie6=6===parseFloat(b[1],10)}(),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+
".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e;b=a.ui[b].prototype;for(e in d)b.plugins[e]=b.plugins[e]||[],b.plugins[e].push([c,d[e]])},call:function(a,b,c){var d=a.plugins[b];if(d&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(b=0;b<d.length;b++)a.options[d[b][0]]&&d[b][1].apply(a.element,c)}},contains:a.contains,hasScroll:function(b,c){if("hidden"===
a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;if(0<b[d])return!0;b[d]=1;e=0<b[d];b[d]=0;return e},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,q){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,q)}}))})(jQuery);
(function(a,c){var b=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c=0,d;null!=(d=b[c]);c++)try{a(d).triggerHandler("remove")}catch(l){}e(b)};a.widget=function(b,c,d){var e,m,n,q,t=b.split(".")[0];b=b.split(".")[1];e=t+"-"+b;d||(d=c,c=a.Widget);a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)};a[t]=a[t]||{};m=a[t][b];n=a[t][b]=function(a,b){if(!this._createWidget)return new n(a,b);arguments.length&&this._createWidget(a,b)};a.extend(n,m,{version:d.version,_proto:a.extend({},
d),_childConstructors:[]});q=new c;q.options=a.widget.extend({},q.options);a.each(d,function(b,e){a.isFunction(e)&&(d[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},d=function(a){return c.prototype[b].apply(this,a)};return function(){var b=this._super,c=this._superApply,f;this._super=a;this._superApply=d;f=e.apply(this,arguments);this._super=b;this._superApply=c;return f}}())});n.prototype=a.widget.extend(q,{widgetEventPrefix:q.widgetEventPrefix||b},d,{constructor:n,namespace:t,
widgetName:b,widgetBaseClass:e,widgetFullName:e});m?(a.each(m._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,n,c._proto)}),delete m._childConstructors):c._childConstructors.push(n);a.widget.bridge(b,n)};a.widget.extend=function(b){for(var e=d.call(arguments,1),h=0,l=e.length,m,n;h<l;h++)for(m in e[h])n=e[h][m],e[h].hasOwnProperty(m)&&n!==c&&(a.isPlainObject(n)?b[m]=a.isPlainObject(b[m])?a.widget.extend({},b[m],n):a.widget.extend({},n):b[m]=n);return b};a.widget.bridge=
function(b,e){var h=e.prototype.widgetFullName;a.fn[b]=function(l){var m="string"===typeof l,n=d.call(arguments,1),q=this;l=!m&&n.length?a.widget.extend.apply(null,[l].concat(n)):l;m?this.each(function(){var d,e=a.data(this,h);if(!e)return a.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+l+"'");if(!a.isFunction(e[l])||"_"===l.charAt(0))return a.error("no such method '"+l+"' for "+b+" widget instance");d=e[l].apply(e,n);if(d!==e&&d!==c)return q=d&&d.jquery?
q.pushStack(d.get()):d,!1}):this.each(function(){var b=a.data(this,h);b?b.option(l||{})._init():new e(l,this)});return q}};a.Widget=function(){};a.Widget._childConstructors=[];a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(c,d){d=a(d||this.defaultElement||this)[0];this.element=a(d);this.uuid=b++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=a.widget.extend({},this.options,this._getCreateOptions(),
c);this.bindings=a();this.hoverable=a();this.focusable=a();d!==this&&(a.data(d,this.widgetName,this),a.data(d,this.widgetFullName,this),this._on(this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,
destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},
option:function(b,d){var e=b,l,m,n;if(0===arguments.length)return a.widget.extend({},this.options);if("string"===typeof b)if(e={},l=b.split("."),b=l.shift(),l.length){m=e[b]=a.widget.extend({},this.options[b]);for(n=0;n<l.length-1;n++)m[l[n]]=m[l[n]]||{},m=m[l[n]];b=l.pop();if(d===c)return m[b]===c?null:m[b];m[b]=d}else{if(d===c)return this.options[b]===c?null:this.options[b];e[b]=d}this._setOptions(e);return this},_setOptions:function(a){for(var b in a)this._setOption(b,a[b]);return this},_setOption:function(a,
b){this.options[a]=b;"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"));return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,c){var d,e=this;c?(b=d=a(b),this.bindings=this.bindings.add(b)):(c=b,b=this.element,d=this.widget());a.each(c,function(c,g){function q(){if(!0!==
e.options.disabled&&!a(this).hasClass("ui-state-disabled"))return("string"===typeof g?e[g]:g).apply(e,arguments)}"string"!==typeof g&&(q.guid=g.guid=g.guid||q.guid||a.guid++);var t=c.match(/^(\w+)\s*(.*)$/),x=t[1]+e.eventNamespace;(t=t[2])?d.delegate(t,x,q):b.bind(x,q)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(b).undelegate(b)},_delay:function(a,b){var c=this;return setTimeout(function(){return("string"===typeof a?c[a]:a).apply(c,arguments)},
b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b);this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b);this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,m=this.options[b];d=d||{};c=a.Event(c);
c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();c.target=this.element[0];if(b=c.originalEvent)for(e in b)e in c||(c[e]=b[e]);this.element.trigger(c,d);return!(a.isFunction(m)&&!1===m.apply(this.element[0],[c].concat(d))||c.isDefaultPrevented())}};a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,m){"string"===typeof e&&(e={effect:e});var n,q=e?!0===e||"number"===typeof e?c:e.effect||c:b;e=e||{};"number"===typeof e&&(e={duration:e});
n=!a.isEmptyObject(e);e.complete=m;e.delay&&d.delay(e.delay);if(n&&a.effects&&(a.effects.effect[q]||!1!==a.uiBackCompat&&a.effects[q]))d[b](e);else if(q!==b&&d[q])d[q](e.duration,e.easing,m);else d.queue(function(c){a(this)[b]();m&&m.call(d[0]);c()})}});!1!==a.uiBackCompat&&(a.Widget.prototype._getCreateOptions=function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]})})(jQuery);
(function(a,c){var b=!1;a(document).mouseup(function(a){b=!1});a.widget("ui.mouse",{version:"1.9.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent"))return a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1});this.started=
!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!b){this._mouseStarted&&this._mouseUp(c);this._mouseDownEvent=c;var e=this,f=1===c.which,g="string"===typeof this.options.cancel&&c.target.nodeName?a(c.target).closest(this.options.cancel).length:!1;if(!f||g||!this._mouseCapture(c))return!0;this.mouseDelayMet=
!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=!1!==this._mouseStart(c),!this._mouseStarted))return c.preventDefault(),!0;!0===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return e._mouseMove(a)};this._mouseUpDelegate=function(a){return e._mouseUp(a)};
a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);c.preventDefault();return b=!0}},_mouseMove:function(b){if(a.ui.ie&&!(9<=document.documentMode)&&!b.button)return this._mouseUp(b);if(this._mouseStarted)return this._mouseDrag(b),b.preventDefault();this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b))?this._mouseDrag(b):this._mouseUp(b));return!this._mouseStarted},
_mouseUp:function(b){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b));return!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(a){return this.mouseDelayMet},
_mouseStart:function(a){},_mouseDrag:function(a){},_mouseStop:function(a){},_mouseCapture:function(a){return!0}})})(jQuery);
(function(a,c){function b(a,b,c){return[parseInt(a[0],10)*(q.test(a[0])?b/100:1),parseInt(a[1],10)*(q.test(a[1])?c/100:1)]}a.ui=a.ui||{};var d,e=Math.max,f=Math.abs,g=Math.round,h=/left|center|right/,l=/top|center|bottom/,m=/[\+\-]\d+%?/,n=/^\w+/,q=/%$/,t=a.fn.position;a.position={scrollbarWidth:function(){if(d!==c)return d;var b,e,f=a("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>");e=f.children()[0];a("body").append(f);b=e.offsetWidth;
f.css("overflow","scroll");e=e.offsetWidth;b===e&&(e=f[0].clientWidth);f.remove();return d=b-e},getScrollInfo:function(b){var c=b.isWindow?"":b.element.css("overflow-x"),d=b.isWindow?"":b.element.css("overflow-y"),d="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;return{width:"scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth?a.position.scrollbarWidth():0,height:d?a.position.scrollbarWidth():0}},getWithinInfo:function(b){b=a(b||window);var c=a.isWindow(b[0]);return{element:b,
isWindow:c,offset:b.offset()||{left:0,top:0},scrollLeft:b.scrollLeft(),scrollTop:b.scrollTop(),width:c?b.width():b.outerWidth(),height:c?b.height():b.outerHeight()}}};a.fn.position=function(c){if(!c||!c.of)return t.apply(this,arguments);c=a.extend({},c);var d,q,A,H,I,y=a(c.of),D=a.position.getWithinInfo(c.within),F=a.position.getScrollInfo(D),G=y[0],N=(c.collision||"flip").split(" "),M={};9===G.nodeType?(q=y.width(),A=y.height(),H={top:0,left:0}):a.isWindow(G)?(q=y.width(),A=y.height(),H={top:y.scrollTop(),
left:y.scrollLeft()}):G.preventDefault?(c.at="left top",q=A=0,H={top:G.pageY,left:G.pageX}):(q=y.outerWidth(),A=y.outerHeight(),H=y.offset());I=a.extend({},H);a.each(["my","at"],function(){var a=(c[this]||"").split(" "),b,d;1===a.length&&(a=h.test(a[0])?a.concat(["center"]):l.test(a[0])?["center"].concat(a):["center","center"]);a[0]=h.test(a[0])?a[0]:"center";a[1]=l.test(a[1])?a[1]:"center";b=m.exec(a[0]);d=m.exec(a[1]);M[this]=[b?b[0]:0,d?d[0]:0];c[this]=[n.exec(a[0])[0],n.exec(a[1])[0]]});1===N.length&&
(N[1]=N[0]);"right"===c.at[0]?I.left+=q:"center"===c.at[0]&&(I.left+=q/2);"bottom"===c.at[1]?I.top+=A:"center"===c.at[1]&&(I.top+=A/2);d=b(M.at,q,A);I.left+=d[0];I.top+=d[1];return this.each(function(){var h,l,m=a(this),n=m.outerWidth(),t=m.outerHeight(),G=parseInt(a.css(this,"marginLeft"),10)||0,aa=parseInt(a.css(this,"marginTop"),10)||0,wa=n+G+(parseInt(a.css(this,"marginRight"),10)||0)+F.width,va=t+aa+(parseInt(a.css(this,"marginBottom"),10)||0)+F.height,sa=a.extend({},I),qa=b(M.my,m.outerWidth(),
m.outerHeight());"right"===c.my[0]?sa.left-=n:"center"===c.my[0]&&(sa.left-=n/2);"bottom"===c.my[1]?sa.top-=t:"center"===c.my[1]&&(sa.top-=t/2);sa.left+=qa[0];sa.top+=qa[1];a.support.offsetFractions||(sa.left=g(sa.left),sa.top=g(sa.top));h={marginLeft:G,marginTop:aa};a.each(["left","top"],function(b,e){if(a.ui.position[N[b]])a.ui.position[N[b]][e](sa,{targetWidth:q,targetHeight:A,elemWidth:n,elemHeight:t,collisionPosition:h,collisionWidth:wa,collisionHeight:va,offset:[d[0]+qa[0],d[1]+qa[1]],my:c.my,
at:c.at,within:D,elem:m})});a.fn.bgiframe&&m.bgiframe();c.using&&(l=function(a){var b=H.left-sa.left,d=b+q-n,g=H.top-sa.top,h=g+A-t,l={target:{element:y,left:H.left,top:H.top,width:q,height:A},element:{element:m,left:sa.left,top:sa.top,width:n,height:t},horizontal:0>d?"left":0<b?"right":"center",vertical:0>h?"top":0<g?"bottom":"middle"};q<n&&f(b+d)<q&&(l.horizontal="center");A<t&&f(g+h)<A&&(l.vertical="middle");e(f(b),f(d))>e(f(g),f(h))?l.important="horizontal":l.important="vertical";c.using.call(this,
a,l)});m.offset(a.extend(sa,{using:l}))})};a.ui.position={fit:{left:function(a,b){var c=b.within,d=c.isWindow?c.scrollLeft:c.offset.left,f=c.width,g=a.left-b.collisionPosition.marginLeft,c=d-g,h=g+b.collisionWidth-f-d;b.collisionWidth>f?0<c&&0>=h?(d=a.left+c+b.collisionWidth-f-d,a.left+=c-d):a.left=0<h&&0>=c?d:c>h?d+f-b.collisionWidth:d:a.left=0<c?a.left+c:0<h?a.left-h:e(a.left-g,a.left)},top:function(a,b){var c=b.within,d=c.isWindow?c.scrollTop:c.offset.top,f=b.within.height,g=a.top-b.collisionPosition.marginTop,
c=d-g,h=g+b.collisionHeight-f-d;b.collisionHeight>f?0<c&&0>=h?(d=a.top+c+b.collisionHeight-f-d,a.top+=c-d):a.top=0<h&&0>=c?d:c>h?d+f-b.collisionHeight:d:a.top=0<c?a.top+c:0<h?a.top-h:e(a.top-g,a.top)}},flip:{left:function(a,b){var c=b.within,d=c.offset.left+c.scrollLeft,e=c.width,g=c.isWindow?c.scrollLeft:c.offset.left,h=a.left-b.collisionPosition.marginLeft,c=h-g,l=h+b.collisionWidth-e-g,h="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,m="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?
-b.targetWidth:0,n=-2*b.offset[0];if(0>c){if(d=a.left+h+m+n+b.collisionWidth-e-d,0>d||d<f(c))a.left+=h+m+n}else 0<l&&(d=a.left-b.collisionPosition.marginLeft+h+m+n-g,0<d||f(d)<l)&&(a.left+=h+m+n)},top:function(a,b){var c=b.within,d=c.offset.top+c.scrollTop,e=c.height,g=c.isWindow?c.scrollTop:c.offset.top,h=a.top-b.collisionPosition.marginTop,c=h-g,l=h+b.collisionHeight-e-g,h="top"===b.my[1]?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,m="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:
0,n=-2*b.offset[1];0>c?(d=a.top+h+m+n+b.collisionHeight-e-d,a.top+h+m+n>c&&(0>d||d<f(c))&&(a.top+=h+m+n)):0<l&&(d=a.top-b.collisionPosition.marginTop+h+m+n-g,a.top+h+m+n>l&&(0<d||f(d)<l)&&(a.top+=h+m+n))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments);a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments);a.ui.position.fit.top.apply(this,arguments)}}};(function(){var b,c,d,e,f=document.getElementsByTagName("body")[0];d=document.createElement("div");
b=document.createElement(f?"div":"body");c={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};f&&a.extend(c,{position:"absolute",left:"-1000px",top:"-1000px"});for(e in c)b.style[e]=c[e];b.appendChild(d);c=f||document.documentElement;c.insertBefore(b,c.firstChild);d.style.cssText="position: absolute; left: 10.7432222px;";d=a(d).offset().left;a.support.offsetFractions=10<d&&11>d;b.innerHTML="";c.removeChild(b)})();!1!==a.uiBackCompat&&function(a){var b=a.fn.position;a.fn.position=
function(d){if(!d||!d.offset)return b.call(this,d);var e=d.offset.split(" "),f=d.at.split(" ");1===e.length&&(e[1]=e[0]);/^\d/.test(e[0])&&(e[0]="+"+e[0]);/^\d/.test(e[1])&&(e[1]="+"+e[1]);1===f.length&&(/left|center|right/.test(f[0])?f[1]="center":(f[1]=f[0],f[0]="center"));return b.call(this,a.extend(d,{at:f[0]+e[0]+" "+f[1]+e[1],offset:c}))}}(jQuery)})(jQuery);
(function(a,c){a.widget("ui.draggable",a.ui.mouse,{version:"1.9.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||
(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(b){var c=this.options;if(this.helper||c.disabled||a(b.target).is(".ui-resizable-handle"))return!1;this.handle=this._getHandle(b);if(!this.handle)return!1;a(!0===
c.iframeFix?"iframe":c.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(a(this).offset()).appendTo("body")});return!0},_mouseStart:function(b){var c=this.options;this.helper=this._createHelper(b);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();a.ui.ddmanager&&(a.ui.ddmanager.current=this);this._cacheMargins();
this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;
c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);c.containment&&this._setContainment();if(!1===this._trigger("start",b))return this._clear(),!1;this._cacheHelperProportions();a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b);this._mouseDrag(b,!0);a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b);return!0},_mouseDrag:function(b,c){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");if(!c){var e=this._uiHash();if(!1===this._trigger("drag",
b,e))return this._mouseUp({}),!1;this.position=e.position}this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");a.ui.ddmanager&&a.ui.ddmanager.drag(this,b);return!1},_mouseStop:function(b){var c=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(c=a.ui.ddmanager.drop(this,b));this.dropped&&(c=this.dropped,this.dropped=!1);for(var e=this.element[0],f=!1;e&&(e=e.parentNode);)e==
document&&(f=!0);if(!f&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!c||"valid"==this.options.revert&&c||!0===this.options.revert||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var g=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==g._trigger("stop",b)&&g._clear()})}else!1!==this._trigger("stop",b)&&this._clear();return!1},_mouseUp:function(b){a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});
a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b);return a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(b){var c=this.options.handle&&a(this.options.handle,this.element).length?!1:!0;a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(c=!0)});return c},_createHelper:function(b){var c=this.options;b=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],
[b])):"clone"==c.helper?this.element.clone().removeAttr("id"):this.element;b.parents("body").length||b.appendTo("parent"==c.appendTo?this.element[0].parentNode:c.appendTo);b[0]==this.element[0]||/(fixed|absolute)/.test(b.css("position"))||b.css("position","absolute");return b},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" "));a.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-
b.right+this.margins.left);"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==
document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||
0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;"parent"==b.containment&&
(b.containment=this.helper[0].parentNode);if("document"==b.containment||"window"==b.containment)this.containment=["document"==b.containment?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==b.containment?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==b.containment?0:a(window).scrollLeft())+a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==b.containment?0:a(window).scrollTop())+
(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(/^(document|window|parent)$/.test(b.containment)||b.containment.constructor==Array)b.containment.constructor==Array&&(this.containment=b.containment);else{var b=a(b.containment),c=b[0];if(c){b.offset();var e="hidden"!=a(c).css("overflow");this.containment=[(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0),(parseInt(a(c).css("borderTopWidth"),
10)||0)+(parseInt(a(c).css("paddingTop"),10)||0),(e?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=b}}},
_convertPositionTo:function(b,c){c||(c=this.position);var e="absolute"==b?1:-1,f="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*e+this.offset.parent.top*e-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():g?0:f.scrollTop())*e,left:c.left+this.offset.relative.left*e+this.offset.parent.left*e-("fixed"==this.cssPosition?
-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*e}},_generatePosition:function(b){var c=this.options,e="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName),g=b.pageX,h=b.pageY;if(this.originalPosition){var l;this.containment&&(this.relative_container?(l=this.relative_container.offset(),l=[this.containment[0]+l.left,this.containment[1]+l.top,this.containment[2]+
l.left,this.containment[3]+l.top]):l=this.containment,b.pageX-this.offset.click.left<l[0]&&(g=l[0]+this.offset.click.left),b.pageY-this.offset.click.top<l[1]&&(h=l[1]+this.offset.click.top),b.pageX-this.offset.click.left>l[2]&&(g=l[2]+this.offset.click.left),b.pageY-this.offset.click.top>l[3]&&(h=l[3]+this.offset.click.top));c.grid&&(h=c.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY,h=l?h-this.offset.click.top<l[1]||h-this.offset.click.top>l[3]?
h-this.offset.click.top<l[1]?h+c.grid[1]:h-c.grid[1]:h:h,g=c.grid[0]?this.originalPageX+Math.round((g-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX,g=l?g-this.offset.click.left<l[0]||g-this.offset.click.left>l[2]?g-this.offset.click.left<l[0]?g+c.grid[0]:g-c.grid[0]:g:g)}return{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop()),left:g-this.offset.click.left-this.offset.relative.left-
this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(b,c,e){e=e||this._uiHash();a.ui.plugin.call(this,b,[c,e]);"drag"==b&&(this.positionAbs=this._convertPositionTo("absolute"));return a.Widget.prototype._trigger.call(this,b,c,e)},plugins:{},
_uiHash:function(a){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var e=a(this).data("draggable"),f=e.options,g=a.extend({},c,{item:e.element});e.sortables=[];a(f.connectToSortable).each(function(){var c=a.data(this,"sortable");c&&!c.options.disabled&&(e.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,g))})},
stop:function(b,c){var e=a(this).data("draggable"),f=a.extend({},c,{item:e.element});a.each(e.sortables,function(){this.instance.isOver?(this.instance.isOver=0,e.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"==e.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",
b,f))})},drag:function(b,c){var e=a(this).data("draggable"),f=this;a.each(e.sortables,function(g){var h=!1,l=this;this.instance.positionAbs=e.positionAbs;this.instance.helperProportions=e.helperProportions;this.instance.offset.click=e.offset.click;this.instance._intersectsWith(this.instance.containerCache)&&(h=!0,a.each(e.sortables,function(){this.instance.positionAbs=e.positionAbs;this.instance.helperProportions=e.helperProportions;this.instance.offset.click=e.offset.click;this!=l&&this.instance._intersectsWith(this.instance.containerCache)&&
a.ui.contains(l.instance.element[0],this.instance.element[0])&&(h=!1);return h}));h?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(f).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=
e.offset.click.top,this.instance.offset.click.left=e.offset.click.left,this.instance.offset.parent.left-=e.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=e.offset.parent.top-this.instance.offset.parent.top,e._trigger("toSortable",b),e.dropped=this.instance.element,e.currentItem=e.element,this.instance.fromOutside=e),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=
!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),e._trigger("fromSortable",b),e.dropped=!1)})}});a.ui.plugin.add("draggable","cursor",{start:function(b,c){var e=a("body"),f=a(this).data("draggable").options;e.css("cursor")&&(f._cursor=e.css("cursor"));e.css("cursor",f.cursor)},stop:function(b,
c){var e=a(this).data("draggable").options;e._cursor&&a("body").css("cursor",e._cursor)}});a.ui.plugin.add("draggable","opacity",{start:function(b,c){var e=a(c.helper),f=a(this).data("draggable").options;e.css("opacity")&&(f._opacity=e.css("opacity"));e.css("opacity",f.opacity)},stop:function(b,c){var e=a(this).data("draggable").options;e._opacity&&a(c.helper).css("opacity",e._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(b,c){var e=a(this).data("draggable");e.scrollParent[0]!=
document&&"HTML"!=e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(b,c){var e=a(this).data("draggable"),f=e.options,g=!1;e.scrollParent[0]!=document&&"HTML"!=e.scrollParent[0].tagName?(f.axis&&"x"==f.axis||(e.overflowOffset.top+e.scrollParent[0].offsetHeight-b.pageY<f.scrollSensitivity?e.scrollParent[0].scrollTop=g=e.scrollParent[0].scrollTop+f.scrollSpeed:b.pageY-e.overflowOffset.top<f.scrollSensitivity&&(e.scrollParent[0].scrollTop=g=e.scrollParent[0].scrollTop-
f.scrollSpeed)),f.axis&&"y"==f.axis||(e.overflowOffset.left+e.scrollParent[0].offsetWidth-b.pageX<f.scrollSensitivity?e.scrollParent[0].scrollLeft=g=e.scrollParent[0].scrollLeft+f.scrollSpeed:b.pageX-e.overflowOffset.left<f.scrollSensitivity&&(e.scrollParent[0].scrollLeft=g=e.scrollParent[0].scrollLeft-f.scrollSpeed))):(f.axis&&"x"==f.axis||(b.pageY-a(document).scrollTop()<f.scrollSensitivity?g=a(document).scrollTop(a(document).scrollTop()-f.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<
f.scrollSensitivity&&(g=a(document).scrollTop(a(document).scrollTop()+f.scrollSpeed))),f.axis&&"y"==f.axis||(b.pageX-a(document).scrollLeft()<f.scrollSensitivity?g=a(document).scrollLeft(a(document).scrollLeft()-f.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<f.scrollSensitivity&&(g=a(document).scrollLeft(a(document).scrollLeft()+f.scrollSpeed))));!1!==g&&a.ui.ddmanager&&!f.dropBehaviour&&a.ui.ddmanager.prepareOffsets(e,b)}});a.ui.plugin.add("draggable","snap",{start:function(b,
c){var e=a(this).data("draggable"),f=e.options;e.snapElements=[];a(f.snap.constructor!=String?f.snap.items||":data(draggable)":f.snap).each(function(){var b=a(this),c=b.offset();this!=e.element[0]&&e.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c){for(var e=a(this).data("draggable"),f=e.options,g=f.snapTolerance,h=c.offset.left,l=h+e.helperProportions.width,m=c.offset.top,n=m+e.helperProportions.height,q=e.snapElements.length-
1;0<=q;q--){var t=e.snapElements[q].left,x=t+e.snapElements[q].width,u=e.snapElements[q].top,E=u+e.snapElements[q].height;if(t-g<h&&h<x+g&&u-g<m&&m<E+g||t-g<h&&h<x+g&&u-g<n&&n<E+g||t-g<l&&l<x+g&&u-g<m&&m<E+g||t-g<l&&l<x+g&&u-g<n&&n<E+g){if("inner"!=f.snapMode){var A=Math.abs(u-n)<=g,H=Math.abs(E-m)<=g,I=Math.abs(t-l)<=g,y=Math.abs(x-h)<=g;A&&(c.position.top=e._convertPositionTo("relative",{top:u-e.helperProportions.height,left:0}).top-e.margins.top);H&&(c.position.top=e._convertPositionTo("relative",
{top:E,left:0}).top-e.margins.top);I&&(c.position.left=e._convertPositionTo("relative",{top:0,left:t-e.helperProportions.width}).left-e.margins.left);y&&(c.position.left=e._convertPositionTo("relative",{top:0,left:x}).left-e.margins.left)}var D=A||H||I||y;"outer"!=f.snapMode&&(A=Math.abs(u-m)<=g,H=Math.abs(E-n)<=g,I=Math.abs(t-h)<=g,y=Math.abs(x-l)<=g,A&&(c.position.top=e._convertPositionTo("relative",{top:u,left:0}).top-e.margins.top),H&&(c.position.top=e._convertPositionTo("relative",{top:E-e.helperProportions.height,
left:0}).top-e.margins.top),I&&(c.position.left=e._convertPositionTo("relative",{top:0,left:t}).left-e.margins.left),y&&(c.position.left=e._convertPositionTo("relative",{top:0,left:x-e.helperProportions.width}).left-e.margins.left));!e.snapElements[q].snapping&&(A||H||I||y||D)&&e.options.snap.snap&&e.options.snap.snap.call(e.element,b,a.extend(e._uiHash(),{snapItem:e.snapElements[q].item}));e.snapElements[q].snapping=A||H||I||y||D}else e.snapElements[q].snapping&&e.options.snap.release&&e.options.snap.release.call(e.element,
b,a.extend(e._uiHash(),{snapItem:e.snapElements[q].item})),e.snapElements[q].snapping=!1}}});a.ui.plugin.add("draggable","stack",{start:function(b,c){var e=a(this).data("draggable").options,e=a.makeArray(a(e.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(e.length){var f=parseInt(e[0].style.zIndex)||0;a(e).each(function(a){this.style.zIndex=f+a});this[0].style.zIndex=f+e.length}}});a.ui.plugin.add("draggable","zIndex",{start:function(b,
c){var e=a(c.helper),f=a(this).data("draggable").options;e.css("zIndex")&&(f._zIndex=e.css("zIndex"));e.css("zIndex",f.zIndex)},stop:function(b,c){var e=a(this).data("draggable").options;e._zIndex&&a(c.helper).css("zIndex",e._zIndex)}})})(jQuery);
(function(a,c){a.widget("ui.droppable",{version:"1.9.1",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var b=this.options,c=b.accept;this.isover=0;this.isout=1;this.accept=a.isFunction(c)?c:function(a){return a.is(c)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[];a.ui.ddmanager.droppables[b.scope].push(this);
b.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var b=a.ui.ddmanager.droppables[this.options.scope],c=0;c<b.length;c++)b[c]==this&&b.splice(c,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(b,c){"accept"==b&&(this.accept=a.isFunction(c)?c:function(a){return a.is(c)});a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);
c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=
a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var e=c||a.ui.ddmanager.current;if(!e||(e.currentItem||e.element)[0]==this.element[0])return!1;var f=!1;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"droppable");if(b.options.greedy&&
!b.options.disabled&&b.options.scope==e.options.scope&&b.accept.call(b.element[0],e.currentItem||e.element)&&a.ui.intersect(e,a.extend(b,{offset:b.element.offset()}),b.options.tolerance))return f=!0,!1});return f?!1:this.accept.call(this.element[0],e.currentItem||e.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(e)),this.element):!1},ui:function(a){return{draggable:a.currentItem||
a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}});a.ui.intersect=function(b,c,e){if(!c.offset)return!1;var f=(b.positionAbs||b.position.absolute).left,g=f+b.helperProportions.width,h=(b.positionAbs||b.position.absolute).top,l=h+b.helperProportions.height,m=c.offset.left,n=m+c.proportions.width,q=c.offset.top,t=q+c.proportions.height;switch(e){case "fit":return m<=f&&g<=n&&q<=h&&l<=t;case "intersect":return m<f+b.helperProportions.width/2&&g-b.helperProportions.width/2<n&&q<h+
b.helperProportions.height/2&&l-b.helperProportions.height/2<t;case "pointer":return a.ui.isOver((b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top,(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,q,m,c.proportions.height,c.proportions.width);case "touch":return(h>=q&&h<=t||l>=q&&l<=t||h<q&&l>t)&&(f>=m&&f<=n||g>=m&&g<=n||f<m&&g>n);default:return!1}};a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var e=a.ui.ddmanager.droppables[b.options.scope]||
[],f=c?c.type:null,g=(b.currentItem||b.element).find(":data(droppable)").andSelf(),h=0;a:for(;h<e.length;h++)if(!(e[h].options.disabled||b&&!e[h].accept.call(e[h].element[0],b.currentItem||b.element))){for(var l=0;l<g.length;l++)if(g[l]==e[h].element[0]){e[h].proportions.height=0;continue a}e[h].visible="none"!=e[h].element.css("display");e[h].visible&&("mousedown"==f&&e[h]._activate.call(e[h],c),e[h].offset=e[h].element.offset(),e[h].proportions={width:e[h].element[0].offsetWidth,height:e[h].element[0].offsetHeight})}},
drop:function(b,c){var e=!1;a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(e=this._drop.call(this,c)||e),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,c)))});return e},dragStart:function(b,c){b.element.parentsUntil("body").bind("scroll.droppable",function(){b.options.refreshPositions||
a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c);a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var e=a.ui.intersect(b,this,this.options.tolerance);if(e=e||1!=this.isover?e&&0==this.isover?"isover":null:"isout"){var f;if(this.options.greedy){var g=this.options.scope,h=this.element.parents(":data(droppable)").filter(function(){return a.data(this,"droppable").options.scope===
g});h.length&&(f=a.data(h[0],"droppable"),f.greedyChild="isover"==e?1:0)}f&&"isover"==e&&(f.isover=0,f.isout=1,f._out.call(f,c));this[e]=1;this["isout"==e?"isover":"isout"]=0;this["isover"==e?"_over":"_out"].call(this,c);f&&"isout"==e&&(f.isout=0,f.isover=1,f._over.call(f,c))}}})},dragStop:function(b,c){b.element.parentsUntil("body").unbind("scroll.droppable");b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}}})(jQuery);
(function(a,c){a.widget("ui.resizable",a.ui.mouse,{version:"1.9.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var b=this,c=this.options;this.element.addClass("ui-resizable");a.extend(this,{_aspectRatio:!!c.aspectRatio,aspectRatio:c.aspectRatio,originalElement:this.element,
_proportionallyResizeElements:[],_helper:c.helper||c.ghost||c.animate?c.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),
this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",
zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize());this.handles=c.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var d=this.handles.split(",");
this.handles={};for(var h=0;h<d.length;h++){var l=a.trim(d[h]),m=a('<div class="ui-resizable-handle ui-resizable-'+l+'"></div>');m.css({zIndex:c.zIndex});"se"==l&&m.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[l]=".ui-resizable-"+l;this.element.append(m)}}this._renderAxis=function(b){b=b||this.element;for(var c in this.handles){this.handles[c].constructor==String&&(this.handles[c]=a(this.handles[c],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var d=
a(this.handles[c],this.element),e=0,e=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),d=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join("");b.css(d,e);this._proportionallyResize()}a(this.handles[c])}};this._renderAxis(this.element);this._handles=a(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!b.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=
a&&a[1]?a[1]:"se"}});c.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").mouseenter(function(){c.disabled||(a(this).removeClass("ui-resizable-autohide"),b._handles.show())}).mouseleave(function(){c.disabled||b.resizing||(a(this).addClass("ui-resizable-autohide"),b._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();var b=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};
if(this.elementIsWrapper){b(this.element);var c=this.element;this.originalElement.css({position:c.css("position"),width:c.outerWidth(),height:c.outerHeight(),top:c.css("top"),left:c.css("left")}).insertAfter(c);c.remove()}this.originalElement.css("resize",this.originalResizeStyle);b(this.originalElement);return this},_mouseCapture:function(b){var c=!1,d;for(d in this.handles)a(this.handles[d])[0]==b.target&&(c=!0);return!this.options.disabled&&c},_mouseStart:function(c){var d=this.options,g=this.element.position(),
h=this.element;this.resizing=!0;this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()};(h.is(".ui-draggable")||/absolute/.test(h.css("position")))&&h.css({position:"absolute",top:g.top,left:g.left});this._renderProxy();var g=b(this.helper.css("left")),l=b(this.helper.css("top"));d.containment&&(g+=a(d.containment).scrollLeft()||0,l+=a(d.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:g,top:l};this.size=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:
{width:h.width(),height:h.height()};this.originalSize=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()};this.originalPosition={left:g,top:l};this.sizeDiff={width:h.outerWidth()-h.width(),height:h.outerHeight()-h.height()};this.originalMousePosition={left:c.pageX,top:c.pageY};this.aspectRatio="number"==typeof d.aspectRatio?d.aspectRatio:this.originalSize.width/this.originalSize.height||1;d=a(".ui-resizable-"+this.axis).css("cursor");a("body").css("cursor",
"auto"==d?this.axis+"-resize":d);h.addClass("ui-resizable-resizing");this._propagate("start",c);return!0},_mouseDrag:function(a){var b=this.helper,c=this.originalMousePosition,d=this._change[this.axis];if(!d)return!1;c=d.apply(this,[a,a.pageX-c.left||0,a.pageY-c.top||0]);this._updateVirtualBoundaries(a.shiftKey);if(this._aspectRatio||a.shiftKey)c=this._updateRatio(c,a);c=this._respectSize(c,a);this._propagate("resize",a);b.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+
"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(c);this._trigger("resize",a,this.ui());return!1},_mouseStop:function(b){this.resizing=!1;var c=this.options;if(this._helper){var d=this._proportionallyResizeElements,h=d.length&&/textarea/i.test(d[0].nodeName),d=h&&a.ui.hasScroll(d[0],"left")?0:this.sizeDiff.height,h=h?0:this.sizeDiff.width,h={width:this.helper.width()-h,height:this.helper.height()-d},d=parseInt(this.element.css("left"),
10)+(this.position.left-this.originalPosition.left)||null,l=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null;c.animate||this.element.css(a.extend(h,{top:l,left:d}));this.helper.height(this.size.height);this.helper.width(this.size.width);this._helper&&!c.animate&&this._proportionallyResize()}a("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",b);this._helper&&this.helper.remove();return!1},_updateVirtualBoundaries:function(a){var b=
this.options,c,h,l,b={minWidth:d(b.minWidth)?b.minWidth:0,maxWidth:d(b.maxWidth)?b.maxWidth:Infinity,minHeight:d(b.minHeight)?b.minHeight:0,maxHeight:d(b.maxHeight)?b.maxHeight:Infinity};if(this._aspectRatio||a)a=b.minHeight*this.aspectRatio,h=b.minWidth/this.aspectRatio,c=b.maxHeight*this.aspectRatio,l=b.maxWidth/this.aspectRatio,a>b.minWidth&&(b.minWidth=a),h>b.minHeight&&(b.minHeight=h),c<b.maxWidth&&(b.maxWidth=c),l<b.maxHeight&&(b.maxHeight=l);this._vBoundaries=b},_updateCache:function(a){this.offset=
this.helper.offset();d(a.left)&&(this.position.left=a.left);d(a.top)&&(this.position.top=a.top);d(a.height)&&(this.size.height=a.height);d(a.width)&&(this.size.width=a.width)},_updateRatio:function(a,b){var c=this.position,h=this.size,l=this.axis;d(a.height)?a.width=a.height*this.aspectRatio:d(a.width)&&(a.height=a.width/this.aspectRatio);"sw"==l&&(a.left=c.left+(h.width-a.width),a.top=null);"nw"==l&&(a.top=c.top+(h.height-a.height),a.left=c.left+(h.width-a.width));return a},_respectSize:function(a,
b){var c=this._vBoundaries,h=this.axis,l=d(a.width)&&c.maxWidth&&c.maxWidth<a.width,m=d(a.height)&&c.maxHeight&&c.maxHeight<a.height,n=d(a.width)&&c.minWidth&&c.minWidth>a.width,q=d(a.height)&&c.minHeight&&c.minHeight>a.height;n&&(a.width=c.minWidth);q&&(a.height=c.minHeight);l&&(a.width=c.maxWidth);m&&(a.height=c.maxHeight);var t=this.originalPosition.left+this.originalSize.width,x=this.position.top+this.size.height,u=/sw|nw|w/.test(h),h=/nw|ne|n/.test(h);n&&u&&(a.left=t-c.minWidth);l&&u&&(a.left=
t-c.maxWidth);q&&h&&(a.top=x-c.minHeight);m&&h&&(a.top=x-c.maxHeight);(c=!a.width&&!a.height)&&!a.left&&a.top?a.top=null:c&&!a.top&&a.left&&(a.left=null);return a},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var b=this.helper||this.element,c=0;c<this._proportionallyResizeElements.length;c++){var d=this._proportionallyResizeElements[c];if(!this.borderDif){var h=[d.css("borderTopWidth"),d.css("borderRightWidth"),d.css("borderBottomWidth"),d.css("borderLeftWidth")],
l=[d.css("paddingTop"),d.css("paddingRight"),d.css("paddingBottom"),d.css("paddingLeft")];this.borderDif=a.map(h,function(a,b){var c=parseInt(a,10)||0,d=parseInt(l[b],10)||0;return c+d})}d.css({height:b.height()-this.borderDif[0]-this.borderDif[2]||0,width:b.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var b=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var c=a.ui.ie6?1:0,d=a.ui.ie6?
2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+d,height:this.element.outerHeight()+d,position:"absolute",left:this.elementOffset.left-c+"px",top:this.elementOffset.top-c+"px",zIndex:++b.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(a,b,c){return{width:this.originalSize.width+b}},w:function(a,b,c){return{left:this.originalPosition.left+b,width:this.originalSize.width-b}},n:function(a,b,c){return{top:this.originalPosition.top+
c,height:this.originalSize.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,
[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]);"resize"!=b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});a.ui.plugin.add("resizable","alsoResize",{start:function(b,c){var d=a(this).data("resizable").options,h=function(b){a(b).each(function(){var b=a(this);b.data("resizable-alsoresize",
{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof d.alsoResize||d.alsoResize.parentNode?h(d.alsoResize):d.alsoResize.length?(d.alsoResize=d.alsoResize[0],h(d.alsoResize)):a.each(d.alsoResize,function(a){h(a)})},resize:function(b,c){var d=a(this).data("resizable"),h=d.options,l=d.originalSize,m=d.originalPosition,n={height:d.size.height-l.height||0,width:d.size.width-l.width||0,top:d.position.top-m.top||
0,left:d.position.left-m.left||0},q=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("resizable-alsoresize"),h={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var c=(e[b]||0)+(n[b]||0);c&&0<=c&&(h[b]=c||null)});b.css(h)})};"object"!=typeof h.alsoResize||h.alsoResize.nodeType?q(h.alsoResize):a.each(h.alsoResize,function(a,b){q(a,b)})},stop:function(b,c){a(this).removeData("resizable-alsoresize")}});a.ui.plugin.add("resizable",
"animate",{stop:function(b,c){var d=a(this).data("resizable"),h=d.options,l=d._proportionallyResizeElements,m=l.length&&/textarea/i.test(l[0].nodeName),n=m&&a.ui.hasScroll(l[0],"left")?0:d.sizeDiff.height,m={width:d.size.width-(m?0:d.sizeDiff.width),height:d.size.height-n},n=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,q=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;d.element.animate(a.extend(m,q&&n?{top:q,left:n}:{}),{duration:h.animateDuration,
easing:h.animateEasing,step:function(){var c={width:parseInt(d.element.css("width"),10),height:parseInt(d.element.css("height"),10),top:parseInt(d.element.css("top"),10),left:parseInt(d.element.css("left"),10)};l&&l.length&&a(l[0]).css({width:c.width,height:c.height});d._updateCache(c);d._propagate("resize",b)}})}});a.ui.plugin.add("resizable","containment",{start:function(c,d){var g=a(this).data("resizable"),h=g.element,l=g.options.containment;if(h=l instanceof a?l.get(0):/parent/.test(l)?h.parent().get(0):
l)if(g.containerElement=a(h),/document/.test(l)||l==document)g.containerOffset={left:0,top:0},g.containerPosition={left:0,top:0},g.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight};else{var m=a(h),n=[];a(["Top","Right","Left","Bottom"]).each(function(a,c){n[a]=b(m.css("padding"+c))});g.containerOffset=m.offset();g.containerPosition=m.position();g.containerSize={height:m.innerHeight()-n[3],width:m.innerWidth()-
n[1]};var l=g.containerOffset,q=g.containerSize.height,t=g.containerSize.width,t=a.ui.hasScroll(h,"left")?h.scrollWidth:t,q=a.ui.hasScroll(h)?h.scrollHeight:q;g.parentData={element:h,left:l.left,top:l.top,width:t,height:q}}},resize:function(b,c){var d=a(this).data("resizable"),h=d.options,l=d.containerOffset,m=d.position,n=d._aspectRatio||b.shiftKey,q={top:0,left:0},t=d.containerElement;t[0]!=document&&/static/.test(t.css("position"))&&(q=l);m.left<(d._helper?l.left:0)&&(d.size.width+=d._helper?d.position.left-
l.left:d.position.left-q.left,n&&(d.size.height=d.size.width/d.aspectRatio),d.position.left=h.helper?l.left:0);m.top<(d._helper?l.top:0)&&(d.size.height+=d._helper?d.position.top-l.top:d.position.top,n&&(d.size.width=d.size.height*d.aspectRatio),d.position.top=d._helper?l.top:0);d.offset.left=d.parentData.left+d.position.left;d.offset.top=d.parentData.top+d.position.top;h=Math.abs(d.offset.left-q.left+d.sizeDiff.width);l=Math.abs((d._helper?d.offset.top-q.top:d.offset.top-l.top)+d.sizeDiff.height);
q=d.containerElement.get(0)==d.element.parent().get(0);m=/relative|absolute/.test(d.containerElement.css("position"));q&&m&&(h-=d.parentData.left);h+d.size.width>=d.parentData.width&&(d.size.width=d.parentData.width-h,n&&(d.size.height=d.size.width/d.aspectRatio));l+d.size.height>=d.parentData.height&&(d.size.height=d.parentData.height-l,n&&(d.size.width=d.size.height*d.aspectRatio))},stop:function(b,c){var d=a(this).data("resizable"),h=d.options,l=d.containerOffset,m=d.containerPosition,n=d.containerElement,
q=a(d.helper),t=q.offset(),x=q.outerWidth()-d.sizeDiff.width,q=q.outerHeight()-d.sizeDiff.height;d._helper&&!h.animate&&/relative/.test(n.css("position"))&&a(this).css({left:t.left-m.left-l.left,width:x,height:q});d._helper&&!h.animate&&/static/.test(n.css("position"))&&a(this).css({left:t.left-m.left-l.left,width:x,height:q})}});a.ui.plugin.add("resizable","ghost",{start:function(b,c){var d=a(this).data("resizable"),h=d.options,l=d.size;d.ghost=d.originalElement.clone();d.ghost.css({opacity:.25,
display:"block",position:"relative",height:l.height,width:l.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof h.ghost?h.ghost:"");d.ghost.appendTo(d.helper)},resize:function(b,c){var d=a(this).data("resizable");d.ghost&&d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})},stop:function(b,c){var d=a(this).data("resizable");d.ghost&&d.helper&&d.helper.get(0).removeChild(d.ghost.get(0))}});a.ui.plugin.add("resizable","grid",{resize:function(b,
c){var d=a(this).data("resizable"),h=d.options,l=d.size,m=d.originalSize,n=d.originalPosition,q=d.axis;h.grid="number"==typeof h.grid?[h.grid,h.grid]:h.grid;var t=Math.round((l.width-m.width)/(h.grid[0]||1))*(h.grid[0]||1),h=Math.round((l.height-m.height)/(h.grid[1]||1))*(h.grid[1]||1);/^(se|s|e)$/.test(q)?(d.size.width=m.width+t,d.size.height=m.height+h):/^(ne)$/.test(q)?(d.size.width=m.width+t,d.size.height=m.height+h,d.position.top=n.top-h):(/^(sw)$/.test(q)?(d.size.width=m.width+t,d.size.height=
m.height+h):(d.size.width=m.width+t,d.size.height=m.height+h,d.position.top=n.top-h),d.position.left=n.left-t)}});var b=function(a){return parseInt(a,10)||0},d=function(a){return!isNaN(parseInt(a,10))}})(jQuery);
(function(a,c){a.widget("ui.selectable",a.ui.mouse,{version:"1.9.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable");this.dragged=!1;var c;this.refresh=function(){c=a(b.options.filter,b.element[0]);c.addClass("ui-selectee");c.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),
startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})};this.refresh();this.selectees=c.addClass("ui-selectee");this._mouseInit();this.helper=a("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");this._mouseDestroy()},_mouseStart:function(b){var c=this;this.opos=[b.pageX,
b.pageY];if(!this.options.disabled){var e=this.options;this.selectees=a(e.filter,this.element[0]);this._trigger("start",b);a(e.appendTo).append(this.helper);this.helper.css({left:b.clientX,top:b.clientY,width:0,height:0});e.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var e=a.data(this,"selectable-item");e.startselected=!0;b.metaKey||b.ctrlKey||(e.$element.removeClass("ui-selected"),e.selected=!1,e.$element.addClass("ui-unselecting"),e.unselecting=!0,c._trigger("unselecting",
b,{unselecting:e.element}))});a(b.target).parents().andSelf().each(function(){var e=a.data(this,"selectable-item");if(e){var g=!b.metaKey&&!b.ctrlKey||!e.$element.hasClass("ui-selected");e.$element.removeClass(g?"ui-unselecting":"ui-selected").addClass(g?"ui-selecting":"ui-unselecting");e.unselecting=!g;e.selecting=g;(e.selected=g)?c._trigger("selecting",b,{selecting:e.element}):c._trigger("unselecting",b,{unselecting:e.element});return!1}})}},_mouseDrag:function(b){var c=this;this.dragged=!0;if(!this.options.disabled){var e=
this.options,f=this.opos[0],g=this.opos[1],h=b.pageX,l=b.pageY;if(f>h)var m=h,h=f,f=m;g>l&&(m=l,l=g,g=m);this.helper.css({left:f,top:g,width:h-f,height:l-g});this.selectees.each(function(){var m=a.data(this,"selectable-item");if(m&&m.element!=c.element[0]){var q=!1;"touch"==e.tolerance?q=!(m.left>h||m.right<f||m.top>l||m.bottom<g):"fit"==e.tolerance&&(q=m.left>f&&m.right<h&&m.top>g&&m.bottom<l);q?(m.selected&&(m.$element.removeClass("ui-selected"),m.selected=!1),m.unselecting&&(m.$element.removeClass("ui-unselecting"),
m.unselecting=!1),m.selecting||(m.$element.addClass("ui-selecting"),m.selecting=!0,c._trigger("selecting",b,{selecting:m.element}))):(m.selecting&&((b.metaKey||b.ctrlKey)&&m.startselected?(m.$element.removeClass("ui-selecting"),m.selecting=!1,m.$element.addClass("ui-selected"),m.selected=!0):(m.$element.removeClass("ui-selecting"),m.selecting=!1,m.startselected&&(m.$element.addClass("ui-unselecting"),m.unselecting=!0),c._trigger("unselecting",b,{unselecting:m.element}))),!m.selected||b.metaKey||b.ctrlKey||
m.startselected||(m.$element.removeClass("ui-selected"),m.selected=!1,m.$element.addClass("ui-unselecting"),m.unselecting=!0,c._trigger("unselecting",b,{unselecting:m.element})))}});return!1}},_mouseStop:function(b){var c=this;this.dragged=!1;a(".ui-unselecting",this.element[0]).each(function(){var e=a.data(this,"selectable-item");e.$element.removeClass("ui-unselecting");e.unselecting=!1;e.startselected=!1;c._trigger("unselected",b,{unselected:e.element})});a(".ui-selecting",this.element[0]).each(function(){var e=
a.data(this,"selectable-item");e.$element.removeClass("ui-selecting").addClass("ui-selected");e.selecting=!1;e.selected=!0;e.startselected=!0;c._trigger("selected",b,{selected:e.element})});this._trigger("stop",b);this.helper.remove();return!1}})})(jQuery);
(function(a,c){a.widget("ui.sortable",a.ui.mouse,{version:"1.9.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var a=this.options;this.containerCache={};this.element.addClass("ui-sortable");
this.refresh();this.floating=this.items.length?"x"===a.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1;this.offset=this.element.offset();this._mouseInit();this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var a=this.items.length-1;0<=a;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,c){"disabled"===b?(this.options[b]=
c,this.widget().toggleClass("ui-sortable-disabled",!!c)):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,c){var e=this;if(this.reverting||this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(b);var f=null;a(b.target).parents().each(function(){if(a.data(this,e.widgetName+"-item")==e)return f=a(this),!1});a.data(b.target,e.widgetName+"-item")==e&&(f=a(b.target));if(!f)return!1;if(this.options.handle&&!c){var g=!1;a(this.options.handle,f).find("*").andSelf().each(function(){this==
b.target&&(g=!0)});if(!g)return!1}this.currentItem=f;this._removeCurrentsFromItems();return!0},_mouseStart:function(b,c,e){c=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(b);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:b.pageX-this.offset.left,
top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();
c.containment&&this._setContainment();c.cursor&&(a("body").css("cursor")&&(this._storedCursor=a("body").css("cursor")),a("body").css("cursor",c.cursor));c.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",c.opacity));c.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",c.zIndex));this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());
this._trigger("start",b,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!e)for(e=this.containers.length-1;0<=e;e--)this.containers[e]._trigger("activate",b,this._uiHash(this));a.ui.ddmanager&&(a.ui.ddmanager.current=this);a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b);this.dragging=!0;this.helper.addClass("ui-sortable-helper");this._mouseDrag(b);return!0},_mouseDrag:function(b){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");
this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var c=this.options,e=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<c.scrollSensitivity?this.scrollParent[0].scrollTop=e=this.scrollParent[0].scrollTop+c.scrollSpeed:b.pageY-this.overflowOffset.top<c.scrollSensitivity&&(this.scrollParent[0].scrollTop=e=this.scrollParent[0].scrollTop-c.scrollSpeed),this.overflowOffset.left+
this.scrollParent[0].offsetWidth-b.pageX<c.scrollSensitivity?this.scrollParent[0].scrollLeft=e=this.scrollParent[0].scrollLeft+c.scrollSpeed:b.pageX-this.overflowOffset.left<c.scrollSensitivity&&(this.scrollParent[0].scrollLeft=e=this.scrollParent[0].scrollLeft-c.scrollSpeed)):(b.pageY-a(document).scrollTop()<c.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-c.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<c.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+
c.scrollSpeed)),b.pageX-a(document).scrollLeft()<c.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<c.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed)));!1!==e&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)}this.positionAbs=this._convertPositionTo("absolute");this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px");
this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(c=this.items.length-1;0<=c;c--){var e=this.items[c],f=e.item[0],g=this._intersectsWithPointer(e);if(g&&e.instance===this.currentContainer&&f!=this.currentItem[0]&&this.placeholder[1==g?"next":"prev"]()[0]!=f&&!a.contains(this.placeholder[0],f)&&("semi-dynamic"==this.options.type?!a.contains(this.element[0],f):1)){this.direction=1==g?"down":"up";if("pointer"==this.options.tolerance||this._intersectsWithSides(e))this._rearrange(b,
e);else break;this._trigger("change",b,this._uiHash());break}}this._contactContainers(b);a.ui.ddmanager&&a.ui.ddmanager.drag(this,b);this._trigger("sort",b,this._uiHash());this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(b,c){if(b){a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b);if(this.options.revert){var e=this,f=this.placeholder.offset();this.reverting=!0;a(this.helper).animate({left:f.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==
document.body?0:this.offsetParent[0].scrollLeft),top:f.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){e._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;0<=b;b--)this.containers[b]._trigger("deactivate",
null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):
a(this.domPosition.parent).prepend(this.currentItem));return this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),e=[];b=b||{};a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);c&&e.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))});!e.length&&b.key&&e.push(b.key+"=");return e.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),e=[];b=b||{};c.each(function(){e.push(a(b.item||this).attr(b.attribute||
"id")||"")});return e},_intersectsWith:function(a){var c=this.positionAbs.left,e=c+this.helperProportions.width,f=this.positionAbs.top,g=f+this.helperProportions.height,h=a.left,l=h+a.width,m=a.top,n=m+a.height,q=this.offset.click.top,t=this.offset.click.left;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?f+q>m&&f+q<n&&c+t>h&&c+t<l:h<c+this.helperProportions.width/
2&&e-this.helperProportions.width/2<l&&m<f+this.helperProportions.height/2&&g-this.helperProportions.height/2<n},_intersectsWithPointer:function(b){var c="x"===this.options.axis||a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height);b="y"===this.options.axis||a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width);c=c&&b;b=this._getDragVerticalDirection();var e=this._getDragHorizontalDirection();return c?this.floating?e&&"right"==e||"down"==b?2:1:b&&("down"==
b?2:1):!1},_intersectsWithSides:function(b){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height);b=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width);var e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?"right"==f&&b||"left"==f&&!b:e&&("down"==e&&c||"up"==e&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!=a&&(0<a?"down":"up")},
_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!=a&&(0<a?"right":"left")},refresh:function(a){this._refreshItems(a);this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var c=[],e=[],f=this._connectWith();if(f&&b)for(b=f.length-1;0<=b;b--)for(var g=a(f[b]),h=g.length-1;0<=h;h--){var l=a.data(g[h],this.widgetName);l&&
l!=this&&!l.options.disabled&&e.push([a.isFunction(l.options.items)?l.options.items.call(l.element):a(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l])}e.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(b=e.length-1;0<=b;b--)e[b][0].each(function(){c.push(this)});return a(c)},_removeCurrentsFromItems:function(){var b=
this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var c=0;c<b.length;c++)if(b[c]==a.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[];this.containers=[this];var c=this.items,e=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],f=this._connectWith();if(f&&this.ready)for(var g=f.length-1;0<=g;g--)for(var h=a(f[g]),l=h.length-1;0<=l;l--){var m=
a.data(h[l],this.widgetName);m&&m!=this&&!m.options.disabled&&(e.push([a.isFunction(m.options.items)?m.options.items.call(m.element[0],b,{item:this.currentItem}):a(m.options.items,m.element),m]),this.containers.push(m))}for(g=e.length-1;0<=g;g--)for(b=e[g][1],f=e[g][0],l=0,h=f.length;l<h;l++)m=a(f[l]),m.data(this.widgetName+"-item",b),c.push({item:m,instance:b,width:0,height:0,left:0,top:0})},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());
for(var c=this.items.length-1;0<=c;c--){var e=this.items[c];if(e.instance==this.currentContainer||!this.currentContainer||e.item[0]==this.currentItem[0]){var f=this.options.toleranceElement?a(this.options.toleranceElement,e.item):e.item;b||(e.width=f.outerWidth(),e.height=f.outerHeight());f=f.offset();e.left=f.left;e.top=f.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=this.containers.length-1;0<=c;c--)f=this.containers[c].element.offset(),
this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(b){b=b||this;var c=b.options;if(!c.placeholder||c.placeholder.constructor==String){var e=c.placeholder;c.placeholder={element:function(){var c=a(document.createElement(b.currentItem[0].nodeName)).addClass(e||
b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];e||(c.style.visibility="hidden");return c},update:function(a,g){if(!e||c.forcePlaceholderSize)g.height()||g.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),g.width()||g.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10))}}}b.placeholder=a(c.placeholder.element.call(b.element,
b.currentItem));b.currentItem.after(b.placeholder);c.placeholder.update(b,b.placeholder)},_contactContainers:function(b){for(var c=null,e=null,f=this.containers.length-1;0<=f;f--)a.contains(this.currentItem[0],this.containers[f].element[0])||(this._intersectsWith(this.containers[f].containerCache)?c&&a.contains(this.containers[f].element[0],c.element[0])||(c=this.containers[f],e=f):this.containers[f].containerCache.over&&(this.containers[f]._trigger("out",b,this._uiHash(this)),this.containers[f].containerCache.over=
0));if(c)if(1===this.containers.length)this.containers[e]._trigger("over",b,this._uiHash(this)),this.containers[e].containerCache.over=1;else{for(var c=1E4,f=null,g=this.containers[e].floating?"left":"top",h=this.containers[e].floating?"width":"height",l=this.positionAbs[g]+this.offset.click[g],m=this.items.length-1;0<=m;m--)if(a.contains(this.containers[e].element[0],this.items[m].item[0])&&this.items[m].item[0]!=this.currentItem[0]){var n=this.items[m].item.offset()[g],q=!1;Math.abs(n-l)>Math.abs(n+
this.items[m][h]-l)&&(q=!0,n+=this.items[m][h]);Math.abs(n-l)<c&&(c=Math.abs(n-l),f=this.items[m],this.direction=q?"up":"down")}if(f||this.options.dropOnEmpty)this.currentContainer=this.containers[e],f?this._rearrange(b,f,null,!0):this._rearrange(b,null,this.containers[e].element,!0),this._trigger("change",b,this._uiHash()),this.containers[e]._trigger("change",b,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[e]._trigger("over",b,this._uiHash(this)),
this.containers[e].containerCache.over=1}},_createHelper:function(b){var c=this.options;b=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"==c.helper?this.currentItem.clone():this.currentItem;b.parents("body").length||a("parent"!=c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(b[0]);b[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),
top:this.currentItem.css("top"),left:this.currentItem.css("left")});(""==b[0].style.width||c.forceHelperSize)&&b.width(this.currentItem.width());(""==b[0].style.height||c.forceHelperSize)&&b.height(this.currentItem.height());return b},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" "));a.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);
"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&
"html"==this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,
left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;"parent"==b.containment&&(b.containment=this.helper[0].parentNode);if("document"==b.containment||"window"==b.containment)this.containment=[0-this.offset.relative.left-this.offset.parent.left,
0-this.offset.relative.top-this.offset.parent.top,a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)){var c=a(b.containment)[0],b=a(b.containment).offset(),e="hidden"!=a(c).css("overflow");this.containment=[b.left+(parseInt(a(c).css("borderLeftWidth"),10)||
0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,b.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,b.left+(e?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,b.top+(e?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),
10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,c){c||(c=this.position);var e="absolute"==b?1:-1,f="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*e+this.offset.parent.top*e-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():g?0:f.scrollTop())*e,left:c.left+this.offset.relative.left*
e+this.offset.parent.left*e-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*e}},_generatePosition:function(b){var c=this.options,e="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());
var g=b.pageX,h=b.pageY;this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(g=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(h=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(g=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(h=this.containment[3]+this.offset.click.top)),c.grid&&(h=this.originalPageY+Math.round((h-
this.originalPageY)/c.grid[1])*c.grid[1],h=this.containment?h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3]?h-this.offset.click.top<this.containment[1]?h+c.grid[1]:h-c.grid[1]:h:h,g=this.originalPageX+Math.round((g-this.originalPageX)/c.grid[0])*c.grid[0],g=this.containment?g-this.offset.click.left<this.containment[0]||g-this.offset.click.left>this.containment[2]?g-this.offset.click.left<this.containment[0]?g+c.grid[0]:g-c.grid[0]:g:g));return{top:h-this.offset.click.top-
this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop()),left:g-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())}},_rearrange:function(a,c,e,f){e?e[0].appendChild(this.placeholder[0]):c.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?c.item[0]:c.item[0].nextSibling);var g=this.counter=this.counter?++this.counter:
1;this._delay(function(){g==this.counter&&this.refreshPositions(!f)})},_clear:function(b,c){this.reverting=!1;var e=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var f in this._storedCSS)if("auto"==this._storedCSS[f]||"static"==this._storedCSS[f])this._storedCSS[f]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&
!c&&e.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||c||e.push(function(a){this._trigger("update",a,this._uiHash())});this===this.currentContainer||c||(e.push(function(a){this._trigger("remove",a,this._uiHash())}),e.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),
e.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)));for(f=this.containers.length-1;0<=f;f--)c||e.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over&&(e.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over=0);this._storedCursor&&a("body").css("cursor",
this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex);this.dragging=!1;if(this.cancelHelperRemoval){if(!c){this._trigger("beforeStop",b,this._uiHash());for(f=0;f<e.length;f++)e[f].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1}c||this._trigger("beforeStop",b,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=
this.currentItem[0]&&this.helper.remove();this.helper=null;if(!c){for(f=0;f<e.length;f++)e[f].call(this,b);this._trigger("stop",b,this._uiHash())}this.fromOutside=!1;return!0},_trigger:function(){!1===a.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}})})(jQuery);
(function(a,c){var b=0,d={},e={};d.height=d.paddingTop=d.paddingBottom=d.borderTopWidth=d.borderBottomWidth="hide";e.height=e.paddingTop=e.paddingBottom=e.borderTopWidth=e.borderBottomWidth="show";a.widget("ui.accordion",{version:"1.9.1",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var c=this.accordionId=
"ui-accordion-"+(this.element.attr("id")||++b),d=this.options;this.prevShow=this.prevHide=a();this.element.addClass("ui-accordion ui-widget ui-helper-reset");this.headers=this.element.find(d.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all");this._hoverable(this.headers);this._focusable(this.headers);this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide();d.collapsible||!1!==d.active&&null!=d.active||(d.active=
0);0>d.active&&(d.active+=this.headers.length);this.active=this._findActive(d.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top");this.active.next().addClass("ui-accordion-content-active").show();this._createIcons();this.refresh();this.element.attr("role","tablist");this.headers.attr("role","tab").each(function(b){var d=a(this),e=d.attr("id"),g=d.next(),q=g.attr("id");e||(e=c+"-header-"+b,d.attr("id",e));q||(q=c+"-panel-"+b,g.attr("id",q));d.attr("aria-controls",
q);g.attr("aria-labelledby",e)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide();this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0);this._on(this.headers,{keydown:"_keydown"});this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._setupEvents(d.event)},
_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():a()}},_createIcons:function(){var b=this.options.icons;b&&(a("<span>").addClass("ui-accordion-header-icon ui-icon "+b.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(b.header).addClass(b.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},
_destroy:function(){var a;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")});this._destroyIcons();a=this.headers.next().css("display",
"").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")});"content"!==this.options.heightStyle&&a.css("height","")},_setOption:function(a,b){"active"===a?this._activate(b):("event"===a&&(this.options.event&&this._off(this.headers,this.options.event),
this._setupEvents(b)),this._super(a,b),"collapsible"!==a||b||!1!==this.options.active||this._activate(0),"icons"===a&&(this._destroyIcons(),b&&this._createIcons()),"disabled"===a&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!b))},_keydown:function(b){if(!b.altKey&&!b.ctrlKey){var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),m=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:m=this.headers[(e+1)%d];break;case c.LEFT:case c.UP:m=this.headers[(e-1+d)%d];
break;case c.SPACE:case c.ENTER:this._eventHandler(b);break;case c.HOME:m=this.headers[0];break;case c.END:m=this.headers[d-1]}m&&(a(b.target).attr("tabIndex",-1),a(m).attr("tabIndex",0),m.focus(),b.preventDefault())}},_panelKeyDown:function(b){b.keyCode===a.ui.keyCode.UP&&b.ctrlKey&&a(b.currentTarget).prev().focus()},refresh:function(){var b,c,d=this.options.heightStyle,e=this.element.parent();"fill"===d?(a.support.minHeight||(c=e.css("overflow"),e.css("overflow","hidden")),b=e.height(),this.element.siblings(":visible").each(function(){var c=
a(this),d=c.css("position");"absolute"!==d&&"fixed"!==d&&(b-=c.outerHeight(!0))}),c&&e.css("overflow",c),this.headers.each(function(){b-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,b-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===d&&(b=0,this.headers.next().each(function(){b=Math.max(b,a(this).height("").height())}).height(b))},_activate:function(b){b=this._findActive(b)[0];b!==this.active[0]&&(b=b||this.active[0],this._eventHandler({target:b,
currentTarget:b,preventDefault:a.noop}))},_findActive:function(b){return"number"===typeof b?this.headers.eq(b):a()},_setupEvents:function(b){var c={};b&&(a.each(b.split(" "),function(a,b){c[b]="_eventHandler"}),this._on(this.headers,c))},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget),m=e[0]===d[0],n=m&&c.collapsible,q=n?a():e.next(),t=d.next(),q={oldHeader:d,oldPanel:t,newHeader:n?a():e,newPanel:q};b.preventDefault();m&&!c.collapsible||!1===this._trigger("beforeActivate",
b,q)||(c.active=n?!1:this.headers.index(e),this.active=m?a():e,this._toggle(q),d.removeClass("ui-accordion-header-active ui-state-active"),c.icons&&d.children(".ui-accordion-header-icon").removeClass(c.icons.activeHeader).addClass(c.icons.header),m||(e.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),c.icons&&e.children(".ui-accordion-header-icon").removeClass(c.icons.header).addClass(c.icons.activeHeader),e.next().addClass("ui-accordion-content-active")))},
_toggle:function(b){var c=b.newPanel,d=this.prevShow.length?this.prevShow:b.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0);this.prevShow=c;this.prevHide=d;this.options.animate?this._animate(c,d,b):(d.hide(),c.show(),this._toggleComplete(b));d.attr({"aria-expanded":"false","aria-hidden":"true"});d.prev().attr("aria-selected","false");c.length&&d.length?d.prev().attr("tabIndex",-1):c.length&&this.headers.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1);c.attr({"aria-expanded":"true",
"aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(a,b,c){var l,m,n,q=this,t=0,x=a.length&&(!b.length||a.index()<b.index()),u=this.options.animate||{},x=x&&u.down||u,E=function(){q._toggleComplete(c)};"number"===typeof x&&(n=x);"string"===typeof x&&(m=x);m=m||x.easing||u.easing;n=n||x.duration||u.duration;if(!b.length)return a.animate(e,n,m,E);if(!a.length)return b.animate(d,n,m,E);l=a.show().outerHeight();b.animate(d,{duration:n,easing:m,step:function(a,b){b.now=
Math.round(a)}});a.hide().animate(e,{duration:n,easing:m,complete:E,step:function(a,c){c.now=Math.round(a);"height"!==c.prop?t+=c.now:"content"!==q.options.heightStyle&&(c.now=Math.round(l-b.outerHeight()-t),t=0)}})},_toggleComplete:function(a){var b=a.oldPanel;b.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");b.length&&(b.parent()[0].className=b.parent()[0].className);this._trigger("activate",null,a)}});!1!==a.uiBackCompat&&(function(a,b){a.extend(b.options,
{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var c=b._create;b._create=function(){if(this.options.navigation){var b=this,d=this.element.find(this.options.header),e=d.next(),g=d.add(e).find("a").filter(this.options.navigationFilter)[0];g&&d.add(e).each(function(c){if(a.contains(this,g))return b.options.active=Math.floor(c/2),!1})}c.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(a,b){a.extend(b.options,{heightStyle:null,autoHeight:!0,
clearStyle:!1,fillSpace:!1});var c=b._create,d=b._setOption;a.extend(b,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle();c.call(this)},_setOption:function(a){if("autoHeight"===a||"clearStyle"===a||"fillSpace"===a)this.options.heightStyle=this._mergeHeightStyle();d.apply(this,arguments)},_mergeHeightStyle:function(){var a=this.options;if(a.fillSpace)return"fill";if(a.clearStyle)return"content";if(a.autoHeight)return"auto"}})}(jQuery,jQuery.ui.accordion.prototype),
function(a,b){a.extend(b.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var c=b._createIcons;b._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected);c.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(a,b){b.activate=b._activate;var c=b._findActive;b._findActive=function(a){-1===a&&(a=!1);a&&"number"!==typeof a&&(a=this.headers.index(this.headers.filter(a)),-1===a&&(a=!1));
return c.call(this,a)}}(jQuery,jQuery.ui.accordion.prototype),jQuery.ui.accordion.prototype.resize=jQuery.ui.accordion.prototype.refresh,function(a,b){a.extend(b.options,{change:null,changestart:null});var c=b._trigger;b._trigger=function(a,b,d){var e=c.apply(this,arguments);if(!e)return!1;"beforeActivate"===a?e=c.call(this,"changestart",b,{oldHeader:d.oldHeader,oldContent:d.oldPanel,newHeader:d.newHeader,newContent:d.newPanel}):"activate"===a&&(e=c.call(this,"change",b,{oldHeader:d.oldHeader,oldContent:d.oldPanel,
newHeader:d.newHeader,newContent:d.newPanel}));return e}}(jQuery,jQuery.ui.accordion.prototype),function(a,b){a.extend(b.options,{animate:null,animated:"slide"});var c=b._create;b._create=function(){var a=this.options;null===a.animate&&(a.animate=a.animated?"slide"===a.animated?300:"bounceslide"===a.animated?{duration:200,down:{easing:"easeOutBounce",duration:1E3}}:a.animated:!1);c.call(this)}}(jQuery,jQuery.ui.accordion.prototype))})(jQuery);
(function(a,c){var b=0;a.widget("ui.autocomplete",{version:"1.9.1",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var b,c,f;this.isMultiLine=this._isMultiLine();this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"];this.isNewMenu=!0;this.element.addClass("ui-autocomplete-input").attr("autocomplete",
"off");this._on(this.element,{keydown:function(g){if(this.element.prop("readOnly"))c=f=b=!0;else{c=f=b=!1;var h=a.ui.keyCode;switch(g.keyCode){case h.PAGE_UP:b=!0;this._move("previousPage",g);break;case h.PAGE_DOWN:b=!0;this._move("nextPage",g);break;case h.UP:b=!0;this._keyEvent("previous",g);break;case h.DOWN:b=!0;this._keyEvent("next",g);break;case h.ENTER:case h.NUMPAD_ENTER:this.menu.active&&(b=!0,g.preventDefault(),this.menu.select(g));break;case h.TAB:this.menu.active&&this.menu.select(g);
break;case h.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(g),g.preventDefault());break;default:c=!0,this._searchTimeout(g)}}},keypress:function(f){if(b)b=!1,f.preventDefault();else if(!c){var h=a.ui.keyCode;switch(f.keyCode){case h.PAGE_UP:this._move("previousPage",f);break;case h.PAGE_DOWN:this._move("nextPage",f);break;case h.UP:this._keyEvent("previous",f);break;case h.DOWN:this._keyEvent("next",f)}}},input:function(a){f?(f=!1,a.preventDefault()):this._searchTimeout(a)},
focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(a){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(a),this._change(a))}});this._initSource();this.menu=a("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:a(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu");this._on(this.menu.element,{mousedown:function(b){b.preventDefault();this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur});
var c=this.menu.element[0];a(b.target).closest(".ui-menu-item").length||this._delay(function(){var b=this;this.document.one("mousedown",function(d){d.target===b.element[0]||d.target===c||a.contains(c,d.target)||b.close()})})},menufocus:function(b,c){if(this.isNewMenu&&(this.isNewMenu=!1,b.originalEvent&&/^mouse/.test(b.originalEvent.type))){this.menu.blur();this.document.one("mousemove",function(){a(b.target).trigger(b.originalEvent)});return}var d=c.item.data("ui-autocomplete-item")||c.item.data("item.autocomplete");
!1!==this._trigger("focus",b,{item:d})?b.originalEvent&&/^key/.test(b.originalEvent.type)&&this._value(d.value):this.liveRegion.text(d.value)},menuselect:function(a,b){var c=b.item.data("ui-autocomplete-item")||b.item.data("item.autocomplete"),d=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d;this.selectedItem=c}));!1!==this._trigger("select",a,{item:c})&&this._value(c.value);this.term=this._value();this.close(a);
this.selectedItem=c}});this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element);a.fn.bgiframe&&this.menu.element.bgiframe();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(a,b){this._super(a,
b);"source"===a&&this._initSource();"appendTo"===a&&this.menu.element.appendTo(this.document.find(b||"body")[0]);"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var b,c,f=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,e){e(a.ui.autocomplete.filter(b,c.term))}):"string"===typeof this.options.source?(c=this.options.source,
this.source=function(b,d){f.xhr&&f.xhr.abort();f.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){d(a)},error:function(){d([])}})}):this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching);this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,a))},this.options.delay)},search:function(a,b){a=null!=a?a:this._value();this.term=this._value();if(a.length<this.options.minLength)return this.close(b);if(!1!==this._trigger("search",
b))return this._search(a)},_search:function(a){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=!1;this.source({term:a},this._response())},_response:function(){var a=this,c=++b;return function(f){c===b&&a.__response(f);a.pending--;a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){a&&(a=this._normalize(a));this._trigger("response",null,{content:a});!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):
this._close()},close:function(a){this.cancelSearch=!0;this._close(a)},_close:function(a){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"===typeof b?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},
_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,b);this.menu.refresh();c.show();this._resizeMenu();c.position(a.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var f=this;a.each(c,function(a,c){f._renderItemData(b,c)})},_renderItemData:function(a,b){return this._renderItem(a,
b).data("ui-autocomplete-item",b)},_renderItem:function(b,c){return a("<li>").append(a("<a>").text(c.label)).appendTo(b)},_move:function(a,b){if(this.menu.element.is(":visible"))if(this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a))this._value(this.term),this.menu.blur();else this.menu[a](b);else this.search(null,b)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){if(!this.isMultiLine||
this.menu.element.is(":visible"))this._move(a,b),b.preventDefault()}});a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,c){var f=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return f.test(a.label||a.value||a)})}});a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(1<a?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},
__response:function(a){var b;this._superApply(arguments);this.options.disabled||this.cancelSearch||(b=a&&a.length?this.options.messages.results(a.length):this.options.messages.noResults,this.liveRegion.text(b))}})})(jQuery);
(function(a,c){var b,d,e,f,g=function(){var b=a(this).find(":ui-button");setTimeout(function(){b.button("refresh")},1)},h=function(b){var c=b.name,d=b.form,e=a([]);c&&(e=d?a(d).find("[name='"+c+"']"):a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form}));return e};a.widget("ui.button",{version:"1.9.1",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+
this.eventNamespace,g);"boolean"!==typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var c=this,m=this.options,n="checkbox"===this.type||"radio"===this.type,q="ui-state-hover"+(n?"":" ui-state-active");null===m.label&&(m.label="input"===this.type?this.buttonElement.val():this.buttonElement.html());this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role",
"button").bind("mouseenter"+this.eventNamespace,function(){m.disabled||(a(this).addClass("ui-state-hover"),this===b&&a(this).addClass("ui-state-active"))}).bind("mouseleave"+this.eventNamespace,function(){m.disabled||a(this).removeClass(q)}).bind("click"+this.eventNamespace,function(a){m.disabled&&(a.preventDefault(),a.stopImmediatePropagation())});this.element.bind("focus"+this.eventNamespace,function(){c.buttonElement.addClass("ui-state-focus")}).bind("blur"+this.eventNamespace,function(){c.buttonElement.removeClass("ui-state-focus")});
n&&(this.element.bind("change"+this.eventNamespace,function(){f||c.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(a){m.disabled||(f=!1,d=a.pageX,e=a.pageY)}).bind("mouseup"+this.eventNamespace,function(a){m.disabled||d===a.pageX&&e===a.pageY||(f=!0)}));"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(m.disabled||f)return!1;a(this).toggleClass("ui-state-active");c.buttonElement.attr("aria-pressed",c.element[0].checked)}):"radio"===
this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(m.disabled||f)return!1;a(this).addClass("ui-state-active");c.buttonElement.attr("aria-pressed","true");var b=c.element[0];h(b).not(b).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(m.disabled)return!1;a(this).addClass("ui-state-active");b=this;c.document.one("mouseup",function(){b=null})}).bind("mouseup"+
this.eventNamespace,function(){if(m.disabled)return!1;a(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(b){if(m.disabled)return!1;b.keyCode!==a.ui.keyCode.SPACE&&b.keyCode!==a.ui.keyCode.ENTER||a(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace,function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()}));this._setOption("disabled",m.disabled);
this._resetButton()},_determineButtonType:function(){var a,b;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";"checkbox"===this.type||"radio"===this.type?(a=this.element.parents().last(),b="label[for='"+this.element.attr("id")+"']",this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||
(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible"),(a=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",a)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());
this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(a,b){this._super(a,b);"disabled"===a?b?this.element.prop("disabled",!0):this.element.prop("disabled",!1):this._resetButton()},refresh:function(){var b=this.element.is(":disabled")||this.element.hasClass("ui-button-disabled");b!==this.options.disabled&&this._setOption("disabled",b);"radio"===this.type?h(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed",
"true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)this.options.label&&this.element.val(this.options.label);else{var b=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
c=a("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,f=[];d.primary||d.secondary?(this.options.text&&f.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(f.push(e?"ui-button-icons-only":
"ui-button-icon-only"),this.hasTitle||b.attr("title",a.trim(c)))):f.push("ui-button-text-only");b.addClass(f.join(" "))}}});a.widget("ui.buttonset",{version:"1.9.1",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,b){"disabled"===a&&this.buttons.button("option",a,b);this._super(a,b)},refresh:function(){var b=
"rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);
(function(a,c){function b(){this.debug=!1;this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass=
"ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),
weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,
beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};a.extend(this._defaults,this.regional[""]);this.dpDiv=d(a('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function d(b){return b.delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a",
"mouseout",function(){a(this).removeClass("ui-state-hover");-1!=this.className.indexOf("ui-datepicker-prev")&&a(this).removeClass("ui-datepicker-prev-hover");-1!=this.className.indexOf("ui-datepicker-next")&&a(this).removeClass("ui-datepicker-next-hover")}).delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a","mouseover",function(){a.datepicker._isDisabledDatepicker(g.inline?b.parent()[0]:g.input[0])||(a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),
a(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&a(this).addClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&a(this).addClass("ui-datepicker-next-hover"))})}function e(b,d){a.extend(b,d);for(var e in d)if(null==d[e]||d[e]==c)b[e]=d[e];return b}a.extend(a.ui,{datepicker:{version:"1.9.1"}});var f=(new Date).getTime(),g;a.extend(b.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",
arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){e(this._defaults,a||{});return this},_attachDatepicker:function(b,c){var d=null,e;for(e in this._defaults){var f=b.getAttribute("date:"+e);if(f){d=d||{};try{d[e]=eval(f)}catch(g){d[e]=f}}}e=b.nodeName.toLowerCase();f="div"==e||"span"==e;b.id||(this.uuid+=1,b.id="dp"+this.uuid);var x=this._newInst(a(b),f);x.settings=a.extend({},c||{},d||{});"input"==e?this._connectDatepicker(b,x):f&&this._inlineDatepicker(b,x)},_newInst:function(b,
c){return{id:b[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,dpDiv:c?d(a('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(b,c){var d=a(b);c.append=a([]);c.trigger=a([]);d.hasClass(this.markerClassName)||(this._attachments(d,c),d.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",
function(a,b,d){c.settings[b]=d}).bind("getData.datepicker",function(a,b){return this._get(c,b)}),this._autoSize(c),a.data(b,"datepicker",c),c.settings.disabled&&this._disableDatepicker(b))},_attachments:function(b,c){var d=this._get(c,"appendText"),e=this._get(c,"isRTL");c.append&&c.append.remove();d&&(c.append=a('<span class="'+this._appendClass+'">'+d+"</span>"),b[e?"before":"after"](c.append));b.unbind("focus",this._showDatepicker);c.trigger&&c.trigger.remove();d=this._get(c,"showOn");"focus"!=
d&&"both"!=d||b.focus(this._showDatepicker);if("button"==d||"both"==d){var d=this._get(c,"buttonText"),f=this._get(c,"buttonImage");c.trigger=a(this._get(c,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:f,alt:d,title:d}):a('<button type="button"></button>').addClass(this._triggerClass).html(""==f?d:a("<img/>").attr({src:f,alt:d,title:d})));b[e?"before":"after"](c.trigger);c.trigger.click(function(){a.datepicker._datepickerShowing&&a.datepicker._lastInput==b[0]?a.datepicker._hideDatepicker():
(a.datepicker._datepickerShowing&&a.datepicker._lastInput!=b[0]&&a.datepicker._hideDatepicker(),a.datepicker._showDatepicker(b[0]));return!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){for(var b=0,c=0,d=0;d<a.length;d++)a[d].length>b&&(b=a[d].length,c=d);return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort")));b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":
"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(b,c){var d=a(b);d.hasClass(this.markerClassName)||(d.addClass(this.markerClassName).append(c.dpDiv).bind("setData.datepicker",function(a,b,d){c.settings[b]=d}).bind("getData.datepicker",function(a,b){return this._get(c,b)}),a.data(b,"datepicker",c),this._setDate(c,this._getDefaultDate(c),!0),this._updateDatepicker(c),this._updateAlternate(c),c.settings.disabled&&this._disableDatepicker(b),
c.dpDiv.css("display","block"))},_dialogDatepicker:function(b,c,d,f,g){b=this._dialogInst;b||(this.uuid+=1,this._dialogInput=a('<input type="text" id="dp'+this.uuid+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),a("body").append(this._dialogInput),b=this._dialogInst=this._newInst(this._dialogInput,!1),b.settings={},a.data(this._dialogInput[0],"datepicker",b));e(b.settings,f||{});c=c&&c.constructor==Date?this._formatDate(b,c):c;this._dialogInput.val(c);
this._pos=g?g.length?g:[g.pageX,g.pageY]:null;this._pos||(this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)]);this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");b.settings.onSelect=d;this._inDialog=!0;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);a.blockUI&&a.blockUI(this.dpDiv);
a.data(this._dialogInput[0],"datepicker",b);return this},_destroyDatepicker:function(b){var c=a(b),d=a.data(b,"datepicker");if(c.hasClass(this.markerClassName)){var e=b.nodeName.toLowerCase();a.removeData(b,"datepicker");"input"==e?(d.append.remove(),d.trigger.remove(),c.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!=e&&"span"!=e||c.removeClass(this.markerClassName).empty()}},
_enableDatepicker:function(b){var c=a(b),d=a.data(b,"datepicker");if(c.hasClass(this.markerClassName)){var e=b.nodeName.toLowerCase();if("input"==e)b.disabled=!1,d.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==e||"span"==e)c=c.children("."+this._inlineClass),c.children().removeClass("ui-state-disabled"),c.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1);this._disabledInputs=a.map(this._disabledInputs,
function(a){return a==b?null:a})}},_disableDatepicker:function(b){var c=a(b),d=a.data(b,"datepicker");if(c.hasClass(this.markerClassName)){var e=b.nodeName.toLowerCase();if("input"==e)b.disabled=!0,d.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==e||"span"==e)c=c.children("."+this._inlineClass),c.children().addClass("ui-state-disabled"),c.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",
!0);this._disabledInputs=a.map(this._disabledInputs,function(a){return a==b?null:a});this._disabledInputs[this._disabledInputs.length]=b}},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(b){try{return a.data(b,"datepicker")}catch(c){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(b,d,f){var g=this._getInst(b);if(2==arguments.length&&"string"==typeof d)return"defaults"==
d?a.extend({},a.datepicker._defaults):g?"all"==d?a.extend({},g.settings):this._get(g,d):null;var q=d||{};"string"==typeof d&&(q={},q[d]=f);if(g){this._curInst==g&&this._hideDatepicker();var t=this._getDateDatepicker(b,!0),x=this._getMinMaxDate(g,"min"),u=this._getMinMaxDate(g,"max");e(g.settings,q);null!==x&&q.dateFormat!==c&&q.minDate===c&&(g.settings.minDate=this._formatDate(g,x));null!==u&&q.dateFormat!==c&&q.maxDate===c&&(g.settings.maxDate=this._formatDate(g,u));this._attachments(a(b),g);this._autoSize(g);
this._setDate(g,t);this._updateAlternate(g);this._updateDatepicker(g)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);c&&!c.inline&&this._setDateFromField(c,b);return c?this._getDate(c):null},_doKeyDown:function(b){var c=
a.datepicker._getInst(b.target),d=!0,e=c.dpDiv.is(".ui-datepicker-rtl");c._keyEvent=!0;if(a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker();d=!1;break;case 13:return d=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",c.dpDiv),d[0]&&a.datepicker._selectDay(b.target,c.selectedMonth,c.selectedYear,d[0]),(b=a.datepicker._get(c,"onSelect"))?(d=a.datepicker._formatDate(c),b.apply(c.input?c.input[0]:null,[d,c])):a.datepicker._hideDatepicker(),
!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(c,"stepBigMonths"):-a.datepicker._get(c,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(c,"stepBigMonths"):+a.datepicker._get(c,"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&a.datepicker._clearDate(b.target);d=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&a.datepicker._gotoToday(b.target);d=b.ctrlKey||b.metaKey;
break;case 37:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,e?1:-1,"D");d=b.ctrlKey||b.metaKey;b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(c,"stepBigMonths"):-a.datepicker._get(c,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,-7,"D");d=b.ctrlKey||b.metaKey;break;case 39:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,e?-1:1,"D");d=b.ctrlKey||b.metaKey;b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,
b.ctrlKey?+a.datepicker._get(c,"stepBigMonths"):+a.datepicker._get(c,"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,7,"D");d=b.ctrlKey||b.metaKey;break;default:d=!1}else 36==b.keyCode&&b.ctrlKey?a.datepicker._showDatepicker(this):d=!1;d&&(b.preventDefault(),b.stopPropagation())},_doKeyPress:function(b){var d=a.datepicker._getInst(b.target);if(a.datepicker._get(d,"constrainInput")){var d=a.datepicker._possibleChars(a.datepicker._get(d,"dateFormat")),e=String.fromCharCode(b.charCode==
c?b.keyCode:b.charCode);return b.ctrlKey||b.metaKey||" ">e||!d||-1<d.indexOf(e)}},_doKeyUp:function(b){b=a.datepicker._getInst(b.target);if(b.input.val()!=b.lastVal)try{a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,a.datepicker._getFormatConfig(b))&&(a.datepicker._setDateFromField(b),a.datepicker._updateAlternate(b),a.datepicker._updateDatepicker(b))}catch(c){a.datepicker.log(c)}return!0},_showDatepicker:function(b){b=b.target||b;"input"!=b.nodeName.toLowerCase()&&
(b=a("input",b.parentNode)[0]);if(!a.datepicker._isDisabledDatepicker(b)&&a.datepicker._lastInput!=b){var c=a.datepicker._getInst(b);a.datepicker._curInst&&a.datepicker._curInst!=c&&(a.datepicker._curInst.dpDiv.stop(!0,!0),c&&a.datepicker._datepickerShowing&&a.datepicker._hideDatepicker(a.datepicker._curInst.input[0]));var d=a.datepicker._get(c,"beforeShow"),d=d?d.apply(b,[b,c]):{};if(!1!==d){e(c.settings,d);c.lastVal=null;a.datepicker._lastInput=b;a.datepicker._setDateFromField(c);a.datepicker._inDialog&&
(b.value="");a.datepicker._pos||(a.datepicker._pos=a.datepicker._findPos(b),a.datepicker._pos[1]+=b.offsetHeight);var f=!1;a(b).parents().each(function(){f|="fixed"==a(this).css("position");return!f});d={left:a.datepicker._pos[0],top:a.datepicker._pos[1]};a.datepicker._pos=null;c.dpDiv.empty();c.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});a.datepicker._updateDatepicker(c);d=a.datepicker._checkOffset(c,d,f);c.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":f?"fixed":
"absolute",display:"none",left:d.left+"px",top:d.top+"px"});if(!c.inline){var d=a.datepicker._get(c,"showAnim"),g=a.datepicker._get(c,"duration"),t=function(){var b=c.dpDiv.find("iframe.ui-datepicker-cover");if(b.length){var d=a.datepicker._getBorders(c.dpDiv);b.css({left:-d[0],top:-d[1],width:c.dpDiv.outerWidth(),height:c.dpDiv.outerHeight()})}};c.dpDiv.zIndex(a(b).zIndex()+1);a.datepicker._datepickerShowing=!0;if(a.effects&&(a.effects.effect[d]||a.effects[d]))c.dpDiv.show(d,a.datepicker._get(c,
"showOptions"),g,t);else c.dpDiv[d||"show"](d?g:null,t);d&&g||t();c.input.is(":visible")&&!c.input.is(":disabled")&&c.input.focus();a.datepicker._curInst=c}}}},_updateDatepicker:function(b){this.maxRows=4;var c=a.datepicker._getBorders(b.dpDiv);g=b;b.dpDiv.empty().append(this._generateHTML(b));this._attachHandlers(b);var d=b.dpDiv.find("iframe.ui-datepicker-cover");d.length&&d.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()});b.dpDiv.find("."+this._dayOverClass+" a").mouseover();
c=this._getNumberOfMonths(b);d=c[1];b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");1<d&&b.dpDiv.addClass("ui-datepicker-multi-"+d).css("width",17*d+"em");b.dpDiv[(1!=c[0]||1!=c[1]?"add":"remove")+"Class"]("ui-datepicker-multi");b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");b==a.datepicker._curInst&&a.datepicker._datepickerShowing&&b.input&&b.input.is(":visible")&&!b.input.is(":disabled")&&b.input[0]!=document.activeElement&&
b.input.focus();if(b.yearshtml){var e=b.yearshtml;setTimeout(function(){e===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml);e=b.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(b,c,d){var e=b.dpDiv.outerWidth(),f=b.dpDiv.outerHeight(),g=b.input?b.input.outerWidth():0,x=b.input?b.input.outerHeight():
0,u=document.documentElement.clientWidth+(d?0:a(document).scrollLeft()),E=document.documentElement.clientHeight+(d?0:a(document).scrollTop());c.left-=this._get(b,"isRTL")?e-g:0;c.left-=d&&c.left==b.input.offset().left?a(document).scrollLeft():0;c.top-=d&&c.top==b.input.offset().top+x?a(document).scrollTop():0;c.left-=Math.min(c.left,c.left+e>u&&u>e?Math.abs(c.left+e-u):0);c.top-=Math.min(c.top,c.top+f>E&&E>f?Math.abs(f+x):0);return c},_findPos:function(b){for(var c=this._getInst(b),c=this._get(c,
"isRTL");b&&("hidden"==b.type||1!=b.nodeType||a.expr.filters.hidden(b));)b=b[c?"previousSibling":"nextSibling"];b=a(b).offset();return[b.left,b.top]},_hideDatepicker:function(b){var c=this._curInst;if(c&&(!b||c==a.data(b,"datepicker"))&&this._datepickerShowing){b=this._get(c,"showAnim");var d=this._get(c,"duration"),e=function(){a.datepicker._tidyDialog(c)};if(a.effects&&(a.effects.effect[b]||a.effects[b]))c.dpDiv.hide(b,a.datepicker._get(c,"showOptions"),d,e);else c.dpDiv["slideDown"==b?"slideUp":
"fadeIn"==b?"fadeOut":"hide"](b?d:null,e);b||e();this._datepickerShowing=!1;(b=this._get(c,"onClose"))&&b.apply(c.input?c.input[0]:null,[c.input?c.input.val():"",c]);this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(b){if(a.datepicker._curInst){b=
a(b.target);var c=a.datepicker._getInst(b[0]);(!(b[0].id==a.datepicker._mainDivId||0!=b.parents("#"+a.datepicker._mainDivId).length||b.hasClass(a.datepicker.markerClassName)||b.closest("."+a.datepicker._triggerClass).length||!a.datepicker._datepickerShowing||a.datepicker._inDialog&&a.blockUI)||b.hasClass(a.datepicker.markerClassName)&&a.datepicker._curInst!=c)&&a.datepicker._hideDatepicker()}},_adjustDate:function(b,c,d){b=a(b);var e=this._getInst(b[0]);this._isDisabledDatepicker(b[0])||(this._adjustInstDate(e,
c+("M"==d?this._get(e,"showCurrentAtPos"):0),d),this._updateDatepicker(e))},_gotoToday:function(b){b=a(b);var c=this._getInst(b[0]);if(this._get(c,"gotoCurrent")&&c.currentDay)c.selectedDay=c.currentDay,c.drawMonth=c.selectedMonth=c.currentMonth,c.drawYear=c.selectedYear=c.currentYear;else{var d=new Date;c.selectedDay=d.getDate();c.drawMonth=c.selectedMonth=d.getMonth();c.drawYear=c.selectedYear=d.getFullYear()}this._notifyChange(c);this._adjustDate(b)},_selectMonthYear:function(b,c,d){b=a(b);var e=
this._getInst(b[0]);e["selected"+("M"==d?"Month":"Year")]=e["draw"+("M"==d?"Month":"Year")]=parseInt(c.options[c.selectedIndex].value,10);this._notifyChange(e);this._adjustDate(b)},_selectDay:function(b,c,d,e){var f=a(b);a(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(f[0])||(f=this._getInst(f[0]),f.selectedDay=f.currentDay=a("a",e).html(),f.selectedMonth=f.currentMonth=c,f.selectedYear=f.currentYear=d,this._selectDate(b,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},
_clearDate:function(b){b=a(b);this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(b,c){var d=a(b),d=this._getInst(d[0]);c=null!=c?c:this._formatDate(d);d.input&&d.input.val(c);this._updateAlternate(d);var e=this._get(d,"onSelect");e?e.apply(d.input?d.input[0]:null,[c,d]):d.input&&d.input.trigger("change");d.inline?this._updateDatepicker(d):(this._hideDatepicker(),this._lastInput=d.input[0],"object"!=typeof d.input[0]&&d.input.focus(),this._lastInput=null)},_updateAlternate:function(b){var c=
this._get(b,"altField");if(c){var d=this._get(b,"altFormat")||this._get(b,"dateFormat"),e=this._getDate(b),f=this.formatDate(d,e,this._getFormatConfig(b));a(c).each(function(){a(this).val(f)})}},noWeekends:function(a){a=a.getDay();return[0<a&&6>a,""]},iso8601Week:function(a){a=new Date(a.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));var b=a.getTime();a.setMonth(0);a.setDate(1);return Math.floor(Math.round((b-a)/864E5)/7)+1},parseDate:function(b,c,d){if(null==b||null==c)throw"Invalid arguments";
c="object"==typeof c?c.toString():c+"";if(""==c)return null;for(var e=(d?d.shortYearCutoff:null)||this._defaults.shortYearCutoff,e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),f=(d?d.dayNamesShort:null)||this._defaults.dayNamesShort,g=(d?d.dayNames:null)||this._defaults.dayNames,x=(d?d.monthNamesShort:null)||this._defaults.monthNamesShort,u=(d?d.monthNames:null)||this._defaults.monthNames,E=d=-1,A=-1,H=-1,I=!1,y=function(a){(a=M+1<b.length&&b.charAt(M+1)==a)&&M++;return a},D=function(a){var b=
y(a);a=new RegExp("^\\d{1,"+("@"==a?14:"!"==a?20:"y"==a&&b?4:"o"==a?3:2)+"}");a=c.substring(N).match(a);if(!a)throw"Missing number at position "+N;N+=a[0].length;return parseInt(a[0],10)},F=function(b,d,e){b=a.map(y(b)?e:d,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});var f=-1;a.each(b,function(a,b){var d=b[1];if(c.substr(N,d.length).toLowerCase()==d.toLowerCase())return f=b[0],N+=d.length,!1});if(-1!=f)return f+1;throw"Unknown name at position "+N;},G=function(){if(c.charAt(N)!=
b.charAt(M))throw"Unexpected literal at position "+N;N++},N=0,M=0;M<b.length;M++)if(I)"'"!=b.charAt(M)||y("'")?G():I=!1;else switch(b.charAt(M)){case "d":A=D("d");break;case "D":F("D",f,g);break;case "o":H=D("o");break;case "m":E=D("m");break;case "M":E=F("M",x,u);break;case "y":d=D("y");break;case "@":var P=new Date(D("@"));d=P.getFullYear();E=P.getMonth()+1;A=P.getDate();break;case "!":P=new Date((D("!")-this._ticksTo1970)/1E4);d=P.getFullYear();E=P.getMonth()+1;A=P.getDate();break;case "'":y("'")?
G():I=!0;break;default:G()}if(N<c.length&&(f=c.substr(N),!/^\s+/.test(f)))throw"Extra/unparsed characters found in date: "+f;-1==d?d=(new Date).getFullYear():100>d&&(d+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d<=e?0:-100));if(-1<H){E=1;A=H;do{e=this._getDaysInMonth(d,E-1);if(A<=e)break;E++;A-=e}while(1)}P=this._daylightSavingAdjust(new Date(d,E-1,A));if(P.getFullYear()!=d||P.getMonth()+1!=E||P.getDate()!=A)throw"Invalid date";return P},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",
RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864E9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(a,b,c){if(!b)return"";var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort;c=(c?c.monthNames:null)||this._defaults.monthNames;var g=
function(b){(b=I+1<a.length&&a.charAt(I+1)==b)&&I++;return b},u=function(a,b,c){b=""+b;if(g(a))for(;b.length<c;)b="0"+b;return b},E=function(a,b,c,d){return g(a)?d[b]:c[b]},A="",H=!1;if(b)for(var I=0;I<a.length;I++)if(H)"'"!=a.charAt(I)||g("'")?A+=a.charAt(I):H=!1;else switch(a.charAt(I)){case "d":A+=u("d",b.getDate(),2);break;case "D":A+=E("D",b.getDay(),d,e);break;case "o":A+=u("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-(new Date(b.getFullYear(),0,0)).getTime())/
864E5),3);break;case "m":A+=u("m",b.getMonth()+1,2);break;case "M":A+=E("M",b.getMonth(),f,c);break;case "y":A+=g("y")?b.getFullYear():(10>b.getYear()%100?"0":"")+b.getYear()%100;break;case "@":A+=b.getTime();break;case "!":A+=1E4*b.getTime()+this._ticksTo1970;break;case "'":g("'")?A+="'":H=!0;break;default:A+=a.charAt(I)}return A},_possibleChars:function(a){for(var b="",c=!1,d=function(b){(b=e+1<a.length&&a.charAt(e+1)==b)&&e++;return b},e=0;e<a.length;e++)if(c)"'"!=a.charAt(e)||d("'")?b+=a.charAt(e):
c=!1;else switch(a.charAt(e)){case "d":case "m":case "y":case "@":b+="0123456789";break;case "D":case "M":return null;case "'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(e)}return b},_get:function(a,b){return a.settings[b]!==c?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e,f;e=f=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{e=this.parseDate(c,d,g)||f}catch(u){this.log(u),
d=b?"":d}a.selectedDay=e.getDate();a.drawMonth=a.selectedMonth=e.getMonth();a.drawYear=a.selectedYear=e.getFullYear();a.currentDay=d?e.getDate():0;a.currentMonth=d?e.getMonth():0;a.currentYear=d?e.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(b,c,d){var e=function(a){var b=new Date;b.setDate(b.getDate()+a);return b},f=function(c){try{return a.datepicker.parseDate(a.datepicker._get(b,
"dateFormat"),c,a.datepicker._getFormatConfig(b))}catch(d){}for(var e=(c.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,f=e.getFullYear(),g=e.getMonth(),e=e.getDate(),l=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,m=l.exec(c);m;){switch(m[2]||"d"){case "d":case "D":e+=parseInt(m[1],10);break;case "w":case "W":e+=7*parseInt(m[1],10);break;case "m":case "M":g+=parseInt(m[1],10);e=Math.min(e,a.datepicker._getDaysInMonth(f,g));break;case "y":case "Y":f+=parseInt(m[1],10),e=Math.min(e,a.datepicker._getDaysInMonth(f,
g))}m=l.exec(c)}return new Date(f,g,e)};if(c=(c=null==c||""===c?d:"string"==typeof c?f(c):"number"==typeof c?isNaN(c)?d:e(c):new Date(c.getTime()))&&"Invalid Date"==c.toString()?d:c)c.setHours(0),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0);return this._daylightSavingAdjust(c)},_daylightSavingAdjust:function(a){if(!a)return null;a.setHours(12<a.getHours()?a.getHours()+2:0);return a},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear;b=this._restrictMinMax(a,this._determineDate(a,
b,new Date));a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();e==a.selectedMonth&&f==a.selectedYear||c||this._notifyChange(a);this._adjustInstDate(a);a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&""==a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_attachHandlers:function(b){var c=this._get(b,
"stepMonths"),d="#"+b.id.replace(/\\\\/g,"\\");b.dpDiv.find("[data-handler]").map(function(){a(this).bind(this.getAttribute("data-event"),{prev:function(){window["DP_jQuery_"+f].datepicker._adjustDate(d,-c,"M")},next:function(){window["DP_jQuery_"+f].datepicker._adjustDate(d,+c,"M")},hide:function(){window["DP_jQuery_"+f].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+f].datepicker._gotoToday(d)},selectDay:function(){window["DP_jQuery_"+f].datepicker._selectDay(d,+this.getAttribute("data-month"),
+this.getAttribute("data-year"),this);return!1},selectMonth:function(){window["DP_jQuery_"+f].datepicker._selectMonthYear(d,this,"M");return!1},selectYear:function(){window["DP_jQuery_"+f].datepicker._selectMonthYear(d,this,"Y");return!1}}[this.getAttribute("data-handler")])})},_generateHTML:function(b){var c=new Date,c=this._daylightSavingAdjust(new Date(c.getFullYear(),c.getMonth(),c.getDate())),d=this._get(b,"isRTL"),e=this._get(b,"showButtonPanel"),f=this._get(b,"hideIfNoPrevNext"),g=this._get(b,
"navigationAsDateFormat"),x=this._getNumberOfMonths(b),u=this._get(b,"showCurrentAtPos"),E=this._get(b,"stepMonths"),A=1!=x[0]||1!=x[1],H=this._daylightSavingAdjust(b.currentDay?new Date(b.currentYear,b.currentMonth,b.currentDay):new Date(9999,9,9)),I=this._getMinMaxDate(b,"min"),y=this._getMinMaxDate(b,"max"),u=b.drawMonth-u,D=b.drawYear;0>u&&(u+=12,D--);if(y)for(var F=this._daylightSavingAdjust(new Date(y.getFullYear(),y.getMonth()-x[0]*x[1]+1,y.getDate())),F=I&&F<I?I:F;this._daylightSavingAdjust(new Date(D,
u,1))>F;)u--,0>u&&(u=11,D--);b.drawMonth=u;b.drawYear=D;var F=this._get(b,"prevText"),F=g?this.formatDate(F,this._daylightSavingAdjust(new Date(D,u-E,1)),this._getFormatConfig(b)):F,F=this._canAdjustMonth(b,-1,D,u)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+F+'"><span class="ui-icon ui-icon-circle-triangle-'+(d?"e":"w")+'">'+F+"</span></a>":f?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+F+'"><span class="ui-icon ui-icon-circle-triangle-'+
(d?"e":"w")+'">'+F+"</span></a>",G=this._get(b,"nextText"),G=g?this.formatDate(G,this._daylightSavingAdjust(new Date(D,u+E,1)),this._getFormatConfig(b)):G,f=this._canAdjustMonth(b,1,D,u)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+G+'"><span class="ui-icon ui-icon-circle-triangle-'+(d?"w":"e")+'">'+G+"</span></a>":f?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+G+'"><span class="ui-icon ui-icon-circle-triangle-'+(d?"w":
"e")+'">'+G+"</span></a>",E=this._get(b,"currentText"),G=this._get(b,"gotoCurrent")&&b.currentDay?H:c,E=g?this.formatDate(E,G,this._getFormatConfig(b)):E,g=b.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(b,"closeText")+"</button>",e=e?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(d?g:"")+(this._isInRange(b,G)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+
E+"</button>":"")+(d?"":g)+"</div>":"",g=parseInt(this._get(b,"firstDay"),10),g=isNaN(g)?0:g,E=this._get(b,"showWeek"),G=this._get(b,"dayNames");this._get(b,"dayNamesShort");var N=this._get(b,"dayNamesMin"),M=this._get(b,"monthNames"),P=this._get(b,"monthNamesShort"),O=this._get(b,"beforeShowDay"),pa=this._get(b,"showOtherMonths"),ka=this._get(b,"selectOtherMonths");this._get(b,"calculateWeek");for(var Ca=this._getDefaultDate(b),ra="",aa=0;aa<x[0];aa++){var wa="";this.maxRows=4;for(var va=0;va<x[1];va++){var sa=
this._daylightSavingAdjust(new Date(D,u,b.selectedDay)),qa=" ui-corner-all",na="";if(A){na+='<div class="ui-datepicker-group';if(1<x[1])switch(va){case 0:na+=" ui-datepicker-group-first";qa=" ui-corner-"+(d?"right":"left");break;case x[1]-1:na+=" ui-datepicker-group-last";qa=" ui-corner-"+(d?"left":"right");break;default:na+=" ui-datepicker-group-middle",qa=""}na+='">'}for(var na=na+('<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+qa+'">'+(/all|left/.test(qa)&&0==aa?d?f:F:"")+
(/all|right/.test(qa)&&0==aa?d?F:f:"")+this._generateMonthYearHeader(b,u,D,I,y,0<aa||0<va,M,P)+'</div><table class="ui-datepicker-calendar"><thead><tr>'),Q=E?'<th class="ui-datepicker-week-col">'+this._get(b,"weekHeader")+"</th>":"",qa=0;7>qa;qa++)var da=(qa+g)%7,Q=Q+("<th"+(5<=(qa+g+6)%7?' class="ui-datepicker-week-end"':"")+'><span title="'+G[da]+'">'+N[da]+"</span></th>");na+=Q+"</tr></thead><tbody>";Q=this._getDaysInMonth(D,u);D==b.selectedYear&&u==b.selectedMonth&&(b.selectedDay=Math.min(b.selectedDay,
Q));qa=(this._getFirstDayOfMonth(D,u)-g+7)%7;Q=Math.ceil((qa+Q)/7);this.maxRows=Q=A?this.maxRows>Q?this.maxRows:Q:Q;for(var da=this._daylightSavingAdjust(new Date(D,u,1-qa)),nb=0;nb<Q;nb++){for(var na=na+"<tr>",ib=E?'<td class="ui-datepicker-week-col">'+this._get(b,"calculateWeek")(da)+"</td>":"",qa=0;7>qa;qa++){var Ga=O?O.apply(b.input?b.input[0]:null,[da]):[!0,""],ta=da.getMonth()!=u,Da=ta&&!ka||!Ga[0]||I&&da<I||y&&da>y,ib=ib+('<td class="'+(5<=(qa+g+6)%7?" ui-datepicker-week-end":"")+(ta?" ui-datepicker-other-month":
"")+(da.getTime()==sa.getTime()&&u==b.selectedMonth&&b._keyEvent||Ca.getTime()==da.getTime()&&Ca.getTime()==sa.getTime()?" "+this._dayOverClass:"")+(Da?" "+this._unselectableClass+" ui-state-disabled":"")+(ta&&!pa?"":" "+Ga[1]+(da.getTime()==H.getTime()?" "+this._currentClass:"")+(da.getTime()==c.getTime()?" ui-datepicker-today":""))+'"'+(ta&&!pa||!Ga[2]?"":' title="'+Ga[2]+'"')+(Da?"":' data-handler="selectDay" data-event="click" data-month="'+da.getMonth()+'" data-year="'+da.getFullYear()+'"')+
">"+(ta&&!pa?"&#xa0;":Da?'<span class="ui-state-default">'+da.getDate()+"</span>":'<a class="ui-state-default'+(da.getTime()==c.getTime()?" ui-state-highlight":"")+(da.getTime()==H.getTime()?" ui-state-active":"")+(ta?" ui-priority-secondary":"")+'" href="#">'+da.getDate()+"</a>")+"</td>");da.setDate(da.getDate()+1);da=this._daylightSavingAdjust(da)}na+=ib+"</tr>"}u++;11<u&&(u=0,D++);na+="</tbody></table>"+(A?"</div>"+(0<x[0]&&va==x[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");wa+=na}ra+=
wa}ra+=e+(a.ui.ie6&&!b.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");b._keyEvent=!1;return ra},_generateMonthYearHeader:function(a,b,c,d,e,f,g,u){var E=this._get(a,"changeMonth"),A=this._get(a,"changeYear"),H=this._get(a,"showMonthAfterYear"),I='<div class="ui-datepicker-title">',y="";if(f||!E)y+='<span class="ui-datepicker-month">'+g[b]+"</span>";else{g=d&&d.getFullYear()==c;for(var D=e&&e.getFullYear()==c,y=y+'<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">',
F=0;12>F;F++)(!g||F>=d.getMonth())&&(!D||F<=e.getMonth())&&(y+='<option value="'+F+'"'+(F==b?' selected="selected"':"")+">"+u[F]+"</option>");y+="</select>"}H||(I+=y+(!f&&E&&A?"":"&#xa0;"));if(!a.yearshtml)if(a.yearshtml="",f||!A)I+='<span class="ui-datepicker-year">'+c+"</span>";else{u=this._get(a,"yearRange").split(":");var G=(new Date).getFullYear();g=function(a){a=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?G+parseInt(a,10):parseInt(a,10);return isNaN(a)?G:a};b=g(u[0]);
u=Math.max(b,g(u[1]||""));b=d?Math.max(b,d.getFullYear()):b;u=e?Math.min(u,e.getFullYear()):u;for(a.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';b<=u;b++)a.yearshtml+='<option value="'+b+'"'+(b==c?' selected="selected"':"")+">"+b+"</option>";a.yearshtml+="</select>";I+=a.yearshtml;a.yearshtml=null}I+=this._get(a,"yearSuffix");H&&(I+=(!f&&E&&A?"":"&#xa0;")+y);return I+"</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"==c?b:0),e=a.drawMonth+
("M"==c?b:0);b=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"==c?b:0);d=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,b)));a.selectedDay=d.getDate();a.drawMonth=a.selectedMonth=d.getMonth();a.drawYear=a.selectedYear=d.getFullYear();"M"!=c&&"Y"!=c||this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),c=c&&b<c?c:b;return d&&c>d?d:c},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?
a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=this._get(a,"numberOfMonths");return null==a?[1,1]:"number"==typeof a?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a);c=this._daylightSavingAdjust(new Date(c,
d+(0>b?b:e[0]*e[1]),1));0>b&&c.setDate(this._getDaysInMonth(c.getFullYear(),c.getMonth()));return this._isInRange(a,c)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff"),b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,
"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);b=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});a.fn.datepicker=function(b){if(!this.length)return this;
a.datepicker.initialized||(a(document).mousedown(a.datepicker._checkExternalClick).find(document.body).append(a.datepicker.dpDiv),a.datepicker.initialized=!0);var c=Array.prototype.slice.call(arguments,1);return"string"==typeof b&&("isDisabled"==b||"getDate"==b||"widget"==b)||"option"==b&&2==arguments.length&&"string"==typeof arguments[1]?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c)):this.each(function(){"string"==typeof b?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,
[this].concat(c)):a.datepicker._attachDatepicker(this,b)})};a.datepicker=new b;a.datepicker.initialized=!1;a.datepicker.uuid=(new Date).getTime();a.datepicker.version="1.9.1";window["DP_jQuery_"+f]=a})(jQuery);
(function(a,c){var b={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},d={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};a.widget("ui.dialog",{version:"1.9.1",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var c=a(this).css(b).offset().top;0>c&&a(this).css("top",
b.top-c)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");"string"!==typeof this.originalTitle&&(this.originalTitle="");this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.options.title=this.options.title||this.originalTitle;var b=this,c=this.options,d=c.title||"&#160;",h,l,m,n;h=(this.uiDialog=a("<div>")).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+
c.dialogClass).css({display:"none",outline:0,zIndex:c.zIndex}).attr("tabIndex",-1).keydown(function(d){c.closeOnEscape&&!d.isDefaultPrevented()&&d.keyCode&&d.keyCode===a.ui.keyCode.ESCAPE&&(b.close(d),d.preventDefault())}).mousedown(function(a){b.moveToTop(!1,a)}).appendTo("body");this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(h);l=(this.uiDialogTitlebar=a("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").bind("mousedown",
function(){h.focus()}).prependTo(h);m=a("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(a){a.preventDefault();b.close(a)}).appendTo(l);(this.uiDialogTitlebarCloseText=a("<span>")).addClass("ui-icon ui-icon-closethick").text(c.closeText).appendTo(m);d=a("<span>").uniqueId().addClass("ui-dialog-title").html(d).prependTo(l);n=(this.uiDialogButtonPane=a("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");(this.uiButtonSet=
a("<div>")).addClass("ui-dialog-buttonset").appendTo(n);h.attr({role:"dialog","aria-labelledby":d.attr("id")});l.find("*").add(l).disableSelection();this._hoverable(m);this._focusable(m);c.draggable&&a.fn.draggable&&this._makeDraggable();c.resizable&&a.fn.resizable&&this._makeResizable();this._createButtons(c.buttons);this._isOpen=!1;a.fn.bgiframe&&h.bgiframe();this._on(h,{keydown:function(b){if(c.modal&&b.keyCode===a.ui.keyCode.TAB){var d=a(":tabbable",h),e=d.filter(":first"),d=d.filter(":last");
if(b.target===d[0]&&!b.shiftKey)return e.focus(1),!1;if(b.target===e[0]&&b.shiftKey)return d.focus(1),!1}}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var a,b=this.oldPosition;this.overlay&&this.overlay.destroy();this.uiDialog.hide();this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");this.uiDialog.remove();this.originalTitle&&this.element.attr("title",this.originalTitle);a=b.parent.children().eq(b.index);a.length&&a[0]!==this.element[0]?
a.before(this.element):b.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(b){var c=this,d,h;if(this._isOpen&&!1!==this._trigger("beforeClose",b))return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this._hide(this.uiDialog,this.options.hide,function(){c._trigger("close",b)}):(this.uiDialog.hide(),this._trigger("close",b)),a.ui.dialog.overlay.resize(),this.options.modal&&(d=0,a(".ui-dialog").each(function(){this!==c.uiDialog[0]&&(h=a(this).css("z-index"),
isNaN(h)||(d=Math.max(d,h)))}),a.ui.dialog.maxZ=d),this},isOpen:function(){return this._isOpen},moveToTop:function(b,c){var d=this.options;if(d.modal&&!b||!d.stack&&!d.modal)return this._trigger("focus",c);d.zIndex>a.ui.dialog.maxZ&&(a.ui.dialog.maxZ=d.zIndex);this.overlay&&(a.ui.dialog.maxZ+=1,a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ,this.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ));d={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()};a.ui.dialog.maxZ+=1;this.uiDialog.css("z-index",
a.ui.dialog.maxZ);this.element.attr(d);this._trigger("focus",c);return this},open:function(){if(!this._isOpen){var b;b=this.options;var c=this.uiDialog;this._size();this._position(b.position);c.show(b.show);this.overlay=b.modal?new a.ui.dialog.overlay(this):null;this.moveToTop(!0);b=this.element.find(":tabbable");b.length||(b=this.uiDialogButtonPane.find(":tabbable"),b.length||(b=c));b.eq(0).focus();this._isOpen=!0;this._trigger("open");return this}},_createButtons:function(b){var c=this,d=!1;this.uiDialogButtonPane.remove();
this.uiButtonSet.empty();"object"===typeof b&&null!==b&&a.each(b,function(){return!(d=!0)});d?(a.each(b,function(b,d){d=a.isFunction(d)?{click:d,text:b}:d;var e=a("<button type='button'></button>").attr(d,!0).unbind("click").click(function(){d.click.apply(c.element[0],arguments)}).appendTo(c.uiButtonSet);a.fn.button&&e.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function b(a){return{position:a.position,
offset:a.offset}}var c=this,d=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(d,g){a(this).addClass("ui-dialog-dragging");c._trigger("dragStart",d,b(g))},drag:function(a,d){c._trigger("drag",a,b(d))},stop:function(h,l){d.position=[l.position.left-c.document.scrollLeft(),l.position.top-c.document.scrollTop()];a(this).removeClass("ui-dialog-dragging");c._trigger("dragStop",h,b(l));a.ui.dialog.overlay.resize()}})},
_makeResizable:function(b){function d(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}b=b===c?this.options.resizable:b;var g=this,h=this.options,l=this.uiDialog.css("position");b="string"===typeof b?b:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:h.maxWidth,maxHeight:h.maxHeight,minWidth:h.minWidth,minHeight:this._minHeight(),handles:b,start:function(b,c){a(this).addClass("ui-dialog-resizing");
g._trigger("resizeStart",b,d(c))},resize:function(a,b){g._trigger("resize",a,d(b))},stop:function(b,c){a(this).removeClass("ui-dialog-resizing");h.height=a(this).height();h.width=a(this).width();g._trigger("resizeStop",b,d(c));a.ui.dialog.overlay.resize()}}).css("position",l).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(b){var c=[],d=[0,0],h;if(b){if("string"===
typeof b||"object"===typeof b&&"0"in b)c=b.split?b.split(" "):[b[0],b[1]],1===c.length&&(c[1]=c[0]),a.each(["left","top"],function(a,b){+c[a]===c[a]&&(d[a]=c[a],c[a]=b)}),b={my:c[0]+(0>d[0]?d[0]:"+"+d[0])+" "+c[1]+(0>d[1]?d[1]:"+"+d[1]),at:c.join(" ")};b=a.extend({},a.ui.dialog.prototype.options.position,b)}else b=a.ui.dialog.prototype.options.position;(h=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.position(b);h||this.uiDialog.hide()},_setOptions:function(c){var f=this,g={},
h=!1;a.each(c,function(a,c){f._setOption(a,c);a in b&&(h=!0);a in d&&(g[a]=c)});h&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",g)},_setOption:function(b,c){var d,h=this.uiDialog;switch(b){case "buttons":this._createButtons(c);break;case "closeText":this.uiDialogTitlebarCloseText.text(""+c);break;case "dialogClass":h.removeClass(this.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+c);break;case "disabled":c?h.addClass("ui-dialog-disabled"):
h.removeClass("ui-dialog-disabled");break;case "draggable":(d=h.is(":data(draggable)"))&&!c&&h.draggable("destroy");!d&&c&&this._makeDraggable();break;case "position":this._position(c);break;case "resizable":(d=h.is(":data(resizable)"))&&!c&&h.resizable("destroy");d&&"string"===typeof c&&h.resizable("option","handles",c);d||!1===c||this._makeResizable(c);break;case "title":a(".ui-dialog-title",this.uiDialogTitlebar).html(""+(c||"&#160;"))}this._super(b,c)},_size:function(){var b,c,d=this.options,
h=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});d.minWidth>d.width&&(d.width=d.minWidth);b=this.uiDialog.css({height:"auto",width:d.width}).outerHeight();c=Math.max(0,d.minHeight-b);"auto"===d.height?a.support.minHeight?this.element.css({minHeight:c,height:"auto"}):(this.uiDialog.show(),b=this.element.css("height","auto").height(),h||this.uiDialog.hide(),this.element.height(Math.max(b,c))):this.element.height(Math.max(d.height-b,0));this.uiDialog.is(":data(resizable)")&&
this.uiDialog.resizable("option","minHeight",this._minHeight())}});a.extend(a.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(a){a=a.attr("id");a||(a=this.uuid+=1);return"ui-dialog-title-"+a},overlay:function(b){this.$el=a.ui.dialog.overlay.create(b)}});a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus mousedown mouseup keydown keypress click".split(" "),function(a){return a+".dialog-overlay"}).join(" "),create:function(b){0===this.instances.length&&(setTimeout(function(){a.ui.dialog.overlay.instances.length&&
a(document).bind(a.ui.dialog.overlay.events,function(b){if(a(b.target).zIndex()<a.ui.dialog.overlay.maxZ)return!1})},1),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));var c=this.oldInstances.pop()||a("<div>").addClass("ui-widget-overlay");a(document).bind("keydown.dialog-overlay",function(d){var h=a.ui.dialog.overlay.instances;0!==h.length&&h[h.length-1]===c&&b.options.closeOnEscape&&!d.isDefaultPrevented()&&d.keyCode&&d.keyCode===a.ui.keyCode.ESCAPE&&(b.close(d),d.preventDefault())});
c.appendTo(document.body).css({width:this.width(),height:this.height()});a.fn.bgiframe&&c.bgiframe();this.instances.push(c);return c},destroy:function(b){var c=a.inArray(b,this.instances),d=0;-1!==c&&this.oldInstances.push(this.instances.splice(c,1)[0]);0===this.instances.length&&a([document,window]).unbind(".dialog-overlay");b.height(0).width(0).remove();a.each(this.instances,function(){d=Math.max(d,this.css("z-index"))});this.maxZ=d},height:function(){var b,c;return a.ui.ie?(b=Math.max(document.documentElement.scrollHeight,
document.body.scrollHeight),c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),b<c?a(window).height()+"px":b+"px"):a(document).height()+"px"},width:function(){var b,c;return a.ui.ie?(b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),b<c?a(window).width()+"px":b+"px"):a(document).width()+"px"},resize:function(){var b=a([]);a.each(a.ui.dialog.overlay.instances,function(){b=b.add(this)});
b.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}});a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
(function(a,c){var b=!1;a.widget("ui.menu",{version:"1.9.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,
a.proxy(function(a){this.options.disabled&&a.preventDefault()},this));this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true");this._on({"mousedown .ui-menu-item > a":function(a){a.preventDefault()},"click .ui-state-disabled > a":function(a){a.preventDefault()},"click .ui-menu-item:has(a)":function(c){var e=a(c.target).closest(".ui-menu-item");!b&&e.not(".ui-state-disabled").length&&(b=!0,this.select(c),e.has(".ui-menu").length?this.expand(c):this.element.is(":focus")||
(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){var c=a(b.currentTarget);c.siblings().children(".ui-state-active").removeClass("ui-state-active");this.focus(b,c)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var c=this.active||this.element.children(".ui-menu-item").eq(0);b||this.focus(a,c)},blur:function(b){this._delay(function(){a.contains(this.element[0],
this.document[0].activeElement)||this.collapseAll(b)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(c){a(c.target).closest(".ui-menu").length||this.collapseAll(c);b=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();
this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=a(this);b.data("ui-menu-submenu-carat")&&b.remove()});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(b){function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,
"\\$&")}var f,g,h,l,m=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);
break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:m=!1,f=this.previousFilter||"",g=String.fromCharCode(b.keyCode),h=!1,clearTimeout(this.filterTimer),g===f?h=!0:g=f+g,l=new RegExp("^"+c(g),"i"),f=this.activeMenu.children(".ui-menu-item").filter(function(){return l.test(a(this).children("a").text())}),f=h&&-1!==f.index(this.active.next())?this.active.nextAll(".ui-menu-item"):f,f.length||(g=String.fromCharCode(b.keyCode),l=new RegExp("^"+c(g),"i"),f=this.activeMenu.children(".ui-menu-item").filter(function(){return l.test(a(this).children("a").text())})),
f.length?(this.focus(b,f),1<f.length?(this.previousFilter=g,this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)):delete this.previousFilter):delete this.previousFilter}m&&b.preventDefault()},_activate:function(a){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(a):this.select(a))},refresh:function(){var b,c=this.options.icons.submenu,f=this.element.find(this.options.menus+":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,
"aria-hidden":"true","aria-expanded":"false"});b=f.add(this.element);b.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()});b.children(":not(.ui-menu-item)").each(function(){var b=a(this);/[^\-\u2014\u2013\s]/.test(b.text())||b.addClass("ui-widget-content ui-menu-divider")});b.children(".ui-state-disabled").attr("aria-disabled","true");f.each(function(){var b=a(this),
d=b.prev("a"),f=a("<span>").addClass("ui-menu-icon ui-icon "+c).data("ui-menu-submenu-carat",!0);d.attr("aria-haspopup","true").prepend(f);b.attr("aria-labelledby",d.attr("id"))});this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(a,b){var c;this.blur(a,a&&"focus"===a.type);this._scrollIntoView(b);this.active=b.first();c=this.active.children("a").addClass("ui-state-focus");this.options.role&&
this.element.attr("aria-activedescendant",c.attr("id"));this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay);c=b.children(".ui-menu");c.length&&/^mouse/.test(a.type)&&this._startOpening(c);this.activeMenu=b.parent();this._trigger("focus",a,{item:b})},_scrollIntoView:function(b){var c,f,g;this._hasScroll()&&(c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||
0,f=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,c=b.offset().top-this.activeMenu.offset().top-c-f,f=this.activeMenu.scrollTop(),g=this.activeMenu.height(),b=b.height(),0>c?this.activeMenu.scrollTop(f+c):c+b>g&&this.activeMenu.scrollTop(f+c-g+b))},blur:function(a,b){b||clearTimeout(this.timer);this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",a,{item:this.active}))},_startOpening:function(a){clearTimeout(this.timer);"true"===a.attr("aria-hidden")&&
(this.timer=this._delay(function(){this._close();this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true");b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(b,c){clearTimeout(this.timer);this.timer=this._delay(function(){var f=c?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));
f.length||(f=this.element);this._close(f);this.blur(b);this.activeMenu=f},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element);a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(a){var b=this.active&&this.active.parent().closest(".ui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();
b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,c){var g;this.active&&(g="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+
"All"](".ui-menu-item").eq(0));g&&g.length&&this.active||(g=this.activeMenu.children(".ui-menu-item")[b]());this.focus(c,g)},nextPage:function(b){var c,f,g;this.active?this.isLastItem()||(this._hasScroll()?(f=this.active.offset().top,g=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){c=a(this);return 0>c.offset().top-f-g}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())):this.next(b)},previousPage:function(b){var c,f,
g;this.active?this.isFirstItem()||(this._hasScroll()?(f=this.active.offset().top,g=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){c=a(this);return 0<c.offset().top-f+g}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item").first())):this.next(b)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||
this.collapseAll(b,!0);this._trigger("select",b,c)}})})(jQuery);
(function(a,c){a.widget("ui.progressbar",{version:"1.9.1",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()});this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this.oldValue=this._value();this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
this.valueDiv.remove()},value:function(a){if(a===c)return this._value();this._setOption("value",a);return this},_setOption:function(a,c){"value"===a&&(this.options.value=c,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete"));this._super(a,c)},_value:function(){var a=this.options.value;"number"!==typeof a&&(a=0);return Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var a=this.value(),
c=this._percentage();this.oldValue!==a&&(this.oldValue=a,this._trigger("change"));this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(c.toFixed(0)+"%");this.element.attr("aria-valuenow",a)}})})(jQuery);
(function(a,c){a.widget("ui.slider",a.ui.mouse,{version:"1.9.1",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var b,c,e=this.options,f=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),g=[];this._mouseSliding=this._keySliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+
" ui-widget ui-widget-content ui-corner-all"+(e.disabled?" ui-slider-disabled ui-disabled":""));this.range=a([]);e.range&&(!0===e.range&&(e.values||(e.values=[this._valueMin(),this._valueMin()]),e.values.length&&2!==e.values.length&&(e.values=[e.values[0],e.values[0]])),this.range=a("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:"")));c=e.values&&e.values.length||1;for(b=f.length;b<c;b++)g.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");
this.handles=f.add(a(g.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).mouseenter(function(){e.disabled||a(this).addClass("ui-state-hover")}).mouseleave(function(){a(this).removeClass("ui-state-hover")}).focus(function(){e.disabled?a(this).blur():(a(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),a(this).addClass("ui-state-focus"))}).blur(function(){a(this).removeClass("ui-state-focus")});
this.handles.each(function(b){a(this).data("ui-slider-handle-index",b)});this._on(this.handles,{keydown:function(b){var c,d,e,f=a(b.target).data("ui-slider-handle-index");switch(b.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(b.preventDefault(),!this._keySliding&&(this._keySliding=!0,a(b.target).addClass("ui-state-active"),c=this._start(b,f),!1===
c))return}e=this.options.step;c=this.options.values&&this.options.values.length?d=this.values(f):d=this.value();switch(b.keyCode){case a.ui.keyCode.HOME:d=this._valueMin();break;case a.ui.keyCode.END:d=this._valueMax();break;case a.ui.keyCode.PAGE_UP:d=this._trimAlignValue(c+(this._valueMax()-this._valueMin())/5);break;case a.ui.keyCode.PAGE_DOWN:d=this._trimAlignValue(c-(this._valueMax()-this._valueMin())/5);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(c===this._valueMax())return;d=this._trimAlignValue(c+
e);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(c===this._valueMin())return;d=this._trimAlignValue(c-e)}this._slide(b,f,d)},keyup:function(b){var c=a(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,c),this._change(b,c),a(b.target).removeClass("ui-state-active"))}});this._refreshValue();this._animateOff=!1},_destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all");
this._mouseDestroy()},_mouseCapture:function(b){var c,e,f,g,h,l=this;h=this.options;if(h.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();c=this._normValueFromMouse({x:b.pageX,y:b.pageY});e=this._valueMax()-this._valueMin()+1;this.handles.each(function(b){var h=Math.abs(c-l.values(b));e>h&&(e=h,f=a(this),g=b)});!0===h.range&&this.values(1)===h.min&&(g+=1,f=a(this.handles[g]));if(!1===this._start(b,g))return!1;
this._mouseSliding=!0;this._handleIndex=g;f.addClass("ui-state-active").focus();h=f.offset();this._clickOffset=a(b.target).parents().andSelf().is(".ui-slider-handle")?{left:b.pageX-h.left-f.width()/2,top:b.pageY-h.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)}:{left:0,top:0};this.handles.hasClass("ui-state-hover")||this._slide(b,g,c);return this._animateOff=!0},_mouseStart:function(){return!0},_mouseDrag:function(a){var c=
this._normValueFromMouse({x:a.pageX,y:a.pageY});this._slide(a,this._handleIndex,c);return!1},_mouseStop:function(a){this.handles.removeClass("ui-state-active");this._mouseSliding=!1;this._stop(a,this._handleIndex);this._change(a,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var c;"horizontal"===this.orientation?(c=this.elementSize.width,
a=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(c=this.elementSize.height,a=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0));c=a/c;1<c&&(c=1);0>c&&(c=0);"vertical"===this.orientation&&(c=1-c);a=this._valueMax()-this._valueMin();c=this._valueMin()+c*a;return this._trimAlignValue(c)},_start:function(a,c){var e={handle:this.handles[c],value:this.value()};this.options.values&&this.options.values.length&&(e.value=this.values(c),e.values=this.values());
return this._trigger("start",a,e)},_slide:function(a,c,e){var f;this.options.values&&this.options.values.length?(f=this.values(c?0:1),2===this.options.values.length&&!0===this.options.range&&(0===c&&e>f||1===c&&e<f)&&(e=f),e!==this.values(c)&&(f=this.values(),f[c]=e,a=this._trigger("slide",a,{handle:this.handles[c],value:e,values:f}),this.values(c?0:1),!1!==a&&this.values(c,e,!0))):e!==this.value()&&(a=this._trigger("slide",a,{handle:this.handles[c],value:e}),!1!==a&&this.value(e))},_stop:function(a,
c){var e={handle:this.handles[c],value:this.value()};this.options.values&&this.options.values.length&&(e.value=this.values(c),e.values=this.values());this._trigger("stop",a,e)},_change:function(a,c){if(!this._keySliding&&!this._mouseSliding){var e={handle:this.handles[c],value:this.value()};this.options.values&&this.options.values.length&&(e.value=this.values(c),e.values=this.values());this._trigger("change",a,e)}},value:function(a){if(arguments.length)this.options.value=this._trimAlignValue(a),this._refreshValue(),
this._change(null,0);else return this._value()},values:function(b,c){var e,f,g;if(1<arguments.length)this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),this._change(null,b);else if(arguments.length)if(a.isArray(arguments[0])){e=this.options.values;f=arguments[0];for(g=0;g<e.length;g+=1)e[g]=this._trimAlignValue(f[g]),this._change(null,g);this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(b):this.value();else return this._values()},_setOption:function(b,
c){var e,f=0;a.isArray(this.options.values)&&(f=this.options.values.length);a.Widget.prototype._setOption.apply(this,arguments);switch(b){case "disabled":c?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case "orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+
this.orientation);this._refreshValue();break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(e=0;e<f;e+=1)this._change(null,e);this._animateOff=!1;break;case "min":case "max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var c,e;if(arguments.length)return c=this.options.values[a],
c=this._trimAlignValue(c);c=this.options.values.slice();for(e=0;e<c.length;e+=1)c[e]=this._trimAlignValue(c[e]);return c},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var c=0<this.options.step?this.options.step:1,e=(a-this._valueMin())%c;a-=e;2*Math.abs(e)>=c&&(a+=0<e?c:-c);return parseFloat(a.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b,
c,e,f,g,h=this.options.range,l=this.options,m=this,n=this._animateOff?!1:l.animate,q={};if(this.options.values&&this.options.values.length)this.handles.each(function(e){c=(m.values(e)-m._valueMin())/(m._valueMax()-m._valueMin())*100;q["horizontal"===m.orientation?"left":"bottom"]=c+"%";a(this).stop(1,1)[n?"animate":"css"](q,l.animate);if(!0===m.options.range)if("horizontal"===m.orientation){if(0===e)m.range.stop(1,1)[n?"animate":"css"]({left:c+"%"},l.animate);if(1===e)m.range[n?"animate":"css"]({width:c-
b+"%"},{queue:!1,duration:l.animate})}else{if(0===e)m.range.stop(1,1)[n?"animate":"css"]({bottom:c+"%"},l.animate);if(1===e)m.range[n?"animate":"css"]({height:c-b+"%"},{queue:!1,duration:l.animate})}b=c});else{e=this.value();f=this._valueMin();g=this._valueMax();c=g!==f?(e-f)/(g-f)*100:0;q["horizontal"===this.orientation?"left":"bottom"]=c+"%";this.handle.stop(1,1)[n?"animate":"css"](q,l.animate);if("min"===h&&"horizontal"===this.orientation)this.range.stop(1,1)[n?"animate":"css"]({width:c+"%"},l.animate);
if("max"===h&&"horizontal"===this.orientation)this.range[n?"animate":"css"]({width:100-c+"%"},{queue:!1,duration:l.animate});if("min"===h&&"vertical"===this.orientation)this.range.stop(1,1)[n?"animate":"css"]({height:c+"%"},l.animate);if("max"===h&&"vertical"===this.orientation)this.range[n?"animate":"css"]({height:100-c+"%"},{queue:!1,duration:l.animate})}}})})(jQuery);
(function(a){function c(a){return function(){var c=this.element.val();a.apply(this,arguments);this._refresh();c!==this.element.val()&&this._trigger("change")}}a.widget("ui.spinner",{version:"1.9.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);
this._setOption("min",this.options.min);this._setOption("step",this.options.step);this._value(this.element.val(),!0);this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var b={},c=this.element;a.each(["min","max","step"],function(a,f){var g=c.attr(f);void 0!==g&&g.length&&(b[f]=g)});return b},_events:{keydown:function(a){this._start(a)&&this._keydown(a)&&a.preventDefault()},keyup:"_stop",
focus:function(){this.previous=this.element.val()},blur:function(a){this.cancelBlur?delete this.cancelBlur:(this._refresh(),this.previous!==this.element.val()&&this._trigger("change",a))},mousewheel:function(a,c){if(c){if(!this.spinning&&!this._start(a))return!1;this._spin((0<c?1:-1)*this.options.step,a);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(a)},100);a.preventDefault()}},"mousedown .ui-spinner-button":function(b){function c(){this.element[0]!==
this.document[0].activeElement&&(this.element.focus(),this.previous=e,this._delay(function(){this.previous=e}))}var e;e=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();b.preventDefault();c.call(this);this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur;c.call(this)});!1!==this._start(b)&&this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(b){if(a(b.currentTarget).hasClass("ui-state-active")){if(!1===
this._start(b))return!1;this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)}},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var a=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton");this.buttons=a.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");this.buttons.height()>Math.ceil(.5*a.height())&&0<a.height()&&
a.height(a.height());this.options.disabled&&this.disable()},_keydown:function(b){var c=this.options,e=a.ui.keyCode;switch(b.keyCode){case e.UP:return this._repeat(null,1,b),!0;case e.DOWN:return this._repeat(null,-1,b),!0;case e.PAGE_UP:return this._repeat(null,c.page,b),!0;case e.PAGE_DOWN:return this._repeat(null,-c.page,b),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+
this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(a){if(!this.spinning&&!1===this._trigger("start",a))return!1;this.counter||(this.counter=1);return this.spinning=!0},_repeat:function(a,c,e){a=a||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,c,e)},a);this._spin(c*this.options.step,e)},_spin:function(a,c){var e=this.value()||0;this.counter||
(this.counter=1);e=this._adjustValue(e+a*this._increment(this.counter));this.spinning&&!1===this._trigger("spin",c,{value:e})||(this._value(e),this.counter++)},_increment:function(b){var c=this.options.incremental;return c?a.isFunction(c)?c(b):Math.floor(b*b*b/5E4-b*b/500+17*b/200+1):1},_precision:function(){var a=this._precisionOf(this.options.step);null!==this.options.min&&(a=Math.max(a,this._precisionOf(this.options.min)));return a},_precisionOf:function(a){a=a.toString();var c=a.indexOf(".");
return-1===c?0:a.length-c-1},_adjustValue:function(a){var c,e=this.options;c=null!==e.min?e.min:0;a=Math.round((a-c)/e.step)*e.step;a=c+a;a=parseFloat(a.toFixed(this._precision()));return null!==e.max&&a>e.max?e.max:null!==e.min&&a<e.min?e.min:a},_stop:function(a){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",a))},_setOption:function(a,c){if("culture"===a||"numberFormat"===a){var e=this._parse(this.element.val());this.options[a]=
c;this.element.val(this._format(e))}else"max"!==a&&"min"!==a&&"step"!==a||"string"!==typeof c||(c=this._parse(c)),this._super(a,c),"disabled"===a&&(c?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:c(function(a){this._super(a);this._value(this.element.val())}),_parse:function(a){"string"===typeof a&&""!==a&&(a=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(a,10,this.options.culture):
+a);return""===a||isNaN(a)?null:a},_format:function(a){return""===a?"":window.Globalize&&this.options.numberFormat?Globalize.format(a,this.options.numberFormat,this.options.culture):a},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(a,c){var e;""!==a&&(e=this._parse(a),null!==e&&(c||(e=this._adjustValue(e)),a=this._format(e)));this.element.val(a);this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",
!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.uiSpinner.replaceWith(this.element)},stepUp:c(function(a){this._stepUp(a)}),_stepUp:function(a){this._spin((a||1)*this.options.step)},stepDown:c(function(a){this._stepDown(a)}),_stepDown:function(a){this._spin((a||1)*-this.options.step)},pageUp:c(function(a){this._stepUp((a||1)*this.options.page)}),pageDown:c(function(a){this._stepDown((a||1)*this.options.page)}),
value:function(a){if(!arguments.length)return this._parse(this.element.val());c(this._value).call(this,a)},widget:function(){return this.uiSpinner}})})(jQuery);
(function(a,c){function b(a){return 1<a.hash.length&&a.href.replace(e,"")===location.href.replace(e,"")}var d=0,e=/#.*$/;a.widget("ui.tabs",{version:"1.9.1",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var b=this,c=this.options,d=c.active,e=location.hash.substring(1);this.running=!1;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",
c.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(b){a(this).is(".ui-state-disabled")&&b.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){a(this).closest("li").is(".ui-state-disabled")&&this.blur()});this._processTabs();null===d&&(e&&this.tabs.each(function(b,c){if(a(c).attr("aria-controls")===e)return d=b,!1}),null===d&&(d=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null===d||-1===d)&&(d=this.tabs.length?0:!1);!1!==
d&&(d=this.tabs.index(this.tabs.eq(d)),-1===d&&(d=c.collapsible?!1:0));c.active=d;!c.collapsible&&!1===c.active&&this.anchors.length&&(c.active=0);a.isArray(c.disabled)&&(c.disabled=a.unique(c.disabled.concat(a.map(this.tabs.filter(".ui-state-disabled"),function(a){return b.tabs.index(a)}))).sort());this.active=!1!==this.options.active&&this.anchors.length?this._findActive(this.options.active):a();this._refresh();this.active.length&&this.load(c.active)},_getCreateEventData:function(){return{tab:this.active,
panel:this.active.length?this._getPanelForTab(this.active):a()}},_tabKeydown:function(b){var c=a(this.document[0].activeElement).closest("li"),d=this.tabs.index(c),e=!0;if(!this._handlePageNav(b)){switch(b.keyCode){case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:d++;break;case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:e=!1;d--;break;case a.ui.keyCode.END:d=this.anchors.length-1;break;case a.ui.keyCode.HOME:d=0;break;case a.ui.keyCode.SPACE:b.preventDefault();clearTimeout(this.activating);this._activate(d);
return;case a.ui.keyCode.ENTER:b.preventDefault();clearTimeout(this.activating);this._activate(d===this.options.active?!1:d);return;default:return}b.preventDefault();clearTimeout(this.activating);d=this._focusNextTab(d,e);b.ctrlKey||(c.attr("aria-selected","false"),this.tabs.eq(d).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",d)},this.delay))}},_panelKeydown:function(b){!this._handlePageNav(b)&&b.ctrlKey&&b.keyCode===a.ui.keyCode.UP&&(b.preventDefault(),
this.active.focus())},_handlePageNav:function(b){if(b.altKey&&b.keyCode===a.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(b.altKey&&b.keyCode===a.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(b,c){function d(){b>e&&(b=0);0>b&&(b=e);return b}for(var e=this.tabs.length-1;-1!==a.inArray(d(),this.options.disabled);)b=c?b+1:b-1;return b},_focusNextTab:function(a,b){a=this._findNextTab(a,
b);this.tabs.eq(a).focus();return a},_setOption:function(a,b){"active"===a?this._activate(b):"disabled"===a?this._setupDisabled(b):(this._super(a,b),"collapsible"===a&&(this.element.toggleClass("ui-tabs-collapsible",b),b||!1!==this.options.active||this._activate(0)),"event"===a&&this._setupEvents(b),"heightStyle"===a&&this._setupHeightStyle(b))},_tabId:function(a){return a.attr("aria-controls")||"ui-tabs-"+ ++d},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,
"\\$&"):""},refresh:function(){var b=this.options,c=this.tablist.children(":has(a[href])");b.disabled=a.map(c.filter(".ui-state-disabled"),function(a){return c.index(a)});this._processTabs();!1!==b.active&&this.anchors.length?this.active.length&&!a.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=a()):this._activate(this._findNextTab(Math.max(0,b.active-1),!1)):b.active=this.tabs.index(this.active):(b.active=!1,this.active=a());this._refresh()},
_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"});this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true",
"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var c=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist");this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return a("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1});this.panels=
a();this.anchors.each(function(d,e){var l,m,n,q=a(e).uniqueId().attr("id"),t=a(e).closest("li"),x=t.attr("aria-controls");b(e)?(l=e.hash,m=c.element.find(c._sanitizeSelector(l))):(n=c._tabId(t),l="#"+n,m=c.element.find(l),m.length||(m=c._createPanel(n),m.insertAfter(c.panels[d-1]||c.tablist)),m.attr("aria-live","polite"));m.length&&(c.panels=c.panels.add(m));x&&t.data("ui-tabs-aria-controls",x);t.attr({"aria-controls":l.substring(1),"aria-labelledby":q});m.attr("aria-labelledby",q)});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role",
"tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(b){return a("<div>").attr("id",b).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(b){a.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1);for(var c=0,d;d=this.tabs[c];c++)!0===b||-1!==a.inArray(c,b)?a(d).addClass("ui-state-disabled").attr("aria-disabled","true"):a(d).removeClass("ui-state-disabled").removeAttr("aria-disabled");
this.options.disabled=b},_setupEvents:function(b){var c={click:function(a){a.preventDefault()}};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));this._on(this.anchors,c);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(b){var c,d,e=this.element.parent();"fill"===b?(a.support.minHeight||(d=e.css("overflow"),e.css("overflow",
"hidden")),c=e.height(),this.element.siblings(":visible").each(function(){var b=a(this),d=b.css("position");"absolute"!==d&&"fixed"!==d&&(c-=b.outerHeight(!0))}),d&&e.css("overflow",d),this.element.children().not(this.panels).each(function(){c-=a(this).outerHeight(!0)}),this.panels.each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===b&&(c=0,this.panels.each(function(){c=Math.max(c,a(this).height("").height())}).height(c))},_eventHandler:function(b){var c=
this.options,d=this.active,e=a(b.currentTarget).closest("li"),m=e[0]===d[0],n=m&&c.collapsible,q=n?a():this._getPanelForTab(e),t=d.length?this._getPanelForTab(d):a(),d={oldTab:d,oldPanel:t,newTab:n?a():e,newPanel:q};b.preventDefault();e.hasClass("ui-state-disabled")||e.hasClass("ui-tabs-loading")||this.running||m&&!c.collapsible||!1===this._trigger("beforeActivate",b,d)||(c.active=n?!1:this.tabs.index(e),this.active=m?a():e,this.xhr&&this.xhr.abort(),t.length||q.length||a.error("jQuery UI Tabs: Mismatching fragment identifier."),
q.length&&this.load(this.tabs.index(e),b),this._toggle(b,d))},_toggle:function(b,c){function d(){m.running=!1;m._trigger("activate",b,c)}function e(){c.newTab.closest("li").addClass("ui-tabs-active ui-state-active");n.length&&m.options.show?m._show(n,m.options.show,d):(n.show(),d())}var m=this,n=c.newPanel,q=c.oldPanel;this.running=!0;q.length&&this.options.hide?this._hide(q,this.options.hide,function(){c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");e()}):(c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),
q.hide(),e());q.attr({"aria-expanded":"false","aria-hidden":"true"});c.oldTab.attr("aria-selected","false");n.length&&q.length?c.oldTab.attr("tabIndex",-1):n.length&&this.tabs.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1);n.attr({"aria-expanded":"true","aria-hidden":"false"});c.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(b){b=this._findActive(b);b[0]!==this.active[0]&&(b.length||(b=this.active),b=b.find(".ui-tabs-anchor")[0],this._eventHandler({target:b,
currentTarget:b,preventDefault:a.noop}))},_findActive:function(b){return!1===b?a():this.tabs.eq(b)},_getIndex:function(a){"string"===typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']")));return a},_destroy:function(){this.xhr&&this.xhr.abort();this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId();
this.tabs.add(this.panels).each(function(){a.data(this,"ui-tabs-destroy")?a(this).remove():a(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")});this.tabs.each(function(){var b=a(this),c=b.data("ui-tabs-aria-controls");
c?b.attr("aria-controls",c):b.removeAttr("aria-controls")});"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(b){var d=this.options.disabled;!1!==d&&(b===c?d=!1:(b=this._getIndex(b),d=a.isArray(d)?a.map(d,function(a){return a!==b?a:null}):a.map(this.tabs,function(a,c){return c!==b?c:null})),this._setupDisabled(d))},disable:function(b){var d=this.options.disabled;if(!0!==d){if(b===c)d=!0;else{b=this._getIndex(b);if(-1!==a.inArray(b,d))return;d=a.isArray(d)?a.merge([b],
d).sort():[b]}this._setupDisabled(d)}},load:function(c,d){c=this._getIndex(c);var e=this,l=this.tabs.eq(c),m=l.find(".ui-tabs-anchor"),n=this._getPanelForTab(l),q={tab:l,panel:n};b(m[0])||(this.xhr=a.ajax(this._ajaxSettings(m,d,q)))&&"canceled"!==this.xhr.statusText&&(l.addClass("ui-tabs-loading"),n.attr("aria-busy","true"),this.xhr.success(function(a){setTimeout(function(){n.html(a);e._trigger("load",d,q)},1)}).complete(function(a,b){setTimeout(function(){"abort"===b&&e.panels.stop(!1,!0);l.removeClass("ui-tabs-loading");
n.removeAttr("aria-busy");a===e.xhr&&delete e.xhr},1)}))},_ajaxSettings:function(b,c,d){var e=this;return{url:b.attr("href"),beforeSend:function(b,f){return e._trigger("beforeLoad",c,a.extend({jqXHR:b,ajaxSettings:f},d))}}},_getPanelForTab:function(b){b=a(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+b))}});!1!==a.uiBackCompat&&(a.ui.tabs.prototype._ui=function(a,b){return{tab:a,panel:b,index:this.anchors.index(a)}},a.widget("ui.tabs",a.ui.tabs,{url:function(a,b){this.anchors.eq(a).attr("href",
b)}}),a.widget("ui.tabs",a.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var b=this;this._on({tabsbeforeload:function(c,d){a.data(d.tab[0],"cache.tabs")?c.preventDefault():d.jqXHR.success(function(){b.options.cache&&a.data(d.tab[0],"cache.tabs",!0)})}})},_ajaxSettings:function(b,c,d){var e=this.options.ajaxOptions;return a.extend({},e,{error:function(a,b){try{e.error(a,b,d.tab.closest("li").index(),d.tab[0])}catch(c){}}},this._superApply(arguments))},_setOption:function(a,
b){"cache"===a&&!1===b&&this.anchors.removeData("cache.tabs");this._super(a,b)},_destroy:function(){this.anchors.removeData("cache.tabs");this._super()},url:function(a){this.anchors.eq(a).removeData("cache.tabs");this._superApply(arguments)}}),a.widget("ui.tabs",a.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),a.widget("ui.tabs",a.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super();this._on({tabsbeforeload:function(a,b){if(a.target===this.element[0]&&this.options.spinner){var c=
b.tab.find("span"),d=c.html();c.html(this.options.spinner);b.jqXHR.complete(function(){c.html(d)})}}})}}),a.widget("ui.tabs",a.ui.tabs,{options:{enable:null,disable:null},enable:function(b){var c=this.options,d;if(b&&!0===c.disabled||a.isArray(c.disabled)&&-1!==a.inArray(b,c.disabled))d=!0;this._superApply(arguments);d&&this._trigger("enable",null,this._ui(this.anchors[b],this.panels[b]))},disable:function(b){var c=this.options,d;if(b&&!1===c.disabled||a.isArray(c.disabled)&&-1===a.inArray(b,c.disabled))d=
!0;this._superApply(arguments);d&&this._trigger("disable",null,this._ui(this.anchors[b],this.panels[b]))}}),a.widget("ui.tabs",a.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(b,d,e){e===c&&(e=this.anchors.length);var l,m=this.options;d=a(m.tabTemplate.replace(/#\{href\}/g,b).replace(/#\{label\}/g,d));var n=b.indexOf("#")?this._tabId(d):b.replace("#","");d.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0);
d.attr("aria-controls",n);b=e>=this.tabs.length;l=this.element.find("#"+n);l.length||(l=this._createPanel(n),b?0<e?l.insertAfter(this.panels.eq(-1)):l.appendTo(this.element):l.insertBefore(this.panels[e]));l.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide();b?d.appendTo(this.tablist):d.insertBefore(this.tabs[e]);m.disabled=a.map(m.disabled,function(a){return a>=e?++a:a});this.refresh();1===this.tabs.length&&!1===m.active&&this.option("active",0);this._trigger("add",null,this._ui(this.anchors[e],
this.panels[e]));return this},remove:function(b){b=this._getIndex(b);var c=this.options,d=this.tabs.eq(b).remove(),e=this._getPanelForTab(d).remove();d.hasClass("ui-tabs-active")&&2<this.anchors.length&&this._activate(b+(b+1<this.anchors.length?1:-1));c.disabled=a.map(a.grep(c.disabled,function(a){return a!==b}),function(a){return a>=b?--a:a});this.refresh();this._trigger("remove",null,this._ui(d.find("a")[0],e[0]));return this}}),a.widget("ui.tabs",a.ui.tabs,{length:function(){return this.anchors.length}}),
a.widget("ui.tabs",a.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(b){b=b.is("li")?b.find("a[href]"):b;b=b[0];return a(b).closest("li").attr("aria-controls")||b.title&&b.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+ ++d}}),a.widget("ui.tabs",a.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(b){return a(this.options.panelTemplate).attr("id",b).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),
a.widget("ui.tabs",a.ui.tabs,{_create:function(){var a=this.options;null===a.active&&a.selected!==c&&(a.active=-1===a.selected?!1:a.selected);this._super();a.selected=a.active;!1===a.selected&&(a.selected=-1)},_setOption:function(a,b){if("selected"!==a)return this._super(a,b);var c=this.options;this._super("active",-1===b?!1:b);c.selected=c.active;!1===c.selected&&(c.selected=-1)},_eventHandler:function(){this._superApply(arguments);this.options.selected=this.options.active;!1===this.options.selected&&
(this.options.selected=-1)}}),a.widget("ui.tabs",a.ui.tabs,{options:{show:null,select:null},_create:function(){this._super();!1!==this.options.active&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(a,b,c){var d=this._superApply(arguments);if(!d)return!1;"beforeActivate"===a&&c.newTab.length?d=this._super("select",b,{tab:c.newTab.find(".ui-tabs-anchor")[0],panel:c.newPanel[0],index:c.newTab.closest("li").index()}):
"activate"===a&&c.newTab.length&&(d=this._super("show",b,{tab:c.newTab.find(".ui-tabs-anchor")[0],panel:c.newPanel[0],index:c.newTab.closest("li").index()}));return d}}),a.widget("ui.tabs",a.ui.tabs,{select:function(a){a=this._getIndex(a);if(-1===a)if(this.options.collapsible&&-1!==this.options.selected)a=this.options.selected;else return;this.anchors.eq(a).trigger(this.options.event+this.eventNamespace)}}),function(){var b=0;a.widget("ui.tabs",a.ui.tabs,{options:{cookie:null},_create:function(){var a=
this.options,b;null==a.active&&a.cookie&&(b=parseInt(this._cookie(),10),-1===b&&(b=!1),a.active=b);this._super()},_cookie:function(c){var d=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++b)];arguments.length&&(d.push(!1===c?-1:c),d.push(this.options.cookie));return a.cookie.apply(null,d)},_refresh:function(){this._super();this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(){this._superApply(arguments);this.options.cookie&&this._cookie(this.options.active,
this.options.cookie)},_destroy:function(){this._super();this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),a.widget("ui.tabs",a.ui.tabs,{_trigger:function(b,c,d){d=a.extend({},d);"load"===b&&(d.panel=d.panel[0],d.tab=d.tab.find(".ui-tabs-anchor")[0]);return this._super(b,c,d)}}),a.widget("ui.tabs",a.ui.tabs,{options:{fx:null},_getFx:function(){var b,c,d=this.options.fx;d&&(a.isArray(d)?(b=d[0],c=d[1]):b=c=d);return d?{show:c,hide:b}:null},_toggle:function(a,b){function c(){e.running=
!1;e._trigger("activate",a,b)}function d(){b.newTab.closest("li").addClass("ui-tabs-active ui-state-active");n.length&&t.show?n.animate(t.show,t.show.duration,function(){c()}):(n.show(),c())}var e=this,n=b.newPanel,q=b.oldPanel,t=this._getFx();if(!t)return this._super(a,b);e.running=!0;q.length&&t.hide?q.animate(t.hide,t.hide.duration,function(){b.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");d()}):(b.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),q.hide(),
d())}}))})(jQuery);
(function(a){function c(b,c){var d=(b.attr("aria-describedby")||"").split(/\s+/);d.push(c);b.data("ui-tooltip-id",c).attr("aria-describedby",a.trim(d.join(" ")))}function b(b){var c=b.data("ui-tooltip-id"),d=(b.attr("aria-describedby")||"").split(/\s+/),c=a.inArray(c,d);-1!==c&&d.splice(c,1);b.removeData("ui-tooltip-id");(d=a.trim(d.join(" ")))?b.attr("aria-describedby",d):b.removeAttr("aria-describedby")}var d=0;a.widget("ui.tooltip",{version:"1.9.1",options:{content:function(){return a(this).attr("title")},hide:!0,
items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flipfit"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.options.disabled&&this._disable()},_setOption:function(b,c){var d=this;"disabled"===b?(this[c?"_disable":"_enable"](),this.options[b]=c):(this._super(b,c),"content"===b&&a.each(this.tooltips,function(a,b){d._updateContent(b)}))},_disable:function(){var b=
this;a.each(this.tooltips,function(c,d){var h=a.Event("blur");h.target=h.currentTarget=d[0];b.close(h,!0)});this.element.find(this.options.items).andSelf().each(function(){var b=a(this);b.is("[title]")&&b.data("ui-tooltip-title",b.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var b=a(this);b.data("ui-tooltip-title")&&b.attr("title",b.data("ui-tooltip-title"))})},open:function(b){var c=this,d=a(b?b.target:this.element).closest(this.options.items);
d.length&&(this.options.track&&d.data("ui-tooltip-id")?(this._find(d).position(a.extend({of:d},this.options.position)),this._off(this.document,"mousemove")):(d.attr("title")&&d.data("ui-tooltip-title",d.attr("title")),d.data("tooltip-open",!0),b&&"mouseover"===b.type&&d.parents().each(function(){var b;a(this).data("tooltip-open")&&(b=a.Event("blur"),b.target=b.currentTarget=this,c.close(b,!0));this.title&&(a(this).uniqueId(),c.parents[this.id]={element:this,title:this.title},this.title="")}),this._updateContent(d,
b)))},_updateContent:function(a,b){var c;c=this.options.content;var d=this;if("string"===typeof c)return this._open(b,a,c);(c=c.call(a[0],function(c){a.data("tooltip-open")&&d._delay(function(){this._open(b,a,c)})}))&&this._open(b,a,c)},_open:function(b,d,g){function h(a){n.of=a;l.is(":hidden")||l.position(n)}var l,m,n=a.extend({},this.options.position);g&&(l=this._find(d),l.length?l.find(".ui-tooltip-content").html(g):(d.is("[title]")&&(b&&"mouseover"===b.type?d.attr("title",""):d.removeAttr("title")),
l=this._tooltip(d),c(d,l.attr("id")),l.find(".ui-tooltip-content").html(g),this.options.track&&b&&/^mouse/.test(b.originalEvent.type)?(this._on(this.document,{mousemove:h}),h(b)):l.position(a.extend({of:d},this.options.position)),l.hide(),this._show(l,this.options.show),this.options.show&&this.options.show.delay&&(m=setInterval(function(){l.is(":visible")&&(h(n.of),clearInterval(m))},a.fx.interval)),this._trigger("open",b,{tooltip:l}),g={keyup:function(b){b.keyCode===a.ui.keyCode.ESCAPE&&(b=a.Event(b),
b.currentTarget=d[0],this.close(b,!0))},remove:function(){this._removeTooltip(l)}},b&&"mouseover"!==b.type||(g.mouseleave="close"),b&&"focusin"!==b.type||(g.focusout="close"),this._on(d,g)))},close:function(c){var d=this,g=a(c?c.currentTarget:this.element),h=this._find(g);this.closing||(g.data("ui-tooltip-title")&&g.attr("title",g.data("ui-tooltip-title")),b(g),h.stop(!0),this._hide(h,this.options.hide,function(){d._removeTooltip(a(this))}),g.removeData("tooltip-open"),this._off(g,"mouseleave focusout keyup"),
g[0]!==this.element[0]&&this._off(g,"remove"),this._off(this.document,"mousemove"),c&&"mouseleave"===c.type&&a.each(this.parents,function(a,b){b.element.title=b.title;delete d.parents[a]}),this.closing=!0,this._trigger("close",c,{tooltip:h}),this.closing=!1)},_tooltip:function(b){var c="ui-tooltip-"+d++,g=a("<div>").attr({id:c,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));a("<div>").addClass("ui-tooltip-content").appendTo(g);g.appendTo(this.document[0].body);
a.fn.bgiframe&&g.bgiframe();this.tooltips[c]=b;return g},_find:function(b){return(b=b.data("ui-tooltip-id"))?a("#"+b):a()},_removeTooltip:function(a){a.remove();delete this.tooltips[a.attr("id")]},_destroy:function(){var b=this;a.each(this.tooltips,function(c,d){var h=a.Event("blur");h.target=h.currentTarget=d[0];b.close(h,!0);a("#"+c).remove();d.data("ui-tooltip-title")&&(d.attr("title",d.data("ui-tooltip-title")),d.removeData("ui-tooltip-title"))})}})})(jQuery);
jQuery.effects||function(a,c){var b=!1!==a.uiBackCompat;a.effects={effect:{}};(function(b,c){function f(a,b,c){var d=t[b.type]||{};if(null==a)return c||!b.def?null:b.def;a=d.floor?~~a:parseFloat(a);return isNaN(a)?b.def:d.mod?(a+d.mod)%d.mod:0>a?0:d.max<a?d.max:a}function g(a){var c=n(),e=c._rgba=[];a=a.toLowerCase();A(m,function(b,d){var f,g=d.re.exec(a);f=g&&d.parse(g);g=d.space||"rgba";if(f)return f=c[g](f),c[q[g].cache]=f[q[g].cache],e=c._rgba=f._rgba,!1});return e.length?("0,0,0,0"===e.join()&&
b.extend(e,E.transparent),c):E[a]}function h(a,b,c){c=(c+1)%1;return 1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a}var l=/^([\-+])=\s*(\d+\.?\d*)/,m=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],n=b.Color=function(a,c,e,f){return new b.Color.fn.parse(a,c,e,f)},q={rgba:{props:{red:{idx:0,type:"byte"},
green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},t={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},x=n.support={},u=b("<p>")[0],E,A=b.each;u.style.cssText="background-color:rgba(1,1,1,.5)";x.rgba=-1<u.style.backgroundColor.indexOf("rgba");A(q,function(a,b){b.cache="_"+a;b.props.alpha={idx:3,type:"percent",def:1}});n.fn=b.extend(n.prototype,{parse:function(h,m,l,
t){if(h===c)return this._rgba=[null,null,null,null],this;if(h.jquery||h.nodeType)h=b(h).css(m),m=c;var u=this,x=b.type(h),N=this._rgba=[];m!==c&&(h=[h,m,l,t],x="array");if("string"===x)return this.parse(g(h)||E._default);if("array"===x)return A(q.rgba.props,function(a,b){N[b.idx]=f(h[b.idx],b)}),this;if("object"===x)return h instanceof n?A(q,function(a,b){h[b.cache]&&(u[b.cache]=h[b.cache].slice())}):A(q,function(b,c){var d=c.cache;A(c.props,function(a,b){if(!u[d]&&c.to){if("alpha"===a||null==h[a])return;
u[d]=c.to(u._rgba)}u[d][b.idx]=f(h[a],b,!0)});u[d]&&0>a.inArray(null,u[d].slice(0,3))&&(u[d][3]=1,c.from&&(u._rgba=c.from(u[d])))}),this},is:function(a){var b=n(a),c=!0,d=this;A(q,function(a,e){var f,g=b[e.cache];g&&(f=d[e.cache]||e.to&&e.to(d._rgba)||[],A(e.props,function(a,b){if(null!=g[b.idx])return c=g[b.idx]===f[b.idx]}));return c});return c},_space:function(){var a=[],b=this;A(q,function(c,d){b[d.cache]&&a.push(c)});return a.pop()},transition:function(a,b){var c=n(a),d=c._space(),e=q[d],g=0===
this.alpha()?n("transparent"):this,h=g[e.cache]||e.to(g._rgba),m=h.slice(),c=c[e.cache];A(e.props,function(a,d){var e=d.idx,g=h[e],l=c[e],n=t[d.type]||{};null!==l&&(null===g?m[e]=l:(n.mod&&(l-g>n.mod/2?g+=n.mod:g-l>n.mod/2&&(g-=n.mod)),m[e]=f((l-g)*b+g,d)))});return this[d](m)},blend:function(a){if(1===this._rgba[3])return this;var c=this._rgba.slice(),e=c.pop(),f=n(a)._rgba;return n(b.map(c,function(a,b){return(1-e)*f[b]+e*a}))},toRgbaString:function(){var a="rgba(",c=b.map(this._rgba,function(a,
b){return null==a?2<b?1:0:a});1===c[3]&&(c.pop(),a="rgb(");return a+c.join()+")"},toHslaString:function(){var a="hsla(",c=b.map(this.hsla(),function(a,b){null==a&&(a=2<b?1:0);b&&3>b&&(a=Math.round(100*a)+"%");return a});1===c[3]&&(c.pop(),a="hsl(");return a+c.join()+")"},toHexString:function(a){var c=this._rgba.slice(),e=c.pop();a&&c.push(~~(255*e));return"#"+b.map(c,function(a){a=(a||0).toString(16);return 1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":
this.toRgbaString()}});n.fn.parse.prototype=n.fn;q.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/255,c=a[1]/255,d=a[2]/255;a=a[3];var e=Math.max(b,c,d),f=Math.min(b,c,d),g=e-f,h=e+f,m=.5*h,h=0===m||1===m?m:.5>=m?g/h:g/(2-h);return[Math.round(f===e?0:b===e?60*(c-d)/g+360:c===e?60*(d-b)/g+120:60*(b-c)/g+240)%360,h,m,null==a?1:a]};q.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2];a=
a[3];c=.5>=d?d*(1+c):d+c-d*c;d=2*d-c;return[Math.round(255*h(d,c,b+1/3)),Math.round(255*h(d,c,b)),Math.round(255*h(d,c,b-1/3)),a]};A(q,function(a,g){var h=g.props,m=g.cache,q=g.to,t=g.from;n.fn[a]=function(a){q&&!this[m]&&(this[m]=q(this._rgba));if(a===c)return this[m].slice();var g,l=b.type(a),u="array"===l||"object"===l?a:arguments,x=this[m].slice();A(h,function(a,b){var c=u["object"===l?a:b.idx];null==c&&(c=x[b.idx]);x[b.idx]=f(c,b)});return t?(g=n(t(x)),g[m]=x,g):n(x)};A(h,function(c,e){n.fn[c]||
(n.fn[c]=function(f){var g=b.type(f),h="alpha"===c?this._hsla?"hsla":"rgba":a,m=this[h](),n=m[e.idx];if("undefined"===g)return n;"function"===g&&(f=f.call(this,n),g=b.type(f));if(null==f&&e.empty)return this;"string"===g&&(g=l.exec(f))&&(f=n+parseFloat(g[2])*("+"===g[1]?1:-1));m[e.idx]=f;return this[h](m)})})});A("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),function(a,c){b.cssHooks[c]=
{set:function(a,e){var f,h="";if("string"!==b.type(e)||(f=g(e))){e=n(f||e);if(!x.rgba&&1!==e._rgba[3]){for(f="backgroundColor"===c?a.parentNode:a;(""===h||"transparent"===h)&&f&&f.style;)try{h=b.css(f,"backgroundColor"),f=f.parentNode}catch(m){}e=e.blend(h&&"transparent"!==h?h:"_default")}e=e.toRgbaString()}try{a.style[c]=e}catch(l){}}};b.fx.step[c]=function(a){a.colorInit||(a.start=n(a.elem,c),a.end=n(a.end),a.colorInit=!0);b.cssHooks[c].set(a.elem,a.start.transition(a.end,a.pos))}});b.cssHooks.borderColor=
{expand:function(a){var b={};A(["Top","Right","Bottom","Left"],function(c,d){b["border"+d+"Color"]=a});return b}};E=b.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(jQuery);(function(){function b(){var c=this.ownerDocument.defaultView?
this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,d={},e,f;if(c&&c.length&&c[0]&&c[c[0]])for(f=c.length;f--;)e=c[f],"string"===typeof c[e]&&(d[a.camelCase(e)]=c[e]);else for(e in c)"string"===typeof c[e]&&(d[e]=c[e]);return d}var e=["add","remove","toggle"],f={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(b,c){a.fx.step[c]=
function(a){if("none"!==a.end&&!a.setAttr||1===a.pos&&!a.setAttr)jQuery.style(a.elem,c,a.end),a.setAttr=!0}});a.effects.animateClass=function(c,h,l,m){var n=a.speed(h,l,m);return this.queue(function(){var h=a(this),m=h.attr("class")||"",l,u=n.children?h.find("*").andSelf():h,u=u.map(function(){return{el:a(this),start:b.call(this)}});l=function(){a.each(e,function(a,b){if(c[b])h[b+"Class"](c[b])})};l();u=u.map(function(){this.end=b.call(this.el[0]);var c=this.start,e=this.end,g={},h,m;for(h in e)m=
e[h],c[h]===m||f[h]||!a.fx.step[h]&&isNaN(parseFloat(m))||(g[h]=m);this.diff=g;return this});h.attr("class",m);u=u.map(function(){var b=this,c=a.Deferred(),d=jQuery.extend({},n,{queue:!1,complete:function(){c.resolve(b)}});this.el.animate(this.diff,d);return c.promise()});a.when.apply(a,u.get()).done(function(){l();a.each(arguments,function(){var b=this.el;a.each(this.diff,function(a){b.css(a,"")})});n.complete.call(h[0])})})};a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,e){return c?
a.effects.animateClass.call(this,{add:b},c,d,e):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.call(this,{remove:b},c,d,e):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(b,d,e,f,n){return"boolean"===typeof d||d===c?e?a.effects.animateClass.call(this,d?{add:b}:{remove:b},e,f,n):this._toggleClass(b,d):a.effects.animateClass.call(this,{toggle:b},d,e,f)},switchClass:function(b,c,d,e,f){return a.effects.animateClass.call(this,
{add:c,remove:b},d,e,f)}})})();(function(){function d(b,c,d,e){a.isPlainObject(b)&&(c=b,b=b.effect);b={effect:b};null==c&&(c={});a.isFunction(c)&&(e=c,d=null,c={});if("number"===typeof c||a.fx.speeds[c])e=d,d=c,c={};a.isFunction(d)&&(e=d,d=null);c&&a.extend(b,c);d=d||c.duration;b.duration=a.fx.off?0:"number"===typeof d?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default;b.complete=e||c.complete;return b}function e(c){return!c||"number"===typeof c||a.fx.speeds[c]?!0:"string"!==typeof c||a.effects.effect[c]?
!1:b&&a.effects[c]?!1:!0}a.extend(a.effects,{version:"1.9.1",save:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.data("ui-effects-"+b[c],a[0].style[b[c]])},restore:function(a,b){var d,e;for(e=0;e<b.length;e++)null!==b[e]&&(d=a.data("ui-effects-"+b[e]),d===c&&(d=""),a.css(b[e],d))},setMode:function(a,b){"toggle"===b&&(b=a.is(":hidden")?"show":"hide");return b},getBaseline:function(a,b){var c,d;switch(a[0]){case "top":c=0;break;case "middle":c=.5;break;case "bottom":c=1;break;default:c=a[0]/
b.height}switch(a[1]){case "left":d=0;break;case "center":d=.5;break;case "right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:b.width(),height:b.height()},m=document.activeElement;try{m.id}catch(n){m=
document.body}b.wrap(d);(b[0]===m||a.contains(b[0],m))&&a(m).focus();d=b.parent();"static"===b.css("position")?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d);isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));b.css(e);return d.css(c).show()},removeWrapper:function(b){var c=document.activeElement;
b.parent().is(".ui-effects-wrapper")&&(b.parent().replaceWith(b),(b[0]===c||a.contains(b[0],c))&&a(c).focus());return b},setTransition:function(b,c,d,e){e=e||{};a.each(c,function(a,c){var g=b.cssUnit(c);0<g[0]&&(e[c]=g[0]*d+g[1])});return e}});a.fn.extend({effect:function(){function c(b){function d(){a.isFunction(h)&&h.call(f[0]);a.isFunction(b)&&b()}var f=a(this),h=e.complete,l=e.mode;(f.is(":hidden")?"hide"===l:"show"===l)?d():m.call(f[0],e,d)}var e=d.apply(this,arguments),h=e.mode,l=e.queue,m=
a.effects.effect[e.effect],n=!m&&b&&a.effects[e.effect];return a.fx.off||!m&&!n?h?this[h](e.duration,e.complete):this.each(function(){e.complete&&e.complete.call(this)}):m?!1===l?this.each(c):this.queue(l||"fx",c):n.call(this,{options:e,duration:e.duration,callback:e.complete,mode:e.mode})},_show:a.fn.show,show:function(a){if(e(a))return this._show.apply(this,arguments);var b=d.apply(this,arguments);b.mode="show";return this.effect.call(this,b)},_hide:a.fn.hide,hide:function(a){if(e(a))return this._hide.apply(this,
arguments);var b=d.apply(this,arguments);b.mode="hide";return this.effect.call(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(e(b)||"boolean"===typeof b||a.isFunction(b))return this.__toggle.apply(this,arguments);var c=d.apply(this,arguments);c.mode="toggle";return this.effect.call(this,c)},cssUnit:function(b){var c=this.css(b),d=[];a.each(["em","px","%","pt"],function(a,b){0<c.indexOf(b)&&(d=[parseFloat(c),b])});return d}})})();(function(){var b={};a.each(["Quad","Cubic","Quart","Quint","Expo"],
function(a,c){b[c]=function(b){return Math.pow(b,a+2)}});a.extend(b,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;a<((b=Math.pow(2,--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}});a.each(b,function(b,c){a.easing["easeIn"+b]=c;a.easing["easeOut"+b]=function(a){return 1-
c(1-a)};a.easing["easeInOut"+b]=function(a){return.5>a?c(2*a)/2:1-c(-2*a+2)/2}})})()}(jQuery);
(function(a,c){var b=/up|down|vertical/,d=/up|left|vertical|horizontal/;a.effects.effect.blind=function(c,f){var g=a(this),h="position top bottom left right height width".split(" "),l=a.effects.setMode(g,c.mode||"hide"),m=c.direction||"up",n=b.test(m),q=n?"height":"width",t=n?"top":"left",m=d.test(m),x={},u="show"===l,E,A,H;g.parent().is(".ui-effects-wrapper")?a.effects.save(g.parent(),h):a.effects.save(g,h);g.show();E=a.effects.createWrapper(g).css({overflow:"hidden"});A=E[q]();H=parseFloat(E.css(t))||
0;x[q]=u?A:0;m||(g.css(n?"bottom":"right",0).css(n?"top":"left","auto").css({position:"absolute"}),x[t]=u?H:A+H);u&&(E.css(q,0),m||E.css(t,H+A));E.animate(x,{duration:c.duration,easing:c.easing,queue:!1,complete:function(){"hide"===l&&g.hide();a.effects.restore(g,h);a.effects.removeWrapper(g);f()}})}})(jQuery);
(function(a,c){a.effects.effect.bounce=function(b,c){var e=a(this),f="position top bottom left right height width".split(" "),g=a.effects.setMode(e,b.mode||"effect"),h="hide"===g,l="show"===g,m=b.direction||"up",g=b.distance,n=b.times||5,q=2*n+(l||h?1:0),t=b.duration/q,x=b.easing,u="up"===m||"down"===m?"top":"left",m="up"===m||"left"===m,E,A,H=e.queue(),I=H.length;(l||h)&&f.push("opacity");a.effects.save(e,f);e.show();a.effects.createWrapper(e);g||(g=e["top"===u?"outerHeight":"outerWidth"]()/3);l&&
(A={opacity:1},A[u]=0,e.css("opacity",0).css(u,m?2*-g:2*g).animate(A,t,x));h&&(g/=Math.pow(2,n-1));A={};for(l=A[u]=0;l<n;l++)E={},E[u]=(m?"-=":"+=")+g,e.animate(E,t,x).animate(A,t,x),g=h?2*g:g/2;h&&(E={opacity:0},E[u]=(m?"-=":"+=")+g,e.animate(E,t,x));e.queue(function(){h&&e.hide();a.effects.restore(e,f);a.effects.removeWrapper(e);c()});1<I&&H.splice.apply(H,[1,0].concat(H.splice(I,q+1)));e.dequeue()}})(jQuery);
(function(a,c){a.effects.effect.clip=function(b,c){var e=a(this),f="position top bottom left right height width".split(" "),g="show"===a.effects.setMode(e,b.mode||"hide"),h="vertical"===(b.direction||"vertical"),l=h?"height":"width",h=h?"top":"left",m={},n,q;a.effects.save(e,f);e.show();n=a.effects.createWrapper(e).css({overflow:"hidden"});n="IMG"===e[0].tagName?n:e;q=n[l]();g&&(n.css(l,0),n.css(h,q/2));m[l]=g?q:0;m[h]=g?0:q/2;n.animate(m,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){g||
e.hide();a.effects.restore(e,f);a.effects.removeWrapper(e);c()}})}})(jQuery);
(function(a,c){a.effects.effect.drop=function(b,c){var e=a(this),f="position top bottom left right opacity height width".split(" "),g=a.effects.setMode(e,b.mode||"hide"),h="show"===g,l=b.direction||"left",m="up"===l||"down"===l?"top":"left",l="up"===l||"left"===l?"pos":"neg",n={opacity:h?1:0},q;a.effects.save(e,f);e.show();a.effects.createWrapper(e);q=b.distance||e["top"===m?"outerHeight":"outerWidth"](!0)/2;h&&e.css("opacity",0).css(m,"pos"===l?-q:q);n[m]=(h?"pos"===l?"+=":"-=":"pos"===l?"-=":"+=")+
q;e.animate(n,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===g&&e.hide();a.effects.restore(e,f);a.effects.removeWrapper(e);c()}})}})(jQuery);
(function(a,c){a.effects.effect.explode=function(b,c){function e(){t.push(this);t.length===f*g&&(h.css({visibility:"visible"}),a(t).remove(),l||h.hide(),c())}var f=b.pieces?Math.round(Math.sqrt(b.pieces)):3,g=f,h=a(this),l="show"===a.effects.setMode(h,b.mode||"hide"),m=h.show().css("visibility","hidden").offset(),n=Math.ceil(h.outerWidth()/g),q=Math.ceil(h.outerHeight()/f),t=[],x,u,E,A,H,I;for(x=0;x<f;x++)for(A=m.top+x*q,I=x-(f-1)/2,u=0;u<g;u++)E=m.left+u*n,H=u-(g-1)/2,h.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",
visibility:"visible",left:-u*n,top:-x*q}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:n,height:q,left:E+(l?H*n:0),top:A+(l?I*q:0),opacity:l?0:1}).animate({left:E+(l?0:H*n),top:A+(l?0:I*q),opacity:l?1:0},b.duration||500,b.easing,e)}})(jQuery);(function(a,c){a.effects.effect.fade=function(b,c){var e=a(this),f=a.effects.setMode(e,b.mode||"toggle");e.animate({opacity:f},{queue:!1,duration:b.duration,easing:b.easing,complete:c})}})(jQuery);
(function(a,c){a.effects.effect.fold=function(b,c){var e=a(this),f="position top bottom left right height width".split(" "),g=a.effects.setMode(e,b.mode||"hide"),h="show"===g,l="hide"===g,g=b.size||15,m=/([0-9]+)%/.exec(g),n=!!b.horizFirst,q=h!==n,t=q?["width","height"]:["height","width"],x=b.duration/2,u,E={},A={};a.effects.save(e,f);e.show();u=a.effects.createWrapper(e).css({overflow:"hidden"});q=q?[u.width(),u.height()]:[u.height(),u.width()];m&&(g=parseInt(m[1],10)/100*q[l?0:1]);h&&u.css(n?{height:0,
width:g}:{height:g,width:0});E[t[0]]=h?q[0]:g;A[t[1]]=h?q[1]:0;u.animate(E,x,b.easing).animate(A,x,b.easing,function(){l&&e.hide();a.effects.restore(e,f);a.effects.removeWrapper(e);c()})}})(jQuery);
(function(a,c){a.effects.effect.highlight=function(b,c){var e=a(this),f=["backgroundImage","backgroundColor","opacity"],g=a.effects.setMode(e,b.mode||"show"),h={backgroundColor:e.css("backgroundColor")};"hide"===g&&(h.opacity=0);a.effects.save(e,f);e.show().css({backgroundImage:"none",backgroundColor:b.color||"#ffff99"}).animate(h,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===g&&e.hide();a.effects.restore(e,f);c()}})}})(jQuery);
(function(a,c){a.effects.effect.pulsate=function(b,c){var e=a(this),f=a.effects.setMode(e,b.mode||"show"),g="show"===f,h="hide"===f,f=2*(b.times||5)+(g||"hide"===f?1:0),l=b.duration/f,m=0,n=e.queue(),q=n.length;if(g||!e.is(":visible"))e.css("opacity",0).show(),m=1;for(g=1;g<f;g++)e.animate({opacity:m},l,b.easing),m=1-m;e.animate({opacity:m},l,b.easing);e.queue(function(){h&&e.hide();c()});1<q&&n.splice.apply(n,[1,0].concat(n.splice(q,f+1)));e.dequeue()}})(jQuery);
(function(a,c){a.effects.effect.puff=function(b,c){var e=a(this),f=a.effects.setMode(e,b.mode||"hide"),g="hide"===f,h=parseInt(b.percent,10)||150,l=h/100,m={height:e.height(),width:e.width()};a.extend(b,{effect:"scale",queue:!1,fade:!0,mode:f,complete:c,percent:g?h:100,from:g?m:{height:m.height*l,width:m.width*l}});e.effect(b)};a.effects.effect.scale=function(b,c){var e=a(this),f=a.extend(!0,{},b),g=a.effects.setMode(e,b.mode||"effect"),h=parseInt(b.percent,10)||(0===parseInt(b.percent,10)?0:"hide"===
g?0:100),l=b.direction||"both",m=b.origin,n={height:e.height(),width:e.width(),outerHeight:e.outerHeight(),outerWidth:e.outerWidth()},q="horizontal"!==l?h/100:1,h="vertical"!==l?h/100:1;f.effect="size";f.queue=!1;f.complete=c;"effect"!==g&&(f.origin=m||["middle","center"],f.restore=!0);f.from=b.from||("show"===g?{height:0,width:0}:n);f.to={height:n.height*q,width:n.width*h,outerHeight:n.outerHeight*q,outerWidth:n.outerWidth*h};f.fade&&("show"===g&&(f.from.opacity=0,f.to.opacity=1),"hide"===g&&(f.from.opacity=
1,f.to.opacity=0));e.effect(f)};a.effects.effect.size=function(b,c){var e,f,g,h,l,m,n=a(this),q="position top bottom left right width height overflow opacity".split(" ");l="position top bottom left right overflow opacity".split(" ");var t=["width","height","overflow"],x=["fontSize"],u=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],E=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],A=a.effects.setMode(n,b.mode||"effect"),H=b.restore||"effect"!==A,I=b.scale||
"both";m=b.origin||["middle","center"];var y=n.css("position"),D=H?q:l,F={height:0,width:0};"show"===A&&n.show();l={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};"toggle"===b.mode&&"show"===A?(n.from=b.to||F,n.to=b.from||l):(n.from=b.from||("show"===A?F:l),n.to=b.to||("hide"===A?F:l));g=n.from.height/l.height;h=n.from.width/l.width;e=n.to.height/l.height;f=n.to.width/l.width;if("box"===I||"both"===I)g!==e&&(D=D.concat(u),n.from=a.effects.setTransition(n,
u,g,n.from),n.to=a.effects.setTransition(n,u,e,n.to)),h!==f&&(D=D.concat(E),n.from=a.effects.setTransition(n,E,h,n.from),n.to=a.effects.setTransition(n,E,f,n.to));"content"!==I&&"both"!==I||g===e||(D=D.concat(x).concat(t),n.from=a.effects.setTransition(n,x,g,n.from),n.to=a.effects.setTransition(n,x,e,n.to));a.effects.save(n,D);n.show();a.effects.createWrapper(n);n.css("overflow","hidden").css(n.from);m&&(m=a.effects.getBaseline(m,l),n.from.top=(l.outerHeight-n.outerHeight())*m.y,n.from.left=(l.outerWidth-
n.outerWidth())*m.x,n.to.top=(l.outerHeight-n.to.outerHeight)*m.y,n.to.left=(l.outerWidth-n.to.outerWidth)*m.x);n.css(n.from);if("content"===I||"both"===I)u=u.concat(["marginTop","marginBottom"]).concat(x),E=E.concat(["marginLeft","marginRight"]),t=q.concat(u).concat(E),n.find("*[width]").each(function(){var c=a(this),d=c.height(),m=c.width();H&&a.effects.save(c,t);c.from={height:d*g,width:m*h};c.to={height:d*e,width:m*f};g!==e&&(c.from=a.effects.setTransition(c,u,g,c.from),c.to=a.effects.setTransition(c,
u,e,c.to));h!==f&&(c.from=a.effects.setTransition(c,E,h,c.from),c.to=a.effects.setTransition(c,E,f,c.to));c.css(c.from);c.animate(c.to,b.duration,b.easing,function(){H&&a.effects.restore(c,t)})});n.animate(n.to,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){0===n.to.opacity&&n.css("opacity",n.from.opacity);"hide"===A&&n.hide();a.effects.restore(n,D);H||("static"===y?n.css({position:"relative",top:n.to.top,left:n.to.left}):a.each(["top","left"],function(a,b){n.css(b,function(b,c){var d=
parseInt(c,10),e=a?n.to.left:n.to.top;return"auto"===c?e+"px":d+e+"px"})}));a.effects.removeWrapper(n);c()}})}})(jQuery);
(function(a,c){a.effects.effect.shake=function(b,c){var e=a(this),f="position top bottom left right height width".split(" "),g=a.effects.setMode(e,b.mode||"effect"),h=b.direction||"left",l=b.distance||20,m=b.times||3,n=2*m+1,q=Math.round(b.duration/n),t="up"===h||"down"===h?"top":"left",x="up"===h||"left"===h,h={},u={},E={},A=e.queue(),H=A.length;a.effects.save(e,f);e.show();a.effects.createWrapper(e);h[t]=(x?"-=":"+=")+l;u[t]=(x?"+=":"-=")+2*l;E[t]=(x?"-=":"+=")+2*l;e.animate(h,q,b.easing);for(l=
1;l<m;l++)e.animate(u,q,b.easing).animate(E,q,b.easing);e.animate(u,q,b.easing).animate(h,q/2,b.easing).queue(function(){"hide"===g&&e.hide();a.effects.restore(e,f);a.effects.removeWrapper(e);c()});1<H&&A.splice.apply(A,[1,0].concat(A.splice(H,n+1)));e.dequeue()}})(jQuery);
(function(a,c){a.effects.effect.slide=function(b,c){var e=a(this),f="position top bottom left right width height".split(" "),g=a.effects.setMode(e,b.mode||"show"),h="show"===g,l=b.direction||"left",m="up"===l||"down"===l?"top":"left",l="up"===l||"left"===l,n,q={};a.effects.save(e,f);e.show();n=b.distance||e["top"===m?"outerHeight":"outerWidth"](!0);a.effects.createWrapper(e).css({overflow:"hidden"});h&&e.css(m,l?isNaN(n)?"-"+n:-n:n);q[m]=(h?l?"+=":"-=":l?"-=":"+=")+n;e.animate(q,{queue:!1,duration:b.duration,
easing:b.easing,complete:function(){"hide"===g&&e.hide();a.effects.restore(e,f);a.effects.removeWrapper(e);c()}})}})(jQuery);
(function(a,c){a.effects.effect.transfer=function(b,c){var e=a(this),f=a(b.to),g="fixed"===f.css("position"),h=a("body"),l=g?h.scrollTop():0,h=g?h.scrollLeft():0,m=f.offset(),f={top:m.top-l,left:m.left-h,height:f.innerHeight(),width:f.innerWidth()},m=e.offset(),n=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(b.className).css({top:m.top-l,left:m.left-h,height:e.innerHeight(),width:e.innerWidth(),position:g?"fixed":"absolute"}).animate(f,b.duration,b.easing,function(){n.remove();
c()})}})(jQuery);
(function(a){a.widget("ui.multiAccordion",{options:{active:0,showAll:null,hideAll:null,_classes:{accordion:"ui-accordion ui-widget ui-helper-reset ui-accordion-icons",h3:"ui-accordion-header ui-helper-reset ui-state-default ui-corner-all",div:"ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom",divActive:"ui-accordion-content-active",span:"ui-icon ui-icon-triangle-1-e",stateDefault:"ui-state-default",stateHover:"ui-state-hover"}},_create:function(){var c=this,b=c.options,d=c.element,
e=d.children("h3");d.children("div");d.addClass(b._classes.accordion);e.each(function(d){var e=a(this);e.addClass(b._classes.h3).prepend('<span class="{class}"></span>'.replace(/{class}/,b._classes.span));c._isActive(d)&&c._showTab(e)});d.children("div").each(function(c){a(this).addClass(b._classes.div)});e.bind("click",function(d){d.preventDefault();d=a(this);var e={tab:d,content:d.next("div")};c._trigger("click",null,e);d.hasClass(b._classes.stateDefault)?c._showTab(d):c._hideTab(d)});e.bind("mouseover",
function(){a(this).addClass(b._classes.stateHover)});e.bind("mouseout",function(){a(this).removeClass(b._classes.stateHover)});c._trigger("init",null,d)},destroy:function(){var a=this.element,b=a.children("h3"),d=a.children("div");a.children("span").remove();var e=this.options;a.children("h3").unbind("click mouseover mouseout");a.removeClass(e._classes.accordion);b.removeClass(e._classes.h3).removeClass("ui-state-default ui-corner-all ui-state-active ui-corner-top").children("span").remove();d.removeClass(e._classes.div+
" "+e._classes.divActive).show()},_showTab:function(a){var b=a.children("span.ui-icon"),d=a.next(),e=this.options;a.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top");b.removeClass("ui-icon-triangle-1-e").addClass("ui-icon-triangle-1-s");d.slideDown("fast",function(){d.addClass(e._classes.divActive)});a={tab:a,content:a.next("div")};this._trigger("tabShown",null,a)},_hideTab:function(a){var b=a.children("span.ui-icon"),d=a.next(),e=this.options;a.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all");
b.removeClass("ui-icon-triangle-1-s").addClass("ui-icon-triangle-1-e");d.slideUp("fast",function(){d.removeClass(e._classes.divActive)});a={tab:a,content:a.next("div")};this._trigger("tabHidden",null,a)},_isActive:function(a){var b=this.options;if("boolean"!=typeof b.active||b.active)if(void 0!=b.active.length)for(var d=0;d<b.active.length;d++){if(b.active[d]==a)return!0}else return b.active==a;return!1},_getActiveTabs:function(){var c=[];this.element.children("div").each(function(b){var d=a(this);
d.is(":visible")&&c.push({index:b,tab:d.prev("h3"),content:d})});return 0==c.length?void 0:c},getActiveTabs:function(){var c=[];this.element.children("div").each(function(b){a(this).is(":visible")&&c.push(b)});return 0==c.length?[-1]:c},_setActiveTabs:function(c){var b=this,d=this.element;"undefined"!=typeof c&&d.children("div").each(function(d){var f=a(this).prev("h3");c.hasObject(d)?b._showTab(f):b._hideTab(f)})},_generateTabsArrayFromOptions:function(c){var b=[],d=this.element,e=d.children("h3").size();
if("array"===a.type(c))return c;if("number"===a.type(c))return[c];if("string"===a.type(c))switch(c.toLowerCase()){case "all":e=d.children("h3").size();for(c=0;c<e;c++)b.push(c);return b;case "none":return b=[-1]}},_setOption:function(c,b){a.Widget.prototype._setOption.apply(this,arguments);var d=this.element;switch(c){case "active":this._setActiveTabs(this._generateTabsArrayFromOptions(b));break;case "getActiveTabs":var d=this.element,e;d.children("div").each(function(b){a(this).is(":visible")&&(e=
e?e:[],e.push(b))});return 0==e.length?[-1]:e}}});Array.prototype.hasObject=Array.indexOf?function(a){return-1!==this.indexOf(a)}:function(a){for(var b=this.length+1;b-=1;)if(this[b-1]===a)return!0;return!1}})(jQuery);
(function(a){a.widget("ui.selectmenu",{options:{appendTo:"body",typeAhead:1E3,style:"dropdown",positionOptions:{my:"left top",at:"left bottom",offset:null},width:null,menuWidth:null,handleWidth:26,maxHeight:null,icons:null,format:null,escapeHtml:!1,bgImage:function(){}},_create:function(){var c=this,b=this.options,d=(this.element.attr("id")||"ui-selectmenu-"+Math.random().toString(16).slice(2,10)).replace(/(:|\.)/g,"");this.ids=[d,d+"-button",d+"-menu"];this._safemouseup=!0;this.isOpen=!1;this.newelement=
a("<a />",{"class":this.widgetBaseClass+" ui-widget ui-state-default ui-corner-all",id:this.ids[1],role:"button",href:"#nogo",tabindex:this.element.attr("disabled")?1:0,"aria-haspopup":!0,"aria-owns":this.ids[2]});this.newelementWrap=a("<span />").append(this.newelement).insertAfter(this.element);(d=this.element.attr("tabindex"))&&this.newelement.attr("tabindex",d);this.newelement.data("selectelement",this.element);this.selectmenuIcon=a('<span class="'+this.widgetBaseClass+'-icon ui-icon"></span>').prependTo(this.newelement);
this.newelement.prepend('<span class="'+c.widgetBaseClass+'-status" />');this.element.bind({"click.selectmenu":function(a){c.newelement.focus();a.preventDefault()}});this.newelement.bind("mousedown.selectmenu",function(a){c._toggle(a,!0);"popup"==b.style&&(c._safemouseup=!1,setTimeout(function(){c._safemouseup=!0},300));return!1}).bind("click.selectmenu",function(){return!1}).bind("keydown.selectmenu",function(b){var d=!1;switch(b.keyCode){case a.ui.keyCode.ENTER:d=!0;break;case a.ui.keyCode.SPACE:c._toggle(b);
break;case a.ui.keyCode.UP:b.altKey?c.open(b):c._moveSelection(-1);break;case a.ui.keyCode.DOWN:b.altKey?c.open(b):c._moveSelection(1);break;case a.ui.keyCode.LEFT:c._moveSelection(-1);break;case a.ui.keyCode.RIGHT:c._moveSelection(1);break;case a.ui.keyCode.TAB:d=!0;break;case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.HOME:c.index(0);break;case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.END:c.index(c._optionLis.length);break;default:d=!0}return d}).bind("keypress.selectmenu",function(a){0<a.which&&c._typeAhead(a.which,
"mouseup");return!0}).bind("mouseover.selectmenu",function(){b.disabled||a(this).addClass("ui-state-hover")}).bind("mouseout.selectmenu",function(){b.disabled||a(this).removeClass("ui-state-hover")}).bind("focus.selectmenu",function(){b.disabled||a(this).addClass("ui-state-focus")}).bind("blur.selectmenu",function(){b.disabled||a(this).removeClass("ui-state-focus")});a(document).bind("mousedown.selectmenu-"+this.ids[0],function(a){c.isOpen&&c.close(a)});this.element.bind("click.selectmenu",function(){c._refreshValue()}).bind("focus.selectmenu",
function(){c.newelement&&c.newelement[0].focus()});b.width||(b.width=this.element.outerWidth());this.newelement.width(b.width);this.element.hide();this.list=a("<ul />",{"class":"ui-widget ui-widget-content","aria-hidden":!0,role:"listbox","aria-labelledby":this.ids[1],id:this.ids[2]});this.listWrap=a("<div />",{"class":c.widgetBaseClass+"-menu"}).append(this.list).appendTo(b.appendTo);this.list.bind("keydown.selectmenu",function(b){var d=!1;switch(b.keyCode){case a.ui.keyCode.UP:b.altKey?c.close(b,
!0):c._moveFocus(-1);break;case a.ui.keyCode.DOWN:b.altKey?c.close(b,!0):c._moveFocus(1);break;case a.ui.keyCode.LEFT:c._moveFocus(-1);break;case a.ui.keyCode.RIGHT:c._moveFocus(1);break;case a.ui.keyCode.HOME:c._moveFocus(":first");break;case a.ui.keyCode.PAGE_UP:c._scrollPage("up");break;case a.ui.keyCode.PAGE_DOWN:c._scrollPage("down");break;case a.ui.keyCode.END:c._moveFocus(":last");break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:c.close(b,!0);a(b.target).parents("li:eq(0)").trigger("mouseup");
break;case a.ui.keyCode.TAB:d=!0;c.close(b,!0);a(b.target).parents("li:eq(0)").trigger("mouseup");break;case a.ui.keyCode.ESCAPE:c.close(b,!0);break;default:d=!0}return d}).bind("keypress.selectmenu",function(a){0<a.which&&c._typeAhead(a.which,"focus");return!0}).bind("mousedown.selectmenu mouseup.selectmenu",function(){return!1});a(window).bind("resize.selectmenu-"+this.ids[0],a.proxy(c.close,this))},_init:function(){var c=this,b=this.options,d=[];this.element.find("option").each(function(){var e=
a(this);d.push({value:e.attr("value"),text:c._formatText(e.text(),e),selected:e.attr("selected"),disabled:e.attr("disabled"),classes:e.attr("class"),typeahead:e.attr("typeahead"),parentOptGroup:e.parent("optgroup"),bgImage:b.bgImage.call(e)})});var e="popup"==c.options.style?" ui-state-active":"";this.list.html("");if(d.length)for(var f=0;f<d.length;f++){var g={role:"presentation"};d[f].disabled&&(g["class"]=this.namespace+"-state-disabled");var h={html:d[f].text||"&nbsp;",href:"#nogo",tabindex:-1,
role:"option","aria-selected":!1};d[f].disabled&&(h["aria-disabled"]=d[f].disabled);d[f].typeahead&&(h.typeahead=d[f].typeahead);h=a("<a/>",h).bind("focus.selectmenu",function(){a(this).parent().mouseover()}).bind("blur.selectmenu",function(){a(this).parent().mouseout()});g=a("<li/>",g).append(h).data("index",f).addClass(d[f].classes).data("optionClasses",d[f].classes||"").bind("mouseup.selectmenu",function(b){!c._safemouseup||c._disabled(b.currentTarget)||c._disabled(a(b.currentTarget).parents("ul>li."+
c.widgetBaseClass+"-group "))||(c.index(a(this).data("index")),c.select(b),c.close(b,!0));return!1}).bind("click.selectmenu",function(){return!1}).bind("mouseover.selectmenu",function(){a(this).hasClass(c.namespace+"-state-disabled")||a(this).parent("ul").parent("li").hasClass(c.namespace+"-state-disabled")||(c._selectedOptionLi().addClass(e),c._focusedOptionLi().removeClass(c.widgetBaseClass+"-item-focus ui-state-hover"),a(this).removeClass("ui-state-active").addClass(c.widgetBaseClass+"-item-focus ui-state-hover"))}).bind("mouseout.selectmenu",
function(){a(this).is(c._selectedOptionLi())&&a(this).addClass(e);a(this).removeClass(c.widgetBaseClass+"-item-focus ui-state-hover")});d[f].parentOptGroup.length?(h=c.widgetBaseClass+"-group-"+this.element.find("optgroup").index(d[f].parentOptGroup),this.list.find("li."+h).length?this.list.find("li."+h+":last ul").append(g):a(' <li role="presentation" class="'+c.widgetBaseClass+"-group "+h+(d[f].parentOptGroup.attr("disabled")?" "+this.namespace+'-state-disabled" aria-disabled="true"':'"')+'><span class="'+
c.widgetBaseClass+'-group-label">'+d[f].parentOptGroup.attr("label")+"</span><ul></ul></li> ").appendTo(this.list).find("ul").append(g)):g.appendTo(this.list);if(b.icons)for(var l in b.icons)g.is(b.icons[l].find)&&(g.data("optionClasses",d[f].classes+" "+c.widgetBaseClass+"-hasIcon").addClass(c.widgetBaseClass+"-hasIcon"),h=b.icons[l].icon||"",g.find("a:eq(0)").prepend('<span class="'+c.widgetBaseClass+"-item-icon ui-icon "+h+'"></span>'),d[f].bgImage&&g.find("span").css("background-image",d[f].bgImage))}else a('<li role="presentation"><a href="#nogo" tabindex="-1" role="option"></a></li>').appendTo(this.list);
f="dropdown"==b.style;this.newelement.toggleClass(c.widgetBaseClass+"-dropdown",f).toggleClass(c.widgetBaseClass+"-popup",!f);this.list.toggleClass(c.widgetBaseClass+"-menu-dropdown ui-corner-bottom",f).toggleClass(c.widgetBaseClass+"-menu-popup ui-corner-all",!f).find("li:first").toggleClass("ui-corner-top",!f).end().find("li:last").addClass("ui-corner-bottom");this.selectmenuIcon.toggleClass("ui-icon-triangle-1-s",f).toggleClass("ui-icon-triangle-2-n-s",!f);"dropdown"==b.style?this.list.width(b.menuWidth?
b.menuWidth:b.width):this.list.width(b.menuWidth?b.menuWidth:b.width-b.handleWidth);this.list.css("height","auto");f=this.listWrap.height();l=a(window).height();l=b.maxHeight?Math.min(b.maxHeight,l):l/3;f>l&&this.list.height(l);this._optionLis=this.list.find("li:not(."+c.widgetBaseClass+"-group)");this.element.attr("disabled")?this.disable():this.enable();this._refreshValue();this._selectedOptionLi().addClass(this.widgetBaseClass+"-item-focus");clearTimeout(this.refreshTimeout);this.refreshTimeout=
window.setTimeout(function(){c._refreshPosition()},200)},destroy:function(){this.element.removeData(this.widgetName).removeClass(this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").removeAttr("aria-disabled").unbind(".selectmenu");a(window).unbind(".selectmenu-"+this.ids[0]);a(document).unbind(".selectmenu-"+this.ids[0]);this.newelementWrap.remove();this.listWrap.remove();this.element.unbind(".selectmenu").show();a.Widget.prototype.destroy.apply(this,arguments)},_typeAhead:function(a,
b){var d=this,e=String.fromCharCode(a).toLowerCase(),f=null,g=null;d._typeAhead_timer&&(window.clearTimeout(d._typeAhead_timer),d._typeAhead_timer=void 0);d._typeAhead_chars=(void 0===d._typeAhead_chars?"":d._typeAhead_chars).concat(e);2>d._typeAhead_chars.length||d._typeAhead_chars.substr(-2,1)===e&&d._typeAhead_cycling?(d._typeAhead_cycling=!0,f=e):(d._typeAhead_cycling=!1,f=d._typeAhead_chars);for(var e=("focus"!==b?this._selectedOptionLi().data("index"):this._focusedOptionLi().data("index"))||
0,h=0;h<this._optionLis.length;h++)if(this._optionLis.eq(h).text().substr(0,f.length).toLowerCase()===f)if(d._typeAhead_cycling){if(null===g&&(g=h),h>e){g=h;break}}else g=h;null!==g&&this._optionLis.eq(g).find("a").trigger(b);d._typeAhead_timer=window.setTimeout(function(){d._typeAhead_timer=void 0;d._typeAhead_chars=void 0;d._typeAhead_cycling=void 0},d.options.typeAhead)},_uiHash:function(){var c=this.index();return{index:c,option:a("option",this.element).get(c),value:this.element[0].value}},open:function(a){var b=
this.options;if("true"!=this.newelement.attr("aria-disabled")){this._closeOthers(a);this.newelement.addClass("ui-state-active");this.list.attr("aria-hidden",!1);this.listWrap.addClass(this.widgetBaseClass+"-open");var d=this._selectedOptionLi();"dropdown"==b.style?this.newelement.removeClass("ui-corner-all").addClass("ui-corner-top"):this.list.css("left",-5E3).scrollTop(this.list.scrollTop()+d.position().top-this.list.outerHeight()/2+d.outerHeight()/2).css("left","auto");this._refreshPosition();b=
d.find("a");b.length&&b[0].focus();this.isOpen=!0;this._trigger("open",a,this._uiHash())}},close:function(a,b){this.newelement.is(".ui-state-active")&&(this.newelement.removeClass("ui-state-active"),this.listWrap.removeClass(this.widgetBaseClass+"-open"),this.list.attr("aria-hidden",!0),"dropdown"==this.options.style&&this.newelement.removeClass("ui-corner-top").addClass("ui-corner-all"),b&&this.newelement.focus(),this.isOpen=!1,this._trigger("close",a,this._uiHash()))},change:function(a){this.element.trigger("change");
this._trigger("change",a,this._uiHash())},select:function(a){if(this._disabled(a.currentTarget))return!1;this._trigger("select",a,this._uiHash())},widget:function(){return this.listWrap.add(this.newelementWrap)},_closeOthers:function(c){a("."+this.widgetBaseClass+".ui-state-active").not(this.newelement).each(function(){a(this).data("selectelement").selectmenu("close",c)});a("."+this.widgetBaseClass+".ui-state-hover").trigger("mouseout")},_toggle:function(a,b){this.isOpen?this.close(a,b):this.open(a)},
_formatText:function(c,b){this.options.format?c=this.options.format(c,b):this.options.escapeHtml&&(c=a("<div />").text(c).html());return c},_selectedIndex:function(){return this.element[0].selectedIndex},_selectedOptionLi:function(){return this._optionLis.eq(this._selectedIndex())},_focusedOptionLi:function(){return this.list.find("."+this.widgetBaseClass+"-item-focus")},_moveSelection:function(a,b){if(!this.options.disabled){var d=parseInt(this._selectedOptionLi().data("index")||0,10)+a;0>d&&(d=
0);d>this._optionLis.size()-1&&(d=this._optionLis.size()-1);if(d===b)return!1;this._optionLis.eq(d).hasClass(this.namespace+"-state-disabled")?(0<a?++a:--a,this._moveSelection(a,d)):this._optionLis.eq(d).trigger("mouseover").trigger("mouseup")}},_moveFocus:function(a,b){var d=isNaN(a)?parseInt(this._optionLis.filter(a).data("index"),10):parseInt(this._focusedOptionLi().data("index")||0,10)+a;0>d&&(d=0);d>this._optionLis.size()-1&&(d=this._optionLis.size()-1);if(d===b)return!1;var e=this.widgetBaseClass+
"-item-"+Math.round(1E3*Math.random());this._focusedOptionLi().find("a:eq(0)").attr("id","");this._optionLis.eq(d).hasClass(this.namespace+"-state-disabled")?(0<a?++a:--a,this._moveFocus(a,d)):this._optionLis.eq(d).find("a:eq(0)").attr("id",e).focus();this.list.attr("aria-activedescendant",e)},_scrollPage:function(a){var b=Math.floor(this.list.outerHeight()/this._optionLis.first().outerHeight());this._moveFocus("up"==a?-b:b)},_setOption:function(a,b){this.options[a]=b;"disabled"==a&&(b&&this.close(),
this.element.add(this.newelement).add(this.list)[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").attr("aria-disabled",b))},disable:function(a,b){"undefined"==typeof a?this._setOption("disabled",!0):"optgroup"==b?this._disableOptgroup(a):this._disableOption(a)},enable:function(a,b){"undefined"==typeof a?this._setOption("disabled",!1):"optgroup"==b?this._enableOptgroup(a):this._enableOption(a)},_disabled:function(c){return a(c).hasClass(this.namespace+
"-state-disabled")},_disableOption:function(a){var b=this._optionLis.eq(a);b&&(b.addClass(this.namespace+"-state-disabled").find("a").attr("aria-disabled",!0),this.element.find("option").eq(a).attr("disabled","disabled"))},_enableOption:function(a){var b=this._optionLis.eq(a);b&&(b.removeClass(this.namespace+"-state-disabled").find("a").attr("aria-disabled",!1),this.element.find("option").eq(a).removeAttr("disabled"))},_disableOptgroup:function(a){var b=this.list.find("li."+this.widgetBaseClass+"-group-"+
a);b&&(b.addClass(this.namespace+"-state-disabled").attr("aria-disabled",!0),this.element.find("optgroup").eq(a).attr("disabled","disabled"))},_enableOptgroup:function(a){var b=this.list.find("li."+this.widgetBaseClass+"-group-"+a);b&&(b.removeClass(this.namespace+"-state-disabled").attr("aria-disabled",!1),this.element.find("optgroup").eq(a).removeAttr("disabled"))},index:function(c){if(arguments.length){if(this._disabled(a(this._optionLis[c]))||c==this._selectedIndex())return!1;this.element[0].selectedIndex=
c;this._refreshValue();this.change()}else return this._selectedIndex()},value:function(a){if(arguments.length&&a!=this.element[0].value)this.element[0].value=a,this._refreshValue(),this.change();else return this.element[0].value},_refreshValue:function(){var a="popup"==this.options.style?" ui-state-active":"",b=this.widgetBaseClass+"-item-"+Math.round(1E3*Math.random());this.list.find("."+this.widgetBaseClass+"-item-selected").removeClass(this.widgetBaseClass+"-item-selected"+a).find("a").attr("aria-selected",
"false").attr("id","");this._selectedOptionLi().addClass(this.widgetBaseClass+"-item-selected"+a).find("a").attr("aria-selected","true").attr("id",b);var a=this.newelement.data("optionClasses")?this.newelement.data("optionClasses"):"",d=this._selectedOptionLi().data("optionClasses")?this._selectedOptionLi().data("optionClasses"):"";this.newelement.removeClass(a).data("optionClasses",d).addClass(d).find("."+this.widgetBaseClass+"-status").html(this._selectedOptionLi().find("a:eq(0)").html());this.list.attr("aria-activedescendant",
b)},_refreshPosition:function(){var a=this.options;if("popup"==a.style&&!a.positionOptions.offset)var b=this._selectedOptionLi(),b="0 "+(this.list.offset().top-b.offset().top-(this.newelement.outerHeight()+b.outerHeight())/2);this.listWrap.removeAttr("style").zIndex(this.element.zIndex()+1).position({of:a.positionOptions.of||this.newelement,my:a.positionOptions.my,at:a.positionOptions.at,offset:a.positionOptions.offset||b,collision:a.positionOptions.collision||("popup"==a.style?"fit":"flip")})}})})(jQuery);
(function(a){a.widget("ui.panel",{options:{event:"click",collapsible:!0,collapseType:"default",collapsed:!1,accordion:!1,collapseSpeed:"fast",draggable:!1,trueVerticalText:!0,vHeight:"220px",stackable:!0,width:"auto",controls:!1,cookie:null,widgetClass:"ui-helper-reset ui-widget ui-panel",headerClass:"ui-helper-reset ui-widget-header ui-panel-header ui-corner-top",contentClass:"ui-helper-reset ui-widget-content ui-panel-content ui-corner-bottom",contentTextClass:"ui-panel-content-text",rightboxClass:"ui-panel-rightbox",
controlsClass:"ui-panel-controls",titleClass:"ui-panel-title",titleTextClass:"ui-panel-title-text",iconClass:"ui-icon",hoverClass:"ui-state-disabled",collapsePnlClass:"ui-panel-clps-pnl",headerIconClpsd:"ui-icon-triangle-1-e",headerIcon:"ui-icon-triangle-1-s",slideRIconClpsd:"ui-icon-arrowthickstop-1-w",slideRIcon:"ui-icon-arrowthickstop-1-e",slideLIconClpsd:"ui-icon-arrowthickstop-1-e",slideLIcon:"ui-icon-arrowthickstop-1-w"},_init:function(){this._panelize()},_panelize:function(){if(this.element.is("div")){var c=
this,b=this.options;this.panelBox=this.element;"auto"==b.width?b.width=this.panelBox.css("width"):this.panelBox.css("width",b.width);this.panelBox.attr("role","panel");b.id=this.panelBox.attr("id");this.headerBox=this.element.children(":first");this.contentBox=this.element.children().eq(1);b.content=this.contentBox.html();this.contentBox.wrapInner("<div/>");this.contentTextBox=this.contentBox.children(":first").addClass(b.contentTextClass);this.headerBox.wrapInner("<div><span/></div>");this.titleBox=
this.headerBox.children(":first");this.titleTextBox=this.titleBox.children(":first");this.titleText=this.titleTextBox.html();this.headerBox.prepend("<span/>");this.rightBox=this.headerBox.children(":first").addClass(b.rightboxClass);0!=b.controls?(this.rightBox.append("<span/>"),this.controlsBox=this.rightBox.children(":first").addClass(b.controlsClass).html(b.controls)):this.controlsBox=null;this.panelBox.addClass(b.widgetClass);this.headerBox.addClass(b.headerClass);this.titleBox.addClass(b.titleClass);
this.titleTextBox.addClass(b.titleTextClass);this.contentBox.addClass(b.contentClass);if(b.collapsible){switch(b.collapseType){case "slide-right":var d=0;b.controls&&(d=1);this.rightBox.append("<span><span/></span>");this.collapsePanel=this.rightBox.children().eq(d).addClass(b.collapsePnlClass);this.collapseButton=this.collapsePanel.children(":first").addClass(b.slideRIcon);this.iconBtnClpsd=b.slideRIconClpsd;this.iconBtn=b.slideRIcon;this.ctrlBox=this.controlsBox;break;case "slide-left":this.headerBox.prepend("<span><span/></span>");
this.collapsePanel=this.headerBox.children(":first").addClass(b.collapsePnlClass);this.collapseButton=this.collapsePanel.children(":first").addClass(b.slideLIcon);this.iconBtnClpsd=b.slideLIconClpsd;this.iconBtn=b.slideLIcon;this.ctrlBox=this.rightBox;break;default:this.headerBox.prepend("<span><span/></span>"),this.collapseButton=this.headerBox.children(":first").addClass(b.headerIcon),this.iconBtnClpsd=b.headerIconClpsd,this.iconBtn=b.headerIcon,this.ctrlBox=this.controlsBox}this._buttonHover(this.collapseButton);
this.collapseButton.addClass(b.iconClass);b.event&&(this.collapseButton.bind(b.event+".panel",function(a){return c._clickHandler.call(c,a,this)}),this.titleTextBox.bind(b.event+".panel",function(a){return c._clickHandler.call(c,a,this)}));b.accordion&&(b.collapsed=!0,b.trueVerticalText=!1);b.cookie&&(0==c._cookie()?b.collapsed=!1:b.collapsed=!0);this.panelBox.data("collapsed",b.collapsed);b.stackable&&-1<a.inArray(b.collapseType,["slide-right","slide-left"])&&(this.panelDock=this.panelBox.siblings("div[role=panelDock]:first"),
this.panelFrame=this.panelBox.siblings("div[role=panelFrame]:first"),0==this.panelDock.length&&(this.panelDock=this.panelBox.parent(0).prepend("<div>").children(":first"),this.panelFrame=this.panelDock.after("<div>").next(":first"),this.panelDock.attr("role","panelDock").css("float","slide-left"==b.collapseType?"left":"right"),this.panelFrame.attr("role","panelFrame").css({"float":"slide-left"==b.collapseType?"left":"right",overflow:"hidden"})),b.collapsed?this.panelDock.append(this.panelBox):this.panelFrame.append(this.panelBox));
b.collapsed&&c.toggle(0,!0)}else this.titleTextBox.css("cursor","default");!b.accordion&&b.draggable&&a.fn.draggable&&this._makeDraggable();this.panelBox.show()}},_cookie:function(){var c=this.cookie||(this.cookie=this.options.cookie.name||"ui-panel-"+this.options.id);return a.cookie.apply(null,[c].concat(a.makeArray(arguments)))},_makeDraggable:function(){this.panelBox.draggable({containment:"document",handle:".ui-panel-header",cancel:".ui-panel-content",cursor:"move"})},_clickHandler:function(a,
b){var d=this.options;if(d.disabled)return!1;this.toggle(d.collapseSpeed);return!1},toggle:function(c,b){var d=this.options,e=this.panelBox,f=this.contentBox,g=this.headerBox,h=this.titleTextBox,l=this.titleText,m=this.ctrlBox,n=this.panelDock,q="";jQuery.support.leadingWhitespace||(q="-ie");"none"==f.css("display")?this._trigger("unfold"):this._trigger("fold");m&&m.toggle(0);"default"==d.collapseType?0==c?(m&&m.hide(),f.hide()):f.slideToggle(c):(0==c?(d.collapsed=!1,m&&m.hide(),f.hide()):f.toggle(),
0==d.collapsed?(d.trueVerticalText?(g.toggleClass("ui-panel-vtitle").css("height",d.vHeight),""==q&&(f="height:"+(parseInt(d.vHeight)-50)+"px;width:100%;position:absolute;bottom:0;left:0;",h.empty().append('<div style="'+f+'z-index:3;"></div><object style="'+f+'z-index:2;" type="image/svg+xml" data="data:image/svg+xml;charset=utf-8,<svg xmlns=\'http://www.w3.org/2000/svg\'><text x=\'-'+(parseInt(d.vHeight)-60)+"px' y='16px' style='font-weight:"+h.css("font-weight")+";font-family:"+h.css("font-family").replace(/"/g,
"")+";font-size:"+h.css("font-size")+";fill:"+h.css("color")+";' transform='rotate(-90)' text-rendering='optimizeSpeed'>"+l+'</text></svg>"></object>').css("height",d.vHeight)),h.toggleClass("ui-panel-vtext"+q)):(g.attr("align","center"),h.html(h.text().replace(/(.)/g,"$1<BR>"))),d.stackable&&(b?n.append(e):n.prepend(e))):(d.stackable&&this.panelFrame.append(e),d.trueVerticalText?(g.toggleClass("ui-panel-vtitle").css("height","auto"),h.empty().append(l),h.toggleClass("ui-panel-vtext"+q)):(g.attr("align",
"left"),h.html(h.text().replace(/<BR>/g," ")))));if((0!=c||d.trueVerticalText)&&null==d.cookie||!b&&null!=d.cookie)d.collapsed=!d.collapsed;this.panelBox.data("collapsed",d.collapsed);b||(d.cookie&&this._cookie(Number(d.collapsed),d.cookie),d.accordion&&a("."+d.accordion+"[role='panel'][id!='"+d.id+"']:not(:data(collapsed))").panel("toggle",c,!0));this.collapseButton.toggleClass(this.iconBtnClpsd).toggleClass(this.iconBtn);g.toggleClass("ui-corner-all")},content:function(a){this.contentTextBox.html(a)},
destroy:function(){var c=this.options;this.headerBox.html(this.titleText).removeAttr("align").removeAttr("style").removeClass("ui-panel-vtitle ui-corner-all "+c.headerClass);this.contentBox.removeClass(c.contentClass).removeAttr("style").html(c.content);this.panelBox.removeAttr("role").removeAttr("style").removeData("collapsed").unbind(".panel").removeClass(c.widgetClass);c.stackable&&-1<a.inArray(c.collapseType,["slide-right","slide-left"])&&(this.panelDock.before(this.panelBox),0==this.panelDock.children("div[role=panel]").length&&
0==this.panelFrame.children("div[role=panel]").length&&(this.panelDock.remove(),this.panelFrame.remove()));c.cookie&&this._cookie(null,c.cookie);return this},_buttonHover:function(c){var b=this.options;c.bind({mouseover:function(){a(this).addClass(b.hoverClass)},mouseout:function(){a(this).removeClass(b.hoverClass)}})}});a.extend(a.ui.panel,{version:"0.6"})})(jQuery);
(function(a){a.widget("ui.multiselect",{options:{sortable:!0,searchable:!0,doubleClickable:!0,animated:"fast",show:"slideDown",hide:"slideUp",dividerLocation:.6,availableFirst:!1,nodeComparator:function(a,b){var d=a.text(),e=b.text();return d==e?0:d<e?-1:1}},_create:function(){this.element.hide();this.id=this.element.attr("id");this.container=a('<div class="ui-multiselect ui-helper-clearfix ui-widget"></div>').insertAfter(this.element);this.count=0;this.selectedContainer=a('<div class="selected"></div>').appendTo(this.container);
this.availableContainer=a('<div class="available"></div>')[this.options.availableFirst?"prependTo":"appendTo"](this.container);this.selectedActions=a('<div class="actions ui-widget-header ui-helper-clearfix"><span class="count">0 '+a.ui.multiselect.locale.itemsCount+'</span><a href="#" class="remove-all">'+a.ui.multiselect.locale.removeAll+"</a></div>").appendTo(this.selectedContainer);this.availableActions=a('<div class="actions ui-widget-header ui-helper-clearfix"><input type="text" class="search empty ui-widget-content ui-corner-all"/><a href="#" class="add-all">'+
a.ui.multiselect.locale.addAll+"</a></div>").appendTo(this.availableContainer);this.selectedList=a('<ul class="selected connected-list"><li class="ui-helper-hidden-accessible"></li></ul>').bind("selectstart",function(){return!1}).appendTo(this.selectedContainer);this.availableList=a('<ul class="available connected-list"><li class="ui-helper-hidden-accessible"></li></ul>').bind("selectstart",function(){return!1}).appendTo(this.availableContainer);var c=this;this.container.width(this.element.width()+
1);this.selectedContainer.width(Math.floor(this.element.width()*this.options.dividerLocation));this.availableContainer.width(Math.floor(this.element.width()*(1-this.options.dividerLocation)));this.selectedList.height(Math.max(this.element.height()-this.selectedActions.height(),1));this.availableList.height(Math.max(this.element.height()-this.availableActions.height(),1));this.options.animated||(this.options.show="show",this.options.hide="hide");this._populateLists(this.element.find("option"));this.options.sortable&&
this.selectedList.sortable({placeholder:"ui-state-highlight",axis:"y",update:function(b,d){c.selectedList.find("li").each(function(){a(this).data("optionLink")&&a(this).data("optionLink").remove().appendTo(c.element)})},receive:function(b,d){d.item.data("optionLink").attr("selected",!0);c.count+=1;c._updateCount();c.selectedList.children(".ui-draggable").each(function(){a(this).removeClass("ui-draggable");a(this).data("optionLink",d.item.data("optionLink"));a(this).data("idx",d.item.data("idx"));
c._applyItemState(a(this),!0)});setTimeout(function(){d.item.remove()},1)}});this.options.searchable?this._registerSearchEvents(this.availableContainer.find("input.search")):a(".search").hide();this.container.find(".remove-all").click(function(){c._populateLists(c.element.find("option").removeAttr("selected"));return!1});this.container.find(".add-all").click(function(){var b=c.element.find("option").not(":selected");1<c.availableList.children("li:hidden").length?c.availableList.children("li").each(function(c){a(this).is(":visible")&&
a(b[c-1]).attr("selected","selected")}):b.attr("selected","selected");c._populateLists(c.element.find("option"));return!1})},destroy:function(){this.element.show();this.container.remove();a.Widget.prototype.destroy.apply(this,arguments)},_populateLists:function(c){this.selectedList.children(".ui-element").remove();this.availableList.children(".ui-element").remove();this.count=0;var b=this;a(c.map(function(a){var c=b._getOptionNode(this).appendTo(this.selected?b.selectedList:b.availableList).show();
this.selected&&(b.count+=1);b._applyItemState(c,this.selected);c.data("idx",a);return c[0]}));this._updateCount();b._order.apply(this.availableContainer.find("input.search"),[b.availableList])},_updateCount:function(){this.element.trigger("change");this.selectedContainer.find("span.count").text(this.count+" "+a.ui.multiselect.locale.itemsCount)},_getOptionNode:function(c){c=a(c);var b=a('<li class="ui-state-default ui-element" title="'+c.text()+'"><span class="ui-icon"/>'+c.text()+'<a href="#" class="action"><span class="ui-corner-all ui-icon"/></a></li>').hide();
b.data("optionLink",c);return b},_cloneWithData:function(a){var b=a.clone(!1,!1);b.data("optionLink",a.data("optionLink"));b.data("idx",a.data("idx"));return b},_setSelected:function(c,b){c.data("optionLink").attr("selected",b);if(b){var d=this._cloneWithData(c);c[this.options.hide](this.options.animated,function(){a(this).remove()});d.appendTo(this.selectedList).hide()[this.options.show](this.options.animated);this._applyItemState(d,!0);return d}var e=this.availableList.find("li"),f=this.options.nodeComparator,
d=null,g=c.data("idx"),h=f(c,a(e[g]));if(h)for(;0<=g&&g<e.length;){if(0<h?g++:g--,h!=f(c,a(e[g]))){d=e[0<h?g:g+1];break}}else d=e[g];e=this._cloneWithData(c);d?e.insertBefore(a(d)):e.appendTo(this.availableList);c[this.options.hide](this.options.animated,function(){a(this).remove()});e.hide()[this.options.show](this.options.animated);this._applyItemState(e,!1);return e},_applyItemState:function(a,b){b?(this.options.sortable?a.children("span").addClass("ui-icon-arrowthick-2-n-s").removeClass("ui-helper-hidden").addClass("ui-icon"):
a.children("span").removeClass("ui-icon-arrowthick-2-n-s").addClass("ui-helper-hidden").removeClass("ui-icon"),a.find("a.action span").addClass("ui-icon-minus").removeClass("ui-icon-plus"),this._registerRemoveEvents(a.find("a.action"))):(a.children("span").removeClass("ui-icon-arrowthick-2-n-s").addClass("ui-helper-hidden").removeClass("ui-icon"),a.find("a.action span").addClass("ui-icon-plus").removeClass("ui-icon-minus"),this._registerAddEvents(a.find("a.action")));this._registerDoubleClickEvents(a);
this._registerHoverEvents(a)},_order:function(c){var b=a(this),d=c.children("li");c=d.map(function(){return a(this).text().toLowerCase()});var e=a.trim(b.val().toLowerCase()),f=[];e?(d.hide(),c.each(function(a){-1<this.indexOf(e)&&f.push(a)}),a.each(f,function(){a(d[this]).show()})):d.show()},_registerDoubleClickEvents:function(c){this.options.doubleClickable&&c.dblclick(function(b){0===a(b.target).closest(".action").length&&c.find("a.action").click()})},_registerHoverEvents:function(c){c.removeClass("ui-state-hover");
c.mouseover(function(){a(this).addClass("ui-state-hover")});c.mouseout(function(){a(this).removeClass("ui-state-hover")})},_registerAddEvents:function(c){var b=this;c.click(function(){b._setSelected(a(this).parent(),!0);b.count+=1;b._updateCount();return!1});this.options.sortable&&c.each(function(){a(this).parent().draggable({connectToSortable:b.selectedList,helper:function(){var c=b._cloneWithData(a(this)).width(a(this).width()-50);c.width(a(this).width());return c},appendTo:b.container,containment:b.container,
revert:"invalid"})})},_registerRemoveEvents:function(c){var b=this;c.click(function(){b._setSelected(a(this).parent(),!1);b.count-=1;b._updateCount();return!1})},_registerSearchEvents:function(c){var b=this;c.focus(function(){a(this).addClass("ui-state-active")}).blur(function(){a(this).removeClass("ui-state-active")}).keypress(function(a){if(13==a.keyCode)return!1}).keyup(function(){b._order.apply(this,[b.availableList])})},selectedValues:function(){var c=[];this.selectedList.find("li").each(function(b,
d){var e=a(d).data("optionLink");e&&c.push(e.val())});return c}});a.extend(a.ui.multiselect,{locale:{addAll:"Add all",removeAll:"Remove all",itemsCount:"items selected"}})})(jQuery);
(function(a,c,b){var d=/\r/g,e=/^(button|checkbox|hidden|image|radio|range|reset|submit)$/i,f=["Page_ClientValidate"],g=!1,h="placeholder"in document.createElement("input");a.watermark=a.watermark||{version:"3.1.4",runOnce:!0,options:{className:"watermark",useNative:!0,hideBeforeUnload:!0},hide:function(b){a(b).filter("input:data(watermark),textarea:data(watermark)").each(function(){a.watermark._hide(a(this))})},_hide:function(a,b){var e=a[0],f=(e.value||"").replace(d,""),g=a.data("watermarkText")||
"",h=a.data("watermarkMaxLength")||0,u=a.data("watermarkClass"),E,A;g.length&&f==g&&(e.value="",a.data("watermarkPassword")&&"text"===(a.attr("type")||"")&&(E=a.data("watermarkPassword")||[],A=a.parent()||[],E.length&&A.length&&(A[0].removeChild(a[0]),A[0].appendChild(E[0]),a=E)),h&&(a.attr("maxLength",h),a.removeData("watermarkMaxLength")),b&&(a.attr("autocomplete","off"),c.setTimeout(function(){a.select()},1)));u&&a.removeClass(u)},show:function(b){a(b).filter("input:data(watermark),textarea:data(watermark)").each(function(){a.watermark._show(a(this))})},
_show:function(b){var c=b[0],e=(c.value||"").replace(d,""),f=b.data("watermarkText")||"",h=b.attr("type")||"",x=b.data("watermarkClass"),u,E,A;0!=e.length&&e!=f||b.data("watermarkFocus")?a.watermark._hide(b):(g=!0,b.data("watermarkPassword")&&"password"===h&&(u=b.data("watermarkPassword")||[],E=b.parent()||[],u.length&&E.length&&(E[0].removeChild(b[0]),E[0].appendChild(u[0]),b=u,b.attr("maxLength",f.length),c=b[0])),("text"===h||"search"===h)&&(A=b.attr("maxLength")||0,0<A&&f.length>A&&(b.data("watermarkMaxLength",
A),b.attr("maxLength",f.length))),x&&b.addClass(x),c.value=f)},hideAll:function(){g&&(a.watermark.hide(":watermarkable"),g=!1)},showAll:function(){a.watermark.show(":watermarkable")}};a.fn.watermark=a.fn.watermark||function(b,e){if(!this.length)return this;var f=!1,g="string"==typeof b;return g&&(b=b.replace(d,"")),"object"==typeof e?(f="string"==typeof e.className,e=a.extend({},a.watermark.options,e)):"string"==typeof e?(f=!0,e=a.extend({},a.watermark.options,{className:e})):e=a.watermark.options,
"function"!=typeof e.useNative&&(e.useNative=e.useNative?function(){return!0}:function(){return!1}),this.each(function(){var t=a(this),x,u,E,A;if(t.is(":watermarkable")){if(t.data("watermark"))(g||f)&&(a.watermark._hide(t),g&&t.data("watermarkText",b),f&&t.data("watermarkClass",e.className));else{if(h&&e.useNative.call(this,t)&&"TEXTAREA"!==(t.attr("tagName")||"")){g&&t.attr("placeholder",b);return}t.data("watermarkText",g?b:"");t.data("watermarkClass",e.className);t.data("watermark",1);"password"===
(t.attr("type")||"")?(x=t.wrap("<span>").parent(),u=a(x.html().replace(/type=["']?password["']?/i,'type="text"')),u.data("watermarkText",t.data("watermarkText")),u.data("watermarkClass",t.data("watermarkClass")),u.data("watermark",1),u.attr("maxLength",b.length),u.focus(function(){a.watermark._hide(u,!0)}).bind("dragenter",function(){a.watermark._hide(u)}).bind("dragend",function(){c.setTimeout(function(){u.blur()},1)}),t.blur(function(){a.watermark._show(t)}).bind("dragleave",function(){a.watermark._show(t)}),
u.data("watermarkPassword",t),t.data("watermarkPassword",u)):t.focus(function(){t.data("watermarkFocus",1);a.watermark._hide(t,!0)}).blur(function(){t.data("watermarkFocus",0);a.watermark._show(t)}).bind("dragenter",function(){a.watermark._hide(t)}).bind("dragleave",function(){a.watermark._show(t)}).bind("dragend",function(){c.setTimeout(function(){a.watermark._show(t)},1)}).bind("drop",function(a){var b=t[0];a=a.originalEvent.dataTransfer.getData("Text");(b.value||"").replace(d,"").replace(a,"")===
t.data("watermarkText")&&(b.value=a);t.focus()});this.form&&(E=this.form,A=a(E),A.data("watermarkSubmit")||(A.submit(a.watermark.hideAll),E.submit?(A.data("watermarkSubmit",E.submit),E.submit=function(b,c){return function(){var d=c.data("watermarkSubmit");a.watermark.hideAll();d.apply?d.apply(b,Array.prototype.slice.call(arguments)):d()}}(E,A)):(A.data("watermarkSubmit",1),E.submit=function(b){return function(){a.watermark.hideAll();delete b.submit;b.submit()}}(E))))}a.watermark._show(t)}})};a.watermark.runOnce&&
(a.watermark.runOnce=!1,a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},watermarkable:function(a){var b,c=a.nodeName;return"TEXTAREA"===c?!0:"INPUT"!==c?!1:(b=a.getAttribute("type"),!b||!e.test(b))}}),function(c){a.fn.val=function(){var e=Array.prototype.slice.call(arguments),f;return this.length?e.length?(c.apply(this,e),a.watermark.show(this),this):this.data("watermark")?(f=(this[0].value||
"").replace(d,""),f===(this.data("watermarkText")||"")?"":f):c.apply(this):e.length?this:b}}(a.fn.val),f.length&&a(function(){for(var b,d,e=f.length-1;0<=e;e--)b=f[e],d=c[b],"function"==typeof d&&(c[b]=function(b){return function(){return a.watermark.hideAll(),b.apply(null,Array.prototype.slice.call(arguments))}}(d))}),a(c).bind("beforeunload",function(){a.watermark.options.hideBeforeUnload&&a.watermark.hideAll()}))})(jQuery,window);
(function(a){var c=Math.min,b=Math.max,d=Math.floor,e=function(b){return"string"===a.type(b)},f=function(b,c){if(a.isArray(c))for(var d=0,f=c.length;d<f;d++){var g=c[d];try{e(g)&&(g=eval(g)),a.isFunction(g)&&g(b)}catch(h){}}};a.layout={version:"1.3.rc30.79",revision:.033007,browser:{},effects:{slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},
west:{direction:"left"}},scale:{all:{duration:"fast"}},blind:{},clip:{},explode:{},fade:{},fold:{},puff:{},size:{all:{easing:"swing"}}},config:{optionRootKeys:"effects panes north south west east center".split(" "),allPanes:["north","south","west","east","center"],borderPanes:["north","south","west","east"],oppositeEdge:{north:"south",south:"north",east:"west",west:"east"},offscreenCSS:{left:"-99999px",right:"auto"},offscreenReset:"offscreenReset",hidden:{visibility:"hidden"},visible:{visibility:"visible"},
resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden"},cssDemo:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDemo:{background:"#AAA"}},content:{cssReq:{position:"relative"},cssDemo:{overflow:"auto",padding:"10px"},cssDemoPane:{overflow:"hidden",padding:0}},panes:{cssReq:{position:"absolute",margin:0},cssDemo:{padding:"10px",
background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{side:"top",sizeType:"Height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{side:"bottom",sizeType:"Height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{side:"right",sizeType:"Width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{side:"left",sizeType:"Width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},
center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},callbacks:{},getParentPaneElem:function(b){b=a(b);if(b=b.data("layout")||b.data("parentLayout")){b=b.container;if(b.data("layoutPane"))return b;b=b.closest("."+a.layout.defaults.panes.paneClass);if(b.data("layoutPane"))return b}return null},getParentPaneInstance:function(b){return(b=a.layout.getParentPaneElem(b))?b.data("layoutPane"):null},getParentLayoutInstance:function(b){return(b=a.layout.getParentPaneElem(b))?
b.data("parentLayout"):null},getEventObject:function(a){return"object"===typeof a&&a.stopPropagation?a:null},parsePaneName:function(b){var c=a.layout.getEventObject(b);c&&(c.stopPropagation(),b=a(this).data("layoutEdge"));b&&!/^(west|east|north|south|center)$/.test(b)&&(a.layout.msg('LAYOUT ERROR - Invalid pane-name: "'+b+'"'),b="error");return b},plugins:{draggable:!!a.fn.draggable,effects:{core:!!a.effects,slide:a.effects&&(a.effects.slide||a.effects.effect&&a.effects.effect.slide)}},onCreate:[],
onLoad:[],onReady:[],onDestroy:[],onUnload:[],afterOpen:[],afterClose:[],scrollbarWidth:function(){return window.scrollbarWidth||a.layout.getScrollbarSize("width")},scrollbarHeight:function(){return window.scrollbarHeight||a.layout.getScrollbarSize("height")},getScrollbarSize:function(b){var c=a('<div style="position: absolute; top: -10000px; left: -10000px; width: 100px; height: 100px; overflow: scroll;"></div>').appendTo("body"),d={width:c.css("width")-c[0].clientWidth,height:c.height()-c[0].clientHeight};
c.remove();window.scrollbarWidth=d.width;window.scrollbarHeight=d.height;return b.match(/^(width|height)$/)?d[b]:d},showInvisibly:function(a,b){if(a&&a.length&&(b||"none"===a.css("display"))){var c=a[0].style,c={display:c.display||"",visibility:c.visibility||""};a.css({display:"block",visibility:"hidden"});return c}return{}},getElementDimensions:function(c,d){var e={css:{},inset:{}},f=e.css,g={bottom:0},h=a.layout.cssNum,l=c.offset(),A,H,I;e.offsetLeft=l.left;e.offsetTop=l.top;d||(d={});a.each(["Left",
"Right","Top","Bottom"],function(b,h){A=f["border"+h]=a.layout.borderWidth(c,h);H=f["padding"+h]=a.layout.cssNum(c,"padding"+h);I=h.toLowerCase();e.inset[I]=0<=d[I]?d[I]:H;g[I]=e.inset[I]+A});f.width=c.width();f.height=c.height();f.top=h(c,"top",!0);f.bottom=h(c,"bottom",!0);f.left=h(c,"left",!0);f.right=h(c,"right",!0);e.outerWidth=c.outerWidth();e.outerHeight=c.outerHeight();e.innerWidth=b(0,e.outerWidth-g.left-g.right);e.innerHeight=b(0,e.outerHeight-g.top-g.bottom);e.layoutWidth=c.innerWidth();
e.layoutHeight=c.innerHeight();return e},getElementStyles:function(a,b){var c={},d=a[0].style,e=b.split(","),f=["Top","Bottom","Left","Right"],g=["Color","Style","Width"],h,l,I,y,D,F;for(y=0;y<e.length;y++)if(h=e[y],h.match(/(border|padding|margin)$/))for(D=0;4>D;D++)if(l=f[D],"border"===h)for(F=0;3>F;F++)I=g[F],c[h+l+I]=d[h+l+I];else c[h+l]=d[h+l];else c[h]=d[h];return c},cssWidth:function(c,d){if(0>=d)return 0;var e=a.layout.browser.boxModel?a.support.boxSizing?c.css("boxSizing"):"content-box":
"border-box",f=a.layout.borderWidth,g=a.layout.cssNum,h=d;"border-box"!==e&&(h-=f(c,"Left")+f(c,"Right"));"content-box"===e&&(h-=g(c,"paddingLeft")+g(c,"paddingRight"));return b(0,h)},cssHeight:function(c,d){if(0>=d)return 0;var e=a.layout.browser.boxModel?a.support.boxSizing?c.css("boxSizing"):"content-box":"border-box",f=a.layout.borderWidth,g=a.layout.cssNum,h=d;"border-box"!==e&&(h-=f(c,"Top")+f(c,"Bottom"));"content-box"===e&&(h-=g(c,"paddingTop")+g(c,"paddingBottom"));return b(0,h)},cssNum:function(b,
c,d){b.jquery||(b=a(b));var e=a.layout.showInvisibly(b);c=a.css(b[0],c,!0);d=d&&"auto"==c?c:Math.round(parseFloat(c)||0);b.css(e);return d},borderWidth:function(b,c){b.jquery&&(b=b[0]);var d="border"+c.substr(0,1).toUpperCase()+c.substr(1);return"none"===a.css(b,d+"Style",!0)?0:Math.round(parseFloat(a.css(b,d+"Width",!0))||0)},isMouseOverElem:function(b,c){var d=a(c||this),e=d.offset(),f=e.top,e=e.left,g=e+d.outerWidth(),d=f+d.outerHeight(),h=b.pageX,l=b.pageY;return a.layout.browser.msie&&0>h&&0>
l||h>=e&&h<=g&&l>=f&&l<=d},msg:function(b,c,d,e){a.isPlainObject(b)&&window.debugData?("string"===typeof c?(e=d,d=c):"object"===typeof d&&(e=d,d=null),d=d||"log( <object> )",e=a.extend({sort:!1,returnHTML:!1,display:!1},e),!0===c||e.display?debugData(b,d,e):window.console&&console.log(debugData(b,d,e))):c?alert(b):window.console?console.log(b):(c=a("#layoutLogger"),c.length||(c=a('<div id="layoutLogger" style="position: '+(a.support.fixedPosition?"fixed":"absolute")+'; top: 5px; z-index: 999999; max-width: 25%; overflow: hidden; border: 1px solid #000; border-radius: 5px; background: #FBFBFB; box-shadow: 0 2px 10px rgba(0,0,0,0.3);"><div style="font-size: 13px; font-weight: bold; padding: 5px 10px; background: #F6F6F6; border-radius: 5px 5px 0 0; cursor: move;"><span style="float: right; padding-left: 7px; cursor: pointer;" title="Remove Console" onclick="$(this).closest(\'#layoutLogger\').remove()">X</span>Layout console.log</div><ul style="font-size: 13px; font-weight: none; list-style: none; margin: 0; padding: 0 0 2px;"></ul></div>').appendTo("body"),
c.css("left",a(window).width()-c.outerWidth()-5),a.ui.draggable&&c.draggable({handle:":first-child"})),c.children("ul").append('<li style="padding: 4px 10px; margin: 0; border-top: 1px solid #CCC;">'+b.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")+"</li>"))}};var g=navigator.userAgent.toLowerCase(),h=/(chrome)[ \/]([\w.]+)/.exec(g)||/(webkit)[ \/]([\w.]+)/.exec(g)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(g)||/(msie) ([\w.]+)/.exec(g)||0>g.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(g)||
[],g=h[1]||"",h=h[2]||0,l="msie"===g;a.layout.browser={version:h,safari:"webkit"===g,webkit:"chrome"===g,msie:l,isIE6:l&&6==h,boxModel:!l||!1!==a.support.boxModel};g&&(a.layout.browser[g]=!0);l&&a(function(){a.layout.browser.boxModel=a.support.boxModel});a.layout.defaults={name:"",containerClass:"ui-layout-container",inset:null,scrollToBookmarkOnLoad:!0,resizeWithWindow:!0,resizeWithWindowDelay:200,resizeWithWindowMaxDelay:0,maskPanesEarly:!1,onresizeall_start:null,onresizeall_end:null,onload_start:null,
onload_end:null,onunload_start:null,onunload_end:null,initPanes:!0,showErrorMessages:!0,showDebugMessages:!1,zIndex:null,zIndexes:{pane_normal:0,content_mask:1,resizer_normal:0,pane_sliding:100,pane_animate:1E3,resizer_drag:1E4},errors:{pane:"pane",selector:"selector",addButtonError:"Error Adding Button\nInvalid ",containerMissing:"UI Layout Initialization Error\nThe specified layout-container does not exist.",centerPaneMissing:"UI Layout Initialization Error\nThe center-pane element does not exist.\nThe center-pane is a required element.",
noContainerHeight:"UI Layout Initialization Warning\nThe layout-container \"CONTAINER\" has no height.\nTherefore the layout is 0-height and hence 'invisible'!",callbackError:"UI Layout Callback Error\nThe EVENT callback is not a valid function."},panes:{applyDemoStyles:!1,closable:!0,resizable:!0,slidable:!0,initClosed:!1,initHidden:!1,contentSelector:".ui-layout-content",contentIgnoreSelector:".ui-layout-ignore",findNestedContent:!1,paneClass:"ui-layout-pane",resizerClass:"ui-layout-resizer",togglerClass:"ui-layout-toggler",
buttonClass:"ui-layout-button",minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerContent_open:"",togglerContent_closed:"",resizerDblClickToggle:!0,autoResize:!0,autoReopen:!0,resizerDragOpacity:1,maskContents:!1,maskObjects:!1,maskZindex:null,resizingGrid:!1,livePaneResizing:!1,liveContentResizing:!1,liveResizingTolerance:1,sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseleave",
slideDelay_open:300,slideDelay_close:300,hideTogglerOnSlide:!1,preventQuickSlideClose:a.layout.browser.webkit,preventPrematureSlideClose:!1,tips:{Open:"Open",Close:"Close",Resize:"Resize",Slide:"Slide Open",Pin:"Pin",Unpin:"Un-Pin",noRoomToOpen:"Not enough room to show this panel.",minSizeWarning:"Panel has reached its minimum size",maxSizeWarning:"Panel has reached its maximum size"},showOverflowOnHover:!1,enableCursorHotkey:!0,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},
fxOpacityFix:!0,animatePaneSizing:!1,children:null,containerSelector:"",initChildren:!0,destroyChildren:!0,resizeChildren:!0,triggerEventsOnLoad:!1,triggerEventsDuringLiveResize:!0,onshow_start:null,onshow_end:null,onhide_start:null,onhide_end:null,onopen_start:null,onopen_end:null,onclose_start:null,onclose_end:null,onresize_start:null,onresize_end:null,onsizecontent_start:null,onsizecontent_end:null,onswap_start:null,onswap_end:null,ondrag_start:null,ondrag_end:null},north:{paneSelector:".ui-layout-north",
size:"auto",resizerCursor:"n-resize",customHotkey:""},south:{paneSelector:".ui-layout-south",size:"auto",resizerCursor:"s-resize",customHotkey:""},east:{paneSelector:".ui-layout-east",size:200,resizerCursor:"e-resize",customHotkey:""},west:{paneSelector:".ui-layout-west",size:200,resizerCursor:"w-resize",customHotkey:""},center:{paneSelector:".ui-layout-center",minWidth:0,minHeight:0}};a.layout.optionsMap={layout:"name instanceKey stateManagement effects inset zIndexes errors zIndex scrollToBookmarkOnLoad showErrorMessages maskPanesEarly outset resizeWithWindow resizeWithWindowDelay resizeWithWindowMaxDelay onresizeall onresizeall_start onresizeall_end onload onload_start onload_end onunload onunload_start onunload_end".split(" "),
center:"paneClass contentSelector contentIgnoreSelector findNestedContent applyDemoStyles triggerEventsOnLoad showOverflowOnHover maskContents maskObjects liveContentResizing containerSelector children initChildren resizeChildren destroyChildren onresize onresize_start onresize_end onsizecontent onsizecontent_start onsizecontent_end".split(" "),noDefault:["paneSelector","resizerCursor","customHotkey"]};a.layout.transformData=function(b,c){var d=c?{panes:{},center:{}}:{},e,f,g,h,l,H,I;if("object"!==
typeof b)return d;for(f in b)for(e=d,l=b[f],g=f.split("__"),I=g.length-1,H=0;H<=I;H++)h=g[H],H===I?a.isPlainObject(l)?e[h]=a.layout.transformData(l):e[h]=l:(e[h]||(e[h]={}),e=e[h]);return d};a.layout.backwardCompatibility={map:{applyDefaultStyles:"applyDemoStyles",childOptions:"children",initChildLayout:"initChildren",destroyChildLayout:"destroyChildren",resizeChildLayout:"resizeChildren",resizeNestedLayout:"resizeChildren",resizeWhileDragging:"livePaneResizing",resizeContentWhileDragging:"liveContentResizing",
triggerEventsWhileDragging:"triggerEventsDuringLiveResize",maskIframesOnResize:"maskContents",useStateCookie:"stateManagement.enabled","cookie.autoLoad":"stateManagement.autoLoad","cookie.autoSave":"stateManagement.autoSave","cookie.keys":"stateManagement.stateKeys","cookie.name":"stateManagement.cookie.name","cookie.domain":"stateManagement.cookie.domain","cookie.path":"stateManagement.cookie.path","cookie.expires":"stateManagement.cookie.expires","cookie.secure":"stateManagement.cookie.secure",
noRoomToOpenTip:"tips.noRoomToOpen",togglerTip_open:"tips.Close",togglerTip_closed:"tips.Open",resizerTip:"tips.Resize",sliderTip:"tips.Slide"},renameOptions:function(b){function c(a,d){for(var e=a.split("."),f=e.length-1,g={branch:b,key:e[f]},h=0,l;h<f;h++)l=e[h],g.branch=void 0==g.branch[l]?d?g.branch[l]={}:{}:g.branch[l];return g}var d=a.layout.backwardCompatibility.map,e,f,g,h;for(h in d)e=c(h),g=e.branch[e.key],void 0!==g&&(f=c(d[h],!0),f.branch[f.key]=g,delete e.branch[e.key])},renameAllOptions:function(b){var c=
a.layout.backwardCompatibility.renameOptions;c(b);b.defaults&&("object"!==typeof b.panes&&(b.panes={}),a.extend(!0,b.panes,b.defaults),delete b.defaults);b.panes&&c(b.panes);a.each(a.layout.config.allPanes,function(a,d){b[d]&&c(b[d])});return b}};a.fn.layout=function(g){function h(b){if(!b)return!0;var c=b.keyCode;if(33>c)return!0;var d={38:"north",40:"south",37:"west",39:"east"},e=b.shiftKey,f=b.ctrlKey,g,C,l,m;f&&37<=c&&40>=c&&F[d[c]].enableCursorHotkey?m=d[c]:(f||e)&&a.each(u.borderPanes,function(a,
b){g=F[b];C=g.customHotkey;l=g.customHotkeyModifier;if((e&&"SHIFT"==l||f&&"CTRL"==l||f&&e)&&C&&c===(isNaN(C)||9>=C?C.toUpperCase().charCodeAt(0):C))return m=b,!1});if(!m||!R[m]||!F[m].closable||G[m].isHidden)return!0;gb(m);b.stopPropagation();return b.returnValue=!1}function l(b){if(da()){this&&this.tagName&&(b=this);var c;e(b)?c=R[b]:a(b).data("layoutRole")?c=a(b):a(b).parents().each(function(){if(a(this).data("layoutRole"))return c=a(this),!1});if(c&&c.length){var d=c.data("layoutEdge");b=G[d];
b.cssSaved&&t(d);if(b.isSliding||b.isResizing||b.isClosed)b.cssSaved=!1;else{var f={zIndex:F.zIndexes.resizer_normal+1},g={},h=c.css("overflow"),C=c.css("overflowX"),m=c.css("overflowY");"visible"!=h&&(g.overflow=h,f.overflow="visible");C&&!C.match(/(visible|auto)/)&&(g.overflowX=C,f.overflowX="visible");m&&!m.match(/(visible|auto)/)&&(g.overflowY=C,f.overflowY="visible");b.cssSaved=g;c.css(f);a.each(u.allPanes,function(a,b){b!=d&&t(b)})}}}}function t(b){if(da()){this&&this.tagName&&(b=this);var c;
e(b)?c=R[b]:a(b).data("layoutRole")?c=a(b):a(b).parents().each(function(){if(a(this).data("layoutRole"))return c=a(this),!1});if(c&&c.length){b=c.data("layoutEdge");b=G[b];var d=b.cssSaved||{};b.isSliding||b.isResizing||c.css("zIndex",F.zIndexes.pane_normal);c.css(d);b.cssSaved=!1}}}var x=a.layout.browser,u=a.layout.config,E=a.layout.cssWidth,A=a.layout.cssHeight,H=a.layout.getElementDimensions,I=a.layout.getElementStyles,y=a.layout.getEventObject,D=a.layout.parsePaneName,F=a.extend(!0,{},a.layout.defaults);
F.effects=a.extend(!0,{},a.layout.effects);var G={id:"layout"+a.now(),initialized:!1,paneResizing:!1,panesSliding:{},container:{innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,layoutWidth:0,layoutHeight:0},north:{childIdx:0},south:{childIdx:0},east:{childIdx:0},west:{childIdx:0},center:{childIdx:0}},N={north:null,south:null,east:null,west:null,center:null},M={data:{},set:function(a,b,c){M.clear(a);M.data[a]=setTimeout(b,c)},clear:function(a){var b=M.data;b[a]&&(clearTimeout(b[a]),delete b[a])}},
P=function(b,c,d){var e=F;(e.showErrorMessages&&!d||d&&e.showDebugMessages)&&a.layout.msg(e.name+" / "+b,!1!==c);return!1},O=function(b,c,d){var f=c&&e(c),g=f?G[c]:G,h=f?F[c]:F,l=F.name,m=b+(b.match(/_/)?"":"_end"),n=m.match(/_end$/)?m.substr(0,m.length-4):"",p=h[m]||h[n],q="NC",t=[];f||"boolean"!==a.type(c)||(d=c,c="");if(p)try{e(p)&&(p.match(/,/)?(t=p.split(","),p=eval(t[0])):p=eval(p)),a.isFunction(p)&&(q=t.length?p(t[1]):f?p(c,R[c],g,h,l):p(C,g,h,l))}catch(u){P(F.errors.callbackError.replace(/EVENT/,
a.trim((c||"")+" "+m)),!1),"string"===a.type(u)&&string.length&&P("Exception:  "+u,!1)}d||!1===q||(f?(d=R[c],h=F[c],g=G[c],d.triggerHandler("layoutpane"+m,[c,d,g,h,l]),n&&d.triggerHandler("layoutpane"+n,[c,d,g,h,l])):(S.triggerHandler("layout"+m,[C,g,h,l]),n&&S.triggerHandler("layout"+n,[C,g,h,l])));f&&"onresize_end"===b&&Va(c+"",!0);return q},pa=function(a){if(!x.mozilla){var b=R[a];"IFRAME"===G[a].tagName?b.css(u.hidden).css(u.visible):b.find("IFRAME").css(u.hidden).css(u.visible)}},ka=function(a){var b=
R[a];a=u[a].dir;b={minWidth:1001-E(b,1E3),minHeight:1001-A(b,1E3)};"horz"===a&&(b.minSize=b.minHeight);"vert"===a&&(b.minSize=b.minWidth);return b},Ca=function(b,c,d){var f=b;e(b)?f=R[b]:b.jquery||(f=a(b));b=A(f,c);f.css({height:b,visibility:"visible"});0<b&&0<f.innerWidth()?d&&f.data("autoHidden")&&(f.show().data("autoHidden",!1),x.mozilla||f.css(u.hidden).css(u.visible)):d&&!f.data("autoHidden")&&f.hide().data("autoHidden",!0)},ra=function(b,c,f){f||(f=u[b].dir);e(c)&&c.match(/%/)&&(c="100%"===
c?-1:parseInt(c,10)/100);if(0===c)return 0;if(1<=c)return parseInt(c,10);var g=F,h=0;"horz"==f?h=X.innerHeight-(R.north?g.north.spacing_open:0)-(R.south?g.south.spacing_open:0):"vert"==f&&(h=X.innerWidth-(R.west?g.west.spacing_open:0)-(R.east?g.east.spacing_open:0));if(-1===c)return h;if(0<c)return d(h*c);if("center"==b)return 0;f="horz"===f?"height":"width";g=R[b];b="height"===f?Sa[b]:!1;var h=a.layout.showInvisibly(g),C=g.css(f),l=b?b.css(f):0;g.css(f,"auto");b&&b.css(f,"auto");c="height"===f?g.outerHeight():
g.outerWidth();g.css(f,C).css(h);b&&b.css(f,l);return c},aa=function(a,b){var c=R[a],d=F[a],e=G[a],f=b?d.spacing_open:0,d=b?d.spacing_closed:0;return!c||e.isHidden?0:e.isClosed||e.isSliding&&b?d:"horz"===u[a].dir?c.outerHeight()+f:c.outerWidth()+f},wa=function(a,d){if(da()){var e=F[a],f=G[a],g=u[a],h=g.dir;g.sizeType.toLowerCase();var g=void 0!=d?d:f.isSliding,C=e.spacing_open,l=u.oppositeEdge[a],m=G[l],n=R[l],p=!n||!1===m.isVisible||m.isSliding?0:"horz"==h?n.outerHeight():n.outerWidth(),l=(!n||m.isHidden?
0:F[l][!1!==m.isClosed?"spacing_closed":"spacing_open"])||0,m="horz"==h?X.innerHeight:X.innerWidth,n=ka("center"),n="horz"==h?b(F.center.minHeight,n.minHeight):b(F.center.minWidth,n.minWidth),g=m-C-(g?0:ra("center",n,h)+p+l),h=f.minSize=b(ra(a,e.minSize),ka(a).minSize),g=f.maxSize=c(e.maxSize?ra(a,e.maxSize):1E5,g),f=f.resizerPosition={},C=X.inset.top,p=X.inset.left,l=X.innerWidth,m=X.innerHeight,e=e.spacing_open;switch(a){case "north":f.min=C+h;f.max=C+g;break;case "west":f.min=p+h;f.max=p+g;break;
case "south":f.min=C+m-g-e;f.max=C+m-h-e;break;case "east":f.min=p+l-g-e,f.max=p+l-h-e}}},va=function(b,c){var d=a(b),e=d.data("layoutRole"),f=d.data("layoutEdge"),g=F[f][e+"Class"],f="-"+f,h=d.hasClass(g+"-closed")?"-closed":"-open",C="-closed"===h?"-open":"-closed",h=g+"-hover "+(g+f+"-hover ")+(g+h+"-hover ")+(g+f+h+"-hover ");c&&(h+=g+C+"-hover "+(g+f+C+"-hover "));"resizer"==e&&d.hasClass(g+"-sliding")&&(h+=g+"-sliding-hover "+(g+f+"-sliding-hover "));return a.trim(h)},sa=function(b,c){var d=
a(c||this);b&&"toggler"===d.data("layoutRole")&&b.stopPropagation();d.addClass(va(d))},qa=function(b,c){var d=a(c||this);d.removeClass(va(d,!0))},na=function(b){b=a(this).data("layoutEdge");var c=G[b];c.isClosed||c.isResizing||G.paneResizing||(a.fn.disableSelection&&a("body").disableSelection(),F.maskPanesEarly&&Ab(b,{resizing:!0}))},Q=function(b,c){var d=c||this,e=a(d).data("layoutEdge"),f=e+"ResizerLeave";M.clear(e+"_openSlider");M.clear(f);c?G.paneResizing||(a.fn.enableSelection&&a("body").enableSelection(),
F.maskPanesEarly&&wb()):M.set(f,function(){Q(b,d)},200)},da=function(){return G.initialized||G.creatingLayout?!0:nb()},nb=function(b){var c=F;if(!S.is(":visible"))return!b&&x.webkit&&"BODY"===S[0].tagName&&setTimeout(function(){nb(!0)},50),!1;if(!p("center").length)return P(c.errors.centerPaneMissing);G.creatingLayout=!0;a.extend(X,H(S,c.inset));lb();c.scrollToBookmarkOnLoad&&(b=self.location,b.hash&&b.replace(b.hash));C.hasParentLayout?c.resizeWithWindow=!1:c.resizeWithWindow&&a(window).bind("resize."+
Ja,Da);delete G.creatingLayout;G.initialized=!0;f(C,a.layout.onReady);O("onload_end");return!0},ib=function(b,c){var d=D.call(this,b),e=R[d];if(e){var f=Sa[d],g=G[d],h=F[d],C=F.stateManagement||{},h=c?h.children=c:h.children;if(a.isPlainObject(h))h=[h];else if(!h||!a.isArray(h))return;a.each(h,function(b,c){a.isPlainObject(c)&&(c.containerSelector?e.find(c.containerSelector):f||e).each(function(){var b=a(this),e=b.data("layout");if(!e){Ga({container:b,options:c},g);if(C.includeChildren&&G.stateData[d]){var e=
(G.stateData[d].children||{})[c.instanceKey],f=c.stateManagement||(c.stateManagement={autoLoad:!0});!0===f.autoLoad&&e&&(f.autoSave=!1,f.includeChildren=!0,f.autoLoad=a.extend(!0,{},e))}(e=b.layout(c))&&ta(d,e)}})})}},Ga=function(a,b){var c=a.container,d=a.options,e=d.stateManagement,f=d.instanceKey||c.data("layoutInstanceKey");f||(f=(e&&e.cookie?e.cookie.name:"")||d.name);f=f?f.replace(/[^\w-]/gi,"_").replace(/_{2,}/g,"_"):"layout"+ ++b.childIdx;d.instanceKey=f;c.data("layoutInstanceKey",f);return f},
ta=function(b,c){var d=R[b],e=N[b],f=G[b];a.isPlainObject(e)&&(a.each(e,function(a,b){b.destroyed&&delete e[a]}),a.isEmptyObject(e)&&(e=N[b]=null));c||e||(c=d.data("layout"));c&&(c.hasParentLayout=!0,d=c.options,Ga(c,f),e||(e=N[b]={}),e[d.instanceKey]=c.container.data("layout"));C[b].children=N[b];c||ib(b)},Da=function(){var a=F,b=Number(a.resizeWithWindowDelay);10>b&&(b=100);M.clear("winResize");M.set("winResize",function(){M.clear("winResize");M.clear("winResizeRepeater");var b=H(S,a.inset);b.innerWidth===
X.innerWidth&&b.innerHeight===X.innerHeight||jb()},b);M.data.winResizeRepeater||bb()},bb=function(){var a=Number(F.resizeWithWindowMaxDelay);0<a&&M.set("winResizeRepeater",function(){bb();jb()},a)},ca=function(){O("onunload_start");f(C,a.layout.onUnload);O("onunload_end")},ob=function(b){b=b?b.split(","):u.borderPanes;a.each(b,function(b,c){var d=F[c];if(d.enableCursorHotkey||d.customHotkey)return a(document).bind("keydown."+Ja,h),!1})},tb=function(){function c(b){var d=F[b],e=F.panes;d.fxSettings||
(d.fxSettings={});e.fxSettings||(e.fxSettings={});a.each(["_open","_close","_size"],function(c,f){var g="fxName"+f,h="fxSpeed"+f,C="fxSettings"+f,l=d[g]=d[g]||e[g]||d.fxName||e.fxName||"none",m=a.effects&&(a.effects[l]||a.effects.effect&&a.effects.effect[l]);"none"!==l&&F.effects[l]&&m||(l=d[g]="none");l=F.effects[l]||{};g=l.all||null;l=l[b]||null;d[h]=d[h]||e[h]||d.fxSpeed||e.fxSpeed||null;d[C]=a.extend(!0,{},g,l,e.fxSettings,d.fxSettings,e[C],d[C])});delete d.fxName;delete d.fxSpeed;delete d.fxSettings}
var d,e,f,h,C,l;g=a.layout.transformData(g,!0);g=a.layout.backwardCompatibility.renameAllOptions(g);if(!a.isEmptyObject(g.panes)){d=a.layout.optionsMap.noDefault;h=0;for(C=d.length;h<C;h++)f=d[h],delete g.panes[f];d=a.layout.optionsMap.layout;h=0;for(C=d.length;h<C;h++)f=d[h],delete g.panes[f]}d=a.layout.optionsMap.layout;var n=a.layout.config.optionRootKeys;for(f in g)h=g[f],0>a.inArray(f,n)&&0>a.inArray(f,d)&&(g.panes[f]||(g.panes[f]=a.isPlainObject(h)?a.extend(!0,{},h):h),delete g[f]);a.extend(!0,
F,g);a.each(u.allPanes,function(b,h){u[h]=a.extend(!0,{},u.panes,u[h]);e=F.panes;l=F[h];if("center"===h)for(d=a.layout.optionsMap.center,b=0,C=d.length;b<C;b++)f=d[b],g.center[f]||!g.panes[f]&&l[f]||(l[f]=e[f]);else l=F[h]=a.extend(!0,{},e,l),c(h),l.resizerClass||(l.resizerClass="ui-layout-resizer"),l.togglerClass||(l.togglerClass="ui-layout-toggler");l.paneClass||(l.paneClass="ui-layout-pane")});h=g.zIndex;n=F.zIndexes;0<h&&(n.pane_normal=h,n.content_mask=b(h+1,n.content_mask),n.resizer_normal=b(h+
2,n.resizer_normal));delete F.panes},p=function(a){a=F[a].paneSelector;if("#"===a.substr(0,1))return S.find(a).eq(0);var b=S.children(a).eq(0);return b.length?b:S.children("form:first").children(a).eq(0)},lb=function(b){D(b);a.each(u.allPanes,function(a,b){Jb(b,!0)});Ra();a.each(u.borderPanes,function(a,b){R[b]&&G[b].isVisible&&(wa(b),cb(b))});T("center");a.each(u.allPanes,function(a,b){Pa(b)})},Jb=function(a,d){if(d||da()){var e=F[a],f=G[a],g=u[a],h=g.dir,m="center"===a,n={},y=R[a],D,x;y?Lb(a,!1,
!0,!1):Sa[a]=!1;y=R[a]=p(a);if(y.length){y.data("layoutCSS")||y.data("layoutCSS",I(y,"position,top,left,bottom,right,width,height,overflow,zIndex,display,backgroundColor,padding,margin,border"));C[a]={name:a,pane:R[a],content:Sa[a],options:F[a],state:G[a],children:N[a]};y.data({parentLayout:C,layoutPane:C[a],layoutEdge:a,layoutRole:"pane"}).css(g.cssReq).css("zIndex",F.zIndexes.pane_normal).css(e.applyDemoStyles?g.cssDemo:{}).addClass(e.paneClass+" "+e.paneClass+"-"+a).bind("mouseenter."+Ja,sa).bind("mouseleave."+
Ja,qa);g={hide:"",show:"",toggle:"",close:"",open:"",slideOpen:"",slideClose:"",slideToggle:"",size:"sizePane",sizePane:"sizePane",sizeContent:"",sizeHandles:"",enableClosable:"",disableClosable:"",enableSlideable:"",disableSlideable:"",enableResizable:"",disableResizable:"",swapPanes:"swapPanes",swap:"swapPanes",move:"swapPanes",removePane:"removePane",remove:"removePane",createChildren:"",resizeChildren:"",resizeAll:"resizeAll",resizeLayout:"resizeAll"};for(x in g)y.bind("layoutpane"+x.toLowerCase()+
"."+Ja,C[g[x]||x]);ub(a,!1);m||(D=f.size=ra(a,e.size),m=ra(a,e.minSize)||1,x=ra(a,e.maxSize)||1E5,0<D&&(D=b(c(D,x),m)),f.autoResize=e.autoResize,f.isClosed=!1,f.isSliding=!1,f.isResizing=!1,f.isHidden=!1,f.pins||(f.pins=[]));f.tagName=y[0].tagName;f.edge=a;f.noRoom=!1;f.isVisible=!0;Eb(a);"horz"===h?n.height=A(y,D):"vert"===h&&(n.width=E(y,D));y.css(n);"horz"!=h&&T(a,!0);G.initialized&&(Ra(a),ob(a));e.initClosed&&e.closable&&!e.initHidden?fa(a,!0,!0):e.initHidden||e.initClosed?Za(a):f.noRoom||y.css("display",
"block");y.css("visibility","visible");e.showOverflowOnHover&&y.hover(l,t);G.initialized&&Pa(a)}else R[a]=!1}},Pa=function(a){var b=R[a],c=G[a],d=F[a];b&&(b.data("layout")&&ta(a,b.data("layout")),c.isVisible&&(G.initialized?jb():xa(a),d.triggerEventsOnLoad?O("onresize_end",a):Va(a,!0)),d.initChildren&&d.children&&ib(a))},Eb=function(b){b=b?b.split(","):u.borderPanes;a.each(b,function(a,b){var c=R[b],d=ma[b],e=G[b],f=u[b].side,g={};if(c){switch(b){case "north":g.top=X.inset.top;g.left=X.inset.left;
g.right=X.inset.right;break;case "south":g.bottom=X.inset.bottom;g.left=X.inset.left;g.right=X.inset.right;break;case "west":g.left=X.inset.left;break;case "east":g.right=X.inset.right}c.css(g);d&&e.isClosed?d.css(f,X.inset[f]):d&&!e.isHidden&&d.css(f,X.inset[f]+aa(b))}})},Ra=function(b){b=b?b.split(","):u.borderPanes;a.each(b,function(b,c){var d=R[c];ma[c]=!1;ya[c]=!1;if(d){var d=F[c],e=G[c],f="#"===d.paneSelector.substr(0,1)?d.paneSelector.substr(1):"",g=d.resizerClass,h=d.togglerClass,l="-"+c,
m=C[c],K=m.resizer=ma[c]=a("<div></div>"),m=m.toggler=d.closable?ya[c]=a("<div></div>"):!1;!e.isVisible&&d.slidable&&K.attr("title",d.tips.Slide).css("cursor",d.sliderCursor);K.attr("id",f?f+"-resizer":"").data({parentLayout:C,layoutPane:C[c],layoutEdge:c,layoutRole:"resizer"}).css(u.resizers.cssReq).css("zIndex",F.zIndexes.resizer_normal).css(d.applyDemoStyles?u.resizers.cssDemo:{}).addClass(g+" "+g+l).hover(sa,qa).hover(na,Q).appendTo(S);d.resizerDblClickToggle&&K.bind("dblclick."+Ja,gb);m&&(m.attr("id",
f?f+"-toggler":"").data({parentLayout:C,layoutPane:C[c],layoutEdge:c,layoutRole:"toggler"}).css(u.togglers.cssReq).css(d.applyDemoStyles?u.togglers.cssDemo:{}).addClass(h+" "+h+l).hover(sa,qa).bind("mouseenter",na).appendTo(K),d.togglerContent_open&&a("<span>"+d.togglerContent_open+"</span>").data({layoutEdge:c,layoutRole:"togglerContent"}).data("layoutRole","togglerContent").data("layoutEdge",c).addClass("content content-open").css("display","none").appendTo(m),d.togglerContent_closed&&a("<span>"+
d.togglerContent_closed+"</span>").data({layoutEdge:c,layoutRole:"togglerContent"}).addClass("content content-closed").css("display","none").appendTo(m),Cb(c));vb(c);e.isVisible?xb(c):(Ba(c),Ua(c,!0))}});ba()},ub=function(a,b){if(da()){var c=F[a],d=c.contentSelector,e=C[a],f=R[a],g;d&&(g=e.content=Sa[a]=c.findNestedContent?f.find(d).eq(0):f.children(d).eq(0));g&&g.length?(g.data("layoutRole","content"),g.data("layoutCSS")||g.data("layoutCSS",I(g,"height")),g.css(u.content.cssReq),c.applyDemoStyles&&
(g.css(u.content.cssDemo),f.css(u.content.cssDemoPane)),f.css("overflowX").match(/(scroll|auto)/)&&f.css("overflow","hidden"),G[a].content={},!1!==b&&xa(a)):e.content=Sa[a]=!1}},vb=function(b){var c=a.layout.plugins.draggable;b=b?b.split(","):u.borderPanes;a.each(b,function(b,e){var f=F[e];if(!c||!R[e]||!f.resizable)return f.resizable=!1,!0;var g=G[e],h=F.zIndexes,C=u[e],l="horz"==C.dir?"top":"left",m=ma[e],K=f.resizerClass,n=0,p,q,t=K+"-drag",y=K+"-"+e+"-drag",D=K+"-dragging",x=K+"-"+e+"-dragging",
A=K+"-dragging-limit",ka=K+"-"+e+"-dragging-limit",H=!1;g.isClosed||m.attr("title",f.tips.Resize).css("cursor",f.resizerCursor);m.draggable({containment:S[0],axis:"horz"==C.dir?"y":"x",delay:0,distance:1,grid:f.resizingGrid,helper:"clone",opacity:f.resizerDragOpacity,addClasses:!1,zIndex:h.resizer_drag,start:function(b,c){f=F[e];g=G[e];q=f.livePaneResizing;if(!1===O("ondrag_start",e))return!1;g.isResizing=!0;G.paneResizing=e;M.clear(e+"_closeSlider");wa(e);p=g.resizerPosition;n=c.position[l];m.addClass(t+
" "+y);H=!1;a("body").disableSelection();Ab(e,{resizing:!0})},drag:function(a,b){H||(b.helper.addClass(D+" "+x).css({right:"auto",bottom:"auto"}).children().css("visibility","hidden"),H=!0,g.isSliding&&R[e].css("zIndex",h.pane_sliding));var c=0;b.position[l]<p.min?(b.position[l]=p.min,c=-1):b.position[l]>p.max&&(b.position[l]=p.max,c=1);c?(b.helper.addClass(A+" "+ka),window.defaultStatus=0<c&&e.match(/(north|west)/)||0>c&&e.match(/(south|east)/)?f.tips.maxSizeWarning:f.tips.minSizeWarning):(b.helper.removeClass(A+
" "+ka),window.defaultStatus="");q&&Math.abs(b.position[l]-n)>=f.liveResizingTolerance&&(n=b.position[l],d(a,b,e))},stop:function(b,c){a("body").enableSelection();window.defaultStatus="";m.removeClass(t+" "+y);g.isResizing=!1;G.paneResizing=!1;d(b,c,e,!0)}})});var d=function(a,b,c,d){var e=b.position,f=u[c];a=F[c];b=G[c];var g;switch(c){case "north":g=e.top;break;case "west":g=e.left;break;case "south":g=X.layoutHeight-e.top-a.spacing_open;break;case "east":g=X.layoutWidth-e.left-a.spacing_open}g-=
X.inset[f.side];d?(!1!==O("ondrag_end",c)&&Z(c,g,!1,!0),wb(!0),b.isSliding&&Ab(c,{resizing:!0})):Math.abs(g-b.size)<a.liveResizingTolerance||(Z(c,g,!1,!0),Ka.each(Kb))}},Kb=function(){var b=a(this),c=b.data("layoutMask"),c=G[c];"IFRAME"==c.tagName&&c.isVisible&&b.css({top:c.offsetTop,left:c.offsetLeft,width:c.outerWidth,height:c.outerHeight})},Ab=function(b,c){var d=u[b],e=["center"],f=F.zIndexes,g=a.extend({objectsOnly:!1,animation:!1,resizing:!0,sliding:G[b].isSliding},c),h,C;g.resizing&&e.push(b);
g.sliding&&e.push(u.oppositeEdge[b]);"horz"===d.dir&&(e.push("west"),e.push("east"));a.each(e,function(a,b){C=G[b];h=F[b];C.isVisible&&(h.maskObjects||!g.objectsOnly&&h.maskContents)&&Ia(b).each(function(){Kb.call(this);this.style.zIndex=C.isSliding?f.pane_sliding+1:f.pane_normal+1;this.style.display="block"})})},wb=function(b){if(b||!G.paneResizing)Ka.hide();else if(!b&&!a.isEmptyObject(G.panesSliding)){b=Ka.length-1;for(var c,d;0<=b;b--)d=Ka.eq(b),c=d.data("layoutMask"),F[c].maskObjects||d.hide()}},
Ia=function(b){for(var c=a([]),d,e=0,f=Ka.length;e<f;e++)d=Ka.eq(e),d.data("layoutMask")===b&&(c=c.add(d));if(c.length)return c;c=R[b];d=G[b];var e=F[b],f=F.zIndexes,g=a([]),h,C,l,m,n;if(e.maskContents||e.maskObjects)for(n=0;n<(e.maskObjects?2:1);n++)h=e.maskObjects&&0==n,C=document.createElement(h?"iframe":"div"),l=a(C).data("layoutMask",b),C.className="ui-layout-mask ui-layout-mask-"+b,m=C.style,m.display="block",m.position="absolute",m.background="#FFF",h&&(C.frameborder=0,C.src="about:blank",
m.opacity=0,m.filter="Alpha(Opacity='0')",m.border=0),"IFRAME"==d.tagName?(m.zIndex=f.pane_normal+1,S.append(C)):(l.addClass("ui-layout-mask-inside-pane"),m.zIndex=e.maskZindex||f.content_mask,m.top=0,m.left=0,m.width="100%",m.height="100%",c.append(C)),g=g.add(C),Ka=Ka.add(C);return g},Lb=function(b,c,d,e){if(da()){b=D.call(this,b);var f=R[b],g=Sa[b],h=ma[b],l=ya[b];f&&a.isEmptyObject(f.data())&&(f=!1);g&&a.isEmptyObject(g.data())&&(g=!1);h&&a.isEmptyObject(h.data())&&(h=!1);l&&a.isEmptyObject(l.data())&&
(l=!1);f&&f.stop(!0,!0);var m=F[b],n=N[b],p=a.isPlainObject(n)&&!a.isEmptyObject(n);e=void 0!==e?e:m.destroyChildren;p&&e&&(a.each(n,function(a,b){b.destroyed||b.destroy(!0);b.destroyed&&delete n[a]}),a.isEmptyObject(n)&&(n=N[b]=null,p=!1));f&&c&&!p?f.remove():f&&f[0]&&(c=m.paneClass,e=c+"-"+b,c=[c,c+"-open",c+"-closed",c+"-sliding",e,e+"-open",e+"-closed",e+"-sliding"],a.merge(c,va(f,!0)),f.removeClass(c.join(" ")).removeData("parentLayout").removeData("layoutPane").removeData("layoutRole").removeData("layoutEdge").removeData("autoHidden").unbind("."+
Ja),p&&g?(g.width(g.width()),a.each(n,function(a,b){b.resizeAll()})):g&&g.css(g.data("layoutCSS")).removeData("layoutCSS").removeData("layoutRole"),f.data("layout")||f.css(f.data("layoutCSS")).removeData("layoutCSS"));l&&l.remove();h&&h.remove();C[b]=R[b]=Sa[b]=ma[b]=ya[b]=!1;d||jb()}},Ya=function(a){var b=R[a],c=b[0].style;F[a].useOffscreenClose?(b.data(u.offscreenReset)||b.data(u.offscreenReset,{left:c.left,right:c.right}),b.css(u.offscreenCSS)):b.hide().removeData(u.offscreenReset)},Qb=function(a){var b=
R[a];a=F[a];var c=u.offscreenCSS,d=b.data(u.offscreenReset),e=b[0].style;b.show().removeData(u.offscreenReset);a.useOffscreenClose&&d&&(e.left==c.left&&(e.left=d.left),e.right==c.right&&(e.right=d.right))},Za=function(a,b){if(da()){var c=D.call(this,a),d=F[c],e=G[c],f=ma[c];!R[c]||e.isHidden||G.initialized&&!1===O("onhide_start",c)||(e.isSliding=!1,delete G.panesSliding[c],f&&f.hide(),!G.initialized||e.isClosed?(e.isClosed=!0,e.isHidden=!0,e.isVisible=!1,G.initialized||Ya(c),T("horz"===u[c].dir?"":
"center"),(G.initialized||d.triggerEventsOnLoad)&&O("onhide_end",c)):(e.isHiding=!0,fa(c,!1,b)))}},eb=function(a,b,c,d){if(da()){a=D.call(this,a);var e=G[a];R[a]&&e.isHidden&&!1!==O("onshow_start",a)&&(e.isShowing=!0,e.isSliding=!1,delete G.panesSliding[a],!1===b?fa(a,!0):pb(a,!1,c,d))}},gb=function(a,b){if(da()){var c=y(a),d=D.call(this,a),e=G[d];c&&c.stopImmediatePropagation();e.isHidden?eb(d):e.isClosed?pb(d,!!b):fa(d)}},fb=function(a,b){var c=G[a];Ya(a);c.isClosed=!0;c.isVisible=!1;b&&Ba(a)},
fa=function(a,b,c,d){function e(){C.isMoving=!1;Ua(f,!0);var a=u.oppositeEdge[f];G[a].noRoom&&(wa(a),cb(a));d||!G.initialized&&!h.triggerEventsOnLoad||(m||O("onclose_end",f),m&&O("onshow_end",f),n&&O("onhide_end",f))}var f=D.call(this,a);if(!G.initialized&&R[f])fb(f,!0);else if(da()){var g=R[f],h=F[f],C=G[f],l,m,n;S.queue(function(a){if(!g||!h.closable&&!C.isShowing&&!C.isHiding||!b&&C.isClosed&&!C.isShowing)return a();var d=!C.isShowing&&!1===O("onclose_start",f);m=C.isShowing;n=C.isHiding;delete C.isShowing;
delete C.isHiding;if(d)return a();l=!c&&!C.isClosed&&"none"!=h.fxName_close;C.isMoving=!0;C.isClosed=!0;C.isVisible=!1;n?C.isHidden=!0:m&&(C.isHidden=!1);C.isSliding?$a(f,!1):T("horz"===u[f].dir?"":"center",!1);Ba(f);l?(Sb(f,!0),g.hide(h.fxName_close,h.fxSettings_close,h.fxSpeed_close,function(){Sb(f,!1);C.isClosed&&e();a()})):(Ya(f),e(),a())})}},Ba=function(b){if(ma[b]){var c=ma[b],d=ya[b],e=F[b],f=u[b].side,g=e.resizerClass,h=e.togglerClass,C="-"+b;c.css(f,X.inset[f]).removeClass(g+"-open "+g+C+
"-open").removeClass(g+"-sliding "+g+C+"-sliding").addClass(g+"-closed "+g+C+"-closed");e.resizable&&a.layout.plugins.draggable&&c.draggable("disable").removeClass("ui-state-disabled").css("cursor","default").attr("title","");d&&(d.removeClass(h+"-open "+h+C+"-open").addClass(h+"-closed "+h+C+"-closed").attr("title",e.tips.Open),d.children(".content-open").hide(),d.children(".content-closed").css("display","block"));Ub(b,!1);G.initialized&&ba()}},pb=function(a,b,c,d){function e(){C.isMoving=!1;pa(f);
C.isSliding||T("vert"==u[f].dir?"center":"",!1);xb(f)}if(da()){var f=D.call(this,a),g=R[f],h=F[f],C=G[f],l,m;S.queue(function(a){if(!g||!h.resizable&&!h.closable&&!C.isShowing||C.isVisible&&!C.isSliding)return a();if(C.isHidden&&!C.isShowing)a(),eb(f,!0);else{C.autoResize&&C.size!=h.size?Qa(f,h.size,!0,!0,!0):wa(f,b);var n=O("onopen_start",f);if("abort"===n)return a();"NC"!==n&&wa(f,b);if(C.minSize>C.maxSize)return Ub(f,!1),!d&&h.tips.noRoomToOpen&&alert(h.tips.noRoomToOpen),a();b?$a(f,!0):C.isSliding?
$a(f,!1):h.slidable&&Ua(f,!1);C.noRoom=!1;cb(f);m=C.isShowing;delete C.isShowing;l=!c&&C.isClosed&&"none"!=h.fxName_open;C.isMoving=!0;C.isVisible=!0;C.isClosed=!1;m&&(C.isHidden=!1);l?(Sb(f,!0),g.show(h.fxName_open,h.fxSettings_open,h.fxSpeed_open,function(){Sb(f,!1);C.isVisible&&e();a()})):(Qb(f),e(),a())}})}},xb=function(b,c){var d=R[b],e=ma[b],f=ya[b],g=F[b],h=G[b],C=u[b].side,l=g.resizerClass,m=g.togglerClass,n="-"+b;e.css(C,X.inset[C]+aa(b)).removeClass(l+"-closed "+l+n+"-closed").addClass(l+
"-open "+l+n+"-open");h.isSliding?e.addClass(l+"-sliding "+l+n+"-sliding"):e.removeClass(l+"-sliding "+l+n+"-sliding");qa(0,e);g.resizable&&a.layout.plugins.draggable?e.draggable("enable").css("cursor",g.resizerCursor).attr("title",g.tips.Resize):h.isSliding||e.css("cursor","default");f&&(f.removeClass(m+"-closed "+m+n+"-closed").addClass(m+"-open "+m+n+"-open").attr("title",g.tips.Close),qa(0,f),f.children(".content-closed").hide(),f.children(".content-open").css("display","block"));Ub(b,!h.isSliding);
a.extend(h,H(d));G.initialized&&(ba(),xa(b,!0));!c&&(G.initialized||g.triggerEventsOnLoad)&&d.is(":visible")&&(O("onopen_end",b),h.isShowing&&O("onshow_end",b),G.initialized&&O("onresize_end",b))},Rb=function(a){function b(){e.isClosed?e.isMoving||pb(d,!0):$a(d,!0)}if(da()){var c=y(a),d=D.call(this,a),e=G[d];a=F[d].slideDelay_open;c&&c.stopImmediatePropagation();e.isClosed&&c&&"mouseenter"===c.type&&0<a?M.set(d+"_openSlider",b,a):b()}},ea=function(c){function d(){g.isClosed?$a(f,!1):g.isMoving||fa(f)}
if(da()){var e=y(c),f=D.call(this,c);c=F[f];var g=G[f],h=g.isMoving?1E3:300;g.isClosed||g.isResizing||("click"===c.slideTrigger_close?d():c.preventQuickSlideClose&&g.isMoving||c.preventPrematureSlideClose&&e&&a.layout.isMouseOverElem(e,R[f])||(e?M.set(f+"_closeSlider",d,b(c.slideDelay_close,h)):d()))}},Sb=function(a,b){var c=R[a],d=G[a],e=F[a],f=F.zIndexes;b?(Ab(a,{animation:!0,objectsOnly:!0}),c.css({zIndex:f.pane_animate}),"south"==a?c.css({top:X.inset.top+X.innerHeight-c.outerHeight()}):"east"==
a&&c.css({left:X.inset.left+X.innerWidth-c.outerWidth()})):(wb(),c.css({zIndex:d.isSliding?f.pane_sliding:f.pane_normal}),"south"==a?c.css({top:"auto"}):"east"!=a||c.css("left").match(/\-99999/)||c.css({left:"auto"}),x.msie&&e.fxOpacityFix&&"slide"!=e.fxName_open&&c.css("filter")&&1==c.css("opacity")&&c[0].style.removeAttribute("filter"))},Ua=function(a,b){var c=F[a],d=ma[a],e=c.slideTrigger_open.toLowerCase();if(d&&(!b||c.slidable)){e.match(/mouseover/)?e=c.slideTrigger_open="mouseenter":e.match(/(click|dblclick|mouseenter)/)||
(e=c.slideTrigger_open="click");if(c.resizerDblClickToggle&&e.match(/click/))d[b?"unbind":"bind"]("dblclick."+Ja,gb);d[b?"bind":"unbind"](e+"."+Ja,Rb).css("cursor",b?c.sliderCursor:"default").attr("title",b?c.tips.Slide:"")}},$a=function(a,b){function c(b){M.clear(a+"_closeSlider");b.stopPropagation()}var d=F[a],e=G[a],f=F.zIndexes,g=d.slideTrigger_close.toLowerCase(),h=b?"bind":"unbind",C=R[a],l=ma[a];M.clear(a+"_closeSlider");b?(e.isSliding=!0,G.panesSliding[a]=!0,Ua(a,!1)):(e.isSliding=!1,delete G.panesSliding[a]);
C.css("zIndex",b?f.pane_sliding:f.pane_normal);l.css("zIndex",b?f.pane_sliding+2:f.resizer_normal);g.match(/(click|mouseleave)/)||(g=d.slideTrigger_close="mouseleave");l[h](g,ea);"mouseleave"===g&&(C[h]("mouseleave."+Ja,ea),l[h]("mouseenter."+Ja,c),C[h]("mouseenter."+Ja,c));b?"click"!==g||d.resizable||(l.css("cursor",b?d.sliderCursor:"default"),l.attr("title",b?d.tips.Close:"")):M.clear(a+"_closeSlider")},cb=function(b,c,d,e){c=F[b];var f=G[b],g=u[b],h=R[b],C=ma[b],l="vert"===g.dir,m=!1;if("center"===
b||l&&f.noVerticalRoom)(m=0<=f.maxHeight)&&f.noRoom?(Qb(b),C&&C.show(),f.isVisible=!0,f.noRoom=!1,l&&(f.noVerticalRoom=!1),pa(b)):m||f.noRoom||(Ya(b),C&&C.hide(),f.isVisible=!1,f.noRoom=!0);"center"!==b&&(f.minSize<=f.maxSize?(f.size>f.maxSize?Qa(b,f.maxSize,d,!0,e):f.size<f.minSize?Qa(b,f.minSize,d,!0,e):C&&f.isVisible&&h.is(":visible")&&(d=f.size+X.inset[g.side],a.layout.cssNum(C,g.side)!=d&&C.css(g.side,d)),f.noRoom&&(f.wasOpen&&c.closable?c.autoReopen?pb(b,!1,!0,!0):f.noRoom=!1:eb(b,f.wasOpen,
!0,!0))):f.noRoom||(f.noRoom=!0,f.wasOpen=!f.isClosed&&!f.isSliding,f.isClosed||(c.closable?fa(b,!0,!0):Za(b,!0))))},Z=function(a,b,c,d,e){if(da()){a=D.call(this,a);var f=F[a],g=G[a];e=e||f.livePaneResizing&&!g.isResizing;g.autoResize=!1;Qa(a,b,c,d,e)}},Qa=function(d,e,f,g,h){function C(){for(var c="width"===y?p.outerWidth():p.outerHeight(),c=[{pane:l,count:1,target:e,actual:c,correct:e===c,attempt:e,cssSize:Ca}],d=c[0],g={},m="Inaccurate size after resizing the "+l+"-pane.";!d.correct;){g={pane:l,
count:d.count+1,target:e};g.attempt=d.actual>e?b(0,d.attempt-(d.actual-e)):b(0,d.attempt+(e-d.actual));g.cssSize=("horz"==u[l].dir?A:E)(R[l],g.attempt);p.css(y,g.cssSize);g.actual="width"==y?p.outerWidth():p.outerHeight();g.correct=e===g.actual;1===c.length&&(P(m,!1,!0),P(d,!1,!0));P(g,!1,!0);if(3<c.length)break;c.push(g);d=c[c.length-1]}n.size=e;a.extend(n,H(p));n.isVisible&&p.is(":visible")&&(q&&q.css(t,e+X.inset[t]),xa(l));!f&&!x&&G.initialized&&n.isVisible&&O("onresize_end",l);f||(n.isSliding||
T("horz"==u[l].dir?"":"center",x,h),ba());d=u.oppositeEdge[l];e<pa&&G[d].noRoom&&(wa(d),cb(d,!1,f));1<c.length&&P(m+"\nSee the Error Console for details.",!0,!0)}if(da()){var l=D.call(this,d),m=F[l],n=G[l],p=R[l],q=ma[l],t=u[l].side,y=u[l].sizeType.toLowerCase(),x=n.isResizing&&!m.triggerEventsDuringLiveResize,ka=!0!==g&&m.animatePaneSizing,pa,Ca;S.queue(function(d){wa(l);pa=n.size;e=ra(l,e);e=b(e,ra(l,m.minSize));e=c(e,n.maxSize);if(e<n.minSize)d(),cb(l,!1,f);else{if(!h&&e===pa)return d();n.newSize=
e;!f&&G.initialized&&n.isVisible&&O("onresize_start",l);Ca=("horz"==u[l].dir?A:E)(R[l],e);if(ka&&p.is(":visible")){var g=a.layout.effects.size[l]||a.layout.effects.size.all,g=m.fxSettings_size.easing||g.easing,K=F.zIndexes,q={};q[y]=Ca+"px";n.isMoving=!0;p.css({zIndex:K.pane_animate}).show().animate(q,m.fxSpeed_size,g,function(){p.css({zIndex:n.isSliding?K.pane_sliding:K.pane_normal});n.isMoving=!1;delete n.newSize;C();d()})}else p.css(y,Ca),delete n.newSize,p.is(":visible")?C():(n.size=e,a.extend(n,
H(p))),d()}})}},T=function(c,d,e){c=(c?c:"east,west,center").split(",");a.each(c,function(c,f){if(R[f]){var g=F[f],h=G[f],C=R[f],l=!0,m={},n=a.layout.showInvisibly(C),K={top:aa("north",!0),bottom:aa("south",!0),left:aa("west",!0),right:aa("east",!0),width:0,height:0};K.width=X.innerWidth-K.left-K.right;K.height=X.innerHeight-K.bottom-K.top;K.top+=X.inset.top;K.bottom+=X.inset.bottom;K.left+=X.inset.left;K.right+=X.inset.right;a.extend(h,H(C));if("center"===f){if(!e&&h.isVisible&&K.width===h.outerWidth&&
K.height===h.outerHeight)return C.css(n),!0;a.extend(h,ka(f),{maxWidth:K.width,maxHeight:K.height});m=K;h.newWidth=m.width;h.newHeight=m.height;m.width=E(C,m.width);m.height=A(C,m.height);l=0<=m.width&&0<=m.height;if(!G.initialized&&g.minWidth>K.width){var g=g.minWidth-h.outerWidth,K=F.east.minSize||0,p=F.west.minSize||0,q=G.east.size,t=G.west.size,y=q,u=t;0<g&&G.east.isVisible&&q>K&&(y=b(q-K,q-g),g-=q-y);0<g&&G.west.isVisible&&t>p&&(u=b(t-p,t-g),g-=t-u);if(0===g){q&&q!=K&&Qa("east",y,!0,!0,e);t&&
t!=p&&Qa("west",u,!0,!0,e);T("center",d,e);C.css(n);return}}}else{h.isVisible&&!h.noVerticalRoom&&a.extend(h,H(C),ka(f));if(!e&&!h.noVerticalRoom&&K.height===h.outerHeight)return C.css(n),!0;m.top=K.top;m.bottom=K.bottom;h.newSize=K.height;m.height=A(C,K.height);h.maxHeight=m.height;l=0<=h.maxHeight;l||(h.noVerticalRoom=!0)}l?(!d&&G.initialized&&O("onresize_start",f),C.css(m),"center"!==f&&ba(f),!h.noRoom||h.isClosed||h.isHidden||cb(f),h.isVisible&&(a.extend(h,H(C)),G.initialized&&xa(f))):!h.noRoom&&
h.isVisible&&cb(f);C.css(n);delete h.newSize;delete h.newWidth;delete h.newHeight;if(!h.isVisible)return!0;"center"===f&&(h=x.isIE6||!x.boxModel,R.north&&(h||"IFRAME"==G.north.tagName)&&R.north.css("width",E(R.north,X.innerWidth)),R.south&&(h||"IFRAME"==G.south.tagName)&&R.south.css("width",E(R.south,X.innerWidth)));!d&&G.initialized&&O("onresize_end",f)}})},jb=function(b){D(b);if(S.is(":visible"))if(G.initialized){if(!0===b&&a.isPlainObject(F.outset)&&S.css(F.outset),a.extend(X,H(S,F.inset)),X.outerHeight){!0===
b&&Eb();if(!1===O("onresizeall_start"))return!1;var c,d,e;a.each(["south","north","east","west"],function(a,b){R[b]&&(d=F[b],e=G[b],e.autoResize&&e.size!=d.size?Qa(b,d.size,!0,!0,!0):(wa(b),cb(b,!1,!0,!0)))});T("",!0,!0);ba();a.each(u.allPanes,function(a,b){(c=R[b])&&G[b].isVisible&&O("onresize_end",b)});O("onresizeall_end")}}else nb()},Va=function(b,c){var d=D.call(this,b);F[d].resizeChildren&&(c||ta(d),d=N[d],a.isPlainObject(d)&&a.each(d,function(a,b){b.destroyed||b.resizeAll()}))},xa=function(c,
d){if(da()){var e=D.call(this,c),e=e?e.split(","):u.allPanes;a.each(e,function(a,c){function e(a){return b(l.css.paddingBottom,parseInt(a.css("marginBottom"),10)||0)}function f(){var a=F[c].contentIgnoreSelector,a=h.nextAll().not(".ui-layout-mask").not(a||":lt(0)"),b=a.filter(":visible"),d=b.filter(":last");m={top:h[0].offsetTop,height:h.outerHeight(),numFooters:a.length,hiddenFooters:a.length-b.length,spaceBelow:0};m.spaceAbove=m.top;m.bottom=m.top+m.height;m.spaceBelow=d.length?d[0].offsetTop+d.outerHeight()-
m.bottom+e(d):e(h)}var g=R[c],h=Sa[c],C=F[c],l=G[c],m=l.content;if(!g||!h||!g.is(":visible"))return!0;if(!h.length&&(ub(c,!1),!h))return;if(!1!==O("onsizecontent_start",c)){if(!l.isMoving&&!l.isResizing||C.liveContentResizing||d||void 0==m.top)f(),0<m.hiddenFooters&&"hidden"===g.css("overflow")&&(g.css("overflow","visible"),f(),g.css("overflow","hidden"));g=l.innerHeight-(m.spaceAbove-l.css.paddingTop)-(m.spaceBelow-l.css.paddingBottom);h.is(":visible")&&m.height==g||(Ca(h,g,!0),m.height=g);G.initialized&&
O("onsizecontent_end",c)}})}},ba=function(b){b=(b=D.call(this,b))?b.split(","):u.borderPanes;a.each(b,function(b,c){var f=F[c],g=G[c],h=R[c],C=ma[c],l=ya[c],m;if(h&&C){var n=u[c].dir,K=g.isClosed?"_closed":"_open",p=f["spacing"+K],q=f["togglerAlign"+K],K=f["togglerLength"+K],t;if(0===p)C.hide();else{g.noRoom||g.isHidden||C.show();"horz"===n?(t=X.innerWidth,g.resizerLength=t,h=a.layout.cssNum(h,"left"),C.css({width:E(C,t),height:A(C,p),left:-9999<h?h:X.inset.left})):(t=h.outerHeight(),g.resizerLength=
t,C.css({height:A(C,t),width:E(C,p),top:X.inset.top+aa("north",!0)}));qa(f,C);if(l){if(0===K||g.isSliding&&f.hideTogglerOnSlide){l.hide();return}l.show();if(!(0<K)||"100%"===K||K>t)K=t,q=0;else if(e(q))switch(q){case "top":case "left":q=0;break;case "bottom":case "right":q=t-K;break;default:q=d((t-K)/2)}else h=parseInt(q,10),q=0<=q?h:t-K+h;if("horz"===n){var y=E(l,K);l.css({width:y,height:A(l,p),left:q,top:0});l.children(".content").each(function(){m=a(this);m.css("marginLeft",d((y-m.outerWidth())/
2))})}else{var D=A(l,K);l.css({height:D,width:E(l,p),top:q,left:0});l.children(".content").each(function(){m=a(this);m.css("marginTop",d((D-m.outerHeight())/2))})}qa(0,l)}G.initialized||!f.initHidden&&!g.isHidden||(C.hide(),l&&l.hide())}}})},Cb=function(a){if(da()){var b=D.call(this,a);a=ya[b];var c=F[b];a&&(c.closable=!0,a.bind("click."+Ja,function(a){a.stopPropagation();gb(b)}).css("visibility","visible").css("cursor","pointer").attr("title",G[b].isClosed?c.tips.Open:c.tips.Close).show())}},Ub=
function(b,c){a.layout.plugins.buttons&&a.each(G[b].pins,function(d,e){a.layout.buttons.setPinState(C,a(e),b,c)})},S=a(this).eq(0);if(!S.length)return P(F.errors.containerMissing);if(S.data("layoutContainer")&&S.data("layout"))return S.data("layout");var R={},Sa={},ma={},ya={},Ka=a([]),X=G.container,Ja=G.id,C={options:F,state:G,container:S,panes:R,contents:Sa,resizers:ma,togglers:ya,hide:Za,show:eb,toggle:gb,open:pb,close:fa,slideOpen:Rb,slideClose:ea,slideToggle:function(a){a=D.call(this,a);gb(a,
!0)},setSizeLimits:wa,_sizePane:Qa,sizePane:Z,sizeContent:xa,swapPanes:function(c,d){function e(b){var c=R[b],d=Sa[b];return c?{pane:b,P:c?c[0]:!1,C:d?d[0]:!1,state:a.extend(!0,{},G[b]),options:a.extend(!0,{},F[b])}:!1}function f(c,d){if(c){var e=c.P,g=c.C,h=c.pane,l=u[d],n=a.extend(!0,{},G[d]),K=F[d],p={resizerCursor:K.resizerCursor};a.each(["fxName","fxSpeed","fxSettings"],function(a,b){p[b+"_open"]=K[b+"_open"];p[b+"_close"]=K[b+"_close"];p[b+"_size"]=K[b+"_size"]});R[d]=a(e).data({layoutPane:C[d],
layoutEdge:d}).css(u.hidden).css(l.cssReq);Sa[d]=g?a(g):!1;F[d]=a.extend(!0,{},c.options,p);G[d]=a.extend(!0,{},c.state);e.className=e.className.replace(new RegExp(K.paneClass+"-"+h,"g"),K.paneClass+"-"+d);Ra(d);l.dir!=u[h].dir?(e=m[d]||0,wa(d),e=b(e,G[d].minSize),Z(d,e,!0,!0)):ma[d].css(l.side,X.inset[l.side]+(G[d].isVisible?aa(d):0));c.state.isVisible&&!n.isVisible?xb(d,!0):(Ba(d),Ua(d,!0));c=null}}if(da()){var g=D.call(this,c);G[g].edge=d;G[d].edge=g;if(!1===O("onswap_start",g)||!1===O("onswap_start",
d))G[g].edge=g,G[d].edge=d;else{var h=e(g),l=e(d),m={};m[g]=h?h.state.size:0;m[d]=l?l.state.size:0;R[g]=!1;R[d]=!1;G[g]={};G[d]={};ya[g]&&ya[g].remove();ya[d]&&ya[d].remove();ma[g]&&ma[g].remove();ma[d]&&ma[d].remove();ma[g]=ma[d]=ya[g]=ya[d]=!1;f(h,d);f(l,g);h=l=m=null;R[g]&&R[g].css(u.visible);R[d]&&R[d].css(u.visible);jb();O("onswap_end",g);O("onswap_end",d)}}},showMasks:Ab,hideMasks:wb,initContent:ub,addPane:Jb,removePane:Lb,createChildren:ib,refreshChildren:ta,enableClosable:Cb,disableClosable:function(a,
b){if(da()){var c=D.call(this,a),d=ya[c];d&&(F[c].closable=!1,G[c].isClosed&&pb(c,!1,!0),d.unbind("."+Ja).css("visibility",b?"hidden":"visible").css("cursor","default").attr("title",""))}},enableSlidable:function(a){if(da()){a=D.call(this,a);var b=ma[a];b&&b.data("draggable")&&(F[a].slidable=!0,G[a].isClosed&&Ua(a,!0))}},disableSlidable:function(a){if(da()){a=D.call(this,a);var b=ma[a];b&&(F[a].slidable=!1,G[a].isSliding?fa(a,!1,!0):(Ua(a,!1),b.css("cursor","default").attr("title",""),qa(null,b[0])))}},
enableResizable:function(a){if(da()){a=D.call(this,a);var b=ma[a],c=F[a];b&&b.data("draggable")&&(c.resizable=!0,b.draggable("enable"),G[a].isClosed||b.css("cursor",c.resizerCursor).attr("title",c.tips.Resize))}},disableResizable:function(a){if(da()){a=D.call(this,a);var b=ma[a];b&&b.data("draggable")&&(F[a].resizable=!1,b.draggable("disable").css("cursor","default").attr("title",""),qa(null,b[0]))}},allowOverflow:l,resetOverflow:t,destroy:function(b,c){a(window).unbind("."+Ja);a(document).unbind("."+
Ja);"object"===typeof b?D(b):c=b;S.clearQueue().removeData("layout").removeData("layoutContainer").removeClass(F.containerClass).unbind("."+Ja);Ka.remove();a.each(u.allPanes,function(a,b){Lb(b,!1,!0,c)});S.data("layoutCSS")&&!S.data("layoutRole")&&S.css(S.data("layoutCSS")).removeData("layoutCSS");"BODY"===X.tagName&&(S=a("html")).data("layoutCSS")&&S.css(S.data("layoutCSS")).removeData("layoutCSS");f(C,a.layout.onDestroy);ca();for(var d in C)d.match(/^(container|options)$/)||delete C[d];C.destroyed=
!0;return C},initPanes:da,resizeAll:jb,runCallbacks:O,hasParentLayout:!1,children:N,north:!1,south:!1,west:!1,east:!1,center:!1};return"cancel"===function(){tb();var b=F,c=G;c.creatingLayout=!0;f(C,a.layout.onCreate);if(!1===O("onload_start"))return"cancel";var d=S[0],e=a("html"),g=X.tagName=d.tagName,h=X.id=d.id,l=X.className=d.className,d=F,m=d.name,n={},p=S.data("parentLayout"),q=S.data("layoutEdge"),t=p&&q,y=a.layout.cssNum,u;X.selector=S.selector.split(".slice")[0];X.ref=(d.name?d.name+" layout / ":
"")+g+(h?"#"+h:l?".["+l+"]":"");X.isBody="BODY"===g;t||X.isBody||(g=S.closest("."+a.layout.defaults.panes.paneClass),p=g.data("parentLayout"),q=g.data("layoutEdge"),t=p&&q);S.data({layout:C,layoutContainer:Ja}).addClass(d.containerClass);g={destroy:"",initPanes:"",resizeAll:"resizeAll",resize:"resizeAll"};for(m in g)S.bind("layout"+m.toLowerCase()+"."+Ja,C[g[m]||m]);t&&(C.hasParentLayout=!0,p.refreshChildren(q,C));S.data("layoutCSS")||(X.isBody?(S.data("layoutCSS",a.extend(I(S,"position,margin,padding,border"),
{height:S.css("height"),overflow:S.css("overflow"),overflowX:S.css("overflowX"),overflowY:S.css("overflowY")})),e.data("layoutCSS",a.extend(I(e,"padding"),{height:"auto",overflow:e.css("overflow"),overflowX:e.css("overflowX"),overflowY:e.css("overflowY")}))):S.data("layoutCSS",I(S,"position,margin,padding,border,top,bottom,left,right,width,height,overflow,overflowX,overflowY")));try{n={overflow:"hidden",overflowX:"hidden",overflowY:"hidden"};S.css(n);d.inset&&!a.isPlainObject(d.inset)&&(u=parseInt(d.inset,
10)||0,d.inset={top:u,bottom:u,left:u,right:u});if(X.isBody)d.outset?a.isPlainObject(d.outset)||(u=parseInt(d.outset,10)||0,d.outset={top:u,bottom:u,left:u,right:u}):d.outset={top:y(e,"paddingTop"),bottom:y(e,"paddingBottom"),left:y(e,"paddingLeft"),right:y(e,"paddingRight")},e.css(n).css({height:"100%",border:"none",padding:0,margin:0}),x.isIE6?(S.css({width:"100%",height:"100%",border:"none",padding:0,margin:0,position:"relative"}),d.inset||(d.inset=H(S).inset)):(S.css({width:"auto",height:"auto",
margin:0,position:"absolute"}),S.css(d.outset)),a.extend(X,H(S,d.inset));else{var D=S.css("position");D&&D.match(/(fixed|absolute|relative)/)||S.css("position","relative");S.is(":visible")&&(a.extend(X,H(S,d.inset)),1>X.innerHeight&&P(d.errors.noContainerHeight.replace(/CONTAINER/,X.ref)))}y(S,"minWidth")&&S.parent().css("overflowX","auto");y(S,"minHeight")&&S.parent().css("overflowY","auto")}catch(A){}ob();a(window).bind("unload."+Ja,ca);f(C,a.layout.onLoad);b.initPanes&&nb();delete c.creatingLayout;
return G.initialized}()?null:C}})(jQuery);
(function(a){a.ui||(a.ui={});a.ui.cookie={acceptsCookies:!!navigator.cookieEnabled,read:function(c){for(var b=document.cookie,b=b?b.split(";"):[],d,e=0,f=b.length;e<f;e++)if(d=a.trim(b[e]).split("="),d[0]==c)return decodeURIComponent(d[1]);return null},write:function(c,b,d){var e="",f="",g=!1;d=d||{};var h=d.expires||null,l=a.type(h);"date"===l?f=h:"string"===l&&0<h&&(h=parseInt(h,10),l="number");"number"===l&&(f=new Date,0<h?f.setDate(f.getDate()+h):(f.setFullYear(1970),g=!0));f&&(e+=";expires="+
f.toUTCString());d.path&&(e+=";path="+d.path);d.domain&&(e+=";domain="+d.domain);d.secure&&(e+=";secure");document.cookie=c+"="+(g?"":encodeURIComponent(b))+e},clear:function(c){a.ui.cookie.write(c,"",{expires:-1})}};a.cookie||(a.cookie=function(c,b,d){var e=a.ui.cookie;if(null===b)e.clear(c);else{if(void 0===b)return e.read(c);e.write(c,b,d)}});a.layout.plugins.stateManagement=!0;a.layout.config.optionRootKeys.push("stateManagement");a.layout.defaults.stateManagement={enabled:!1,autoSave:!0,autoLoad:!0,
animateLoad:!0,includeChildren:!0,stateKeys:"north.size,south.size,east.size,west.size,north.isClosed,south.isClosed,east.isClosed,west.isClosed,north.isHidden,south.isHidden,east.isHidden,west.isHidden",cookie:{name:"",domain:"",path:"",expires:"",secure:!1}};a.layout.optionsMap.layout.push("stateManagement");a.layout.state={saveCookie:function(c,b,d){var e=c.options,f=e.stateManagement;d=a.extend(!0,{},f.cookie,d||null);c=c.state.stateData=c.readState(b||f.stateKeys);a.ui.cookie.write(d.name||e.name||
"Layout",a.layout.state.encodeJSON(c),d);return a.extend(!0,{},c)},deleteCookie:function(c){c=c.options;a.ui.cookie.clear(c.stateManagement.cookie.name||c.name||"Layout")},readCookie:function(c){c=c.options;return(c=a.ui.cookie.read(c.stateManagement.cookie.name||c.name||"Layout"))?a.layout.state.decodeJSON(c):{}},loadCookie:function(c){var b=a.layout.state.readCookie(c);b&&(c.state.stateData=a.extend(!0,{},b),c.loadState(b));return b},loadState:function(c,b,d){if(a.isPlainObject(b)&&!a.isEmptyObject(b))if(b=
c.state.stateData=a.layout.transformData(b),d=a.extend({animateLoad:!1,includeChildren:c.options.stateManagement.includeChildren},d),c.state.initialized){var e=!d.animateLoad,f,g,h,l;a.each(a.layout.config.borderPanes,function(d,m){q=b[m];a.isPlainObject(q)&&(s=q.size,f=q.initClosed,g=q.initHidden,ar=q.autoResize,h=c.state[m],l=h.isVisible,ar&&(h.autoResize=ar),l||c._sizePane(m,s,!1,!1,!1),!0===g?c.hide(m,e):!0===f?c.close(m,!1,e):!1===f?c.open(m,!1,e):!1===g&&c.show(m,!1,e),l&&c._sizePane(m,s,!1,
!1,e))});if(d.includeChildren){var m,n;a.each(c.children,function(c,d){(m=b[c]?b[c].children:0)&&d&&a.each(d,function(a,b){n=m[a];b&&n&&b.loadState(n)})})}}else{var q=a.extend(!0,{},b);a.each(a.layout.config.allPanes,function(a,b){q[b]&&delete q[b].children});a.extend(!0,c.options,q)}},readState:function(c,b){"string"===a.type(b)&&(b={keys:b});b||(b={});var d=c.options.stateManagement,e=b.includeChildren,e=void 0!==e?e:d.includeChildren,d=b.stateKeys||d.stateKeys,f={isClosed:"initClosed",isHidden:"initHidden"},
g=c.state,h=a.layout.config.allPanes,l={},m,n,q,t,x,u;a.isArray(d)&&(d=d.join(","));for(var d=d.replace(/__/g,".").split(","),E=0,A=d.length;E<A;E++)m=d[E].split("."),n=m[0],m=m[1],0>a.inArray(n,h)||(q=g[n][m],void 0!=q&&("isClosed"==m&&g[n].isSliding&&(q=!0),(l[n]||(l[n]={}))[f[m]?f[m]:m]=q));e&&a.each(h,function(b,d){x=c.children[d];t=g.stateData[d];a.isPlainObject(x)&&!a.isEmptyObject(x)&&(u=l[d]||(l[d]={}),u.children||(u.children={}),a.each(x,function(b,c){c.state.initialized?u.children[b]=a.layout.state.readState(c):
t&&t.children&&t.children[b]&&(u.children[b]=a.extend(!0,{},t.children[b]))}))});return l},encodeJSON:function(c){function b(c){var e=[],f=0,g,h,l,m=a.isArray(c);for(g in c)h=c[g],l=typeof h,"string"==l?h='"'+h+'"':"object"==l&&(h=b(h)),e[f++]=(m?"":'"'+g+'":')+h;return(m?"[":"{")+e.join(",")+(m?"]":"}")}return b(c)},decodeJSON:function(c){try{return a.parseJSON?a.parseJSON(c):window.eval("("+c+")")||{}}catch(b){return{}}},_create:function(c){var b=a.layout.state,d=c.options.stateManagement;a.extend(c,
{readCookie:function(){return b.readCookie(c)},deleteCookie:function(){b.deleteCookie(c)},saveCookie:function(a,d){return b.saveCookie(c,a,d)},loadCookie:function(){return b.loadCookie(c)},loadState:function(a,d){b.loadState(c,a,d)},readState:function(a){return b.readState(c,a)},encodeJSON:b.encodeJSON,decodeJSON:b.decodeJSON});c.state.stateData={};if(d.autoLoad)if(a.isPlainObject(d.autoLoad))a.isEmptyObject(d.autoLoad)||c.loadState(d.autoLoad);else if(d.enabled)if(a.isFunction(d.autoLoad)){var e=
{};try{e=d.autoLoad(c,c.state,c.options,c.options.name||"")}catch(f){}e&&a.isPlainObject(e)&&!a.isEmptyObject(e)&&c.loadState(e)}else c.loadCookie()},_unload:function(c){var b=c.options.stateManagement;if(b.enabled&&b.autoSave)if(a.isFunction(b.autoSave))try{b.autoSave(c,c.state,c.options,c.options.name||"")}catch(d){}else c.saveCookie()}};a.layout.onCreate.push(a.layout.state._create);a.layout.onUnload.push(a.layout.state._unload);a.layout.plugins.buttons=!0;a.layout.defaults.autoBindCustomButtons=
!1;a.layout.optionsMap.layout.push("autoBindCustomButtons");a.layout.buttons={init:function(c){var b=c.options.name||"",d;a.each("toggle open close pin toggle-slide open-slide".split(" "),function(e,f){a.each(a.layout.config.borderPanes,function(e,h){a(".ui-layout-button-"+f+"-"+h).each(function(){d=a(this).data("layoutName")||a(this).attr("layoutName");void 0!=d&&d!==b||c.bindButton(this,f,h)})})})},get:function(c,b,d,e){var f=a(b);c=c.options;var g=c.errors.addButtonError;f.length?0>a.inArray(d,
a.layout.config.borderPanes)?(a.layout.msg(g+" "+c.errors.pane+": "+d,!0),f=a("")):(b=c[d].buttonClass+"-"+e,f.addClass(b+" "+b+"-"+d).data("layoutName",c.name)):a.layout.msg(g+" "+c.errors.selector+": "+b,!0);return f},bind:function(c,b,d,e){var f=a.layout.buttons;switch(d.toLowerCase()){case "toggle":f.addToggle(c,b,e);break;case "open":f.addOpen(c,b,e);break;case "close":f.addClose(c,b,e);break;case "pin":f.addPin(c,b,e);break;case "toggle-slide":f.addToggle(c,b,e,!0);break;case "open-slide":f.addOpen(c,
b,e,!0)}return c},addToggle:function(c,b,d,e){a.layout.buttons.get(c,b,d,"toggle").click(function(a){c.toggle(d,!!e);a.stopPropagation()});return c},addOpen:function(c,b,d,e){a.layout.buttons.get(c,b,d,"open").attr("title",c.options[d].tips.Open).click(function(a){c.open(d,!!e);a.stopPropagation()});return c},addClose:function(c,b,d){a.layout.buttons.get(c,b,d,"close").attr("title",c.options[d].tips.Close).click(function(a){c.close(d);a.stopPropagation()});return c},addPin:function(c,b,d){var e=a.layout.buttons,
f=e.get(c,b,d,"pin");if(f.length){var g=c.state[d];f.click(function(b){e.setPinState(c,a(this),d,g.isSliding||g.isClosed);g.isSliding||g.isClosed?c.open(d):c.close(d);b.stopPropagation()});e.setPinState(c,f,d,!g.isClosed&&!g.isSliding);g.pins.push(b)}return c},setPinState:function(a,b,d,e){var f=b.attr("pin");if(!f||e!==("down"==f)){a=a.options[d];var f=a.buttonClass+"-pin",g=f+"-"+d;d=f+"-up "+g+"-up";f=f+"-down "+g+"-down";b.attr("pin",e?"down":"up").attr("title",e?a.tips.Unpin:a.tips.Pin).removeClass(e?
d:f).addClass(e?f:d)}},syncPinBtns:function(c,b,d){a.each(c.state[b].pins,function(e,f){a.layout.buttons.setPinState(c,a(f),b,d)})},_load:function(c){var b=a.layout.buttons;a.extend(c,{bindButton:function(a,d,g){return b.bind(c,a,d,g)},addToggleBtn:function(a,d,g){return b.addToggle(c,a,d,g)},addOpenBtn:function(a,d,g){return b.addOpen(c,a,d,g)},addCloseBtn:function(a,d){return b.addClose(c,a,d)},addPinBtn:function(a,d){return b.addPin(c,a,d)}});for(var d=0;4>d;d++)c.state[a.layout.config.borderPanes[d]].pins=
[];c.options.autoBindCustomButtons&&b.init(c)},_unload:function(a){}};a.layout.onLoad.push(a.layout.buttons._load);a.layout.plugins.browserZoom=!0;a.layout.defaults.browserZoomCheckInterval=1E3;a.layout.optionsMap.layout.push("browserZoomCheckInterval");a.layout.browserZoom={_init:function(c){!1!==a.layout.browserZoom.ratio()&&a.layout.browserZoom._setTimer(c)},_setTimer:function(c){if(!c.destroyed){var b=c.options,d=c.state,e=c.hasParentLayout?5E3:Math.max(b.browserZoomCheckInterval,100);setTimeout(function(){if(!c.destroyed&&
b.resizeWithWindow){var e=a.layout.browserZoom.ratio();e!==d.browserZoom&&(d.browserZoom=e,c.resizeAll());a.layout.browserZoom._setTimer(c)}},e)}},ratio:function(){function c(a,b){return(parseInt(a,10)/parseInt(b,10)*100).toFixed()}var b=window,d=screen,e=document,f=e.documentElement||e.body,g=a.layout.browser,h=g.version,l,m,n;return g.msie&&8<h||!g.msie?!1:d.deviceXDPI&&d.systemXDPI?c(d.deviceXDPI,d.systemXDPI):g.webkit&&(l=e.body.getBoundingClientRect)?c(l.left-l.right,e.body.offsetWidth):g.webkit&&
(m=b.outerWidth)?c(m,b.innerWidth):(m=d.width)&&(n=f.clientWidth)?c(m,n):!1}};a.layout.onReady.push(a.layout.browserZoom._init)})(jQuery);
(function(a){function c(b,c){var d=document.createElementNS("http://www.w3.org/2000/svg",b||"svg");c&&a.each(c,function(a,b){d.setAttributeNS(null,a,b)});return a(d)}a.fn.activity=function(c){this.each(function(){var e=a(this),f=e.data("activity");f&&(clearInterval(f.data("interval")),f.remove(),e.removeData("activity"));if(!1!==c){c=a.extend({color:e.css("color")},a.fn.activity.defaults,c);var f=b(e,c).css("position","absolute").prependTo(c.outside?"body":e),g=e.outerHeight()-f.height(),q=e.outerWidth()-
f.width(),g="top"==c.valign?c.padding:"bottom"==c.valign?g-c.padding:Math.floor(g/2),q="left"==c.align?c.padding:"right"==c.align?q-c.padding:Math.floor(q/2),t=e.offset();c.outside?f.css({top:t.top+"px",left:t.left+"px"}):(g-=f.offset().top-t.top,q-=f.offset().left-t.left);f.css({marginTop:g+"px",marginLeft:q+"px"});d(f,c.segments,Math.round(10/c.speed)/10);e.data("activity",f)}});return this};a.fn.activity.defaults={segments:12,space:3,length:7,width:4,speed:1.2,align:"center",valign:"center",padding:4};
a.fn.activity.getOpacity=function(a,b){var c=a.steps||a.segments-1,d=void 0!==a.opacity?a.opacity:1/c;return 1-Math.min(b,c)*(1-d)/c};var b=function(){return a("<div>").addClass("busy")},d=function(){};if(document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)if(b=function(b,d){for(var e=2*d.width+d.space,f=e+d.length+Math.ceil(d.width/2)+1,g=c().width(2*f).height(2*f),t=c("g",{"stroke-width":d.width,"stroke-linecap":"round",stroke:d.color}).appendTo(c("g",
{transform:"translate("+f+","+f+")"}).appendTo(g)),x=0;x<d.segments;x++)t.append(c("line",{x1:0,y1:e,x2:0,y2:e+d.length,transform:"rotate("+360/d.segments*x+", 0, 0)",opacity:a.fn.activity.getOpacity(d,x)}));return a("<div>").append(g).width(2*f).height(2*f)},void 0!==document.createElement("div").style.WebkitAnimationName)var e={},d=function(a,b,c){if(!e[b]){for(var d="spin"+b,f="@-webkit-keyframes "+d+" {",g=0;g<b;g++)var x=Math.round(1E5/b*g)/1E3,u=Math.round(1E5/b*(g+1)-1)/1E3,E="% { -webkit-transform:rotate("+
Math.round(360/b*g)+"deg); }\n",f=f+(x+E+u+E);document.styleSheets[0].insertRule(f+"100% { -webkit-transform:rotate(100deg); }\n}");e[b]=d}a.css("-webkit-animation",e[b]+" "+c+"s linear infinite")};else d=function(a,b,c){var d=0,e=a.find("g g").get(0);a.data("interval",setInterval(function(){e.setAttributeNS(null,"transform","rotate("+ ++d%b*(360/b)+")")},1E3*c/b))};else{var f=a("<shape>").css("behavior","url(#default#VML)").appendTo("body");if(f.get(0).adj){var g=document.createStyleSheet();a.each(["group",
"shape","stroke"],function(){g.addRule(this,"behavior:url(#default#VML);")});b=function(b,c){for(var d=2*c.width+c.space,e=2*(d+c.length+Math.ceil(c.width/2)+1),f=-Math.ceil(e/2),f=a("<group>",{coordsize:e+" "+e,coordorigin:f+" "+f}).css({top:f,left:f,width:e,height:e}),g=0;g<c.segments;g++)f.append(a("<shape>",{path:"m "+d+",0  l "+(d+c.length)+",0"}).css({width:e,height:e,rotation:360/c.segments*g+"deg"}).append(a("<stroke>",{color:c.color,weight:c.width+"px",endcap:"round",opacity:a.fn.activity.getOpacity(c,
g)})));return a("<group>",{coordsize:e+" "+e}).css({width:e,height:e,overflow:"hidden"}).append(f)};d=function(a,b,c){var d=0,e=a.get(0);a.data("interval",setInterval(function(){e.style.rotation=++d%b*(360/b)},1E3*c/b))}}a(f).remove()}})(jQuery);jQuery.fn.farbtastic=function(a){$.farbtastic(this,a);return this};jQuery.farbtastic=function(a,c){a=$(a).get(0);return a.farbtastic||(a.farbtastic=new jQuery._farbtastic(a,c))};
jQuery._farbtastic=function(a,c){var b=this;$(a).html('<div class="farbtastic"><div class="color"></div><div class="wheel"></div><div class="overlay"></div><div class="h-marker marker"></div><div class="sl-marker marker"></div></div>');var d=$(".farbtastic",a);b.wheel=$(".wheel",a).get(0);b.radius=84;b.square=100;b.width=194;navigator.appVersion.match(/MSIE [0-6]\./)&&$("*",d).each(function(){if("none"!=this.currentStyle.backgroundImage){var a=this.currentStyle.backgroundImage,a=this.currentStyle.backgroundImage.substring(5,
a.length-2);$(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+a+"')"})}});b.linkTo=function(a){"object"==typeof b.callback&&$(b.callback).unbind("keyup",b.updateValue);b.color=null;if("function"==typeof a)b.callback=a;else if("object"==typeof a||"string"==typeof a)b.callback=$(a),b.callback.bind("keyup",b.updateValue),b.callback.get(0).value&&b.setColor(b.callback.get(0).value);return this};b.updateValue=function(a){this.value&&
this.value!=b.color&&b.setColor(this.value)};b.setColor=function(a){var c=b.unpack(a);b.color!=a&&c&&(b.color=a,b.rgb=c,b.hsl=b.RGBToHSL(b.rgb),b.updateDisplay());return this};b.setHSL=function(a){b.hsl=a;b.rgb=b.HSLToRGB(a);b.color=b.pack(b.rgb);b.updateDisplay();return this};b.widgetCoords=function(a){var c,d,h=a.target||a.srcElement,l=b.wheel;if("undefined"!=typeof a.offsetX){var m={x:a.offsetX,y:a.offsetY};for(a=h;a;)a.mouseX=m.x,a.mouseY=m.y,m.x+=a.offsetLeft,m.y+=a.offsetTop,a=a.offsetParent;
a=l;for(m=l=0;a;){if("undefined"!=typeof a.mouseX){c=a.mouseX-l;d=a.mouseY-m;break}l+=a.offsetLeft;m+=a.offsetTop;a=a.offsetParent}for(a=h;a;)a.mouseX=void 0,a.mouseY=void 0,a=a.offsetParent}else m=b.absolutePosition(l),c=(a.pageX||0*(a.clientX+$("html").get(0).scrollLeft))-m.x,d=(a.pageY||0*(a.clientY+$("html").get(0).scrollTop))-m.y;return{x:c-b.width/2,y:d-b.width/2}};b.mousedown=function(a){document.dragging||($(document).bind("mousemove",b.mousemove).bind("mouseup",b.mouseup),document.dragging=
!0);var c=b.widgetCoords(a);b.circleDrag=2*Math.max(Math.abs(c.x),Math.abs(c.y))>b.square;b.mousemove(a);return!1};b.mousemove=function(a){var c=b.widgetCoords(a);b.circleDrag?(a=Math.atan2(c.x,-c.y)/6.28,0>a&&(a+=1),b.setHSL([a,b.hsl[1],b.hsl[2]])):(a=Math.max(0,Math.min(1,-(c.x/b.square)+.5)),c=Math.max(0,Math.min(1,-(c.y/b.square)+.5)),b.setHSL([b.hsl[0],a,c]));return!1};b.mouseup=function(){$(document).unbind("mousemove",b.mousemove);$(document).unbind("mouseup",b.mouseup);document.dragging=!1};
b.updateDisplay=function(){var a=6.28*b.hsl[0];$(".h-marker",d).css({left:Math.round(Math.sin(a)*b.radius+b.width/2)+"px",top:Math.round(-Math.cos(a)*b.radius+b.width/2)+"px"});$(".sl-marker",d).css({left:Math.round(b.square*(.5-b.hsl[1])+b.width/2)+"px",top:Math.round(b.square*(.5-b.hsl[2])+b.width/2)+"px"});$(".color",d).css("backgroundColor",b.pack(b.HSLToRGB([b.hsl[0],1,.5])));"object"==typeof b.callback?($(b.callback).css({backgroundColor:b.color,color:.5<b.hsl[2]?"#000":"#fff"}),$(b.callback).each(function(){this.value&&
this.value!=b.color&&(this.value=b.color)})):"function"==typeof b.callback&&b.callback.call(b,b.color)};b.absolutePosition=function(a){var c={x:a.offsetLeft,y:a.offsetTop};a.offsetParent&&(a=b.absolutePosition(a.offsetParent),c.x+=a.x,c.y+=a.y);return c};b.pack=function(a){var b=Math.round(255*a[0]),c=Math.round(255*a[1]);a=Math.round(255*a[2]);return"#"+(16>b?"0":"")+b.toString(16)+(16>c?"0":"")+c.toString(16)+(16>a?"0":"")+a.toString(16)};b.unpack=function(a){if(7==a.length)return[parseInt("0x"+
a.substring(1,3))/255,parseInt("0x"+a.substring(3,5))/255,parseInt("0x"+a.substring(5,7))/255];if(4==a.length)return[parseInt("0x"+a.substring(1,2))/15,parseInt("0x"+a.substring(2,3))/15,parseInt("0x"+a.substring(3,4))/15]};b.HSLToRGB=function(a){var b,c=a[0];b=a[1];a=a[2];b=.5>=a?a*(b+1):a+b-a*b;a=2*a-b;return[this.hueToRGB(a,b,c+.33333),this.hueToRGB(a,b,c),this.hueToRGB(a,b,c-.33333)]};b.hueToRGB=function(a,b,c){c=0>c?c+1:1<c?c-1:c;return 1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(.66666-c)*6:a};
b.RGBToHSL=function(a){var b,c,d,l,m=a[0],n=a[1],q=a[2];b=Math.min(m,Math.min(n,q));a=Math.max(m,Math.max(n,q));c=a-b;l=(b+a)/2;d=0;0<l&&1>l&&(d=c/(.5>l?2*l:2-2*l));b=0;0<c&&(a==m&&a!=n&&(b+=(n-q)/c),a==n&&a!=q&&(b+=2+(q-m)/c),a==q&&a!=m&&(b+=4+(m-n)/c),b/=6);return[b,d,l]};$("*",d).mousedown(b.mousedown);b.setColor("#000000");c&&b.linkTo(c)}(function(a,c,b){(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):jQuery&&!jQuery.fn.dataTable&&a(jQuery)})(function(d){var e=function(f){function g(a,
f){var g=e.defaults.columns,l=a.aoColumns.length,g=d.extend({},e.models.oColumn,g,{sSortingClass:a.oClasses.sSortable,sSortingClassJUI:a.oClasses.sSortJUI,nTh:f?f:c.createElement("th"),sTitle:g.sTitle?g.sTitle:f?f.innerHTML:"",aDataSort:g.aDataSort?g.aDataSort:[l],mData:g.mData?g.oDefaults:l});a.aoColumns.push(g);a.aoPreSearchCols[l]===b||null===a.aoPreSearchCols[l]?a.aoPreSearchCols[l]=d.extend({},e.models.oSearch):(g=a.aoPreSearchCols[l],g.bRegex===b&&(g.bRegex=!0),g.bSmart===b&&(g.bSmart=!0),g.bCaseInsensitive===
b&&(g.bCaseInsensitive=!0));h(a,l,null)}function h(a,c,e){var f=a.aoColumns[c];e!==b&&null!==e&&(e.mDataProp&&!e.mData&&(e.mData=e.mDataProp),e.sType!==b&&(f.sType=e.sType,f._bAutoType=!1),d.extend(f,e),ba(f,e,"sWidth","sWidthOrig"),e.iDataSort!==b&&(f.aDataSort=[e.iDataSort]),ba(f,e,"aDataSort"));var g=f.mRender?M(f.mRender):null,h=M(f.mData);f.fnGetData=function(a,b){var c=h(a,b);return f.mRender&&b&&""!==b?g(c,b,a):c};f.fnSetData=P(f.mData);a.oFeatures.bSort||(f.bSortable=!1);!f.bSortable||-1==
d.inArray("asc",f.asSorting)&&-1==d.inArray("desc",f.asSorting)?(f.sSortingClass=a.oClasses.sSortableNone,f.sSortingClassJUI=""):-1==d.inArray("asc",f.asSorting)&&-1==d.inArray("desc",f.asSorting)?(f.sSortingClass=a.oClasses.sSortable,f.sSortingClassJUI=a.oClasses.sSortJUI):-1!=d.inArray("asc",f.asSorting)&&-1==d.inArray("desc",f.asSorting)?(f.sSortingClass=a.oClasses.sSortableAsc,f.sSortingClassJUI=a.oClasses.sSortJUIAscAllowed):-1==d.inArray("asc",f.asSorting)&&-1!=d.inArray("desc",f.asSorting)&&
(f.sSortingClass=a.oClasses.sSortableDesc,f.sSortingClassJUI=a.oClasses.sSortJUIDescAllowed)}function l(a){if(!1===a.oFeatures.bAutoWidth)return!1;Ba(a);for(var b=0,c=a.aoColumns.length;b<c;b++)a.aoColumns[b].nTh.style.width=a.aoColumns[b].sWidth}function m(a,b){var c=t(a,"bVisible");return"number"===typeof c[b]?c[b]:null}function n(a,b){var c=t(a,"bVisible"),c=d.inArray(b,c);return-1!==c?c:null}function q(a){return t(a,"bVisible").length}function t(a,b){var c=[];d.map(a.aoColumns,function(a,d){a[b]&&
c.push(d)});return c}function x(a){for(var b=e.ext.aTypes,c=b.length,d=0;d<c;d++){var f=b[d](a);if(null!==f)return f}return"string"}function u(a,b){for(var c=b.split(","),d=[],e=0,f=a.aoColumns.length;e<f;e++)for(var g=0;g<f;g++)if(a.aoColumns[e].sName==c[g]){d.push(g);break}return d}function E(a){for(var b="",c=0,d=a.aoColumns.length;c<d;c++)b+=a.aoColumns[c].sName+",";return b.length==d?"":b.slice(0,-1)}function A(a,b,c,e){var f,h,l,m,n;if(b)for(f=b.length-1;0<=f;f--){var p=b[f].aTargets;d.isArray(p)||
xa(a,1,"aTargets must be an array of targets, not a "+typeof p);h=0;for(l=p.length;h<l;h++)if("number"===typeof p[h]&&0<=p[h]){for(;a.aoColumns.length<=p[h];)g(a);e(p[h],b[f])}else if("number"===typeof p[h]&&0>p[h])e(a.aoColumns.length+p[h],b[f]);else if("string"===typeof p[h])for(m=0,n=a.aoColumns.length;m<n;m++)("_all"==p[h]||d(a.aoColumns[m].nTh).hasClass(p[h]))&&e(m,b[f])}if(c)for(f=0,a=c.length;f<a;f++)e(f,c[f])}function H(a,b){var c;c=d.isArray(b)?b.slice():d.extend(!0,{},b);var f=a.aoData.length,
g=d.extend(!0,{},e.models.oRow);g._aData=c;a.aoData.push(g);for(var h,g=0,l=a.aoColumns.length;g<l;g++)c=a.aoColumns[g],"function"===typeof c.fnRender&&c.bUseRendered&&null!==c.mData?N(a,f,g,Ca(a,f,g)):N(a,f,g,G(a,f,g)),c._bAutoType&&"string"!=c.sType&&(h=G(a,f,g,"type"),null!==h&&""!==h&&(h=x(h),null===c.sType?c.sType=h:c.sType!=h&&"html"!=c.sType&&(c.sType="string")));a.aiDisplayMaster.push(f);a.oFeatures.bDeferRender||ra(a,f);return f}function I(a){var b,c,f,g,h,l,m;if(a.bDeferLoading||null===
a.sAjaxSource)for(b=a.nTBody.firstChild;b;){if("TR"==b.nodeName.toUpperCase())for(c=a.aoData.length,b._DT_RowIndex=c,a.aoData.push(d.extend(!0,{},e.models.oRow,{nTr:b})),a.aiDisplayMaster.push(c),h=b.firstChild,f=0;h;){l=h.nodeName.toUpperCase();if("TD"==l||"TH"==l)N(a,c,f,d.trim(h.innerHTML)),f++;h=h.nextSibling}b=b.nextSibling}g=jb(a);f=[];b=0;for(c=g.length;b<c;b++)for(h=g[b].firstChild;h;)l=h.nodeName.toUpperCase(),"TD"!=l&&"TH"!=l||f.push(h),h=h.nextSibling;c=0;for(g=a.aoColumns.length;c<g;c++){m=
a.aoColumns[c];null===m.sTitle&&(m.sTitle=m.nTh.innerHTML);var n=m._bAutoType,p="function"===typeof m.fnRender,q=null!==m.sClass,t=m.bVisible,y,u;if(n||p||q||!t)for(l=0,b=a.aoData.length;l<b;l++)h=a.aoData[l],y=f[l*g+c],n&&"string"!=m.sType&&(u=G(a,l,c,"type"),""!==u&&(u=x(u),null===m.sType?m.sType=u:m.sType!=u&&"html"!=m.sType&&(m.sType="string"))),m.mRender?y.innerHTML=G(a,l,c,"display"):m.mData!==c&&(y.innerHTML=G(a,l,c,"display")),p&&(u=Ca(a,l,c),y.innerHTML=u,m.bUseRendered&&N(a,l,c,u)),q&&(y.className+=
" "+m.sClass),t?h._anHidden[c]=null:(h._anHidden[c]=y,y.parentNode.removeChild(y)),m.fnCreatedCell&&m.fnCreatedCell.call(a.oInstance,y,G(a,l,c,"display"),h._aData,l,c)}if(0!==a.aoRowCreatedCallback.length)for(b=0,c=a.aoData.length;b<c;b++)h=a.aoData[b],R(a,"aoRowCreatedCallback",null,[h.nTr,h._aData,b])}function y(a,c){return c._DT_RowIndex!==b?c._DT_RowIndex:null}function D(a,b,c){b=Va(a,b);var d=0;for(a=a.aoColumns.length;d<a;d++)if(b[d]===c)return d;return-1}function F(a,b,c,d){for(var e=[],f=
0,g=d.length;f<g;f++)e.push(G(a,b,d[f],c));return e}function G(a,c,d,e){var f=a.aoColumns[d];if((d=f.fnGetData(a.aoData[c]._aData,e))===b)return a.iDrawError!=a.iDraw&&null===f.sDefaultContent&&(xa(a,0,"Requested unknown parameter "+("function"==typeof f.mData?"{mData function}":"'"+f.mData+"'")+" from the data source for row "+c),a.iDrawError=a.iDraw),f.sDefaultContent;if(null===d&&null!==f.sDefaultContent)d=f.sDefaultContent;else if("function"===typeof d)return d();return"display"==e&&null===d?
"":d}function N(a,b,c,d){a.aoColumns[c].fnSetData(a.aoData[b]._aData,d)}function M(a){if(null===a)return function(a,b){return null};if("function"===typeof a)return function(b,c,d){return a(b,c,d)};if("string"!==typeof a||-1===a.indexOf(".")&&-1===a.indexOf("["))return function(b,c){return b[a]};var c=function(a,d,e){var f=e.split("."),g;if(""!==e){var h=0;for(g=f.length;h<g;h++){if(e=f[h].match(ya)){f[h]=f[h].replace(ya,"");""!==f[h]&&(a=a[f[h]]);g=[];f.splice(0,h+1);for(var f=f.join("."),h=0,l=a.length;h<
l;h++)g.push(c(a[h],d,f));a=e[0].substring(1,e[0].length-1);a=""===a?g:g.join(a);break}if(null===a||a[f[h]]===b)return b;a=a[f[h]]}}return a};return function(b,d){return c(b,d,a)}}function P(a){if(null===a)return function(a,b){};if("function"===typeof a)return function(b,c){a(b,"set",c)};if("string"!==typeof a||-1===a.indexOf(".")&&-1===a.indexOf("["))return function(b,c){b[a]=c};var c=function(a,d,e){e=e.split(".");var f,g,h=0;for(g=e.length-1;h<g;h++){if(f=e[h].match(ya)){e[h]=e[h].replace(ya,"");
a[e[h]]=[];f=e.slice();f.splice(0,h+1);g=f.join(".");for(var l=0,C=d.length;l<C;l++)f={},c(f,d[l],g),a[e[h]].push(f);return}if(null===a[e[h]]||a[e[h]]===b)a[e[h]]={};a=a[e[h]]}a[e[e.length-1].replace(ya,"")]=d};return function(b,d){return c(b,d,a)}}function O(a){for(var b=[],c=a.aoData.length,d=0;d<c;d++)b.push(a.aoData[d]._aData);return b}function pa(a){a.aoData.splice(0,a.aoData.length);a.aiDisplayMaster.splice(0,a.aiDisplayMaster.length);a.aiDisplay.splice(0,a.aiDisplay.length);Ia(a)}function ka(a,
b){for(var c=-1,d=0,e=a.length;d<e;d++)a[d]==b?c=d:a[d]>b&&a[d]--; -1!=c&&a.splice(c,1)}function Ca(a,b,c){var d=a.aoColumns[c];return d.fnRender({iDataRow:b,iDataColumn:c,oSettings:a,aData:a.aoData[b]._aData,mDataProp:d.mData},G(a,b,c,"display"))}function ra(a,b){var d=a.aoData[b],e;if(null===d.nTr){d.nTr=c.createElement("tr");d.nTr._DT_RowIndex=b;d._aData.DT_RowId&&(d.nTr.id=d._aData.DT_RowId);d._aData.DT_RowClass&&(d.nTr.className=d._aData.DT_RowClass);for(var f=0,g=a.aoColumns.length;f<g;f++){var h=
a.aoColumns[f];e=c.createElement(h.sCellType);e.innerHTML="function"!==typeof h.fnRender||h.bUseRendered&&null!==h.mData?G(a,b,f,"display"):Ca(a,b,f);null!==h.sClass&&(e.className=h.sClass);h.bVisible?(d.nTr.appendChild(e),d._anHidden[f]=null):d._anHidden[f]=e;h.fnCreatedCell&&h.fnCreatedCell.call(a.oInstance,e,G(a,b,f,"display"),d._aData,b,f)}R(a,"aoRowCreatedCallback",null,[d.nTr,d._aData,b])}}function aa(a){var b,e,f;if(0!==d("th, td",a.nTHead).length)for(b=0,f=a.aoColumns.length;b<f;b++)e=a.aoColumns[b].nTh,
e.setAttribute("role","columnheader"),a.aoColumns[b].bSortable&&(e.setAttribute("tabindex",a.iTabIndex),e.setAttribute("aria-controls",a.sTableId)),null!==a.aoColumns[b].sClass&&d(e).addClass(a.aoColumns[b].sClass),a.aoColumns[b].sTitle!=e.innerHTML&&(e.innerHTML=a.aoColumns[b].sTitle);else{var g=c.createElement("tr");b=0;for(f=a.aoColumns.length;b<f;b++)e=a.aoColumns[b].nTh,e.innerHTML=a.aoColumns[b].sTitle,e.setAttribute("tabindex","0"),null!==a.aoColumns[b].sClass&&d(e).addClass(a.aoColumns[b].sClass),
g.appendChild(e);d(a.nTHead).html("")[0].appendChild(g);na(a.aoHeader,a.nTHead)}d(a.nTHead).children("tr").attr("role","row");if(a.bJUI)for(b=0,f=a.aoColumns.length;b<f;b++){e=a.aoColumns[b].nTh;g=c.createElement("div");g.className=a.oClasses.sSortJUIWrapper;d(e).contents().appendTo(g);var h=c.createElement("span");h.className=a.oClasses.sSortIcon;g.appendChild(h);e.appendChild(g)}if(a.oFeatures.bSort)for(b=0;b<a.aoColumns.length;b++)!1!==a.aoColumns[b].bSortable?$a(a,a.aoColumns[b].nTh,b):d(a.aoColumns[b].nTh).addClass(a.oClasses.sSortableNone);
""!==a.oClasses.sFooterTH&&d(a.nTFoot).children("tr").children("th").addClass(a.oClasses.sFooterTH);if(null!==a.nTFoot)for(e=Q(a,null,a.aoFooter),b=0,f=a.aoColumns.length;b<f;b++)e[b]&&(a.aoColumns[b].nTf=e[b],a.aoColumns[b].sClass&&d(e[b]).addClass(a.aoColumns[b].sClass))}function wa(a,c,d){var e,f,g,h=[],l=[],m=a.aoColumns.length,n;d===b&&(d=!1);e=0;for(f=c.length;e<f;e++){h[e]=c[e].slice();h[e].nTr=c[e].nTr;for(g=m-1;0<=g;g--)a.aoColumns[g].bVisible||d||h[e].splice(g,1);l.push([])}e=0;for(f=h.length;e<
f;e++){if(a=h[e].nTr)for(;g=a.firstChild;)a.removeChild(g);g=0;for(c=h[e].length;g<c;g++)if(n=m=1,l[e][g]===b){a.appendChild(h[e][g].cell);for(l[e][g]=1;h[e+m]!==b&&h[e][g].cell==h[e+m][g].cell;)l[e+m][g]=1,m++;for(;h[e][g+n]!==b&&h[e][g].cell==h[e][g+n].cell;){for(d=0;d<m;d++)l[e+d][g+n]=1;n++}h[e][g].cell.rowSpan=m;h[e][g].cell.colSpan=n}}}function va(a){var e=R(a,"aoPreDrawCallback","preDraw",[a]);if(-1!==d.inArray(!1,e))Za(a,!1);else{var f,g,e=[],h=0,l=a.asStripeClasses.length;f=a.aoOpenRows.length;
a.bDrawing=!0;a.iInitDisplayStart!==b&&-1!=a.iInitDisplayStart&&(a._iDisplayStart=a.oFeatures.bServerSide?a.iInitDisplayStart:a.iInitDisplayStart>=a.fnRecordsDisplay()?0:a.iInitDisplayStart,a.iInitDisplayStart=-1,Ia(a));if(a.bDeferLoading)a.bDeferLoading=!1,a.iDraw++;else if(!a.oFeatures.bServerSide)a.iDraw++;else if(!a.bDestroying&&!da(a))return;if(0!==a.aiDisplay.length){var m=a._iDisplayStart;g=a._iDisplayEnd;a.oFeatures.bServerSide&&(m=0,g=a.aoData.length);for(;m<g;m++){var n=a.aoData[a.aiDisplay[m]];
null===n.nTr&&ra(a,a.aiDisplay[m]);var p=n.nTr;if(0!==l){var t=a.asStripeClasses[h%l];n._sRowStripe!=t&&(d(p).removeClass(n._sRowStripe).addClass(t),n._sRowStripe=t)}R(a,"aoRowCallback",null,[p,a.aoData[a.aiDisplay[m]]._aData,h,m]);e.push(p);h++;if(0!==f)for(n=0;n<f;n++)if(p==a.aoOpenRows[n].nParent){e.push(a.aoOpenRows[n].nTr);break}}}else e[0]=c.createElement("tr"),a.asStripeClasses[0]&&(e[0].className=a.asStripeClasses[0]),f=a.oLanguage,l=f.sZeroRecords,1!=a.iDraw||null===a.sAjaxSource||a.oFeatures.bServerSide?
f.sEmptyTable&&0===a.fnRecordsTotal()&&(l=f.sEmptyTable):l=f.sLoadingRecords,f=c.createElement("td"),f.setAttribute("valign","top"),f.colSpan=q(a),f.className=a.oClasses.sRowEmpty,f.innerHTML=ub(a,l),e[h].appendChild(f);R(a,"aoHeaderCallback","header",[d(a.nTHead).children("tr")[0],O(a),a._iDisplayStart,a.fnDisplayEnd(),a.aiDisplay]);R(a,"aoFooterCallback","footer",[d(a.nTFoot).children("tr")[0],O(a),a._iDisplayStart,a.fnDisplayEnd(),a.aiDisplay]);h=c.createDocumentFragment();f=c.createDocumentFragment();
if(a.nTBody){l=a.nTBody.parentNode;f.appendChild(a.nTBody);if(!a.oScroll.bInfinite||!a._bInitComplete||a.bSorted||a.bFiltered)for(;f=a.nTBody.firstChild;)a.nTBody.removeChild(f);f=0;for(g=e.length;f<g;f++)h.appendChild(e[f]);a.nTBody.appendChild(h);null!==l&&l.appendChild(a.nTBody)}R(a,"aoDrawCallback","draw",[a]);a.bSorted=!1;a.bFiltered=!1;a.bDrawing=!1;a.oFeatures.bServerSide&&(Za(a,!1),a._bInitComplete||Kb(a))}}function sa(a){a.oFeatures.bSort?Ua(a,a.oPreviousSearch):a.oFeatures.bFilter?Da(a,
a.oPreviousSearch):(Ia(a),va(a))}function qa(a){var b=d("<div></div>")[0];a.nTable.parentNode.insertBefore(b,a.nTable);a.nTableWrapper=d('<div id="'+a.sTableId+'_wrapper" class="'+a.oClasses.sWrapper+'" role="grid"></div>')[0];a.nTableReinsertBefore=a.nTable.nextSibling;for(var c=a.nTableWrapper,f=a.sDom.split(""),g,h,l,m,n,p,q,t=0;t<f.length;t++){h=0;l=f[t];if("<"==l){m=d("<div></div>")[0];n=f[t+1];if("'"==n||'"'==n){p="";for(q=2;f[t+q]!=n;)p+=f[t+q],q++;"H"==p?p=a.oClasses.sJUIHeader:"F"==p&&(p=
a.oClasses.sJUIFooter);-1!=p.indexOf(".")?(n=p.split("."),m.id=n[0].substr(1,n[0].length-1),m.className=n[1]):"#"==p.charAt(0)?m.id=p.substr(1,p.length-1):m.className=p;t+=q}c.appendChild(m);c=m}else if(">"==l)c=c.parentNode;else if("l"==l&&a.oFeatures.bPaginate&&a.oFeatures.bLengthChange)g=wb(a),h=1;else if("f"==l&&a.oFeatures.bFilter)g=ta(a),h=1;else if("r"==l&&a.oFeatures.bProcessing)g=Qb(a),h=1;else if("t"==l)g=eb(a),h=1;else if("i"==l&&a.oFeatures.bInfo)g=Eb(a),h=1;else if("p"==l&&a.oFeatures.bPaginate)g=
Lb(a),h=1;else if(0!==e.ext.aoFeatures.length)for(m=e.ext.aoFeatures,q=0,n=m.length;q<n;q++)if(l==m[q].cFeature){(g=m[q].fnInit(a))&&(h=1);break}1==h&&null!==g&&("object"!==typeof a.aanFeatures[l]&&(a.aanFeatures[l]=[]),a.aanFeatures[l].push(g),c.appendChild(g))}b.parentNode.replaceChild(a.nTableWrapper,b)}function na(a,b){var c=d(b).children("tr"),e,f,g,h,l,m,n,p,q,t;a.splice(0,a.length);g=0;for(m=c.length;g<m;g++)a.push([]);g=0;for(m=c.length;g<m;g++)for(e=c[g],f=e.firstChild;f;){if("TD"==f.nodeName.toUpperCase()||
"TH"==f.nodeName.toUpperCase()){p=1*f.getAttribute("colspan");q=1*f.getAttribute("rowspan");p=p&&0!==p&&1!==p?p:1;q=q&&0!==q&&1!==q?q:1;h=0;for(l=a[g];l[h];)h++;n=h;t=1===p?!0:!1;for(l=0;l<p;l++)for(h=0;h<q;h++)a[g+h][n+l]={cell:f,unique:t},a[g+h].nTr=e}f=f.nextSibling}}function Q(a,b,c){var d=[];c||(c=a.aoHeader,b&&(c=[],na(c,b)));b=0;for(var e=c.length;b<e;b++)for(var f=0,g=c[b].length;f<g;f++)!c[b][f].unique||d[f]&&a.bSortCellsTop||(d[f]=c[b][f].cell);return d}function da(a){if(a.bAjaxDataGet){a.iDraw++;
Za(a,!0);var b=nb(a);ib(a,b);a.fnServerData.call(a.oInstance,a.sAjaxSource,b,function(b){Ga(a,b)},a);return!1}return!0}function nb(a){var b=a.aoColumns.length,c=[],d,e,f,g;c.push({name:"sEcho",value:a.iDraw});c.push({name:"iColumns",value:b});c.push({name:"sColumns",value:E(a)});c.push({name:"iDisplayStart",value:a._iDisplayStart});c.push({name:"iDisplayLength",value:!1!==a.oFeatures.bPaginate?a._iDisplayLength:-1});for(f=0;f<b;f++)d=a.aoColumns[f].mData,c.push({name:"mDataProp_"+f,value:"function"===
typeof d?"function":d});if(!1!==a.oFeatures.bFilter)for(c.push({name:"sSearch",value:a.oPreviousSearch.sSearch}),c.push({name:"bRegex",value:a.oPreviousSearch.bRegex}),f=0;f<b;f++)c.push({name:"sSearch_"+f,value:a.aoPreSearchCols[f].sSearch}),c.push({name:"bRegex_"+f,value:a.aoPreSearchCols[f].bRegex}),c.push({name:"bSearchable_"+f,value:a.aoColumns[f].bSearchable});if(!1!==a.oFeatures.bSort){var h=0;d=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice();for(f=0;f<d.length;f++)for(e=
a.aoColumns[d[f][0]].aDataSort,g=0;g<e.length;g++)c.push({name:"iSortCol_"+h,value:e[g]}),c.push({name:"sSortDir_"+h,value:d[f][1]}),h++;c.push({name:"iSortingCols",value:h});for(f=0;f<b;f++)c.push({name:"bSortable_"+f,value:a.aoColumns[f].bSortable})}return c}function ib(a,b){R(a,"aoServerParams","serverParams",[b])}function Ga(a,c){if(c.sEcho!==b){if(1*c.sEcho<a.iDraw)return;a.iDraw=1*c.sEcho}(!a.oScroll.bInfinite||a.oScroll.bInfinite&&(a.bSorted||a.bFiltered))&&pa(a);a._iRecordsTotal=parseInt(c.iTotalRecords,
10);a._iRecordsDisplay=parseInt(c.iTotalDisplayRecords,10);var d=E(a),d=c.sColumns!==b&&""!==d&&c.sColumns!=d,e;d&&(e=u(a,c.sColumns));for(var f=M(a.sAjaxDataProp)(c),g=0,h=f.length;g<h;g++)if(d){for(var l=[],m=0,n=a.aoColumns.length;m<n;m++)l.push(f[g][e[m]]);H(a,l)}else H(a,f[g]);a.aiDisplay=a.aiDisplayMaster.slice();a.bAjaxDataGet=!1;va(a);a.bAjaxDataGet=!0;Za(a,!1)}function ta(a){var b=a.oPreviousSearch,e=a.oLanguage.sSearch,e=-1!==e.indexOf("_INPUT_")?e.replace("_INPUT_",'<input type="text" />'):
""===e?'<input type="text" />':e+' <input type="text" />',f=c.createElement("div");f.className=a.oClasses.sFilter;f.innerHTML="<label>"+e+"</label>";a.aanFeatures.f||(f.id=a.sTableId+"_order");e=d('input[type="text"]',f);f._DT_Input=e[0];e.val(b.sSearch.replace('"',"&quot;"));e.bind("keyup.DT",function(c){c=a.aanFeatures.f;for(var e=""===this.value?"":this.value,f=0,g=c.length;f<g;f++)c[f]!=d(this).parents("div.dataTables_filter")[0]&&d(c[f]._DT_Input).val(e);e!=b.sSearch&&Da(a,{sSearch:e,bRegex:b.bRegex,
bSmart:b.bSmart,bCaseInsensitive:b.bCaseInsensitive})});e.attr("aria-controls",a.sTableId).bind("keypress.DT",function(a){if(13==a.keyCode)return!1});return f}function Da(a,b,c){var e=a.oPreviousSearch,f=a.aoPreSearchCols,g=function(a){e.sSearch=a.sSearch;e.bRegex=a.bRegex;e.bSmart=a.bSmart;e.bCaseInsensitive=a.bCaseInsensitive};if(a.oFeatures.bServerSide)g(b);else{ob(a,b.sSearch,c,b.bRegex,b.bSmart,b.bCaseInsensitive);g(b);for(b=0;b<a.aoPreSearchCols.length;b++)ca(a,f[b].sSearch,b,f[b].bRegex,f[b].bSmart,
f[b].bCaseInsensitive);bb(a)}a.bFiltered=!0;d(a.oInstance).trigger("filter",a);a._iDisplayStart=0;Ia(a);va(a);tb(a,0)}function bb(a){for(var b=e.ext.afnFiltering,c=t(a,"bSearchable"),d=0,f=b.length;d<f;d++)for(var g=0,h=0,l=a.aiDisplay.length;h<l;h++){var m=a.aiDisplay[h-g];b[d](a,F(a,m,"filter",c),m)||(a.aiDisplay.splice(h-g,1),g++)}}function ca(a,b,c,d,e,f){if(""!==b){var g=0;b=lb(b,d,e,f);for(d=a.aiDisplay.length-1;0<=d;d--)e=Jb(G(a,a.aiDisplay[d],c,"filter"),a.aoColumns[c].sType),b.test(e)||(a.aiDisplay.splice(d,
1),g++)}}function ob(a,b,c,d,f,g){d=lb(b,d,f,g);f=a.oPreviousSearch;c||(c=0);0!==e.ext.afnFiltering.length&&(c=1);if(0>=b.length)a.aiDisplay.splice(0,a.aiDisplay.length),a.aiDisplay=a.aiDisplayMaster.slice();else if(a.aiDisplay.length==a.aiDisplayMaster.length||f.sSearch.length>b.length||1==c||0!==b.indexOf(f.sSearch))for(a.aiDisplay.splice(0,a.aiDisplay.length),tb(a,1),b=0;b<a.aiDisplayMaster.length;b++)d.test(a.asDataSearch[b])&&a.aiDisplay.push(a.aiDisplayMaster[b]);else for(b=c=0;b<a.asDataSearch.length;b++)d.test(a.asDataSearch[b])||
(a.aiDisplay.splice(b-c,1),c++)}function tb(a,b){if(!a.oFeatures.bServerSide){a.asDataSearch=[];for(var c=t(a,"bSearchable"),d=1===b?a.aiDisplayMaster:a.aiDisplay,e=0,f=d.length;e<f;e++)a.asDataSearch[e]=p(a,F(a,d[e],"filter",c))}}function p(a,b){var c=b.join("  ");-1!==c.indexOf("&")&&(c=d("<div>").html(c).text());return c.replace(/[\n\r]/g," ")}function lb(a,b,c,d){if(c){a=b?a.split(" "):Pa(a).split(" ");a="^(?=.*?"+a.join(")(?=.*?")+").*$";try{return new RegExp(a,d?"i":"")}catch(e){return RegExp("")}}else return a=
b?a:Pa(a),new RegExp(a,d?"i":"")}function Jb(a,b){return"function"===typeof e.ext.ofnSearch[b]?e.ext.ofnSearch[b](a):null===a?"":"html"==b?a.replace(/[\r\n]/g," ").replace(/<.*?>/g,""):"string"===typeof a?a.replace(/[\r\n]/g," "):a}function Pa(a){return a.replace(RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)","g"),"\\$1")}function Eb(a){var b=c.createElement("div");b.className=a.oClasses.sInfo;a.aanFeatures.i||(a.aoDrawCallback.push({fn:Ra,sName:"information"}),b.id=a.sTableId+
"_info");a.nTable.setAttribute("aria-describedby",a.sTableId+"_info");return b}function Ra(a){if(a.oFeatures.bInfo&&0!==a.aanFeatures.i.length){var b=a.oLanguage,c=a._iDisplayStart+1,e=a.fnDisplayEnd(),f=a.fnRecordsTotal(),g=a.fnRecordsDisplay(),h;h=0===g?b.sInfoEmpty:b.sInfo;g!=f&&(h+=" "+b.sInfoFiltered);h+=b.sInfoPostFix;h=ub(a,h);null!==b.fnInfoCallback&&(h=b.fnInfoCallback.call(a.oInstance,a,c,e,f,g,h));a=a.aanFeatures.i;b=0;for(c=a.length;b<c;b++)d(a[b]).html(h)}}function ub(a,b){var c=a.fnFormatNumber(a._iDisplayStart+
1),d=a.fnDisplayEnd(),d=a.fnFormatNumber(d),e=a.fnRecordsDisplay(),e=a.fnFormatNumber(e),f=a.fnRecordsTotal(),f=a.fnFormatNumber(f);a.oScroll.bInfinite&&(c=a.fnFormatNumber(1));return b.replace(/_START_/g,c).replace(/_END_/g,d).replace(/_TOTAL_/g,e).replace(/_MAX_/g,f)}function vb(a){var b,c,d=a.iInitDisplayStart;if(!1===a.bInitialised)setTimeout(function(){vb(a)},200);else{qa(a);aa(a);wa(a,a.aoHeader);a.nTFoot&&wa(a,a.aoFooter);Za(a,!0);a.oFeatures.bAutoWidth&&Ba(a);b=0;for(c=a.aoColumns.length;b<
c;b++)null!==a.aoColumns[b].sWidth&&(a.aoColumns[b].nTh.style.width=ea(a.aoColumns[b].sWidth));a.oFeatures.bSort?Ua(a):a.oFeatures.bFilter?Da(a,a.oPreviousSearch):(a.aiDisplay=a.aiDisplayMaster.slice(),Ia(a),va(a));null===a.sAjaxSource||a.oFeatures.bServerSide?a.oFeatures.bServerSide||(Za(a,!1),Kb(a)):(c=[],ib(a,c),a.fnServerData.call(a.oInstance,a.sAjaxSource,c,function(c){var e=""!==a.sAjaxDataProp?M(a.sAjaxDataProp)(c):c;for(b=0;b<e.length;b++)H(a,e[b]);a.iInitDisplayStart=d;a.oFeatures.bSort?
Ua(a):(a.aiDisplay=a.aiDisplayMaster.slice(),Ia(a),va(a));Za(a,!1);Kb(a,c)},a))}}function Kb(a,b){a._bInitComplete=!0;R(a,"aoInitComplete","init",[a,b])}function Ab(a){var b=e.defaults.oLanguage;!a.sEmptyTable&&a.sZeroRecords&&"No data available in table"===b.sEmptyTable&&ba(a,a,"sZeroRecords","sEmptyTable");!a.sLoadingRecords&&a.sZeroRecords&&"Loading..."===b.sLoadingRecords&&ba(a,a,"sZeroRecords","sLoadingRecords")}function wb(a){if(a.oScroll.bInfinite)return null;var b='<select size="1" '+('name="'+
a.sTableId+'_length"')+">",e,f,g=a.aLengthMenu;if(2==g.length&&"object"===typeof g[0]&&"object"===typeof g[1])for(e=0,f=g[0].length;e<f;e++)b+='<option value="'+g[0][e]+'">'+g[1][e]+"</option>";else for(e=0,f=g.length;e<f;e++)b+='<option value="'+g[e]+'">'+g[e]+"</option>";b+="</select>";g=c.createElement("div");a.aanFeatures.l||(g.id=a.sTableId+"_length");g.className=a.oClasses.sLength;g.innerHTML="<label>"+a.oLanguage.sLengthMenu.replace("_MENU_",b)+"</label>";d('select option[value="'+a._iDisplayLength+
'"]',g).attr("selected",!0);d("select",g).bind("change.DT",function(b){b=d(this).val();var c=a.aanFeatures.l;e=0;for(f=c.length;e<f;e++)c[e]!=this.parentNode&&d("select",c[e]).val(b);a._iDisplayLength=parseInt(b,10);Ia(a);a.fnDisplayEnd()==a.fnRecordsDisplay()&&(a._iDisplayStart=a.fnDisplayEnd()-a._iDisplayLength,0>a._iDisplayStart&&(a._iDisplayStart=0));-1==a._iDisplayLength&&(a._iDisplayStart=0);va(a)});d("select",g).attr("aria-controls",a.sTableId);return g}function Ia(a){a._iDisplayEnd=!1===a.oFeatures.bPaginate?
a.aiDisplay.length:a._iDisplayStart+a._iDisplayLength>a.aiDisplay.length||-1==a._iDisplayLength?a.aiDisplay.length:a._iDisplayStart+a._iDisplayLength}function Lb(a){if(a.oScroll.bInfinite)return null;var b=c.createElement("div");b.className=a.oClasses.sPaging+a.sPaginationType;e.ext.oPagination[a.sPaginationType].fnInit(a,b,function(a){Ia(a);va(a)});a.aanFeatures.p||a.aoDrawCallback.push({fn:function(a){e.ext.oPagination[a.sPaginationType].fnUpdate(a,function(a){Ia(a);va(a)})},sName:"pagination"});
return b}function Ya(a,b){var c=a._iDisplayStart;if("number"===typeof b)a._iDisplayStart=b*a._iDisplayLength,a._iDisplayStart>a.fnRecordsDisplay()&&(a._iDisplayStart=0);else if("first"==b)a._iDisplayStart=0;else if("previous"==b)a._iDisplayStart=0<=a._iDisplayLength?a._iDisplayStart-a._iDisplayLength:0,0>a._iDisplayStart&&(a._iDisplayStart=0);else if("next"==b)0<=a._iDisplayLength?a._iDisplayStart+a._iDisplayLength<a.fnRecordsDisplay()&&(a._iDisplayStart+=a._iDisplayLength):a._iDisplayStart=0;else if("last"==
b)if(0<=a._iDisplayLength){var e=parseInt((a.fnRecordsDisplay()-1)/a._iDisplayLength,10)+1;a._iDisplayStart=(e-1)*a._iDisplayLength}else a._iDisplayStart=0;else xa(a,0,"Unknown paging action: "+b);d(a.oInstance).trigger("page",a);return c!=a._iDisplayStart}function Qb(a){var b=c.createElement("div");a.aanFeatures.r||(b.id=a.sTableId+"_processing");b.innerHTML=a.oLanguage.sProcessing;b.className=a.oClasses.sProcessing;a.nTable.parentNode.insertBefore(b,a.nTable);return b}function Za(a,b){if(a.oFeatures.bProcessing)for(var c=
a.aanFeatures.r,e=0,f=c.length;e<f;e++)c[e].style.visibility=b?"visible":"hidden";d(a.oInstance).trigger("processing",[a,b])}function eb(a){if(""===a.oScroll.sX&&""===a.oScroll.sY)return a.nTable;var b=c.createElement("div"),e=c.createElement("div"),f=c.createElement("div"),g=c.createElement("div"),h=c.createElement("div"),l=c.createElement("div"),m=a.nTable.cloneNode(!1),n=a.nTable.cloneNode(!1),p=a.nTable.getElementsByTagName("thead")[0],q=0===a.nTable.getElementsByTagName("tfoot").length?null:
a.nTable.getElementsByTagName("tfoot")[0],t=a.oClasses;e.appendChild(f);h.appendChild(l);g.appendChild(a.nTable);b.appendChild(e);b.appendChild(g);f.appendChild(m);m.appendChild(p);null!==q&&(b.appendChild(h),l.appendChild(n),n.appendChild(q));b.className=t.sScrollWrapper;e.className=t.sScrollHead;f.className=t.sScrollHeadInner;g.className=t.sScrollBody;h.className=t.sScrollFoot;l.className=t.sScrollFootInner;a.oScroll.bAutoCss&&(e.style.overflow="hidden",e.style.position="relative",h.style.overflow=
"hidden",g.style.overflow="auto");e.style.border="0";e.style.width="100%";h.style.border="0";f.style.width=""!==a.oScroll.sXInner?a.oScroll.sXInner:"100%";m.removeAttribute("id");m.style.marginLeft="0";a.nTable.style.marginLeft="0";null!==q&&(n.removeAttribute("id"),n.style.marginLeft="0");f=d(a.nTable).children("caption");0<f.length&&(f=f[0],"top"===f._captionSide?m.appendChild(f):"bottom"===f._captionSide&&q&&n.appendChild(f));""!==a.oScroll.sX&&(e.style.width=ea(a.oScroll.sX),g.style.width=ea(a.oScroll.sX),
null!==q&&(h.style.width=ea(a.oScroll.sX)),d(g).scroll(function(a){e.scrollLeft=this.scrollLeft;null!==q&&(h.scrollLeft=this.scrollLeft)}));""!==a.oScroll.sY&&(g.style.height=ea(a.oScroll.sY));a.aoDrawCallback.push({fn:gb,sName:"scrolling"});a.oScroll.bInfinite&&d(g).scroll(function(){!a.bDrawing&&0!==d(this).scrollTop()&&d(this).scrollTop()+d(this).height()>d(a.nTable).height()-a.oScroll.iLoadGap&&a.fnDisplayEnd()<a.fnRecordsDisplay()&&(Ya(a,"next"),Ia(a),va(a))});a.nScrollHead=e;a.nScrollFoot=h;
return b}function gb(a){var b=a.nScrollHead.getElementsByTagName("div")[0],c=b.getElementsByTagName("table")[0],e=a.nTable.parentNode,f,g,h,l,n,p,q,t,y=[],u=[],D=null!==a.nTFoot?a.nScrollFoot.getElementsByTagName("div")[0]:null,F=null!==a.nTFoot?D.getElementsByTagName("table")[0]:null,x=a.oBrowser.bScrollOversize,A=function(a){q=a.style;q.paddingTop="0";q.paddingBottom="0";q.borderTopWidth="0";q.borderBottomWidth="0";q.height=0};d(a.nTable).children("thead, tfoot").remove();f=d(a.nTHead).clone()[0];
a.nTable.insertBefore(f,a.nTable.childNodes[0]);h=a.nTHead.getElementsByTagName("tr");l=f.getElementsByTagName("tr");null!==a.nTFoot&&(n=d(a.nTFoot).clone()[0],a.nTable.insertBefore(n,a.nTable.childNodes[1]),p=a.nTFoot.getElementsByTagName("tr"),n=n.getElementsByTagName("tr"));""===a.oScroll.sX&&(e.style.width="100%",b.parentNode.style.width="100%");var ka=Q(a,f);f=0;for(g=ka.length;f<g;f++)t=m(a,f),ka[f].style.width=a.aoColumns[t].sWidth;null!==a.nTFoot&&fb(function(a){a.style.width=""},n);a.oScroll.bCollapse&&
""!==a.oScroll.sY&&(e.style.height=e.offsetHeight+a.nTHead.offsetHeight+"px");f=d(a.nTable).outerWidth();""===a.oScroll.sX?(a.nTable.style.width="100%",x&&(d("tbody",e).height()>e.offsetHeight||"scroll"==d(e).css("overflow-y"))&&(a.nTable.style.width=ea(d(a.nTable).outerWidth()-a.oScroll.iBarWidth))):""!==a.oScroll.sXInner?a.nTable.style.width=ea(a.oScroll.sXInner):f==d(e).width()&&d(e).height()<d(a.nTable).height()?(a.nTable.style.width=ea(f-a.oScroll.iBarWidth),d(a.nTable).outerWidth()>f-a.oScroll.iBarWidth&&
(a.nTable.style.width=ea(f))):a.nTable.style.width=ea(f);f=d(a.nTable).outerWidth();fb(A,l);fb(function(a){y.push(ea(d(a).width()))},l);fb(function(a,b){a.style.width=y[b]},h);d(l).height(0);null!==a.nTFoot&&(fb(A,n),fb(function(a){u.push(ea(d(a).width()))},n),fb(function(a,b){a.style.width=u[b]},p),d(n).height(0));fb(function(a,b){a.innerHTML="";a.style.width=y[b]},l);null!==a.nTFoot&&fb(function(a,b){a.innerHTML="";a.style.width=u[b]},n);d(a.nTable).outerWidth()<f?(h=e.scrollHeight>e.offsetHeight||
"scroll"==d(e).css("overflow-y")?f+a.oScroll.iBarWidth:f,x&&(e.scrollHeight>e.offsetHeight||"scroll"==d(e).css("overflow-y"))&&(a.nTable.style.width=ea(h-a.oScroll.iBarWidth)),e.style.width=ea(h),a.nScrollHead.style.width=ea(h),null!==a.nTFoot&&(a.nScrollFoot.style.width=ea(h)),""===a.oScroll.sX?xa(a,1,"The table cannot fit into the current element which will cause column misalignment. The table has been drawn at its minimum possible width."):""!==a.oScroll.sXInner&&xa(a,1,"The table cannot fit into the current element which will cause column misalignment. Increase the sScrollXInner value or remove it to allow automatic calculation")):
(e.style.width=ea("100%"),a.nScrollHead.style.width=ea("100%"),null!==a.nTFoot&&(a.nScrollFoot.style.width=ea("100%")));""===a.oScroll.sY&&x&&(e.style.height=ea(a.nTable.offsetHeight+a.oScroll.iBarWidth));""!==a.oScroll.sY&&a.oScroll.bCollapse&&(e.style.height=ea(a.oScroll.sY),x=""!==a.oScroll.sX&&a.nTable.offsetWidth>e.offsetWidth?a.oScroll.iBarWidth:0,a.nTable.offsetHeight<e.offsetHeight&&(e.style.height=ea(a.nTable.offsetHeight+x)));x=d(a.nTable).outerWidth();c.style.width=ea(x);b.style.width=
ea(x);c=d(a.nTable).height()>e.clientHeight||"scroll"==d(e).css("overflow-y");b.style.paddingRight=c?a.oScroll.iBarWidth+"px":"0px";null!==a.nTFoot&&(F.style.width=ea(x),D.style.width=ea(x),D.style.paddingRight=c?a.oScroll.iBarWidth+"px":"0px");d(e).scroll();if(a.bSorted||a.bFiltered)e.scrollTop=0}function fb(a,b,c){for(var d=0,e=0,f=b.length,g,h;e<f;){g=b[e].firstChild;for(h=c?c[e].firstChild:null;g;)1===g.nodeType&&(c?a(g,h,d):a(g,d),d++),g=g.nextSibling,h=c?h.nextSibling:null;e++}}function fa(a,
b){if(!a||null===a||""===a)return 0;b||(b=c.body);var d,e=c.createElement("div");e.style.width=ea(a);b.appendChild(e);d=e.offsetWidth;b.removeChild(e);return d}function Ba(a){var b=0,e,f=0,g=a.aoColumns.length,h,l,m=d("th",a.nTHead),n=a.nTable.getAttribute("width");l=a.nTable.parentNode;for(h=0;h<g;h++)a.aoColumns[h].bVisible&&(f++,null!==a.aoColumns[h].sWidth&&(e=fa(a.aoColumns[h].sWidthOrig,l),null!==e&&(a.aoColumns[h].sWidth=ea(e)),b++));if(g==m.length&&0===b&&f==g&&""===a.oScroll.sX&&""===a.oScroll.sY)for(h=
0;h<a.aoColumns.length;h++)e=d(m[h]).width(),null!==e&&(a.aoColumns[h].sWidth=ea(e));else{b=a.nTable.cloneNode(!1);h=a.nTHead.cloneNode(!0);f=c.createElement("tbody");e=c.createElement("tr");b.removeAttribute("id");b.appendChild(h);null!==a.nTFoot&&(b.appendChild(a.nTFoot.cloneNode(!0)),fb(function(a){a.style.width=""},b.getElementsByTagName("tr")));b.appendChild(f);f.appendChild(e);f=d("thead th",b);0===f.length&&(f=d("tbody tr:eq(0)>td",b));m=Q(a,h);for(h=f=0;h<g;h++){var p=a.aoColumns[h];p.bVisible&&
null!==p.sWidthOrig&&""!==p.sWidthOrig?m[h-f].style.width=ea(p.sWidthOrig):p.bVisible?m[h-f].style.width="":f++}for(h=0;h<g;h++)a.aoColumns[h].bVisible&&(f=xb(a,h),null!==f&&(f=f.cloneNode(!0),""!==a.aoColumns[h].sContentPadding&&(f.innerHTML+=a.aoColumns[h].sContentPadding),e.appendChild(f)));l.appendChild(b);""!==a.oScroll.sX&&""!==a.oScroll.sXInner?b.style.width=ea(a.oScroll.sXInner):""!==a.oScroll.sX?(b.style.width="",d(b).width()<l.offsetWidth&&(b.style.width=ea(l.offsetWidth))):""!==a.oScroll.sY?
b.style.width=ea(l.offsetWidth):n&&(b.style.width=ea(n));b.style.visibility="hidden";pb(a,b);g=d("tbody tr:eq(0)",b).children();0===g.length&&(g=Q(a,d("thead",b)[0]));if(""!==a.oScroll.sX){for(h=f=l=0;h<a.aoColumns.length;h++)a.aoColumns[h].bVisible&&(l=null===a.aoColumns[h].sWidthOrig?l+d(g[f]).outerWidth():l+(parseInt(a.aoColumns[h].sWidth.replace("px",""),10)+(d(g[f]).outerWidth()-d(g[f]).width())),f++);b.style.width=ea(l);a.nTable.style.width=ea(l)}for(h=f=0;h<a.aoColumns.length;h++)a.aoColumns[h].bVisible&&
(l=d(g[f]).width(),null!==l&&0<l&&(a.aoColumns[h].sWidth=ea(l)),f++);g=d(b).css("width");a.nTable.style.width=-1!==g.indexOf("%")?g:ea(d(b).outerWidth());b.parentNode.removeChild(b)}n&&(a.nTable.style.width=ea(n))}function pb(a,b){""===a.oScroll.sX&&""!==a.oScroll.sY?(d(b).width(),b.style.width=ea(d(b).outerWidth()-a.oScroll.iBarWidth)):""!==a.oScroll.sX&&(b.style.width=ea(d(b).outerWidth()))}function xb(a,b){var d=Rb(a,b);if(0>d)return null;if(null===a.aoData[d].nTr){var e=c.createElement("td");
e.innerHTML=G(a,d,b,"");return e}return Va(a,d)[b]}function Rb(a,b){for(var c=-1,d=-1,e=0;e<a.aoData.length;e++){var f=G(a,e,b,"display")+"",f=f.replace(/<.*?>/g,"");f.length>c&&(c=f.length,d=e)}return d}function ea(a){if(null===a)return"0px";if("number"==typeof a)return 0>a?"0px":a+"px";var b=a.charCodeAt(a.length-1);return 48>b||57<b?a:a+"px"}function Sb(){var a=c.createElement("p"),b=a.style;b.width="100%";b.height="200px";b.padding="0px";var d=c.createElement("div"),b=d.style;b.position="absolute";
b.top="0px";b.left="0px";b.visibility="hidden";b.width="200px";b.height="150px";b.padding="0px";b.overflow="hidden";d.appendChild(a);c.body.appendChild(d);b=a.offsetWidth;d.style.overflow="scroll";a=a.offsetWidth;b==a&&(a=d.clientWidth);c.body.removeChild(d);return b-a}function Ua(a,c){var f,g,h,l,m,p,q=[],t=[],y=e.ext.oSort,u=a.aoData,D=a.aoColumns,F=a.oLanguage.oAria;if(!a.oFeatures.bServerSide&&(0!==a.aaSorting.length||null!==a.aaSortingFixed)){q=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):
a.aaSorting.slice();for(f=0;f<q.length;f++)if(g=q[f][0],h=n(a,g),l=a.aoColumns[g].sSortDataType,e.ext.afnSortData[l])if(m=e.ext.afnSortData[l].call(a.oInstance,a,g,h),m.length===u.length)for(h=0,l=u.length;h<l;h++)N(a,h,g,m[h]);else xa(a,0,"Returned data sort array (col "+g+") is the wrong length");f=0;for(g=a.aiDisplayMaster.length;f<g;f++)t[a.aiDisplayMaster[f]]=f;var x=q.length,A;f=0;for(g=u.length;f<g;f++)for(h=0;h<x;h++)for(A=D[q[h][0]].aDataSort,m=0,p=A.length;m<p;m++)l=D[A[m]].sType,l=y[(l?
l:"string")+"-pre"],u[f]._aSortData[A[m]]=l?l(G(a,f,A[m],"sort")):G(a,f,A[m],"sort");a.aiDisplayMaster.sort(function(a,b){var c,d,e,f,g;for(c=0;c<x;c++)for(g=D[q[c][0]].aDataSort,d=0,e=g.length;d<e;d++)if(f=D[g[d]].sType,f=y[(f?f:"string")+"-"+q[c][1]](u[a]._aSortData[g[d]],u[b]._aSortData[g[d]]),0!==f)return f;return y["numeric-asc"](t[a],t[b])})}c!==b&&!c||a.oFeatures.bDeferRender||cb(a);f=0;for(g=a.aoColumns.length;f<g;f++)l=D[f].sTitle.replace(/<.*?>/g,""),h=D[f].nTh,h.removeAttribute("aria-sort"),
h.removeAttribute("aria-label"),D[f].bSortable?0<q.length&&q[0][0]==f?(h.setAttribute("aria-sort","asc"==q[0][1]?"ascending":"descending"),h.setAttribute("aria-label",l+("asc"==(D[f].asSorting[q[0][2]+1]?D[f].asSorting[q[0][2]+1]:D[f].asSorting[0])?F.sSortAscending:F.sSortDescending))):h.setAttribute("aria-label",l+("asc"==D[f].asSorting[0]?F.sSortAscending:F.sSortDescending)):h.setAttribute("aria-label",l);a.bSorted=!0;d(a.oInstance).trigger("sort",a);a.oFeatures.bFilter?Da(a,a.oPreviousSearch,1):
(a.aiDisplay=a.aiDisplayMaster.slice(),a._iDisplayStart=0,Ia(a),va(a))}function $a(a,b,c,d){Ub(b,{},function(b){if(!1!==a.aoColumns[c].bSortable){var e=function(){var d,e;if(b.shiftKey){for(var f=!1,g=0;g<a.aaSorting.length;g++)if(a.aaSorting[g][0]==c){f=!0;d=a.aaSorting[g][0];e=a.aaSorting[g][2]+1;a.aoColumns[d].asSorting[e]?(a.aaSorting[g][1]=a.aoColumns[d].asSorting[e],a.aaSorting[g][2]=e):a.aaSorting.splice(g,1);break}!1===f&&a.aaSorting.push([c,a.aoColumns[c].asSorting[0],0])}else 1==a.aaSorting.length&&
a.aaSorting[0][0]==c?(d=a.aaSorting[0][0],e=a.aaSorting[0][2]+1,a.aoColumns[d].asSorting[e]||(e=0),a.aaSorting[0][1]=a.aoColumns[d].asSorting[e],a.aaSorting[0][2]=e):(a.aaSorting.splice(0,a.aaSorting.length),a.aaSorting.push([c,a.aoColumns[c].asSorting[0],0]));Ua(a)};a.oFeatures.bProcessing?(Za(a,!0),setTimeout(function(){e();a.oFeatures.bServerSide||Za(a,!1)},0)):e();"function"==typeof d&&d(a)}})}function cb(a){var b,c,e,f,g,h=a.aoColumns.length,l=a.oClasses;for(b=0;b<h;b++)a.aoColumns[b].bSortable&&
d(a.aoColumns[b].nTh).removeClass(l.sSortAsc+" "+l.sSortDesc+" "+a.aoColumns[b].sSortingClass);c=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice();for(b=0;b<a.aoColumns.length;b++)if(a.aoColumns[b].bSortable){g=a.aoColumns[b].sSortingClass;f=-1;for(e=0;e<c.length;e++)if(c[e][0]==b){g="asc"==c[e][1]?l.sSortAsc:l.sSortDesc;f=e;break}d(a.aoColumns[b].nTh).addClass(g);a.bJUI&&(g=d("span."+l.sSortIcon,a.aoColumns[b].nTh),g.removeClass(l.sSortJUIAsc+" "+l.sSortJUIDesc+" "+
l.sSortJUI+" "+l.sSortJUIAscAllowed+" "+l.sSortJUIDescAllowed),g.addClass(-1==f?a.aoColumns[b].sSortingClassJUI:"asc"==c[f][1]?l.sSortJUIAsc:l.sSortJUIDesc))}else d(a.aoColumns[b].nTh).addClass(a.aoColumns[b].sSortingClass);g=l.sSortColumn;if(a.oFeatures.bSort&&a.oFeatures.bSortClasses){a=Va(a);f=[];for(b=0;b<h;b++)f.push("");b=0;for(e=1;b<c.length;b++)l=parseInt(c[b][0],10),f[l]=g+e,3>e&&e++;g=new RegExp(g+"[123]");var m;b=0;for(c=a.length;b<c;b++)l=b%h,e=a[b].className,m=f[l],l=e.replace(g,m),l!=
e?a[b].className=d.trim(l):0<m.length&&-1==e.indexOf(m)&&(a[b].className=e+" "+m)}}function Z(a){if(a.oFeatures.bStateSave&&!a.bDestroying){var b,c;b=a.oScroll.bInfinite;var e={iCreate:(new Date).getTime(),iStart:b?0:a._iDisplayStart,iEnd:b?a._iDisplayLength:a._iDisplayEnd,iLength:a._iDisplayLength,aaSorting:d.extend(!0,[],a.aaSorting),oSearch:d.extend(!0,{},a.oPreviousSearch),aoSearchCols:d.extend(!0,[],a.aoPreSearchCols),abVisCols:[]};b=0;for(c=a.aoColumns.length;b<c;b++)e.abVisCols.push(a.aoColumns[b].bVisible);
R(a,"aoStateSaveParams","stateSaveParams",[a,e]);a.fnStateSave.call(a.oInstance,a,e)}}function Qa(a,b){if(a.oFeatures.bStateSave){var c=a.fnStateLoad.call(a.oInstance,a);if(c){var e=R(a,"aoStateLoadParams","stateLoadParams",[a,c]);if(-1===d.inArray(!1,e)){a.oLoadedState=d.extend(!0,{},c);a._iDisplayStart=c.iStart;a.iInitDisplayStart=c.iStart;a._iDisplayEnd=c.iEnd;a._iDisplayLength=c.iLength;a.aaSorting=c.aaSorting.slice();a.saved_aaSorting=c.aaSorting.slice();d.extend(a.oPreviousSearch,c.oSearch);
d.extend(!0,a.aoPreSearchCols,c.aoSearchCols);b.saved_aoColumns=[];for(e=0;e<c.abVisCols.length;e++)b.saved_aoColumns[e]={},b.saved_aoColumns[e].bVisible=c.abVisCols[e];R(a,"aoStateLoaded","stateLoaded",[a,c])}}}}function T(a){for(var b=0;b<e.settings.length;b++)if(e.settings[b].nTable===a)return e.settings[b];return null}function jb(a){var b=[];a=a.aoData;for(var c=0,d=a.length;c<d;c++)null!==a[c].nTr&&b.push(a[c].nTr);return b}function Va(a,c){var d=[],e,f,g,h,l,m;f=0;var n=a.aoData.length;c!==
b&&(f=c,n=c+1);for(g=f;g<n;g++)if(m=a.aoData[g],null!==m.nTr){f=[];for(e=m.nTr.firstChild;e;)h=e.nodeName.toLowerCase(),"td"!=h&&"th"!=h||f.push(e),e=e.nextSibling;h=e=0;for(l=a.aoColumns.length;h<l;h++)a.aoColumns[h].bVisible?d.push(f[h-e]):(d.push(m._anHidden[h]),e++)}return d}function xa(b,c,d){b=null===b?"DataTables warning: "+d:"DataTables warning (table id = '"+b.sTableId+"'): "+d;if(0===c)if("alert"==e.ext.sErrMode)alert(b);else throw Error(b);else a.console&&console.log&&console.log(b)}function ba(a,
c,d,e){e===b&&(e=d);c[d]!==b&&(a[e]=c[d])}function Cb(a,b){var c,e;for(e in b)b.hasOwnProperty(e)&&(c=b[e],"object"===typeof f[e]&&null!==c&&!1===d.isArray(c)?d.extend(!0,a[e],c):a[e]=c);return a}function Ub(a,b,c){d(a).bind("click.DT",b,function(b){a.blur();c(b)}).bind("keypress.DT",b,function(a){13===a.which&&c(a)}).bind("selectstart.DT",function(){return!1})}function S(a,b,c,d){c&&a[b].push({fn:c,sName:d})}function R(a,b,c,e){b=a[b];for(var f=[],g=b.length-1;0<=g;g--)f.push(b[g].fn.apply(a.oInstance,
e));null!==c&&d(a.oInstance).trigger(c,e);return f}function Sa(a){var b=d('<div style="position:absolute; top:0; left:0; height:1px; width:1px; overflow:hidden"><div style="position:absolute; top:1px; left:1px; width:100px; overflow:scroll;"><div id="DT_BrowserTest" style="width:100%; height:10px;"></div></div></div>')[0];c.body.appendChild(b);a.oBrowser.bScrollOversize=100===d("#DT_BrowserTest",b)[0].offsetWidth?!0:!1;c.body.removeChild(b)}function ma(a){return function(){var b=[T(this[e.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));
return e.ext.oApi[a].apply(this,b)}}var ya=/\[.*?\]$/,Ka=a.JSON?JSON.stringify:function(a){var b=typeof a;if("object"!==b||null===a)return"string"===b&&(a='"'+a+'"'),a+"";var c,e,f=[],g=d.isArray(a);for(c in a)e=a[c],b=typeof e,"string"===b?e='"'+e+'"':"object"===b&&null!==e&&(e=Ka(e)),f.push((g?"":'"'+c+'":')+e);return(g?"[":"{")+f+(g?"]":"}")};this.$=function(a,b){var c,f,g=[],h;f=T(this[e.ext.iApiIndex]);var l=f.aoData,m=f.aiDisplay,n=f.aiDisplayMaster;b||(b={});b=d.extend({},{filter:"none",order:"current",
page:"all"},b);if("current"==b.page)for(c=f._iDisplayStart,f=f.fnDisplayEnd();c<f;c++)(h=l[m[c]].nTr)&&g.push(h);else if("current"==b.order&&"none"==b.filter)for(c=0,f=n.length;c<f;c++)(h=l[n[c]].nTr)&&g.push(h);else if("current"==b.order&&"applied"==b.filter)for(c=0,f=m.length;c<f;c++)(h=l[m[c]].nTr)&&g.push(h);else if("original"==b.order&&"none"==b.filter)for(c=0,f=l.length;c<f;c++)(h=l[c].nTr)&&g.push(h);else if("original"==b.order&&"applied"==b.filter)for(c=0,f=l.length;c<f;c++)h=l[c].nTr,-1!==
d.inArray(c,m)&&h&&g.push(h);else xa(f,1,"Unknown selection options");g=d(g);c=g.filter(a);g=g.find(a);return d([].concat(d.makeArray(c),d.makeArray(g)))};this._=function(a,b){var c=[],d,e,f=this.$(a,b);d=0;for(e=f.length;d<e;d++)c.push(this.fnGetData(f[d]));return c};this.fnAddData=function(a,c){if(0===a.length)return[];var d=[],f,g=T(this[e.ext.iApiIndex]);if("object"===typeof a[0]&&null!==a[0])for(var h=0;h<a.length;h++){f=H(g,a[h]);if(-1==f)return d;d.push(f)}else{f=H(g,a);if(-1==f)return d;d.push(f)}g.aiDisplay=
g.aiDisplayMaster.slice();(c===b||c)&&sa(g);return d};this.fnAdjustColumnSizing=function(a){var c=T(this[e.ext.iApiIndex]);l(c);a===b||a?this.fnDraw(!1):""===c.oScroll.sX&&""===c.oScroll.sY||this.oApi._fnScrollDraw(c)};this.fnClearTable=function(a){var c=T(this[e.ext.iApiIndex]);pa(c);(a===b||a)&&va(c)};this.fnClose=function(a){for(var b=T(this[e.ext.iApiIndex]),c=0;c<b.aoOpenRows.length;c++)if(b.aoOpenRows[c].nParent==a)return(a=b.aoOpenRows[c].nTr.parentNode)&&a.removeChild(b.aoOpenRows[c].nTr),
b.aoOpenRows.splice(c,1),0;return 1};this.fnDeleteRow=function(a,c,f){var g=T(this[e.ext.iApiIndex]),h,l;a="object"===typeof a?y(g,a):a;var m=g.aoData.splice(a,1);h=0;for(l=g.aoData.length;h<l;h++)null!==g.aoData[h].nTr&&(g.aoData[h].nTr._DT_RowIndex=h);h=d.inArray(a,g.aiDisplay);g.asDataSearch.splice(h,1);ka(g.aiDisplayMaster,a);ka(g.aiDisplay,a);"function"===typeof c&&c.call(this,g,m);g._iDisplayStart>=g.fnRecordsDisplay()&&(g._iDisplayStart-=g._iDisplayLength,0>g._iDisplayStart&&(g._iDisplayStart=
0));if(f===b||f)Ia(g),va(g);return m};this.fnDestroy=function(a){var c=T(this[e.ext.iApiIndex]),g=c.nTableWrapper.parentNode,h=c.nTBody,l,m;a=a===b?!1:a;c.bDestroying=!0;R(c,"aoDestroyCallback","destroy",[c]);if(!a)for(l=0,m=c.aoColumns.length;l<m;l++)!1===c.aoColumns[l].bVisible&&this.fnSetColumnVis(l,!0);d(c.nTableWrapper).find("*").andSelf().unbind(".DT");d("tbody>tr>td."+c.oClasses.sRowEmpty,c.nTable).parent().remove();c.nTable!=c.nTHead.parentNode&&(d(c.nTable).children("thead").remove(),c.nTable.appendChild(c.nTHead));
c.nTFoot&&c.nTable!=c.nTFoot.parentNode&&(d(c.nTable).children("tfoot").remove(),c.nTable.appendChild(c.nTFoot));c.nTable.parentNode.removeChild(c.nTable);d(c.nTableWrapper).remove();c.aaSorting=[];c.aaSortingFixed=[];cb(c);d(jb(c)).removeClass(c.asStripeClasses.join(" "));d("th, td",c.nTHead).removeClass([c.oClasses.sSortable,c.oClasses.sSortableAsc,c.oClasses.sSortableDesc,c.oClasses.sSortableNone].join(" "));c.bJUI&&(d("th span."+c.oClasses.sSortIcon+", td span."+c.oClasses.sSortIcon,c.nTHead).remove(),
d("th, td",c.nTHead).each(function(){var a=d("div."+c.oClasses.sSortJUIWrapper,this),b=a.contents();d(this).append(b);a.remove()}));!a&&c.nTableReinsertBefore?g.insertBefore(c.nTable,c.nTableReinsertBefore):a||g.appendChild(c.nTable);l=0;for(m=c.aoData.length;l<m;l++)null!==c.aoData[l].nTr&&h.appendChild(c.aoData[l].nTr);!0===c.oFeatures.bAutoWidth&&(c.nTable.style.width=ea(c.sDestroyWidth));if(m=c.asDestroyStripes.length)for(a=d(h).children("tr"),l=0;l<m;l++)a.filter(":nth-child("+m+"n + "+l+")").addClass(c.asDestroyStripes[l]);
l=0;for(m=e.settings.length;l<m;l++)e.settings[l]==c&&e.settings.splice(l,1);f=c=null};this.fnDraw=function(a){var b=T(this[e.ext.iApiIndex]);!1===a?(Ia(b),va(b)):sa(b)};this.fnFilter=function(a,f,g,h,l,m){var n=T(this[e.ext.iApiIndex]);if(n.oFeatures.bFilter){if(g===b||null===g)g=!1;if(h===b||null===h)h=!0;if(l===b||null===l)l=!0;if(m===b||null===m)m=!0;if(f===b||null===f){if(Da(n,{sSearch:a+"",bRegex:g,bSmart:h,bCaseInsensitive:m},1),l&&n.aanFeatures.f)for(f=n.aanFeatures.f,g=0,h=f.length;g<h;g++)try{f[g]._DT_Input!=
c.activeElement&&d(f[g]._DT_Input).val(a)}catch(p){d(f[g]._DT_Input).val(a)}}else d.extend(n.aoPreSearchCols[f],{sSearch:a+"",bRegex:g,bSmart:h,bCaseInsensitive:m}),Da(n,n.oPreviousSearch,1)}};this.fnGetData=function(a,c){var d=T(this[e.ext.iApiIndex]);if(a!==b){var f=a;if("object"===typeof a){var g=a.nodeName.toLowerCase();"tr"===g?f=y(d,a):"td"===g&&(f=y(d,a.parentNode),c=D(d,f,a))}return c!==b?G(d,f,c,""):d.aoData[f]!==b?d.aoData[f]._aData:null}return O(d)};this.fnGetNodes=function(a){var c=T(this[e.ext.iApiIndex]);
return a!==b?c.aoData[a]!==b?c.aoData[a].nTr:null:jb(c)};this.fnGetPosition=function(a){var b=T(this[e.ext.iApiIndex]),c=a.nodeName.toUpperCase();return"TR"==c?y(b,a):"TD"==c||"TH"==c?(c=y(b,a.parentNode),a=D(b,c,a),[c,n(b,a),a]):null};this.fnIsOpen=function(a){for(var b=T(this[e.ext.iApiIndex]),c=0;c<b.aoOpenRows.length;c++)if(b.aoOpenRows[c].nParent==a)return!0;return!1};this.fnOpen=function(a,b,f){var g=T(this[e.ext.iApiIndex]),h=jb(g);if(-1!==d.inArray(a,h)){this.fnClose(a);var h=c.createElement("tr"),
l=c.createElement("td");h.appendChild(l);l.className=f;l.colSpan=q(g);"string"===typeof b?l.innerHTML=b:d(l).html(b);b=d("tr",g.nTBody);-1!=d.inArray(a,b)&&d(h).insertAfter(a);g.aoOpenRows.push({nTr:h,nParent:a});return h}};this.fnPageChange=function(a,c){var d=T(this[e.ext.iApiIndex]);Ya(d,a);Ia(d);(c===b||c)&&va(d)};this.fnSetColumnVis=function(a,c,d){var f=T(this[e.ext.iApiIndex]),g,h,m=f.aoColumns,n=f.aoData,p,t;if(m[a].bVisible!=c){if(c){for(g=h=0;g<a;g++)m[g].bVisible&&h++;t=h>=q(f);if(!t)for(g=
a;g<m.length;g++)if(m[g].bVisible){p=g;break}g=0;for(h=n.length;g<h;g++)null!==n[g].nTr&&(t?n[g].nTr.appendChild(n[g]._anHidden[a]):n[g].nTr.insertBefore(n[g]._anHidden[a],Va(f,g)[p]))}else for(g=0,h=n.length;g<h;g++)null!==n[g].nTr&&(p=Va(f,g)[a],n[g]._anHidden[a]=p,p.parentNode.removeChild(p));m[a].bVisible=c;wa(f,f.aoHeader);f.nTFoot&&wa(f,f.aoFooter);g=0;for(h=f.aoOpenRows.length;g<h;g++)f.aoOpenRows[g].nTr.colSpan=q(f);if(d===b||d)l(f),va(f);Z(f)}};this.fnSettings=function(){return T(this[e.ext.iApiIndex])};
this.fnSort=function(a){var b=T(this[e.ext.iApiIndex]);b.aaSorting=a;Ua(b)};this.fnSortListener=function(a,b,c){$a(T(this[e.ext.iApiIndex]),a,b,c)};this.fnUpdate=function(a,c,f,g,h){var m=T(this[e.ext.iApiIndex]);c="object"===typeof c?y(m,c):c;if(d.isArray(a)&&f===b)for(m.aoData[c]._aData=a.slice(),f=0;f<m.aoColumns.length;f++)this.fnUpdate(G(m,c,f),c,f,!1,!1);else if(d.isPlainObject(a)&&f===b)for(m.aoData[c]._aData=d.extend(!0,{},a),f=0;f<m.aoColumns.length;f++)this.fnUpdate(G(m,c,f),c,f,!1,!1);
else{N(m,c,f,a);a=G(m,c,f,"display");var n=m.aoColumns[f];null!==n.fnRender&&(a=Ca(m,c,f),n.bUseRendered&&N(m,c,f,a));null!==m.aoData[c].nTr&&(Va(m,c)[f].innerHTML=a)}f=d.inArray(c,m.aiDisplay);m.asDataSearch[f]=p(m,F(m,c,"filter",t(m,"bSearchable")));(h===b||h)&&l(m);(g===b||g)&&sa(m);return 0};this.fnVersionCheck=e.ext.fnVersionCheck;this.oApi={_fnExternApiFunc:ma,_fnInitialise:vb,_fnInitComplete:Kb,_fnLanguageCompat:Ab,_fnAddColumn:g,_fnColumnOptions:h,_fnAddData:H,_fnCreateTr:ra,_fnGatherData:I,
_fnBuildHead:aa,_fnDrawHead:wa,_fnDraw:va,_fnReDraw:sa,_fnAjaxUpdate:da,_fnAjaxParameters:nb,_fnAjaxUpdateDraw:Ga,_fnServerParams:ib,_fnAddOptionsHtml:qa,_fnFeatureHtmlTable:eb,_fnScrollDraw:gb,_fnAdjustColumnSizing:l,_fnFeatureHtmlFilter:ta,_fnFilterComplete:Da,_fnFilterCustom:bb,_fnFilterColumn:ca,_fnFilter:ob,_fnBuildSearchArray:tb,_fnBuildSearchRow:p,_fnFilterCreateSearch:lb,_fnDataToSearch:Jb,_fnSort:Ua,_fnSortAttachListener:$a,_fnSortingClasses:cb,_fnFeatureHtmlPaginate:Lb,_fnPageChange:Ya,
_fnFeatureHtmlInfo:Eb,_fnUpdateInfo:Ra,_fnFeatureHtmlLength:wb,_fnFeatureHtmlProcessing:Qb,_fnProcessingDisplay:Za,_fnVisibleToColumnIndex:m,_fnColumnIndexToVisible:n,_fnNodeToDataIndex:y,_fnVisbleColumns:q,_fnCalculateEnd:Ia,_fnConvertToWidth:fa,_fnCalculateColumnWidths:Ba,_fnScrollingWidthAdjust:pb,_fnGetWidestNode:xb,_fnGetMaxLenString:Rb,_fnStringToCss:ea,_fnDetectType:x,_fnSettingsFromNode:T,_fnGetDataMaster:O,_fnGetTrNodes:jb,_fnGetTdNodes:Va,_fnEscapeRegex:Pa,_fnDeleteIndex:ka,_fnReOrderIndex:u,
_fnColumnOrdering:E,_fnLog:xa,_fnClearTable:pa,_fnSaveState:Z,_fnLoadState:Qa,_fnCreateCookie:function(b,e,f,g,h){var l=new Date;l.setTime(l.getTime()+1E3*f);f=a.location.pathname.split("/");b=b+"_"+f.pop().replace(/[\/:]/g,"").toLowerCase();var m;null!==h?(m="function"===typeof d.parseJSON?d.parseJSON(e):eval("("+e+")"),e=h(b,m,l.toGMTString(),f.join("/")+"/")):e=b+"="+encodeURIComponent(e)+"; expires="+l.toGMTString()+"; path="+f.join("/")+"/";b=c.cookie.split(";");h=e.split(";")[0].length;l=[];
if(4096<h+c.cookie.length+10){for(var n=0,p=b.length;n<p;n++)if(-1!=b[n].indexOf(g)){var q=b[n].split("=");try{(m=eval("("+decodeURIComponent(q[1])+")"))&&m.iCreate&&l.push({name:q[0],time:m.iCreate})}catch(t){}}for(l.sort(function(a,b){return b.time-a.time});4096<h+c.cookie.length+10;){if(0===l.length)return;g=l.pop();c.cookie=g.name+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+f.join("/")+"/"}}c.cookie=e},_fnReadCookie:function(b){var d=a.location.pathname.split("/");b=b+"_"+d[d.length-1].replace(/[\/:]/g,
"").toLowerCase()+"=";for(var d=c.cookie.split(";"),e=0;e<d.length;e++){for(var f=d[e];" "==f.charAt(0);)f=f.substring(1,f.length);if(0===f.indexOf(b))return decodeURIComponent(f.substring(b.length,f.length))}return null},_fnDetectHeader:na,_fnGetUniqueThs:Q,_fnScrollBarWidth:Sb,_fnApplyToChildren:fb,_fnMap:ba,_fnGetRowData:F,_fnGetCellData:G,_fnSetCellData:N,_fnGetObjectDataFn:M,_fnSetObjectDataFn:P,_fnApplyColumnDefs:A,_fnBindAction:Ub,_fnExtend:Cb,_fnCallbackReg:S,_fnCallbackFire:R,_fnJsonString:Ka,
_fnRender:Ca,_fnNodeToColumnIndex:D,_fnInfoMacros:ub,_fnBrowserDetect:Sa,_fnGetColumns:t};d.extend(e.ext.oApi,this.oApi);for(var X in e.ext.oApi)X&&(this[X]=ma(X));var Ja=this;this.each(function(){var a=0,l,m,n;m=this.getAttribute("id");var p=!1,q=!1;if("table"!=this.nodeName.toLowerCase())xa(null,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName);else{a=0;for(l=e.settings.length;a<l;a++){if(e.settings[a].nTable==this){if(f===b||f.bRetrieve)return e.settings[a].oInstance;
if(f.bDestroy){e.settings[a].oInstance.fnDestroy();break}else{xa(e.settings[a],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, pass no arguments or see the docs for bRetrieve and bDestroy");return}}if(e.settings[a].sTableId==this.id){e.settings.splice(a,1);break}}if(null===m||""===m)this.id=m="DataTables_Table_"+e.ext._oExternConfig.iNextUnique++;var t=d.extend(!0,{},e.models.oSettings,{nTable:this,oApi:Ja.oApi,oInit:f,sDestroyWidth:d(this).width(),sInstance:m,
sTableId:m});e.settings.push(t);t.oInstance=1===Ja.length?Ja:d(this).dataTable();f||(f={});f.oLanguage&&Ab(f.oLanguage);f=Cb(d.extend(!0,{},e.defaults),f);ba(t.oFeatures,f,"bPaginate");ba(t.oFeatures,f,"bLengthChange");ba(t.oFeatures,f,"bFilter");ba(t.oFeatures,f,"bSort");ba(t.oFeatures,f,"bInfo");ba(t.oFeatures,f,"bProcessing");ba(t.oFeatures,f,"bAutoWidth");ba(t.oFeatures,f,"bSortClasses");ba(t.oFeatures,f,"bServerSide");ba(t.oFeatures,f,"bDeferRender");ba(t.oScroll,f,"sScrollX","sX");ba(t.oScroll,
f,"sScrollXInner","sXInner");ba(t.oScroll,f,"sScrollY","sY");ba(t.oScroll,f,"bScrollCollapse","bCollapse");ba(t.oScroll,f,"bScrollInfinite","bInfinite");ba(t.oScroll,f,"iScrollLoadGap","iLoadGap");ba(t.oScroll,f,"bScrollAutoCss","bAutoCss");ba(t,f,"asStripeClasses");ba(t,f,"asStripClasses","asStripeClasses");ba(t,f,"fnServerData");ba(t,f,"fnFormatNumber");ba(t,f,"sServerMethod");ba(t,f,"aaSorting");ba(t,f,"aaSortingFixed");ba(t,f,"aLengthMenu");ba(t,f,"sPaginationType");ba(t,f,"sAjaxSource");ba(t,
f,"sAjaxDataProp");ba(t,f,"iCookieDuration");ba(t,f,"sCookiePrefix");ba(t,f,"sDom");ba(t,f,"bSortCellsTop");ba(t,f,"iTabIndex");ba(t,f,"oSearch","oPreviousSearch");ba(t,f,"aoSearchCols","aoPreSearchCols");ba(t,f,"iDisplayLength","_iDisplayLength");ba(t,f,"bJQueryUI","bJUI");ba(t,f,"fnCookieCallback");ba(t,f,"fnStateLoad");ba(t,f,"fnStateSave");ba(t.oLanguage,f,"fnInfoCallback");S(t,"aoDrawCallback",f.fnDrawCallback,"user");S(t,"aoServerParams",f.fnServerParams,"user");S(t,"aoStateSaveParams",f.fnStateSaveParams,
"user");S(t,"aoStateLoadParams",f.fnStateLoadParams,"user");S(t,"aoStateLoaded",f.fnStateLoaded,"user");S(t,"aoRowCallback",f.fnRowCallback,"user");S(t,"aoRowCreatedCallback",f.fnCreatedRow,"user");S(t,"aoHeaderCallback",f.fnHeaderCallback,"user");S(t,"aoFooterCallback",f.fnFooterCallback,"user");S(t,"aoInitComplete",f.fnInitComplete,"user");S(t,"aoPreDrawCallback",f.fnPreDrawCallback,"user");t.oFeatures.bServerSide&&t.oFeatures.bSort&&t.oFeatures.bSortClasses?S(t,"aoDrawCallback",cb,"server_side_sort_classes"):
t.oFeatures.bDeferRender&&S(t,"aoDrawCallback",cb,"defer_sort_classes");f.bJQueryUI?(d.extend(t.oClasses,e.ext.oJUIClasses),f.sDom===e.defaults.sDom&&"lfrtip"===e.defaults.sDom&&(t.sDom='<"H"lfr>t<"F"ip>')):d.extend(t.oClasses,e.ext.oStdClasses);d(this).addClass(t.oClasses.sTable);if(""!==t.oScroll.sX||""!==t.oScroll.sY)t.oScroll.iBarWidth=Sb();t.iInitDisplayStart===b&&(t.iInitDisplayStart=f.iDisplayStart,t._iDisplayStart=f.iDisplayStart);f.bStateSave&&(t.oFeatures.bStateSave=!0,Qa(t,f),S(t,"aoDrawCallback",
Z,"state_save"));null!==f.iDeferLoading&&(t.bDeferLoading=!0,a=d.isArray(f.iDeferLoading),t._iRecordsDisplay=a?f.iDeferLoading[0]:f.iDeferLoading,t._iRecordsTotal=a?f.iDeferLoading[1]:f.iDeferLoading);null!==f.aaData&&(q=!0);""!==f.oLanguage.sUrl?(t.oLanguage.sUrl=f.oLanguage.sUrl,d.getJSON(t.oLanguage.sUrl,null,function(a){Ab(a);d.extend(!0,t.oLanguage,f.oLanguage,a);vb(t)}),p=!0):d.extend(!0,t.oLanguage,f.oLanguage);null===f.asStripeClasses&&(t.asStripeClasses=[t.oClasses.sStripeOdd,t.oClasses.sStripeEven]);
l=t.asStripeClasses.length;t.asDestroyStripes=[];if(l){m=!1;n=d(this).children("tbody").children("tr:lt("+l+")");for(a=0;a<l;a++)n.hasClass(t.asStripeClasses[a])&&(m=!0,t.asDestroyStripes.push(t.asStripeClasses[a]));m&&n.removeClass(t.asStripeClasses.join(" "))}m=[];a=this.getElementsByTagName("thead");0!==a.length&&(na(t.aoHeader,a[0]),m=Q(t));if(null===f.aoColumns)for(n=[],a=0,l=m.length;a<l;a++)n.push(null);else n=f.aoColumns;a=0;for(l=n.length;a<l;a++)f.saved_aoColumns!==b&&f.saved_aoColumns.length==
l&&(null===n[a]&&(n[a]={}),n[a].bVisible=f.saved_aoColumns[a].bVisible),g(t,m?m[a]:null);A(t,f.aoColumnDefs,n,function(a,b){h(t,a,b)});a=0;for(l=t.aaSorting.length;a<l;a++){t.aaSorting[a][0]>=t.aoColumns.length&&(t.aaSorting[a][0]=0);var y=t.aoColumns[t.aaSorting[a][0]];t.aaSorting[a][2]===b&&(t.aaSorting[a][2]=0);f.aaSorting===b&&t.saved_aaSorting===b&&(t.aaSorting[a][1]=y.asSorting[0]);m=0;for(n=y.asSorting.length;m<n;m++)if(t.aaSorting[a][1]==y.asSorting[m]){t.aaSorting[a][2]=m;break}}cb(t);Sa(t);
a=d(this).children("caption").each(function(){this._captionSide=d(this).css("caption-side")});l=d(this).children("thead");0===l.length&&(l=[c.createElement("thead")],this.appendChild(l[0]));t.nTHead=l[0];l=d(this).children("tbody");0===l.length&&(l=[c.createElement("tbody")],this.appendChild(l[0]));t.nTBody=l[0];t.nTBody.setAttribute("role","alert");t.nTBody.setAttribute("aria-live","polite");t.nTBody.setAttribute("aria-relevant","all");l=d(this).children("tfoot");0===l.length&&0<a.length&&(""!==
t.oScroll.sX||""!==t.oScroll.sY)&&(l=[c.createElement("tfoot")],this.appendChild(l[0]));0<l.length&&(t.nTFoot=l[0],na(t.aoFooter,t.nTFoot));if(q)for(a=0;a<f.aaData.length;a++)H(t,f.aaData[a]);else I(t);t.aiDisplay=t.aiDisplayMaster.slice();t.bInitialised=!0;!1===p&&vb(t)}});Ja=null;return this};e.fnVersionCheck=function(a){var b=function(a,b){for(;a.length<b;)a+="0";return a},c=e.ext.sVersion.split(".");a=a.split(".");for(var d="",m="",n=0,q=a.length;n<q;n++)d+=b(c[n],3),m+=b(a[n],3);return parseInt(d,
10)>=parseInt(m,10)};e.fnIsDataTable=function(a){for(var b=e.settings,c=0;c<b.length;c++)if(b[c].nTable===a||b[c].nScrollHead===a||b[c].nScrollFoot===a)return!0;return!1};e.fnTables=function(a){var b=[];jQuery.each(e.settings,function(c,e){(!a||!0===a&&d(e.nTable).is(":visible"))&&b.push(e.nTable)});return b};e.version="1.9.4";e.settings=[];e.models={};e.models.ext={afnFiltering:[],afnSortData:[],aoFeatures:[],aTypes:[],fnVersionCheck:e.fnVersionCheck,iApiIndex:0,ofnSearch:{},oApi:{},oStdClasses:{},
oJUIClasses:{},oPagination:{},oSort:{},sVersion:e.version,sErrMode:"alert",_oExternConfig:{iNextUnique:0}};e.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0};e.models.oRow={nTr:null,_aData:[],_aSortData:[],_anHidden:[],_sRowStripe:""};e.models.oColumn={aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bUseRendered:null,bVisible:null,_bAutoType:!0,fnCreatedCell:null,fnGetData:null,fnRender:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,
sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null};e.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollAutoCss:!0,bScrollCollapse:!1,bScrollInfinite:!1,bServerSide:!1,
bSort:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCookieCallback:null,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(a){if(1E3>a)return a;var b=a+"";a=b.split("");for(var c="",b=b.length,d=0;d<b;d++)0===d%3&&0!==d&&(c=this.oLanguage.sInfoThousands+c),c=a[b-d-1]+c;return c},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:function(a,b,c,e){e.jqXHR=d.ajax({url:a,data:b,success:function(a){a.sError&&
e.oApi._fnLog(e,0,a.sError);d(e.oInstance).trigger("xhr",[e,a]);c(a)},dataType:"json",cache:!1,type:e.sServerMethod,error:function(a,b,c){"parsererror"==b&&e.oApi._fnLog(e,0,"DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}})},fnServerParams:null,fnStateLoad:function(a){a=this.oApi._fnReadCookie(a.sCookiePrefix+a.sInstance);var b;try{b="function"===typeof d.parseJSON?d.parseJSON(a):eval("("+a+")")}catch(c){b=null}return b},fnStateLoadParams:null,
fnStateLoaded:null,fnStateSave:function(a,b){this.oApi._fnCreateCookie(a.sCookiePrefix+a.sInstance,this.oApi._fnJsonString(b),a.iCookieDuration,a.sCookiePrefix,a.fnCookieCallback)},fnStateSaveParams:null,iCookieDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iScrollLoadGap:100,iTabIndex:0,oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},
sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sInfoThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sUrl:"",sZeroRecords:"No matching records found"},oSearch:d.extend({},e.models.oSearch),sAjaxDataProp:"aaData",sAjaxSource:null,sCookiePrefix:"SpryMedia_DataTables_",sDom:"lfrtip",
sPaginationType:"two_button",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET"};e.defaults.columns={aDataSort:null,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bUseRendered:!0,bVisible:!0,fnCreatedCell:null,fnRender:null,iDataSort:-1,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null};e.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,
bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortClasses:null,bStateSave:null},oScroll:{bAutoCss:null,bCollapse:null,bInfinite:null,iBarWidth:0,iLoadGap:null,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1},aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],asDataSearch:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:null,asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,
aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,sPaginationType:"two_button",iCookieDuration:0,sCookiePrefix:"",fnCookieCallback:null,aoStateSave:[],aoStateLoad:[],oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,
bAjaxDataGet:!0,jqXHR:null,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iDisplayEnd:10,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsTotal,10):this.aiDisplayMaster.length},fnRecordsDisplay:function(){return this.oFeatures.bServerSide?
parseInt(this._iRecordsDisplay,10):this.aiDisplay.length},fnDisplayEnd:function(){return this.oFeatures.bServerSide?!1===this.oFeatures.bPaginate||-1==this._iDisplayLength?this._iDisplayStart+this.aiDisplay.length:Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay):this._iDisplayEnd},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null};e.ext=d.extend(!0,{},e.models.ext);d.extend(e.ext.oStdClasses,{sTable:"dataTable",sPagePrevEnabled:"paginate_enabled_previous",
sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button paginate_button_disabled",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",
sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",
sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"",sJUIHeader:"",sJUIFooter:""});d.extend(e.ext.oJUIClasses,e.ext.oStdClasses,{sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",
sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPageLast:"last ui-corner-tr ui-corner-br",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:"ui-state-default",
sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",
sScrollHead:"dataTables_scrollHead ui-state-default",sScrollFoot:"dataTables_scrollFoot ui-state-default",sFooterTH:"ui-state-default",sJUIHeader:"fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix",sJUIFooter:"fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"});d.extend(e.ext.oPagination,{two_button:{fnInit:function(a,b,c){var e=a.oLanguage.oPaginate,m=function(b){a.oApi._fnPageChange(a,b.data.action)&&c(a)},e=a.bJUI?'<a class="'+
a.oClasses.sPagePrevDisabled+'" tabindex="'+a.iTabIndex+'" role="button"><span class="'+a.oClasses.sPageJUIPrev+'"></span></a><a class="'+a.oClasses.sPageNextDisabled+'" tabindex="'+a.iTabIndex+'" role="button"><span class="'+a.oClasses.sPageJUINext+'"></span></a>':'<a class="'+a.oClasses.sPagePrevDisabled+'" tabindex="'+a.iTabIndex+'" role="button">'+e.sPrevious+'</a><a class="'+a.oClasses.sPageNextDisabled+'" tabindex="'+a.iTabIndex+'" role="button">'+e.sNext+"</a>";d(b).append(e);var n=d("a",b),
e=n[0],n=n[1];a.oApi._fnBindAction(e,{action:"previous"},m);a.oApi._fnBindAction(n,{action:"next"},m);a.aanFeatures.p||(b.id=a.sTableId+"_paginate",e.id=a.sTableId+"_previous",n.id=a.sTableId+"_next",e.setAttribute("aria-controls",a.sTableId),n.setAttribute("aria-controls",a.sTableId))},fnUpdate:function(a,b){if(a.aanFeatures.p)for(var c=a.oClasses,d=a.aanFeatures.p,e,n=0,q=d.length;n<q;n++)if(e=d[n].firstChild)e.className=0===a._iDisplayStart?c.sPagePrevDisabled:c.sPagePrevEnabled,e=e.nextSibling,
e.className=a.fnDisplayEnd()==a.fnRecordsDisplay()?c.sPageNextDisabled:c.sPageNextEnabled}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(a,b,c){var e=a.oLanguage.oPaginate,m=a.oClasses,n=function(b){a.oApi._fnPageChange(a,b.data.action)&&c(a)};d(b).append('<a  tabindex="'+a.iTabIndex+'" class="'+m.sPageButton+" "+m.sPageFirst+'">'+e.sFirst+'</a><a  tabindex="'+a.iTabIndex+'" class="'+m.sPageButton+" "+m.sPagePrevious+'">'+e.sPrevious+'</a><span></span><a tabindex="'+a.iTabIndex+'" class="'+
m.sPageButton+" "+m.sPageNext+'">'+e.sNext+'</a><a tabindex="'+a.iTabIndex+'" class="'+m.sPageButton+" "+m.sPageLast+'">'+e.sLast+"</a>");var q=d("a",b),e=q[0],m=q[1],t=q[2],q=q[3];a.oApi._fnBindAction(e,{action:"first"},n);a.oApi._fnBindAction(m,{action:"previous"},n);a.oApi._fnBindAction(t,{action:"next"},n);a.oApi._fnBindAction(q,{action:"last"},n);a.aanFeatures.p||(b.id=a.sTableId+"_paginate",e.id=a.sTableId+"_first",m.id=a.sTableId+"_previous",t.id=a.sTableId+"_next",q.id=a.sTableId+"_last")},
fnUpdate:function(a,b){if(a.aanFeatures.p){var c=e.ext.oPagination.iFullNumbersShowPages,l=Math.floor(c/2),m=Math.ceil(a.fnRecordsDisplay()/a._iDisplayLength),n=Math.ceil(a._iDisplayStart/a._iDisplayLength)+1,q="",t,x=a.oClasses,u,E=a.aanFeatures.p,A=function(c){a.oApi._fnBindAction(this,{page:c+t-1},function(c){a.oApi._fnPageChange(a,c.data.page);b(a);c.preventDefault()})};-1===a._iDisplayLength?n=l=t=1:m<c?(t=1,l=m):n<=l?(t=1,l=c):n>=m-l?(t=m-c+1,l=m):(t=n-Math.ceil(c/2)+1,l=t+c-1);for(c=t;c<=l;c++)q+=
n!==c?'<a tabindex="'+a.iTabIndex+'" class="'+x.sPageButton+'">'+a.fnFormatNumber(c)+"</a>":'<a tabindex="'+a.iTabIndex+'" class="'+x.sPageButtonActive+'">'+a.fnFormatNumber(c)+"</a>";c=0;for(l=E.length;c<l;c++)u=E[c],u.hasChildNodes()&&(d("span:eq(0)",u).html(q).children("a").each(A),u=u.getElementsByTagName("a"),u=[u[0],u[1],u[u.length-2],u[u.length-1]],d(u).removeClass(x.sPageButton+" "+x.sPageButtonActive+" "+x.sPageButtonStaticDisabled),d([u[0],u[1]]).addClass(1==n?x.sPageButtonStaticDisabled:
x.sPageButton),d([u[2],u[3]]).addClass(0===m||n===m||-1===a._iDisplayLength?x.sPageButtonStaticDisabled:x.sPageButton))}}}});d.extend(e.ext.oSort,{"string-pre":function(a){"string"!=typeof a&&(a=null!==a&&a.toString?a.toString():"");return a.toLowerCase()},"string-asc":function(a,b){return a<b?-1:a>b?1:0},"string-desc":function(a,b){return a<b?1:a>b?-1:0},"html-pre":function(a){return a.replace(/<.*?>/g,"").toLowerCase()},"html-asc":function(a,b){return a<b?-1:a>b?1:0},"html-desc":function(a,b){return a<
b?1:a>b?-1:0},"date-pre":function(a){a=Date.parse(a);if(isNaN(a)||""===a)a=Date.parse("01/01/1970 00:00:00");return a},"date-asc":function(a,b){return a-b},"date-desc":function(a,b){return b-a},"numeric-pre":function(a){return"-"==a||""===a?0:1*a},"numeric-asc":function(a,b){return a-b},"numeric-desc":function(a,b){return b-a}});d.extend(e.ext.aTypes,[function(a){if("number"===typeof a)return"numeric";if("string"!==typeof a)return null;var b,c=!1;b=a.charAt(0);if(-1=="0123456789-".indexOf(b))return null;
for(var d=1;d<a.length;d++){b=a.charAt(d);if(-1=="0123456789.".indexOf(b))return null;if("."==b){if(c)return null;c=!0}}return"numeric"},function(a){var b=Date.parse(a);return null!==b&&!isNaN(b)||"string"===typeof a&&0===a.length?"date":null},function(a){return"string"===typeof a&&-1!=a.indexOf("<")&&-1!=a.indexOf(">")?"html":null}]);d.fn.DataTable=e;d.fn.dataTable=e;d.fn.dataTableSettings=e.settings;d.fn.dataTableExt=e.ext})}(window,document));
var ZeroClipboard_TableTools={version:"1.0.4-TableTools2",clients:{},moviePath:"",nextId:1,$:function(a){"string"==typeof a&&(a=document.getElementById(a));a.addClass||(a.hide=function(){this.style.display="none"},a.show=function(){this.style.display=""},a.addClass=function(a){this.removeClass(a);this.className+=" "+a},a.removeClass=function(a){this.className=this.className.replace(new RegExp("\\s*"+a+"\\s*")," ").replace(/^\s+/,"").replace(/\s+$/,"")},a.hasClass=function(a){return!!this.className.match(new RegExp("\\s*"+
a+"\\s*"))});return a},setMoviePath:function(a){this.moviePath=a},dispatch:function(a,c,b){(a=this.clients[a])&&a.receiveEvent(c,b)},register:function(a,c){this.clients[a]=c},getDOMObjectPosition:function(a){var c={left:0,top:0,width:a.width?a.width:a.offsetWidth,height:a.height?a.height:a.offsetHeight};""!=a.style.width&&(c.width=a.style.width.replace("px",""));""!=a.style.height&&(c.height=a.style.height.replace("px",""));for(;a;)c.left+=a.offsetLeft,c.top+=a.offsetTop,a=a.offsetParent;return c},
Client:function(a){this.handlers={};this.id=ZeroClipboard_TableTools.nextId++;this.movieId="ZeroClipboard_TableToolsMovie_"+this.id;ZeroClipboard_TableTools.register(this.id,this);a&&this.glue(a)}};
ZeroClipboard_TableTools.Client.prototype={id:0,ready:!1,movie:null,clipText:"",fileName:"",action:"copy",handCursorEnabled:!0,cssEffects:!0,handlers:null,sized:!1,glue:function(a,c){this.domElement=ZeroClipboard_TableTools.$(a);var b=99;this.domElement.style.zIndex&&(b=parseInt(this.domElement.style.zIndex)+1);var d=ZeroClipboard_TableTools.getDOMObjectPosition(this.domElement);this.div=document.createElement("div");var e=this.div.style;e.position="absolute";e.left="0px";e.top="0px";e.width=d.width+
"px";e.height=d.height+"px";e.zIndex=b;"undefined"!=typeof c&&""!=c&&(this.div.title=c);0!=d.width&&0!=d.height&&(this.sized=!0);this.domElement&&(this.domElement.appendChild(this.div),this.div.innerHTML=this.getHTML(d.width,d.height))},positionElement:function(){var a=ZeroClipboard_TableTools.getDOMObjectPosition(this.domElement),c=this.div.style;c.position="absolute";c.width=a.width+"px";c.height=a.height+"px";0!=a.width&&0!=a.height&&(this.sized=!0,c=this.div.childNodes[0],c.width=a.width,c.height=
a.height)},getHTML:function(a,c){var b="",d="id="+this.id+"&width="+a+"&height="+c;if(navigator.userAgent.match(/MSIE/))var e=location.href.match(/^https/i)?"https://":"http://",b=b+('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+e+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="'+a+'" height="'+c+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+
ZeroClipboard_TableTools.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+d+'"/><param name="wmode" value="transparent"/></object>');else b+='<embed id="'+this.movieId+'" src="'+ZeroClipboard_TableTools.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+a+'" height="'+c+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+
d+'" wmode="transparent" />';return b},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide();this.div.innerHTML="";var a=document.getElementsByTagName("body")[0];try{a.removeChild(this.div)}catch(c){}this.div=this.domElement=null}},reposition:function(a){a&&((this.domElement=ZeroClipboard_TableTools.$(a))||this.hide());if(this.domElement&&this.div){a=ZeroClipboard_TableTools.getDOMObjectPosition(this.domElement);
var c=this.div.style;c.left=""+a.left+"px";c.top=""+a.top+"px"}},clearText:function(){this.clipText="";this.ready&&this.movie.clearText()},appendText:function(a){this.clipText+=a;this.ready&&this.movie.appendText(a)},setText:function(a){this.clipText=a;this.ready&&this.movie.setText(a)},setCharSet:function(a){this.charSet=a;this.ready&&this.movie.setCharSet(a)},setBomInc:function(a){this.incBom=a;this.ready&&this.movie.setBomInc(a)},setFileName:function(a){this.fileName=a;this.ready&&this.movie.setFileName(a)},
setAction:function(a){this.action=a;this.ready&&this.movie.setAction(a)},addEventListener:function(a,c){a=a.toString().toLowerCase().replace(/^on/,"");this.handlers[a]||(this.handlers[a]=[]);this.handlers[a].push(c)},setHandCursor:function(a){this.handCursorEnabled=a;this.ready&&this.movie.setHandCursor(a)},setCSSEffects:function(a){this.cssEffects=!!a},receiveEvent:function(a,c){a=a.toString().toLowerCase().replace(/^on/,"");switch(a){case "load":this.movie=document.getElementById(this.movieId);
if(!this.movie){var b=this;setTimeout(function(){b.receiveEvent("load",null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){b=this;setTimeout(function(){b.receiveEvent("load",null)},100);this.ready=!0;return}this.ready=!0;this.movie.clearText();this.movie.appendText(this.clipText);this.movie.setFileName(this.fileName);this.movie.setAction(this.action);this.movie.setCharSet(this.charSet);this.movie.setBomInc(this.incBom);this.movie.setHandCursor(this.handCursorEnabled);
break;case "mouseover":this.domElement&&this.cssEffects&&this.recoverActive&&this.domElement.addClass("active");break;case "mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0));break;case "mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case "mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[a])for(var d=
0,e=this.handlers[a].length;d<e;d++){var f=this.handlers[a][d];if("function"==typeof f)f(this,c);else if("object"==typeof f&&2==f.length)f[0][f[1]](this,c);else if("string"==typeof f)window[f](this,c)}}};var TableTools;
(function(a,c,b){TableTools=function(b,c){!this instanceof TableTools&&alert("Warning: TableTools must be initialised with the keyword 'new'");this.s={that:this,dt:b.fnSettings(),print:{saveStart:-1,saveLength:-1,saveScroll:-1,funcEnd:function(){}},buttonCounter:0,select:{type:"",selected:[],preRowSelect:null,postSelected:null,postDeselected:null,all:!1,selectedClass:""},custom:{},swfPath:"",buttonSet:[],master:!1,tags:{}};this.dom={container:null,table:null,print:{hidden:[],message:null},collection:{collection:null,
background:null}};this.classes=a.extend(!0,{},TableTools.classes);this.s.dt.bJUI&&a.extend(!0,this.classes,TableTools.classes_themeroller);this.fnSettings=function(){return this.s};"undefined"==typeof c&&(c={});this._fnConstruct(c);return this};TableTools.prototype={fnGetSelected:function(a){var b=[],c=this.s.dt.aoData,g=this.s.dt.aiDisplay,h;if(a)for(a=0,h=g.length;a<h;a++)c[g[a]]._DTTT_selected&&b.push(c[g[a]].nTr);else for(a=0,h=c.length;a<h;a++)c[a]._DTTT_selected&&b.push(c[a].nTr);return b},
fnGetSelectedData:function(){var a=[],b=this.s.dt.aoData,c,g;c=0;for(g=b.length;c<g;c++)b[c]._DTTT_selected&&a.push(this.s.dt.oInstance.fnGetData(c));return a},fnIsSelected:function(a){a=this.s.dt.oInstance.fnGetPosition(a);return!0===this.s.dt.aoData[a]._DTTT_selected?!0:!1},fnSelectAll:function(a){var b=this._fnGetMasterSettings();this._fnRowSelect(!0===a?b.dt.aiDisplay:b.dt.aoData)},fnSelectNone:function(a){this._fnGetMasterSettings();this._fnRowDeselect(this.fnGetSelected(a))},fnSelect:function(a){"single"==
this.s.select.type?(this.fnSelectNone(),this._fnRowSelect(a)):"multi"==this.s.select.type&&this._fnRowSelect(a)},fnDeselect:function(a){this._fnRowDeselect(a)},fnGetTitle:function(a){var c="";"undefined"!=typeof a.sTitle&&""!==a.sTitle?c=a.sTitle:(a=b.getElementsByTagName("title"),0<a.length&&(c=a[0].innerHTML));return 4>"\u00a1".toString().length?c.replace(/[^a-zA-Z0-9_\u00A1-\uFFFF\.,\-_ !\(\)]/g,""):c.replace(/[^a-zA-Z0-9_\.,\-_ !\(\)]/g,"")},fnCalcColRatios:function(a){var b=this.s.dt.aoColumns;
a=this._fnColumnTargets(a.mColumns);var c=[],g=0,h=0,l,m;l=0;for(m=a.length;l<m;l++)a[l]&&(g=b[l].nTh.offsetWidth,h+=g,c.push(g));l=0;for(m=c.length;l<m;l++)c[l]/=h;return c.join("\t")},fnGetTableData:function(a){if(this.s.dt)return this._fnGetDataTablesData(a)},fnSetText:function(a,b){this._fnFlashSetText(a,b)},fnResizeButtons:function(){for(var a in ZeroClipboard_TableTools.clients)if(a){var b=ZeroClipboard_TableTools.clients[a];"undefined"!=typeof b.domElement&&b.domElement.parentNode&&b.positionElement()}},
fnResizeRequired:function(){for(var a in ZeroClipboard_TableTools.clients)if(a){var b=ZeroClipboard_TableTools.clients[a];if("undefined"!=typeof b.domElement&&b.domElement.parentNode==this.dom.container&&!1===b.sized)return!0}return!1},fnPrint:function(a,b){void 0===b&&(b={});void 0===a||a?this._fnPrintStart(b):this._fnPrintEnd()},fnInfo:function(c,e){var f=b.createElement("div");f.className=this.classes.print.info;f.innerHTML=c;b.body.appendChild(f);setTimeout(function(){a(f).fadeOut("normal",function(){b.body.removeChild(f)})},
e)},_fnConstruct:function(a){var c=this;this._fnCustomiseSettings(a);this.dom.container=b.createElement(this.s.tags.container);this.dom.container.className=this.classes.container;"none"!=this.s.select.type&&this._fnRowSelectConfig();this._fnButtonDefinations(this.s.buttonSet,this.dom.container);this.s.dt.aoDestroyCallback.push({sName:"TableTools",fn:function(){c.dom.container.innerHTML=""}})},_fnCustomiseSettings:function(b){"undefined"==typeof this.s.dt._TableToolsInit&&(this.s.master=!0,this.s.dt._TableToolsInit=
!0);this.dom.table=this.s.dt.nTable;this.s.custom=a.extend({},TableTools.DEFAULTS,b);this.s.swfPath=this.s.custom.sSwfPath;"undefined"!=typeof ZeroClipboard_TableTools&&(ZeroClipboard_TableTools.moviePath=this.s.swfPath);this.s.select.type=this.s.custom.sRowSelect;this.s.select.preRowSelect=this.s.custom.fnPreRowSelect;this.s.select.postSelected=this.s.custom.fnRowSelected;this.s.select.postDeselected=this.s.custom.fnRowDeselected;this.s.custom.sSelectedClass&&(this.classes.select.row=this.s.custom.sSelectedClass);
this.s.tags=this.s.custom.oTags;this.s.buttonSet=this.s.custom.aButtons},_fnButtonDefinations:function(b,c){for(var f,g=0,h=b.length;g<h;g++){if("string"==typeof b[g]){if("undefined"==typeof TableTools.BUTTONS[b[g]]){alert("TableTools: Warning - unknown button type: "+b[g]);continue}f=a.extend({},TableTools.BUTTONS[b[g]],!0)}else{if("undefined"==typeof TableTools.BUTTONS[b[g].sExtends]){alert("TableTools: Warning - unknown button type: "+b[g].sExtends);continue}f=a.extend({},TableTools.BUTTONS[b[g].sExtends],
!0);f=a.extend(f,b[g],!0)}c.appendChild(this._fnCreateButton(f,a(c).hasClass(this.classes.collection.container)))}},_fnCreateButton:function(a,b){var c=this._fnButtonBase(a,b);a.sAction.match(/flash/)?this._fnFlashConfig(c,a):"text"==a.sAction?this._fnTextConfig(c,a):"div"==a.sAction?this._fnTextConfig(c,a):"collection"==a.sAction&&(this._fnTextConfig(c,a),this._fnCollectionConfig(c,a));return c},_fnButtonBase:function(a,c){var f,g,h;c?(f="default"!==a.sTag?a.sTag:this.s.tags.collection.button,g=
"default"!==a.sLinerTag?a.sLiner:this.s.tags.collection.liner,h=this.classes.collection.buttons.normal):(f="default"!==a.sTag?a.sTag:this.s.tags.button,g="default"!==a.sLinerTag?a.sLiner:this.s.tags.liner,h=this.classes.buttons.normal);f=b.createElement(f);g=b.createElement(g);var l=this._fnGetMasterSettings();f.className=h+" "+a.sButtonClass;f.setAttribute("id","ToolTables_"+this.s.dt.sInstance+"_"+l.buttonCounter);f.appendChild(g);g.innerHTML=a.sButtonText;l.buttonCounter++;return f},_fnGetMasterSettings:function(){if(this.s.master)return this.s;
for(var a=TableTools._aInstances,b=0,c=a.length;b<c;b++)if(this.dom.table==a[b].s.dt.nTable)return a[b].s},_fnCollectionConfig:function(a,c){var f=b.createElement(this.s.tags.collection.container);f.style.display="none";f.className=this.classes.collection.container;c._collection=f;b.body.appendChild(f);this._fnButtonDefinations(c.aButtons,f)},_fnCollectionShow:function(d,e){var f=this,g=a(d).offset(),h=e._collection,l=g.left,g=g.top+a(d).outerHeight(),m=a(c).height(),n=a(b).height(),q=a(c).width(),
t=a(b).width();h.style.position="absolute";h.style.left=l+"px";h.style.top=g+"px";h.style.display="block";a(h).css("opacity",0);var x=b.createElement("div");x.style.position="absolute";x.style.left="0px";x.style.top="0px";x.style.height=(m>n?m:n)+"px";x.style.width=(q>t?q:t)+"px";x.className=this.classes.collection.background;a(x).css("opacity",0);b.body.appendChild(x);b.body.appendChild(h);m=a(h).outerWidth();q=a(h).outerHeight();l+m>t&&(h.style.left=t-m+"px");g+q>n&&(h.style.top=g-q-a(d).outerHeight()+
"px");this.dom.collection.collection=h;this.dom.collection.background=x;setTimeout(function(){a(h).animate({opacity:1},500);a(x).animate({opacity:.25},500)},10);this.fnResizeButtons();a(x).click(function(){f._fnCollectionHide.call(f,null,null)})},_fnCollectionHide:function(b,c){null!==c&&"collection"==c.sExtends||null===this.dom.collection.collection||(a(this.dom.collection.collection).animate({opacity:0},500,function(a){this.style.display="none"}),a(this.dom.collection.background).animate({opacity:0},
500,function(a){this.parentNode.removeChild(this)}),this.dom.collection.collection=null,this.dom.collection.background=null)},_fnRowSelectConfig:function(){if(this.s.master){var b=this,c=this.s.dt;a(c.nTable).addClass(this.classes.select.table);a("tr",c.nTBody).live("click",function(a){this.parentNode==c.nTBody&&null!==c.oInstance.fnGetData(this)&&(b.fnIsSelected(this)?b._fnRowDeselect(this,a):"single"==b.s.select.type?(b.fnSelectNone(),b._fnRowSelect(this,a)):"multi"==b.s.select.type&&b._fnRowSelect(this,
a))});c.oApi._fnCallbackReg(c,"aoRowCreatedCallback",function(f,g,h){c.aoData[h]._DTTT_selected&&a(f).addClass(b.classes.select.row)},"TableTools-SelectAll")}},_fnRowSelect:function(b,c){var f=this._fnSelectData(b),g=[],h,l;h=0;for(l=f.length;h<l;h++)f[h].nTr&&g.push(f[h].nTr);if(null===this.s.select.preRowSelect||this.s.select.preRowSelect.call(this,c,g,!0)){h=0;for(l=f.length;h<l;h++)f[h]._DTTT_selected=!0,f[h].nTr&&a(f[h].nTr).addClass(this.classes.select.row);null!==this.s.select.postSelected&&
this.s.select.postSelected.call(this,g);TableTools._fnEventDispatch(this,"select",g,!0)}},_fnRowDeselect:function(b,c){var f=this._fnSelectData(b),g=[],h,l;h=0;for(l=f.length;h<l;h++)f[h].nTr&&g.push(f[h].nTr);if(null===this.s.select.preRowSelect||this.s.select.preRowSelect.call(this,c,g,!1)){h=0;for(l=f.length;h<l;h++)f[h]._DTTT_selected=!1,f[h].nTr&&a(f[h].nTr).removeClass(this.classes.select.row);null!==this.s.select.postDeselected&&this.s.select.postDeselected.call(this,g);TableTools._fnEventDispatch(this,
"select",g,!1)}},_fnSelectData:function(a){var b=[],c,g,h;if(a.nodeName)c=this.s.dt.oInstance.fnGetPosition(a),b.push(this.s.dt.aoData[c]);else if("undefined"!==typeof a.length)for(g=0,h=a.length;g<h;g++)a[g].nodeName?(c=this.s.dt.oInstance.fnGetPosition(a[g]),b.push(this.s.dt.aoData[c])):"number"===typeof a[g]?b.push(this.s.dt.aoData[a[g]]):b.push(a[g]);else b.push(a);return b},_fnTextConfig:function(b,c){var f=this;null!==c.fnInit&&c.fnInit.call(this,b,c);""!==c.sToolTip&&(b.title=c.sToolTip);a(b).hover(function(){null!==
c.fnMouseover&&c.fnMouseover.call(this,b,c,null)},function(){null!==c.fnMouseout&&c.fnMouseout.call(this,b,c,null)});null!==c.fnSelect&&TableTools._fnEventListen(this,"select",function(a){c.fnSelect.call(f,b,c,a)});a(b).click(function(a){null!==c.fnClick&&c.fnClick.call(f,b,c,null);null!==c.fnComplete&&c.fnComplete.call(f,b,c,null,null);f._fnCollectionHide(b,c)})},_fnFlashConfig:function(a,b){var c=this,g=new ZeroClipboard_TableTools.Client;null!==b.fnInit&&b.fnInit.call(this,a,b);g.setHandCursor(!0);
"flash_save"==b.sAction?(g.setAction("save"),g.setCharSet("utf16le"==b.sCharSet?"UTF16LE":"UTF8"),g.setBomInc(b.bBomInc),g.setFileName(b.sFileName.replace("*",this.fnGetTitle(b)))):"flash_pdf"==b.sAction?(g.setAction("pdf"),g.setFileName(b.sFileName.replace("*",this.fnGetTitle(b)))):g.setAction("copy");g.addEventListener("mouseOver",function(h){null!==b.fnMouseover&&b.fnMouseover.call(c,a,b,g)});g.addEventListener("mouseOut",function(h){null!==b.fnMouseout&&b.fnMouseout.call(c,a,b,g)});g.addEventListener("mouseDown",
function(h){null!==b.fnClick&&b.fnClick.call(c,a,b,g)});g.addEventListener("complete",function(h,l){null!==b.fnComplete&&b.fnComplete.call(c,a,b,g,l);c._fnCollectionHide(a,b)});this._fnFlashGlue(g,a,b.sToolTip)},_fnFlashGlue:function(a,c,f){var g=this,h=c.getAttribute("id");b.getElementById(h)?a.glue(c,f):setTimeout(function(){g._fnFlashGlue(a,c,f)},100)},_fnFlashSetText:function(a,b){var c=this._fnChunkData(b,8192);a.clearText();for(var g=0,h=c.length;g<h;g++)a.appendText(c[g])},_fnColumnTargets:function(a){var b=
[],c=this.s.dt;if("object"==typeof a){i=0;for(iLen=c.aoColumns.length;i<iLen;i++)b.push(!1);i=0;for(iLen=a.length;i<iLen;i++)b[a[i]]=!0}else if("visible"==a)for(i=0,iLen=c.aoColumns.length;i<iLen;i++)b.push(c.aoColumns[i].bVisible?!0:!1);else if("hidden"==a)for(i=0,iLen=c.aoColumns.length;i<iLen;i++)b.push(c.aoColumns[i].bVisible?!1:!0);else if("sortable"==a)for(i=0,iLen=c.aoColumns.length;i<iLen;i++)b.push(c.aoColumns[i].bSortable?!0:!1);else for(i=0,iLen=c.aoColumns.length;i<iLen;i++)b.push(!0);
return b},_fnNewline:function(a){return"auto"==a.sNewLine?navigator.userAgent.match(/Windows/)?"\r\n":"\n":a.sNewLine},_fnGetDataTablesData:function(b){var c,f,g,h,l,m=[],n="",q=this.s.dt,t,x=new RegExp(b.sFieldBoundary,"g"),u=this._fnColumnTargets(b.mColumns);g="undefined"!=typeof b.bSelectedOnly?b.bSelectedOnly:!1;if(b.bHeader){l=[];c=0;for(f=q.aoColumns.length;c<f;c++)u[c]&&(n=q.aoColumns[c].sTitle.replace(/\n/g," ").replace(/<.*?>/g,"").replace(/^\s+|\s+$/g,""),n=this._fnHtmlDecode(n),l.push(this._fnBoundData(n,
b.sFieldBoundary,x)));m.push(l.join(b.sFieldSeperator))}var E=q.aiDisplay;h=this.fnGetSelected();if("none"!==this.s.select.type&&g&&0!==h.length)for(E=[],c=0,f=h.length;c<f;c++)E.push(q.oInstance.fnGetPosition(h[c]));g=0;for(h=E.length;g<h;g++){t=q.aoData[E[g]].nTr;l=[];c=0;for(f=q.aoColumns.length;c<f;c++)u[c]&&(n=q.oApi._fnGetCellData(q,E[g],c,"display"),b.fnCellRender?n=b.fnCellRender(n,c,t,E[g])+"":"string"==typeof n?(n=n.replace(/\n/g," "),n=n.replace(/<img.*?\s+alt\s*=\s*(?:"([^"]+)"|'([^']+)'|([^\s>]+)).*?>/gi,
"$1$2$3"),n=n.replace(/<.*?>/g,"")):n+="",n=n.replace(/^\s+/,"").replace(/\s+$/,""),n=this._fnHtmlDecode(n),l.push(this._fnBoundData(n,b.sFieldBoundary,x)));m.push(l.join(b.sFieldSeperator));b.bOpenRows&&(c=a.grep(q.aoOpenRows,function(a){return a.nParent===t}),1===c.length&&(n=this._fnBoundData(a("td",c[0].nTr).html(),b.sFieldBoundary,x),m.push(n)))}if(b.bFooter&&null!==q.nTFoot){l=[];c=0;for(f=q.aoColumns.length;c<f;c++)u[c]&&null!==q.aoColumns[c].nTf&&(n=q.aoColumns[c].nTf.innerHTML.replace(/\n/g,
" ").replace(/<.*?>/g,""),n=this._fnHtmlDecode(n),l.push(this._fnBoundData(n,b.sFieldBoundary,x)));m.push(l.join(b.sFieldSeperator))}return _sLastData=m.join(this._fnNewline(b))},_fnBoundData:function(a,b,c){return""===b?a:b+a.replace(c,b+b)+b},_fnChunkData:function(a,b){for(var c=[],g=a.length,h=0;h<g;h+=b)h+b<g?c.push(a.substring(h,h+b)):c.push(a.substring(h,g));return c},_fnHtmlDecode:function(a){if(-1===a.indexOf("&"))return a;var c=b.createElement("div");return a.replace(/&([^\s]*);/g,function(a,
b){if("#"===a.substr(1,1))return String.fromCharCode(Number(b.substr(1)));c.innerHTML=a;return c.childNodes[0].nodeValue})},_fnPrintStart:function(d){var e=this,f=this.s.dt;this._fnPrintHideNodes(f.nTable);this.s.print.saveStart=f._iDisplayStart;this.s.print.saveLength=f._iDisplayLength;d.bShowAll&&(f._iDisplayStart=0,f._iDisplayLength=-1,f.oApi._fnCalculateEnd(f),f.oApi._fnDraw(f));if(""!==f.oScroll.sX||""!==f.oScroll.sY)this._fnPrintScrollStart(f),a(this.s.dt.nTable).bind("draw.DTTT_Print",function(){e._fnPrintScrollStart(f)});
var g=f.aanFeatures,h;for(h in g)if("i"!=h&&"t"!=h&&1==h.length)for(var l=0,m=g[h].length;l<m;l++)this.dom.print.hidden.push({node:g[h][l],display:"block"}),g[h][l].style.display="none";a(b.body).addClass(this.classes.print.body);""!==d.sInfo&&this.fnInfo(d.sInfo,3E3);d.sMessage&&(this.dom.print.message=b.createElement("div"),this.dom.print.message.className=this.classes.print.message,this.dom.print.message.innerHTML=d.sMessage,b.body.insertBefore(this.dom.print.message,b.body.childNodes[0]));this.s.print.saveScroll=
a(c).scrollTop();c.scrollTo(0,0);a(b).bind("keydown.DTTT",function(a){27==a.keyCode&&(a.preventDefault(),e._fnPrintEnd.call(e,a))})},_fnPrintEnd:function(d){d=this.s.dt;var e=this.s.print,f=this.dom.print;this._fnPrintShowNodes();if(""!==d.oScroll.sX||""!==d.oScroll.sY)a(this.s.dt.nTable).unbind("draw.DTTT_Print"),this._fnPrintScrollEnd();c.scrollTo(0,e.saveScroll);null!==f.message&&(b.body.removeChild(f.message),f.message=null);a(b.body).removeClass("DTTT_Print");d._iDisplayStart=e.saveStart;d._iDisplayLength=
e.saveLength;d.oApi._fnCalculateEnd(d);d.oApi._fnDraw(d);a(b).unbind("keydown.DTTT")},_fnPrintScrollStart:function(){var b=this.s.dt;b.nScrollHead.getElementsByTagName("div")[0].getElementsByTagName("table");var c=b.nTable.parentNode,f=b.nTable.getElementsByTagName("thead");0<f.length&&b.nTable.removeChild(f[0]);null!==b.nTFoot&&(f=b.nTable.getElementsByTagName("tfoot"),0<f.length&&b.nTable.removeChild(f[0]));f=b.nTHead.cloneNode(!0);b.nTable.insertBefore(f,b.nTable.childNodes[0]);null!==b.nTFoot&&
(f=b.nTFoot.cloneNode(!0),b.nTable.insertBefore(f,b.nTable.childNodes[1]));""!==b.oScroll.sX&&(b.nTable.style.width=a(b.nTable).outerWidth()+"px",c.style.width=a(b.nTable).outerWidth()+"px",c.style.overflow="visible");""!==b.oScroll.sY&&(c.style.height=a(b.nTable).outerHeight()+"px",c.style.overflow="visible")},_fnPrintScrollEnd:function(){var a=this.s.dt,b=a.nTable.parentNode;""!==a.oScroll.sX&&(b.style.width=a.oApi._fnStringToCss(a.oScroll.sX),b.style.overflow="auto");""!==a.oScroll.sY&&(b.style.height=
a.oApi._fnStringToCss(a.oScroll.sY),b.style.overflow="auto")},_fnPrintShowNodes:function(){for(var a=this.dom.print.hidden,b=0,c=a.length;b<c;b++)a[b].node.style.display=a[b].display;a.splice(0,a.length)},_fnPrintHideNodes:function(b){for(var c=this.dom.print.hidden,f=b.parentNode,g=f.childNodes,h=0,l=g.length;h<l;h++)if(g[h]!=b&&1==g[h].nodeType){var m=a(g[h]).css("display");"none"!=m&&(c.push({node:g[h],display:m}),g[h].style.display="none")}"BODY"!=f.nodeName&&this._fnPrintHideNodes(f)}};TableTools._aInstances=
[];TableTools._aListeners=[];TableTools.fnGetMasters=function(){for(var a=[],b=0,c=TableTools._aInstances.length;b<c;b++)TableTools._aInstances[b].s.master&&a.push(TableTools._aInstances[b]);return a};TableTools.fnGetInstance=function(a){"object"!=typeof a&&(a=b.getElementById(a));for(var c=0,f=TableTools._aInstances.length;c<f;c++)if(TableTools._aInstances[c].s.master&&TableTools._aInstances[c].dom.table==a)return TableTools._aInstances[c];return null};TableTools._fnEventListen=function(a,b,c){TableTools._aListeners.push({that:a,
type:b,fn:c})};TableTools._fnEventDispatch=function(a,b,c,g){for(var h=TableTools._aListeners,l=0,m=h.length;l<m;l++)a.dom.table==h[l].that.dom.table&&h[l].type==b&&h[l].fn(c,g)};TableTools.buttonBase={sAction:"text",sTag:"default",sLinerTag:"default",sButtonClass:"DTTT_button_text",sButtonText:"Button text",sTitle:"",sToolTip:"",sCharSet:"utf8",bBomInc:!1,sFileName:"*.csv",sFieldBoundary:"",sFieldSeperator:"\t",sNewLine:"auto",mColumns:"all",bHeader:!0,bFooter:!0,bOpenRows:!1,bSelectedOnly:!1,fnMouseover:null,
fnMouseout:null,fnClick:null,fnSelect:null,fnComplete:null,fnInit:null,fnCellRender:null};TableTools.BUTTONS={csv:a.extend({},TableTools.buttonBase,{sAction:"flash_save",sButtonClass:"DTTT_button_csv",sButtonText:"CSV",sFieldBoundary:'"',sFieldSeperator:",",fnClick:function(a,b,c){this.fnSetText(c,this.fnGetTableData(b))}}),xls:a.extend({},TableTools.buttonBase,{sAction:"flash_save",sCharSet:"utf16le",bBomInc:!0,sButtonClass:"DTTT_button_xls",sButtonText:"Excel",fnClick:function(a,b,c){this.fnSetText(c,
this.fnGetTableData(b))}}),copy:a.extend({},TableTools.buttonBase,{sAction:"flash_copy",sButtonClass:"DTTT_button_copy",sButtonText:"Copy",fnClick:function(a,b,c){this.fnSetText(c,this.fnGetTableData(b))},fnComplete:function(a,b,c,g){a=g.split("\n").length;a=null===this.s.dt.nTFoot?a-1:a-2;this.fnInfo("<h6>Table copied</h6><p>Copied "+a+" row"+(1==a?"":"s")+" to the clipboard.</p>",1500)}}),pdf:a.extend({},TableTools.buttonBase,{sAction:"flash_pdf",sNewLine:"\n",sFileName:"*.pdf",sButtonClass:"DTTT_button_pdf",
sButtonText:"PDF",sPdfOrientation:"portrait",sPdfSize:"A4",sPdfMessage:"",fnClick:function(a,b,c){this.fnSetText(c,"title:"+this.fnGetTitle(b)+"\nmessage:"+b.sPdfMessage+"\ncolWidth:"+this.fnCalcColRatios(b)+"\norientation:"+b.sPdfOrientation+"\nsize:"+b.sPdfSize+"\n--/TableToolsOpts--\n"+this.fnGetTableData(b))}}),print:a.extend({},TableTools.buttonBase,{sInfo:"<h6>Print view</h6><p>Please use your browser's print function to print this table. Press escape when finished.",sMessage:null,bShowAll:!0,
sToolTip:"View print view",sButtonClass:"DTTT_button_print",sButtonText:"Print",fnClick:function(a,b){this.fnPrint(!0,b)}}),text:a.extend({},TableTools.buttonBase),select:a.extend({},TableTools.buttonBase,{sButtonText:"Select button",fnSelect:function(b,c){0!==this.fnGetSelected().length?a(b).removeClass(this.classes.buttons.disabled):a(b).addClass(this.classes.buttons.disabled)},fnInit:function(b,c){a(b).addClass(this.classes.buttons.disabled)}}),select_single:a.extend({},TableTools.buttonBase,{sButtonText:"Select button",
fnSelect:function(b,c){1==this.fnGetSelected().length?a(b).removeClass(this.classes.buttons.disabled):a(b).addClass(this.classes.buttons.disabled)},fnInit:function(b,c){a(b).addClass(this.classes.buttons.disabled)}}),select_all:a.extend({},TableTools.buttonBase,{sButtonText:"Select all",fnClick:function(a,b){this.fnSelectAll()},fnSelect:function(b,c){this.fnGetSelected().length==this.s.dt.fnRecordsDisplay()?a(b).addClass(this.classes.buttons.disabled):a(b).removeClass(this.classes.buttons.disabled)}}),
select_none:a.extend({},TableTools.buttonBase,{sButtonText:"Deselect all",fnClick:function(a,b){this.fnSelectNone()},fnSelect:function(b,c){0!==this.fnGetSelected().length?a(b).removeClass(this.classes.buttons.disabled):a(b).addClass(this.classes.buttons.disabled)},fnInit:function(b,c){a(b).addClass(this.classes.buttons.disabled)}}),ajax:a.extend({},TableTools.buttonBase,{sAjaxUrl:"/xhr.php",sButtonText:"Ajax button",fnClick:function(b,c){var f=this.fnGetTableData(c);a.ajax({url:c.sAjaxUrl,data:[{name:"tableData",
value:f}],success:c.fnAjaxComplete,dataType:"json",type:"POST",cache:!1,error:function(){alert("Error detected when sending table data to server")}})},fnAjaxComplete:function(a){alert("Ajax complete")}}),div:a.extend({},TableTools.buttonBase,{sAction:"div",sTag:"div",sButtonClass:"DTTT_nonbutton",sButtonText:"Text button"}),collection:a.extend({},TableTools.buttonBase,{sAction:"collection",sButtonClass:"DTTT_button_collection",sButtonText:"Collection",fnClick:function(a,b){this._fnCollectionShow(a,
b)}})};TableTools.classes={container:"DTTT_container",buttons:{normal:"DTTT_button",disabled:"DTTT_disabled"},collection:{container:"DTTT_collection",background:"DTTT_collection_background",buttons:{normal:"DTTT_button",disabled:"DTTT_disabled"}},select:{table:"DTTT_selectable",row:"DTTT_selected"},print:{body:"DTTT_Print",info:"DTTT_print_info",message:"DTTT_PrintMessage"}};TableTools.classes_themeroller={container:"DTTT_container ui-buttonset ui-buttonset-multi",buttons:{normal:"DTTT_button ui-button ui-state-default"},
collection:{container:"DTTT_collection ui-buttonset ui-buttonset-multi"}};TableTools.DEFAULTS={sSwfPath:"media/swf/copy_csv_xls_pdf.swf",sRowSelect:"none",sSelectedClass:null,fnPreRowSelect:null,fnRowSelected:null,fnRowDeselected:null,aButtons:["copy","csv","xls","pdf","print"],oTags:{container:"div",button:"a",liner:"span",collection:{container:"div",button:"a",liner:"span"}}};TableTools.prototype.CLASS="TableTools";TableTools.VERSION="2.1.4";TableTools.prototype.VERSION=TableTools.VERSION;"function"==
typeof a.fn.dataTable&&"function"==typeof a.fn.dataTableExt.fnVersionCheck&&a.fn.dataTableExt.fnVersionCheck("1.9.0")?a.fn.dataTableExt.aoFeatures.push({fnInit:function(a){a=new TableTools(a.oInstance,"undefined"!=typeof a.oInit.oTableTools?a.oInit.oTableTools:{});TableTools._aInstances.push(a);return a.dom.container},cFeature:"T",sFeature:"TableTools"}):alert("Warning: TableTools 2 requires DataTables 1.9.0 or newer - www.datatables.net/download");a.fn.DataTable.TableTools=TableTools})(jQuery,window,
document);
(function(a){function c(b,c,d){var e="text_filter";d&&(e="number_filter");e=a('<input type="text" class="search_init '+e+'" value="'+l+'"/>');m.html(e);d?m.wrapInner('<span class="filter_column filter_number" />'):m.wrapInner('<span class="filter_column filter_text" />');g[h]=l;var f=h;d&&!oTable.fnSettings().oFeatures.bServerSide?e.keyup(function(){oTable.fnFilter("^"+this.value,f,!0,!1)}):e.keyup(function(){oTable.fnFilter(this.value,f,b,c)});e.focus(function(){a(this).hasClass("search_init")&&(a(this).removeClass("search_init"),
this.value="")});e.blur(function(){""==this.value&&(a(this).addClass("search_init"),this.value=g[f])})}function b(){m.html(f(0));var b="tablerange_from_"+h,c=a('<input type="text" class="number_range_filter" id="'+b+'" rel="'+h+'"/>');m.append(c);m.append(f(1));var d="tablerange_to_"+h,c=a('<input type="text" class="number_range_filter" id="'+d+'" rel="'+h+'"/>');m.append(c);m.append(f(2));m.wrapInner('<span class="filterColumn filter_number_range" />');var e=h;t.push(h);a.fn.dataTableExt.afnFiltering.push(function(a,
c,f){a=1*document.getElementById(b).value;f=1*document.getElementById(d).value;c="-"==c[e]?0:1*c[e];return""==a&&""==f||""==a&&c<f||a<c&&""==f||a<c&&c<f?!0:!1});a("#"+b+",#"+d,m).keyup(function(){var a=1*document.getElementById(b).value,c=1*document.getElementById(d).value;0!=a&&0!=c&&a>c||oTable.fnDraw()})}function d(){m.html(f(0));var b="tablerange_from_"+h,c=a('<input type="text" class="date_range_filter" id="'+b+'" rel="'+h+'"/>');c.datepicker();m.append(c);m.append(f(1));var d="tablerange_to_"+
h,e=a('<input type="text" class="date_range_filter" id="'+d+'" rel="'+h+'"/>');m.append(e);m.append(f(2));m.wrapInner('<span class="filterColumn filter_date_range" />');e.datepicker();var g=h;t.push(h);a.fn.dataTableExt.afnFiltering.push(function(b,d,f){b=c.datepicker("getDate");f=e.datepicker("getDate");d=a.datepicker.parseDate(a.datepicker.regional[""].dateFormat,d[g]);return null==d?!1:null==b&&null==f||null==b&&d<f||b<d&&null==f||b<d&&d<f?!0:!1});a("#"+b+",#"+d,m).change(function(){oTable.fnDraw()})}
function e(b){var c=h,d='<select class="search_init select_filter"><option value="" class="search_init">'+l+"</option>",e,f=b.length;for(e=0;e<f;e++)d+='<option value="'+b[e]+'">'+b[e]+"</option>";b=a(d+"</select>");m.html(b);m.wrapInner('<span class="filterColumn filter_select" />');b.change(function(){""!=a(this).val()?a(this).removeClass("search_init"):a(this).addClass("search_init");oTable.fnFilter(a(this).val(),c)})}function f(a){switch(a){case 0:return n.substring(0,n.indexOf("{from}"));case 1:return n.substring(n.indexOf("{from}")+
6,n.indexOf("{to}"));default:return n.substring(n.indexOf("{to}")+4)}}var g,h,l,m,n="From {from} to {to}",q=[],t=[];a.fn.columnFilter=function(f){oTable=this;properties=a.extend({sPlaceHolder:"foot",sRangeSeparator:"~",iFilteringDelay:500,aoColumns:null,sRangeFormat:"From {from} to {to}"},f);return this.each(function(){g=[];var f="tfoot tr";"head:after"==properties.sPlaceHolder?f="thead tr:last":"head:before"==properties.sPlaceHolder&&(a("thead tr:last").detach().prependTo("thead"),f="thead tr:first");
a(f+" th",oTable).each(function(f){h=f;f={type:"text",bRegex:!1,bSmart:!0};if(null!=properties.aoColumns){if(properties.aoColumns.length<h||null==properties.aoColumns[h])return;f=properties.aoColumns[h]}l=a(this).text();m=a(a(this)[0]);if(null!=f)switch(n=null!=f.sRangeFormat?f.sRangeFormat:properties.sRangeFormat,f.type){case "number":c(!0,!1,!0);break;case "text":bRegex=null==f.bRegex?!1:f.bRegex;bSmart=null==f.bSmart?!1:f.bSmart;c(bRegex,bSmart,!1);break;case "select":e(f.values);break;case "number-range":b();
break;case "date-range":d()}});for(j=0;j<t.length;j++){var x=t[j];q.push(function(){return a("#range_from_"+x).val()+properties.sRangeSeparator+a("#range_to_"+x).val()})}if(oTable.fnSettings().oFeatures.bServerSide){var A=oTable.fnSettings().fnServerData;oTable.fnSettings().fnServerData=function(b,c,d){for(j=0;j<t.length;j++){var e=t[j];for(k=0;k<c.length;k++)c[k].name=="sSearch_"+e&&(c[k].value=q[j]())}c.push({name:"sRangeSeparator",value:properties.sRangeSeparator});null!=A?A(b,c,d):a.getJSON(b,
c,function(a){d(a)})}}})}})(jQuery);
(function(a){a.widget("ui.dropdownchecklist",{version:function(){alert("DropDownCheckList v1.4")},_appendDropContainer:function(c){var b=a("<div/>");b.addClass("ui-dropdownchecklist ui-dropdownchecklist-dropcontainer-wrapper");b.addClass("ui-widget");b.attr("id",c.attr("id")+"-ddw");b.css({position:"absolute",left:"-33000px",top:"-33000px"});var d=a("<div/>");d.addClass("ui-dropdownchecklist-dropcontainer ui-widget-content");b.append(d);b.insertAfter(c);b.isOpen=!1;return b},_isDropDownKeyShortcut:function(c,
b){return c.altKey&&a.ui.keyCode.DOWN==b},_isDropDownCloseKey:function(c,b){return a.ui.keyCode.ESCAPE==b||a.ui.keyCode.ENTER==b},_keyFocusChange:function(c,b,d){var e=a(":focusable");c=e.index(c);0<=c&&(c+=b,d&&(d=this.dropWrapper.find("input:not([disabled])"),b=e.index(d.get(0)),d=e.index(d.get(d.length-1)),c<b?c=d:c>d&&(c=b)),e.get(c).focus())},_handleKeyboard:function(c){var b=c.keyCode||c.which;!this.dropWrapper.isOpen&&this._isDropDownKeyShortcut(c,b)?(c.stopImmediatePropagation(),this._toggleDropContainer(!0)):
this.dropWrapper.isOpen&&this._isDropDownCloseKey(c,b)?(c.stopImmediatePropagation(),this._toggleDropContainer(!1),this.controlSelector.focus()):!this.dropWrapper.isOpen||"checkbox"!=c.target.type||b!=a.ui.keyCode.DOWN&&b!=a.ui.keyCode.UP||(c.stopImmediatePropagation(),this._keyFocusChange(c.target,b==a.ui.keyCode.DOWN?1:-1,!0))},_handleFocus:function(c,b,d){d&&!this.dropWrapper.isOpen?(c.stopImmediatePropagation(),b?(this.controlSelector.addClass("ui-state-hover"),null!=a.ui.dropdownchecklist.gLastOpened&&
a.ui.dropdownchecklist.gLastOpened._toggleDropContainer(!1)):this.controlSelector.removeClass("ui-state-hover")):d||b||(null!=c&&c.stopImmediatePropagation(),this.controlSelector.removeClass("ui-state-hover"),this._toggleDropContainer(!1))},_cancelBlur:function(a){null!=this.blurringItem&&(clearTimeout(this.blurringItem),this.blurringItem=null)},_appendControl:function(){var c=this,b=this.sourceSelect,d=this.options,e=a("<span/>");e.addClass("ui-dropdownchecklist ui-dropdownchecklist-selector-wrapper ui-widget");
e.css({display:"inline-block",cursor:"default",overflow:"hidden"});var f=b.attr("id"),f=null==f||""==f?"ddcl-"+a.ui.dropdownchecklist.gIDCounter++:"ddcl-"+f;e.attr("id",f);var g=a("<span/>");g.addClass("ui-dropdownchecklist-selector ui-state-default");g.css({display:"inline-block",overflow:"hidden","white-space":"nowrap"});f=b.attr("tabIndex");null==f?f=0:(f=parseInt(f),0>f&&(f=0));g.attr("tabIndex",f);g.keyup(function(a){c._handleKeyboard(a)});g.focus(function(a){c._handleFocus(a,!0,!0)});g.blur(function(a){c._handleFocus(a,
!1,!0)});e.append(g);if(null!=d.icon){var f=null==d.icon.placement?"left":d.icon.placement,h=a("<div/>");h.addClass("ui-icon");h.addClass(null!=d.icon.toOpen?d.icon.toOpen:"ui-icon-triangle-1-e");h.css({"float":f});g.append(h)}d=a("<span/>");d.addClass("ui-dropdownchecklist-text");d.css({display:"inline-block","white-space":"nowrap",overflow:"hidden"});g.append(d);e.hover(function(){c.disabled||g.addClass("ui-state-hover")},function(){c.disabled||g.removeClass("ui-state-hover")});e.click(function(a){c.disabled||
(a.stopImmediatePropagation(),c._toggleDropContainer(!c.dropWrapper.isOpen))});e.insertAfter(b);a(window).resize(function(){!c.disabled&&c.dropWrapper.isOpen&&c._toggleDropContainer(!0)});return e},_createDropItem:function(c,b,d,e,f,g,h,l){var m=this,n=this.options,q=this.sourceSelect,t=this.controlWrapper,x=a("<div/>");x.addClass("ui-dropdownchecklist-item");x.css({"white-space":"nowrap"});g=g?' checked="checked"':"";var u=h?' class="inactive"':' class="active"',E=t.attr("id"),t=E+"-i"+c;b=m.isMultiple?
a('<input disabled type="checkbox" id="'+t+'"'+g+u+' tabindex="'+b+'" />'):a('<input disabled type="radio" id="'+t+'" name="'+E+'"'+g+u+' tabindex="'+b+'" />');b=b.attr("index",c).val(d);x.append(b);c=a("<label for="+t+"/>");c.addClass("ui-dropdownchecklist-text");null!=f&&c.attr("style",f);c.css({cursor:"default"});c.html(e);l&&x.addClass("ui-dropdownchecklist-indent");x.addClass("ui-state-default");h&&x.addClass("ui-state-disabled");c.click(function(a){a.stopImmediatePropagation()});x.append(c);
x.hover(function(b){b=a(this);b.hasClass("ui-state-disabled")||b.addClass("ui-state-hover")},function(b){a(this).removeClass("ui-state-hover")});b.click(function(b){var c=a(this);b.stopImmediatePropagation();if(c.hasClass("active")){b=m.options.onItemClick;if(a.isFunction(b))try{b.call(m,c,q.get(0))}catch(d){c.prop("checked",!c.prop("checked"));m._syncSelected(c);return}m._syncSelected(c);m.sourceSelect.trigger("change","ddcl_internal");!m.isMultiple&&n.closeRadioOnClick&&m._toggleDropContainer(!1)}});
x.click(function(b){var c=a(this);b.stopImmediatePropagation();if(c.hasClass("ui-state-disabled"))c.focus(),m._cancelBlur();else{b=c.find("input");c=b.prop("checked");b.prop("checked",!c);var d=m.options.onItemClick;if(a.isFunction(d))try{d.call(m,b,q.get(0))}catch(e){b.prop("checked",c);m._syncSelected(b);return}m._syncSelected(b);m.sourceSelect.trigger("change","ddcl_internal");c||m.isMultiple||!n.closeRadioOnClick||m._toggleDropContainer(!1)}});x.focus(function(b){a(this);b.stopImmediatePropagation()});
x.keyup(function(a){m._handleKeyboard(a)});return x},_createGroupItem:function(c,b){var d=this,e=a("<div />");e.addClass("ui-dropdownchecklist-group ui-widget-header");b&&e.addClass("ui-state-disabled");e.css({"white-space":"nowrap"});var f=a("<span/>");f.addClass("ui-dropdownchecklist-text");f.css({cursor:"default"});f.text(c);e.append(f);e.click(function(b){var c=a(this);b.stopImmediatePropagation();c.focus();d._cancelBlur()});e.focus(function(b){a(this);b.stopImmediatePropagation()});return e},
_createCloseItem:function(c){var b=this,d=a("<div />");d.addClass("ui-state-default ui-dropdownchecklist-close ui-dropdownchecklist-item");d.css({"white-space":"nowrap","text-align":"right"});var e=a("<span/>");e.addClass("ui-dropdownchecklist-text");e.css({cursor:"default"});e.html(c);d.append(e);d.click(function(c){var d=a(this);c.stopImmediatePropagation();d.focus();b._toggleDropContainer(!1)});d.hover(function(b){a(this).addClass("ui-state-hover")},function(b){a(this).removeClass("ui-state-hover")});
d.focus(function(b){a(this);b.stopImmediatePropagation()});return d},_appendItems:function(){var c=this,b=this.options,d=this.sourceSelect,e=this.dropWrapper.find(".ui-dropdownchecklist-dropcontainer");d.children().each(function(b){var d=a(this);if(d.is("option"))c._appendOption(d,e,b,!1,!1);else if(d.is("optgroup")){var h=d.prop("disabled"),l=d.attr("label");""!=l&&(l=c._createGroupItem(l,h),e.append(l));c._appendOptions(d,e,b,!0,h)}});null!=b.explicitClose&&(b=c._createCloseItem(b.explicitClose),
e.append(b));b=e.outerWidth();d=e.outerHeight();return{width:b,height:d}},_appendOptions:function(c,b,d,e,f){var g=this;c.children("option").each(function(c){var l=a(this);g._appendOption(l,b,d+"."+c,e,f)})},_appendOption:function(a,b,d,e,f){var g=a.html();if(null!=g&&""!=g){var h=a.val(),l=a.attr("style"),m=a.prop("selected");a=f||a.prop("disabled");f=this.controlSelector.attr("tabindex");d=this._createDropItem(d,f,h,g,l,m,a,e);b.append(d)}},_syncSelected:function(c){var b=this.options,d=this.dropWrapper,
e=this.sourceSelect.get(0).options,f=d.find("input.active");if("exclusive"==b.firstItemChecksAll)if(null==c&&a(e[0]).prop("selected"))f.prop("checked",!1),a(f[0]).prop("checked",!0);else if(null!=c&&0==c.attr("index"))b=c.prop("checked"),f.prop("checked",!1),a(f[0]).prop("checked",b);else{var g=!0,h=null;f.each(function(b){0<b?a(this).prop("checked")||(g=!1):h=a(this)});null!=h&&(g&&f.prop("checked",!1),h.prop("checked",g))}else b.firstItemChecksAll&&(null==c&&a(e[0]).prop("selected")?f.prop("checked",
!0):null!=c&&0==c.attr("index")?f.prop("checked",c.prop("checked")):(g=!0,h=null,f.each(function(b){0<b?a(this).prop("checked")||(g=!1):h=a(this)}),null!=h&&h.prop("checked",g)));var l=0,f=d.find("input");f.each(function(b){var c=a(e[b+l]),d=c.html();if(null==d||""==d)l+=1,c=a(e[b+l]);c.prop("selected",a(this).prop("checked"))});this._updateControlText();null!=c&&c.focus()},_sourceSelectChangeHandler:function(a){this.dropWrapper.find("input").val(this.sourceSelect.val());this._updateControlText()},
_updateControlText:function(){var a=this.sourceSelect,b=this.options,d=this.controlWrapper,e=a.find("option:first"),a=a.find("option"),b=this._formatText(a,b.firstItemChecksAll,e),d=d.find(".ui-dropdownchecklist-text");d.html(b);d.attr("title",d.text())},_formatText:function(c,b,d){var e;if(a.isFunction(this.options.textFormatFunction))try{e=this.options.textFormatFunction(c)}catch(f){alert("textFormatFunction failed: "+f)}else b&&null!=d&&d.prop("selected")?e=d.html():(e="",c.each(function(){if(a(this).prop("selected")){""!=
e&&(e+=", ");var b=a(this).attr("style"),c=a("<span/>");c.html(a(this).html());null==b?e+=c.html():(c.attr("style",b),e+=a("<span/>").append(c).html())}}),""==e&&(e=null!=this.options.emptyText?this.options.emptyText:"&nbsp;"));return e},_toggleDropContainer:function(c){var b=function(c){if(null!=c&&c.dropWrapper.isOpen){c.dropWrapper.isOpen=!1;a.ui.dropdownchecklist.gLastOpened=null;var d=c.options;c.dropWrapper.css({top:"-33000px",left:"-33000px"});var g=c.controlSelector;g.removeClass("ui-state-active");
g.removeClass("ui-state-hover");g=c.controlWrapper.find(".ui-icon");0<g.length&&(g.removeClass(null!=d.icon.toClose?d.icon.toClose:"ui-icon-triangle-1-s"),g.addClass(null!=d.icon.toOpen?d.icon.toOpen:"ui-icon-triangle-1-e"));a(document).unbind("click",b);c.dropWrapper.find("input.active").prop("disabled",!0);if(a.isFunction(d.onComplete))try{d.onComplete.call(c,c.sourceSelect.get(0))}catch(h){alert("callback failed: "+h)}}},d=function(c){if(!c.dropWrapper.isOpen){c.dropWrapper.isOpen=!0;a.ui.dropdownchecklist.gLastOpened=
c;var d=c.options;null==d.positionHow||"absolute"==d.positionHow?c.dropWrapper.css({position:"absolute",top:c.controlWrapper.position().top+c.controlWrapper.outerHeight()+"px",left:c.controlWrapper.position().left+"px"}):"relative"==d.positionHow&&c.dropWrapper.css({position:"relative",top:"0px",left:"0px"});var g=0;if(null==d.zIndex){var h=c.controlWrapper.parents().map(function(){var b=a(this).css("z-index");return isNaN(b)?0:b}).get(),h=Math.max.apply(Math,h);0<=h&&(g=h+1)}else g=parseInt(d.zIndex);
0<g&&c.dropWrapper.css({"z-index":g});g=c.controlSelector;g.addClass("ui-state-active");g.removeClass("ui-state-hover");g=c.controlWrapper.find(".ui-icon");0<g.length&&(g.removeClass(null!=d.icon.toOpen?d.icon.toOpen:"ui-icon-triangle-1-e"),g.addClass(null!=d.icon.toClose?d.icon.toClose:"ui-icon-triangle-1-s"));a(document).bind("click",function(a){b(c)});d=c.dropWrapper.find("input.active");d.prop("disabled",!1);d=d.get(0);null!=d&&d.focus()}};c?(b(a.ui.dropdownchecklist.gLastOpened),d(this)):b(this)},
_setSize:function(a){var b=this.options,d=this.controlWrapper;a=a.width;null!=b.width?a=parseInt(b.width):null!=b.minWidth&&(b=parseInt(b.minWidth),a<b&&(a=b));var e=this.controlSelector;e.css({width:a+"px"});b=e.find(".ui-dropdownchecklist-text");e=e.find(".ui-icon");null!=e&&(a-=e.outerWidth()+4,b.css({width:a+"px"}));d.outerWidth()},_init:function(){var c=this,b=this.options;null==a.ui.dropdownchecklist.gIDCounter&&(a.ui.dropdownchecklist.gIDCounter=1);c.blurringItem=null;var d=c.element;c.initialDisplay=
d.css("display");d.css("display","none");c.initialMultiple=d.prop("multiple");c.isMultiple=c.initialMultiple;null!=b.forceMultiple&&(c.isMultiple=b.forceMultiple);d.prop("multiple",!0);c.sourceSelect=d;var e=c._appendControl();c.controlWrapper=e;c.controlSelector=e.find(".ui-dropdownchecklist-selector");var f=c._appendDropContainer(e);c.dropWrapper=f;var g=c._appendItems();c._updateControlText(e,f,d);c._setSize(g);b.firstItemChecksAll&&c._syncSelected(null);b.bgiframe&&"function"==typeof c.dropWrapper.bgiframe&&
c.dropWrapper.bgiframe();c.sourceSelect.change(function(a,b){"ddcl_internal"!=b&&c._sourceSelectChangeHandler(a)})},_refreshOption:function(a,b,d){var e=a.parent();b?(a.prop("disabled",!0),a.removeClass("active"),a.addClass("inactive"),e.addClass("ui-state-disabled")):(a.prop("disabled",!1),a.removeClass("inactive"),a.addClass("active"),e.removeClass("ui-state-disabled"));a.prop("checked",d)},_refreshGroup:function(a,b){b?a.addClass("ui-state-disabled"):a.removeClass("ui-state-disabled")},close:function(){this._toggleDropContainer(!1)},
refresh:function(){var c=this,b=this.sourceSelect,d=this.dropWrapper,e=d.find("input"),f=d.find(".ui-dropdownchecklist-group"),g=0,h=0;b.children().each(function(b){b=a(this);var d=b.prop("disabled");if(b.is("option")){b=b.prop("selected");var n=a(e[h]);c._refreshOption(n,d,b);h+=1}else b.is("optgroup")&&(""!=b.attr("label")&&(n=a(f[g]),c._refreshGroup(n,d),g+=1),b.children("option").each(function(){var b=a(this),f=d||b.prop("disabled"),b=b.prop("selected"),g=a(e[h]);c._refreshOption(g,f,b);h+=1}))});
c._syncSelected(null)},enable:function(){this.controlSelector.removeClass("ui-state-disabled");this.disabled=!1},disable:function(){this.controlSelector.addClass("ui-state-disabled");this.disabled=!0},destroy:function(){a.Widget.prototype.destroy.apply(this,arguments);this.sourceSelect.css("display",this.initialDisplay);this.sourceSelect.prop("multiple",this.initialMultiple);this.controlWrapper.unbind().remove();this.dropWrapper.remove()}});a.extend(a.ui.dropdownchecklist,{defaults:{width:null,maxDropHeight:null,
firstItemChecksAll:!1,closeRadioOnClick:!1,minWidth:50,positionHow:"absolute",bgiframe:!1,explicitClose:null}})})(jQuery);
var caja=function(){function a(a){return function(b,c,d){if(b){var e="caja_ajax_"+G++;window[e]=function(a){try{d(a)}finally{window[e]=void 0}};x(e,(a?String(a):O.server)+"/cajole?url="+encodeURIComponent(b.toString())+"&input-mime-type="+encodeURIComponent(c)+"&transform=PROXY&callback="+encodeURIComponent(e)+"&alt=json-in-script")}else d(void 0)}}function c(a){return function(){F&&F.console[a].apply(F.console,arguments)}}function b(){throw Error("Calling taming function before Caja is ready");}
function d(a,c,d){if("UNREADY"!==D)throw Error("Caja cannot be initialized more than once");D="PENDING";f(a,function(a,d){A=a;O.iframe=a.iframe;O.USELESS=a.USELESS;for(var f in O)O[f]===b&&(O[f]=a[f]);a.disableSecurityForDebugger(N);D="READY";f={};f.es5Mode=d;"function"===typeof c&&c(f);e(null)},function(a){D="UNREADY";d(a)})}function e(a){"function"===typeof a&&H.push(a);if("READY"===D){for(a=0;a<H.length;a++)setTimeout(H[a],0);H=[]}}function f(a,b,c){h(window);F=a=g(a);O.server=a.server;!1===a.es5Mode||
!0!==a.es5Mode&&!Object.getOwnPropertyNames?l(a,b,c):m(a,b,c)}function g(a){a=a||{};var b={};b.server=String(a.server||a.cajaServer||"https://caja.appspot.com/");b.resources=String(a.resources||b.server);b.debug=!!a.debug;if("forceES5Mode"in a&&"es5Mode"in a)throw Error("Cannot use both forceES5Mode and es5Mode in the same config");if(void 0!==a.forceES5Mode)b.es5Mode=!!a.forceES5Mode,b.maxAcceptableSeverity="NOT_ISOLATED";else{b.es5Mode=void 0===a.es5Mode?"GUESS":!!a.es5Mode;var c=String(a.maxAcceptableSeverity||
"SAFE_SPEC_VIOLATION");"NO_KNOWN_EXPLOIT_SPEC_VIOLATION"===c&&(c="SAFE_SPEC_VIOLATION",b.acceptNoKnownExploitProblems=!0);b.maxAcceptableSeverity=c}b.console=a.console?a.console:a.log?{log:a.log,warn:a.log,error:a.log,info:a.log}:window.console&&"function"===typeof window.console.log?window.console:{log:function(){},warn:function(){},error:function(){},info:function(){}};if(a.targetAttributePresets){if(!a.targetAttributePresets["default"])throw"targetAttributePresets must contain a default";if(!a.targetAttributePresets.whitelist)throw"targetAttributePresets must contain a whitelist";
if(0===a.targetAttributePresets.whitelist.length)throw"targetAttributePresets.whitelist array must be nonempty";b.targetAttributePresets=a.targetAttributePresets}"object"===typeof a.cajolingServiceClient&&(b.cajolingServiceClient=a.cajolingServiceClient);return b}function h(a){a.Object.FERAL_FRAME_OBJECT___!==a.Object&&(a.___={},a.Object.FERAL_FRAME_OBJECT___=a.Object)}function l(a,b,c){var d=n(a,"es53-guest-frame");q(a,"es53-taming-frame",function(c){c=c.ES53FrameGroup(pa,a,c,window,d);b(c,!1)})}
function m(a,b,c){var d=n(a,"ses-single-frame",function(b){b=b.ses||(b.ses={});b.maxAcceptableSeverityName=a.maxAcceptableSeverity;a.acceptNoKnownExploitProblems&&(b.acceptableProblems={DEFINING_READ_ONLY_PROTO_FAILS_SILENTLY:{permit:!0},PUSH_IGNORES_SEALED:{permit:!0,doNotRepair:!0},UNSHIFT_IGNORES_SEALED:{permit:!0},SPLICE_IGNORES_SEALED:{permit:!0},SHIFT_IGNORES_SEALED:{permit:!0},PUSH_DOES_NOT_THROW_ON_FROZEN_ARRAY:{permit:!0,doNotRepair:!0},ARRAYS_DELETE_NONCONFIGURABLE:{permit:!0},ARRAYS_MODIFY_READONLY:{permit:!0},
FREEZE_IS_FRAME_DEPENDENT:{permit:!0},SYNTAX_ERRORS_ARENT_ALWAYS_EARLY:{permit:!0},NESTED_STRICT_FUNCTIONS_LEAK:{permit:!0}});b.mitigateSrcGotchas=function(){throw new EvalError("This function is a placeholder that should have been replaced by the real ses.mitigateSrcGotchas.");}});q(a,"utility-frame",function(e){var f=e.ses.mitigateSrcGotchas;d.make(function(d){var e=!0===a.es5Mode;if(d.ses.ok())d=d.SESFrameGroup(pa,a,d,window,{mitigateSrcGotchas:f}),b(d,!0);else if(e)if(d=Error("ES5 mode requested but browser is unsupported"),
"function"===typeof c)c(d);else throw d;else a.console.log("Unable to use SES.  Switching to ES53."),l(a,b,c)})})}function n(a,b,c){function d(){if("WAITING"===e&&f){var a=f,b=g;e="IDLE";g=f=null;b(a)}}var e="IDLE",f,g,h={preload:function(){"IDLE"===e&&(e="LOADING",f=null,q(a,b,function(a){f=a;d()},c))},make:function(f){"LOADING"===e?(e="WAITING",g=f,d()):q(a,b,f,c)}};h.preload();return h}function q(a,b,c,d){var e=t(b),f=u(a.resources,"5707/"+b+(a.debug?".js?debug=1":".opt.js?debug=1"));setTimeout(function(){e.cajaIframeDone___=
function(){if("5707"!==e.cajaBuildVersion){var d="Version error: caja.js version 5707 does not match "+b+" version "+e.cajaBuildVersion+".",f="5707".split(/[mM]/)[0],g=String(e.cajaBuildVersion).split(/[mM]/)[0];if(f===g)a.console.log(d+"  Continuing because major versions match.");else throw a.console.log(d),Error(d);}c(e)};d&&d(e);setTimeout(function(){var a=e.document,b=a.createElement("script");b.setAttribute("type","text/javascript");b.src=f;a.body.appendChild(b)},0)},0)}function t(a){var b=
document.createElement("iframe");b.style.display="none";b.width=0;b.height=0;b.className=a||"";a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a);return b.contentWindow}function x(a,b){M||(M=t("loader-frame").document);var c=""+'<script>var $name = parent.window["$name"];\x3c/script>'.replace(/[$]name/g,a)+'<script type="text/javascript" src="$url">\x3c/script>'.replace(/[$]url/g,(""+b).replace(/&/g,"&amp;").replace(/[<]/g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&#34;"));
M.write(c)}function u(a,b){a=a.replace(/\/+$/,"");b=b.replace(/^\/+/,"");return a+"/"+b}function E(a,b,c){if(typeof a!==b)throw new TypeError("expected "+b+" instead of "+typeof a+": "+(c||a));return a}var A,H=[],I=[],y=0,D="UNREADY",F=void 0,G=1,N=!1,M,P={net:{rewriter:{NO_NETWORK:function(){return null},ALL:function(a){return String(a)}},fetcher:{USE_XHR:function(a,b,c){var d=new XMLHttpRequest;d.open("GET",a.toString(),!0);d.overrideMimeType(b);d.onreadystatechange=function(){4==d.readyState&&
c({html:d.responseText})};d.send()},USE_AS_PROXY:a},NO_NETWORK:{rewrite:function(){return null},fetch:function(a,b,c){setTimeout(function(){c({})},0)}},ALL:{rewrite:function(a){return String(a)},fetch:a(void 0)},only:function(a){a=String(a);return{rewrite:function(b){b=String(b);return b===a?b:null}}}},ATTRIBUTETYPES:void 0,LOADERTYPES:void 0,URIEFFECTS:void 0},O={initialize:d,load:function(a,b,c,f){b=b||O.policy.net.NO_NETWORK;"UNREADY"===D&&d({});e(function(){A.makeES5Frame(a,b,c,f)})},whenReady:e,
policy:P,iframe:null,USELESS:void 0,tame:b,tamesTo:b,reTamesTo:b,untame:b,unwrapDom:b,markReadOnlyRecord:b,markFunction:b,markCtor:b,markXo4a:b,grantMethod:b,grantRead:b,grantReadWrite:b,adviseFunctionBefore:b,adviseFunctionAfter:b,adviseFunctionAround:b,makeDefensibleObject___:b,makeDefensibleFunction___:b,initFeralFrame:h,makeFrameGroup:f,configure:f,disableSecurityForDebugger:function(a){N=!!a;A&&A.disableSecurityForDebugger(a)},Q:b,console:{error:c("error"),info:c("info"),log:c("log"),warn:c("warn")},
testing_makeDomadoRuleBreaker:b,closureCanary:1},pa={documentBaseUrl:function(){var a=document.getElementsByTagName("base");if(0==a.length)return document.location.toString();if(1==a.length){a=a[0].href;if("string"!==typeof a)throw Error("Caja loader error: <base> without a href.");return a}throw Error("Caja loader error: document contains multiple <base>.");},getId:function(a){E(a,"object","imports");var b;b="id___"in a?E(a.id___,"number","id"):a.id___=I.length;I[b]=a;return b},getImports:function(a){var b=
I[E(a,"number","id")];if(void 0===b)throw Error("Internal: imports#",a," unregistered");return b},joinUrl:u,loadCajaFrame:q,prepareContainerDiv:function(a,b,c){b=(c=c||{},c.idClass)||"caja-guest-"+y++ +"___";a&&9===a.nodeType&&(O.console.warn("Warning: Using a document, rather than an element, as a Caja virtual document container is an experimental feature and may not operate correctly or support all features."),h(a.defaultView));return{idClass:b,opt_div:a}},unregister:function(a){E(a,"object","imports");
"id___"in a&&(a=E(a.id___,"number","id"),I[a]=void 0)},readPropertyAsHostFrame:function(a,b){return a[b]}};return O}();"undefined"!==typeof window&&(window.caja=caja);(function(a,c,b,d,e,f,g){a.GoogleAnalyticsObject=e;a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)};a[e].l=1*new Date;f=c.createElement(b);g=c.getElementsByTagName(b)[0];f.async=1;f.src=d;g.parentNode.insertBefore(f,g)})(window,document,"script","//www.google-analytics.com/analytics.js","ga");ga("create","UA-40113910-1","umd.edu");
ga("send","pageview");
!function(){function a(a){return null!=a&&!isNaN(a)}function c(a){return a.length}function b(a,b){try{for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}catch(d){a.prototype=b}}function d(){}function e(a){return ud+a in this}function f(){var a=[];this.forEach(function(b){a.push(b)});return a}function g(){var a=0,b;for(b in this)b.charCodeAt(0)===we&&++a;return a}function h(){for(var a in this)if(a.charCodeAt(0)===we)return!1;return!0}function l(){}function m(a,b,c){return function(){var d=
c.apply(b,arguments);return d===b?a:d}}function n(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.substring(1);for(var c=0,d=rg.length;c<d;++c){var e=rg[c]+b;if(e in a)return e}}function q(){}function t(){}function x(a){function b(){for(var d=c,e=-1,f=d.length,r;++e<f;)(r=d[e].on)&&r.apply(this,arguments);return a}var c=[],e=new d;b.on=function(b,d){var f=e.get(b),r;if(2>arguments.length)return f&&f.on;f&&(f.on=null,c=c.slice(0,r=c.indexOf(f)).concat(c.slice(r+1)),e.remove(b));d&&c.push(e.set(b,
{on:d}));return a};return b}function u(){z.event.preventDefault()}function E(){for(var a=z.event,b;b=a.sourceEvent;)a=b;return a}function A(a){for(var b=new t,c=0,d=arguments.length;++c<d;)b[arguments[c]]=x(b);b.of=function(c,d){return function(e){try{var f=e.sourceEvent=z.event;e.target=a;z.event=e;b[e.type].apply(c,d)}finally{z.event=f}}};return b}function H(a){xe(a,za);return a}function I(a){return"function"===typeof a?a:function(){return Qf(a,this)}}function y(a){return"function"===typeof a?a:
function(){return wd(a,this)}}function D(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function r(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}a=z.ns.qualify(a);return null==b?a.local?d:c:"function"===
typeof b?a.local?g:r:a.local?f:e}function F(a){return a.trim().replace(/\s+/g," ")}function G(a){return new RegExp("(?:^|\\s+)"+z.requote(a)+"(?:\\s+|$)","g")}function N(a,b){function c(){for(var d=-1;++d<e;)a[d](this,b)}function d(){for(var c=-1,f=b.apply(this,arguments);++c<e;)a[c](this,f)}a=a.trim().split(/^|\s+/).map(M);var e=a.length;return"function"===typeof b?d:c}function M(a){var b=G(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?
(b.lastIndex=0,b.test(e)||c.setAttribute("class",F(e+" "+a))):c.setAttribute("class",F(e.replace(b," ")))}}function P(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"===typeof b?f:e}function O(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=
c}return null==b?c:"function"===typeof b?e:d}function pa(a){return"function"===typeof a?a:(a=z.ns.qualify(a)).local?function(){return this.ownerDocument.createElementNS(a.space,a.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,a)}}function ka(a){return function(){return cf(this,a)}}function Ca(a){arguments.length||(a=z.ascending);return function(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}}function ra(a,b){for(var c=0,d=a.length;c<d;c++)for(var e=a[c],f=0,r=e.length,
g;f<r;f++)(g=e[f])&&b(g,f,c);return a}function aa(a){xe(a,yc);return a}function wa(a){var b,c;return function(d,e,f){d=a[f].update;var r=d.length;f!=c&&(c=f,b=0);for(e>=b&&(b=e+1);!(e=d[b])&&++b<r;);return e}}function va(){var a=this.__transition__;a&&++a.active}function sa(a,b,c){function d(){var b=this[r];b&&(this.removeEventListener(a,b,b.$),delete this[r])}function e(){var f=h(b,zc(arguments));d.call(this);this.addEventListener(a,this[r]=f,f.$=c);f._=b}function f(){var b=new RegExp("^__on([^.]+)"+
z.requote(a)+"$"),c,d;for(d in this)if(c=d.match(b)){var e=this[d];this.removeEventListener(c[1],e,e.$);delete this[d]}}var r="__on"+a,g=a.indexOf("."),h=qa;0<g&&(a=a.substring(0,g));var v=Ac.get(a);v&&(a=v,h=na);return g?b?e:d:b?q:f}function qa(a,b){return function(c){var d=z.event;z.event=c;b[0]=this.__data__;try{a.apply(this,b)}finally{z.event=d}}}function na(a,b){var c=qa(a,b);return function(a){var b=a.relatedTarget;b&&(b===this||b.compareDocumentPosition(this)&8)||c.call(this,a)}}function Q(){var a=
".dragsuppress-"+ ++ah,b="click"+a,c=z.select(Ha).on("touchmove"+a,u).on("dragstart"+a,u).on("selectstart"+a,u);if(Uc){var d=Ob.style,e=d[Uc];d[Uc]="none"}return function(f){c.on(a,null);Uc&&(d[Uc]=e);if(f){var r=function(){c.on(b,null)};c.on(b,function(){u();r()},!0);setTimeout(r,0)}}}function da(a,b){b.changedTouches&&(b=b.changedTouches[0]);var c=a.ownerSVGElement||a;if(c.createSVGPoint){var d=c.createSVGPoint();if(0>r&&(Ha.scrollX||Ha.scrollY)){var c=z.select("body").append("svg").style({position:"absolute",
top:0,left:0,margin:0,padding:0,border:"none"},"important"),e=c[0][0].getScreenCTM();r=!(e.f||e.e);c.remove()}r?(d.x=b.pageX,d.y=b.pageY):(d.x=b.clientX,d.y=b.clientY);d=d.matrixTransform(a.getScreenCTM().inverse());return[d.x,d.y]}c=a.getBoundingClientRect();return[b.clientX-c.left-a.clientLeft,b.clientY-c.top-a.clientTop]}function nb(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function ib(a){return 1<a?0:-1>a?v:Math.acos(a)}function Ga(a){return 1<a?J:-1>a?-J:Math.asin(a)}function ta(a){return((a=
Math.exp(a))+1/a)/2}function Da(a){return(a=Math.sin(a/2))*a}function bb(){}function ca(a,b,c){return new ob(a,b,c)}function ob(a,b,c){this.h=a;this.s=b;this.l=c}function tb(a,b,c){function d(a){360<a?a-=360:0>a&&(a+=360);return 60>a?e+(f-e)*a/60:180>a?f:240>a?e+(f-e)*(240-a)/60:e}var e,f;a=isNaN(a)?0:0>(a%=360)?a+360:a;b=isNaN(b)?0:0>b?0:1<b?1:b;c=0>c?0:1<c?1:c;f=.5>=c?c*(1+b):c+b-c*b;e=2*c-f;return Ia(Math.round(255*d(a+120)),Math.round(255*d(a)),Math.round(255*d(a-120)))}function p(a,b,c){return new lb(a,
b,c)}function lb(a,b,c){this.h=a;this.c=b;this.l=c}function Jb(a,b,c){isNaN(a)&&(a=0);isNaN(b)&&(b=0);return Pa(c,Math.cos(a*=B)*b,Math.sin(a)*b)}function Pa(a,b,c){return new Eb(a,b,c)}function Eb(a,b,c){this.l=a;this.a=b;this.b=c}function Ra(a,b,c){a=(a+16)/116;c=a-c/200;b=vb(a+b/500)*ph;a=vb(a)*qh;c=vb(c)*rh;return Ia(Ab(3.2404542*b-1.5371385*a-.4985314*c),Ab(-.969266*b+1.8760108*a+.041556*c),Ab(.0556434*b-.2040259*a+1.0572252*c))}function ub(a,b,c){return 0<a?p(Math.atan2(c,b)*L,Math.sqrt(b*b+
c*c),a):p(NaN,NaN,a)}function vb(a){return.206893034<a?a*a*a:(a-4/29)/7.787037}function Kb(a){return.008856<a?Math.pow(a,1/3):7.787037*a+4/29}function Ab(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function wb(a){return Ia(a>>16,a>>8&255,a&255)+""}function Ia(a,b,c){return new Lb(a,b,c)}function Lb(a,b,c){this.r=a;this.g=b;this.b=c}function Ya(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function Qb(a,b,c){var d=0,e=0,f=0,r,g;if(r=/([a-z]+)\((.*)\)/i.exec(a))switch(g=
r[2].split(","),r[1]){case "hsl":return c(parseFloat(g[0]),parseFloat(g[1])/100,parseFloat(g[2])/100);case "rgb":return b(fb(g[0]),fb(g[1]),fb(g[2]))}if(c=sg.get(a))return b(c.r,c.g,c.b);null!=a&&"#"===a.charAt(0)&&(4===a.length?(d=a.charAt(1),d+=d,e=a.charAt(2),e+=e,f=a.charAt(3),f+=f):7===a.length&&(d=a.substring(1,3),e=a.substring(3,5),f=a.substring(5,7)),d=parseInt(d,16),e=parseInt(e,16),f=parseInt(f,16));return b(d,e,f)}function Za(a,b,c){var d=Math.min(a/=255,b/=255,c/=255),e=Math.max(a,b,c),
f=e-d,r=(e+d)/2;f?(d=.5>r?f/(e+d):f/(2-e-d),a=60*(a==e?(b-c)/f+(b<c?6:0):b==e?(c-a)/f+2:(a-b)/f+4)):(a=NaN,d=0<r&&1>r?0:a);return ca(a,d,r)}function eb(a,b,c){a=gb(a);b=gb(b);c=gb(c);var d=Kb((.4124564*a+.3575761*b+.1804375*c)/ph),e=Kb((.2126729*a+.7151522*b+.072175*c)/qh);a=Kb((.0193339*a+.119192*b+.9503041*c)/rh);return Pa(116*e-16,500*(d-e),200*(e-a))}function gb(a){return.04045>=(a/=255)?a/12.92:Math.pow((a+.055)/1.055,2.4)}function fb(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*
b):b}function fa(a){return"function"===typeof a?a:function(){return a}}function Ba(a){return a}function pb(a){return function(b,c,d){2===arguments.length&&"function"===typeof c&&(d=c,c=null);return xb(b,c,a,d)}}function xb(a,b,c,d){function e(){var a=h.status,b;if(!a&&h.responseText||200<=a&&300>a||304===a){try{b=c.call(f,h)}catch(d){r.error.call(f,d);return}r.load.call(f,b)}else r.error.call(f,h)}var f={},r=z.dispatch("beforesend","progress","load","error"),g={},h=new XMLHttpRequest,v=null;!Ha.XDomainRequest||
"withCredentials"in h||!/^(http(s)?:)?\/\//.test(a)||(h=new XDomainRequest);"onload"in h?h.onload=h.onerror=e:h.onreadystatechange=function(){3<h.readyState&&e()};h.onprogress=function(a){var b=z.event;z.event=a;try{r.progress.call(f,h)}finally{z.event=b}};f.header=function(a,b){a=(a+"").toLowerCase();if(2>arguments.length)return g[a];null==b?delete g[a]:g[a]=b+"";return f};f.mimeType=function(a){if(!arguments.length)return b;b=null==a?null:a+"";return f};f.responseType=function(a){if(!arguments.length)return v;
v=a;return f};f.response=function(a){c=a;return f};["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(zc(arguments)))}});f.send=function(c,d,e){2===arguments.length&&"function"===typeof d&&(e=d,d=null);h.open(c,a,!0);null==b||"accept"in g||(g.accept=b+",*/*");if(h.setRequestHeader)for(var l in g)h.setRequestHeader(l,g[l]);null!=b&&h.overrideMimeType&&h.overrideMimeType(b);null!=v&&(h.responseType=v);if(null!=e)f.on("error",e).on("load",function(a){e(null,a)});r.beforesend.call(f,
h);h.send(null==d?null:d);return f};f.abort=function(){h.abort();return f};z.rebind(f,r,"on");return null==d?f:f.get(Rb(d))}function Rb(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function ea(){var a=Sb(),a=Ua()-a;24<a?(isFinite(a)&&(clearTimeout(tg),tg=setTimeout(ea,a)),ug=0):(ug=1,sh(ea))}function Sb(){var a=Date.now();for(xd=vg;xd;)a>=xd.t&&(xd.f=xd.c(a-xd.t)),xd=xd.n;return a}function Ua(){for(var a,b=vg,c=Infinity;b;)b.f?b=a?a.n=b.n:vg=b.n:(b.t<c&&(c=b.t),b=(a=b).n);wg=a;return c}
function $a(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function cb(a){var b=a.decimal,c=a.thousands,d=a.grouping,e=a.currency,f=d?function(a){for(var b=a.length,e=[],f=0,r=d[0];0<b&&0<r;)e.push(a.substring(b-=r,b+r)),r=d[f=(f+1)%d.length];return e.reverse().join(c)}:Ba;return function(a){a=th.exec(a);var c=a[1]||" ",d=a[2]||">",r=a[3]||"",g=a[4]||"",W=a[5],h=+a[6],v=a[7],l=a[8],w=a[9],m=1,Nb="",B="",J=!1;l&&(l=+l.substring(1));if(W||"0"===c&&"="===d)W=c="0",d="=",v&&(h-=Math.floor((h-1)/
4));switch(w){case "n":v=!0;w="g";break;case "%":m=100;B="%";w="f";break;case "p":m=100;B="%";w="r";break;case "b":case "o":case "x":case "X":"#"===g&&(Nb="0"+w.toLowerCase());case "c":case "d":J=!0;l=0;break;case "s":m=-1,w="r"}"$"===g&&(Nb=e[0],B=e[1]);"r"!=w||l||(w="g");if(null!=l)if("g"==w)l=Math.max(1,Math.min(21,l));else if("e"==w||"f"==w)l=Math.max(0,Math.min(20,l));var w=Th.get(w)||Z,n=W&&v;return function(a){if(J&&a%1)return"";var e=0>a||0===a&&0>1/a?(a=-a,"-"):r;if(0>m){var g=z.formatPrefix(a,
l);a=g.scale(a);B=g.symbol}else a*=m;a=w(a,l);var Oa=a.lastIndexOf("."),g=0>Oa?a:a.substring(0,Oa);a=0>Oa?"":b+a.substring(Oa+1);!W&&v&&(g=f(g));var Oa=Nb.length+g.length+a.length+(n?0:e.length),db=Oa<h?Array(Oa=h-Oa+1).join(c):"";n&&(g=f(db+g));e+=Nb;a=g+a;return("<"===d?e+a+db:">"===d?db+e+a:"^"===d?db.substring(0,Oa>>=1)+e+a+db.substring(Oa):e+(n?a:db+a))+B}}}function Z(a){return a+""}function Qa(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function T(a,b,c){function d(b){var c=
a(b),e=f(c,1);return b-c<e-b?c:e}function e(c){b(c=a(new Tb(c-1)),1);return c}function f(a,c){b(a=new Tb(+a),c);return a}function r(a,d,f){a=e(a);var g=[];if(1<f)for(;a<d;)c(a)%f||g.push(new Date(+a)),b(a,1);else for(;a<d;)g.push(new Date(+a)),b(a,1);return g}a.floor=a;a.round=d;a.ceil=e;a.offset=f;a.range=r;var g=a.utc=jb(a);g.floor=g;g.round=jb(d);g.ceil=jb(e);g.offset=jb(f);g.range=function(a,b,c){try{Tb=Qa;var d=new Qa;d._=a;return r(d,b,c)}finally{Tb=Date}};return a}function jb(a){return function(b,
c){try{Tb=Qa;var d=new Qa;d._=b;return a(d,c)._}finally{Tb=Date}}}function Va(a){function b(a){function d(b){for(var c=[],f=-1,r=0,g,W;++f<e;)if(37===a.charCodeAt(f)){c.push(a.substring(r,f));null!=(g=uh[r=a.charAt(++f)])&&(r=a.charAt(++f));if(W=y[r])r=W(b,null==g?"e"===r?" ":"0":g);c.push(r);r=f+1}c.push(a.substring(r,f));return c.join("")}var e=a.length;d.parse=function(b){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(c(d,a,b,0)!=b.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);b=null!=d.Z&&
Tb!==Qa;var e=new (b?Qa:Tb);"j"in d?e.setFullYear(d.y,0,d.j):"w"in d&&("W"in d||"U"in d)?(e.setFullYear(d.y,0,1),e.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(e.getDay()+5)%7:d.w+7*d.U-(e.getDay()+6)%7)):e.setFullYear(d.y,d.m,d.d);e.setHours(d.H+Math.floor(d.Z/100),d.M+d.Z%100,d.S,d.L);return b?e._:e};d.toString=function(){return a};return d}function c(a,b,d,e){for(var f,r=0,g=b.length,W=d.length;r<g;){if(e>=W)return-1;f=b.charCodeAt(r++);if(37===f){if(f=b.charAt(r++),f=u[f in uh?b.charAt(r++):f],
!f||0>(e=f(a,d,e)))return-1}else if(f!=d.charCodeAt(e++))return-1}return e}var d=a.dateTime,e=a.date,f=a.time,r=a.periods,g=a.days,h=a.shortDays,v=a.months,l=a.shortMonths;b.utc=function(a){function c(a){try{Tb=Qa;var b=new Tb;b._=a;return d(b)}finally{Tb=Date}}var d=b(a);c.parse=function(a){try{Tb=Qa;var b=d.parse(a);return b&&b._}finally{Tb=Date}};c.toString=d.toString;return c};b.multi=b.utc.multi=ab;var w=z.map(),m=ba(g),B=Cb(g),J=ba(h),n=Cb(h),p=ba(v),q=Cb(v),L=ba(l),t=Cb(l);r.forEach(function(a,
b){w.set(a.toLowerCase(),b)});var y={a:function(a){return h[a.getDay()]},A:function(a){return g[a.getDay()]},b:function(a){return l[a.getMonth()]},B:function(a){return v[a.getMonth()]},c:b(d),d:function(a,b){return xa(a.getDate(),b,2)},e:function(a,b){return xa(a.getDate(),b,2)},H:function(a,b){return xa(a.getHours(),b,2)},I:function(a,b){return xa(a.getHours()%12||12,b,2)},j:function(a,b){return xa(1+U.dayOfYear(a),b,3)},L:function(a,b){return xa(a.getMilliseconds(),b,3)},m:function(a,b){return xa(a.getMonth()+
1,b,2)},M:function(a,b){return xa(a.getMinutes(),b,2)},p:function(a){return r[+(12<=a.getHours())]},S:function(a,b){return xa(a.getSeconds(),b,2)},U:function(a,b){return xa(U.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return xa(U.mondayOfYear(a),b,2)},x:b(e),X:b(f),y:function(a,b){return xa(a.getFullYear()%100,b,2)},Y:function(a,b){return xa(a.getFullYear()%1E4,b,4)},Z:Ma,"%":function(){return"%"}},u={a:function(a,b,c){J.lastIndex=0;return(b=J.exec(b.substring(c)))?(a.w=
n.get(b[0].toLowerCase()),c+b[0].length):-1},A:function(a,b,c){m.lastIndex=0;return(b=m.exec(b.substring(c)))?(a.w=B.get(b[0].toLowerCase()),c+b[0].length):-1},b:function(a,b,c){L.lastIndex=0;return(b=L.exec(b.substring(c)))?(a.m=t.get(b[0].toLowerCase()),c+b[0].length):-1},B:function(a,b,c){p.lastIndex=0;return(b=p.exec(b.substring(c)))?(a.m=q.get(b[0].toLowerCase()),c+b[0].length):-1},c:function(a,b,d){return c(a,y.c.toString(),b,d)},d:X,e:X,H:C,I:C,j:Ja,L:La,m:Ka,M:K,p:function(a,b,c){b=w.get(b.substring(c,
c+=2).toLowerCase());return null==b?-1:(a.p=b,c)},S:Y,U:S,w:Ub,W:R,x:function(a,b,d){return c(a,y.x.toString(),b,d)},X:function(a,b,d){return c(a,y.X.toString(),b,d)},y:ma,Y:Sa,Z:ya,"%":Hb};return b}function xa(a,b,c){var d=0>a?"-":"";a=(d?-a:a)+"";var e=a.length;return d+(e<c?Array(c-e+1).join(b)+a:a)}function ba(a){return new RegExp("^(?:"+a.map(z.requote).join("|")+")","i")}function Cb(a){for(var b=new d,c=-1,e=a.length;++c<e;)b.set(a[c].toLowerCase(),c);return b}function Ub(a,b,c){kb.lastIndex=
0;return(b=kb.exec(b.substring(c,c+1)))?(a.w=+b[0],c+b[0].length):-1}function S(a,b,c){kb.lastIndex=0;return(b=kb.exec(b.substring(c)))?(a.U=+b[0],c+b[0].length):-1}function R(a,b,c){kb.lastIndex=0;return(b=kb.exec(b.substring(c)))?(a.W=+b[0],c+b[0].length):-1}function Sa(a,b,c){kb.lastIndex=0;return(b=kb.exec(b.substring(c,c+4)))?(a.y=+b[0],c+b[0].length):-1}function ma(a,b,c){kb.lastIndex=0;if(b=kb.exec(b.substring(c,c+2))){var d=+b[0];a=(a.y=d+(68<d?1900:2E3),c+b[0].length)}else a=-1;return a}
function ya(a,b,c){return/^[+-]\d{4}$/.test(b=b.substring(c,c+5))?(a.Z=+b,c+5):-1}function Ka(a,b,c){kb.lastIndex=0;return(b=kb.exec(b.substring(c,c+2)))?(a.m=b[0]-1,c+b[0].length):-1}function X(a,b,c){kb.lastIndex=0;return(b=kb.exec(b.substring(c,c+2)))?(a.d=+b[0],c+b[0].length):-1}function Ja(a,b,c){kb.lastIndex=0;return(b=kb.exec(b.substring(c,c+3)))?(a.j=+b[0],c+b[0].length):-1}function C(a,b,c){kb.lastIndex=0;return(b=kb.exec(b.substring(c,c+2)))?(a.H=+b[0],c+b[0].length):-1}function K(a,b,c){kb.lastIndex=
0;return(b=kb.exec(b.substring(c,c+2)))?(a.M=+b[0],c+b[0].length):-1}function Y(a,b,c){kb.lastIndex=0;return(b=kb.exec(b.substring(c,c+2)))?(a.S=+b[0],c+b[0].length):-1}function La(a,b,c){kb.lastIndex=0;return(b=kb.exec(b.substring(c,c+3)))?(a.L=+b[0],c+b[0].length):-1}function Ma(a){var b=a.getTimezoneOffset();a=0<b?"-":"+";var c=~~(ia(b)/60),b=ia(b)%60;return a+xa(c,"0",2)+xa(b,"0",2)}function Hb(a,b,c){vh.lastIndex=0;return(a=vh.exec(b.substring(c,c+1)))?c+a[0].length:-1}function ab(a){for(var b=
a.length,c=-1;++c<b;)a[c][0]=this(a[c][0]);return function(b){for(var c=0,d=a[c];!d[1](b);)d=a[++c];return d[0](b)}}function Na(){}function Xb(a,b,c){var d=c.s=a+b,e=d-a;c.t=a-(d-e)+(b-e)}function Ea(a,b){if(a&&wh.hasOwnProperty(a.type))wh[a.type](a,b)}function mb(a,b,c){var d=-1;c=a.length-c;var e;for(b.lineStart();++d<c;)e=a[d],b.point(e[0],e[1],e[2]);b.lineEnd()}function vc(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)mb(a[c],b,1);b.polygonEnd()}function hb(){function a(b,c){b*=B;c=c*B/
2+v/4;var r=b-d,g=Math.cos(c),W=Math.sin(c),h=f*W,l=e*g+h*Math.cos(r),r=h*Math.sin(r);ye.add(Math.atan2(r,l));d=b;e=g;f=W}var b,c,d,e,f;oc.point=function(r,g){oc.point=a;d=(b=r)*B;e=Math.cos(g=(c=g)*B/2+v/4);f=Math.sin(g)};oc.lineEnd=function(){a(b,c)}}function Ib(a){var b=a[0];a=a[1];var c=Math.cos(a);return[c*Math.cos(b),c*Math.sin(b),Math.sin(a)]}function gc(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function Mb(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function wc(a,
b){a[0]+=b[0];a[1]+=b[1];a[2]+=b[2]}function pd(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function Kd(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b;a[1]/=b;a[2]/=b}function qd(a){return[Math.atan2(a[1],a[0]),Ga(a[2])]}function Fd(a,b){return 1E-6>ia(a[0]-b[0])&&1E-6>ia(a[1]-b[1])}function sc(a,b){a*=B;var c=Math.cos(b*=B);rd(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function rd(a,b,c){++Rf;yd+=(a-yd)/Rf;zd+=(b-zd)/Rf;ed+=(c-ed)/Rf}function tc(){function a(e,f){e*=B;var r=Math.cos(f*=B),g=r*Math.cos(e),
r=r*Math.sin(e),W=Math.sin(f),h=Math.atan2(Math.sqrt((h=c*W-d*r)*h+(h=d*g-b*W)*h+(h=b*r-c*g)*h),b*g+c*r+d*W);df+=h;Bc+=h*(b+(b=g));Cc+=h*(c+(c=r));cc+=h*(d+(d=W));rd(b,c,d)}var b,c,d;Vc.point=function(e,f){e*=B;var r=Math.cos(f*=B);b=r*Math.cos(e);c=r*Math.sin(e);d=Math.sin(f);Vc.point=a;rd(b,c,d)}}function Qc(){Vc.point=sc}function re(){function a(b,c){b*=B;var r=Math.cos(c*=B),g=r*Math.cos(b),r=r*Math.sin(b),W=Math.sin(c),h=e*W-f*r,v=f*g-d*W,l=d*r-e*g,w=Math.sqrt(h*h+v*v+l*l),m=d*g+e*r+f*W,qb=w&&
-ib(m)/w,w=Math.atan2(w,m);Td+=qb*h;Ud+=qb*v;fd+=qb*l;df+=w;Bc+=w*(d+(d=g));Cc+=w*(e+(e=r));cc+=w*(f+(f=W));rd(d,e,f)}var b,c,d,e,f;Vc.point=function(r,g){b=r;c=g;Vc.point=a;r*=B;var h=Math.cos(g*=B);d=h*Math.cos(r);e=h*Math.sin(r);f=Math.sin(g);rd(d,e,f)};Vc.lineEnd=function(){a(b,c);Vc.lineEnd=Qc;Vc.point=sc}}function Db(){return!0}function Ed(a,b,c,d,e){var f=[],r=[];a.forEach(function(a){if(!(0>=(b=a.length-1))){var b,c=a[0],d=a[b];if(Fd(c,d)){e.lineStart();for(d=0;d<b;++d)e.point((c=a[d])[0],
c[1]);e.lineEnd()}else b=new Ld(c,a,null,!0),c=new Ld(c,null,b,!1),b.o=c,f.push(b),r.push(c),b=new Ld(d,a,null,!1),c=new Ld(d,null,b,!0),b.o=c,f.push(b),r.push(c)}});r.sort(b);se(f);se(r);if(f.length){a=0;b=c;for(c=r.length;a<c;++a)r[a].e=b=!b;b=f[0];for(var g,h;;){for(var v=b,l=!0;v.v;)if((v=v.n)===b)return;g=v.z;e.lineStart();do{v.v=v.o.v=!0;if(v.e){if(l)for(a=0,c=g.length;a<c;++a)e.point((h=g[a])[0],h[1]);else d(v.x,v.n.x,1,e);v=v.n}else{if(l)for(g=v.p.z,a=g.length-1;0<=a;--a)e.point((h=g[a])[0],
h[1]);else d(v.x,v.p.x,-1,e);v=v.p}v=v.o;g=v.z;l=!l}while(!v.v);e.lineEnd()}}}function se(a){if(b=a.length){for(var b,c=0,d=a[0],e;++c<b;)d.n=e=a[c],e.p=d,d=e;d.n=e=a[0];e.p=d}}function Ld(a,b,c,d){this.x=a;this.z=b;this.o=c;this.e=d;this.v=!1;this.n=this.p=null}function fe(a,b,c,d){return function(e,f){function r(b,c){var d=e(b,c);a(b=d[0],c=d[1])&&f.point(b,c)}function g(a,b){var c=e(a,b);n.point(c[0],c[1])}function h(){q.point=g;n.lineStart()}function l(){q.point=r;n.lineEnd()}function m(a,b){D.push([a,
b]);var c=e(a,b);y.point(c[0],c[1])}function B(){y.lineStart();D=[]}function J(){m(D[0][0],D[0][1]);y.lineEnd();var a=y.clean(),b=t.buffer(),c=b.length;D.pop();u.push(D);D=null;if(c)if(a&1){var a=b[0],c=a.length-1,b=-1,d;for(f.lineStart();++b<c;)f.point((d=a[b])[0],d[1]);f.lineEnd()}else 1<c&&a&2&&b.push(b.pop().concat(b.shift())),L.push(b.filter(Ye))}var n=b(f),p=e.invert(d[0],d[1]),q={point:r,lineStart:h,lineEnd:l,polygonStart:function(){q.point=m;q.lineStart=B;q.lineEnd=J;L=[];u=[];f.polygonStart()},
polygonEnd:function(){q.point=r;q.lineStart=h;q.lineEnd=l;L=z.merge(L);var a,b=p;a=u;var d=b[0],e=b[1],g=[Math.sin(d),-Math.cos(d),0],W=0,m=0;ye.reset();for(var qb=0,B=a.length;qb<B;++qb){var J=a[qb],n=J.length;if(n)for(var Oa=J[0],db=Oa[0],b=Oa[1]/2+v/4,nc=Math.sin(b),t=Math.cos(b),y=1;;){y===n&&(y=0);var b=J[y],D=b[0],ja=b[1]/2+v/4,F=Math.sin(ja),ja=Math.cos(ja),Sd=D-db,x=ia(Sd)>v,nc=nc*F;ye.add(Math.atan2(nc*Math.sin(Sd),t*ja+nc*Math.cos(Sd)));W+=x?Sd+(0<=Sd?w:-w):Sd;x^db>=d^D>=d&&(Oa=Mb(Ib(Oa),
Ib(b)),Kd(Oa),db=Mb(g,Oa),Kd(db),db=(x^0<=Sd?-1:1)*Ga(db[2]),e>db||e===db&&(Oa[0]||Oa[1]))&&(m+=x^0<=Sd?1:-1);if(!y++)break;db=D;nc=F;t=ja;Oa=b}}a=(-1E-6>W||1E-6>W&&0>ye)^m&1;L.length?Ed(L,Ze,a,c,f):a&&(f.lineStart(),c(null,null,1,f),f.lineEnd());f.polygonEnd();L=u=null},sphere:function(){f.polygonStart();f.lineStart();c(null,null,1,f);f.lineEnd();f.polygonEnd()}},L,t=te(),y=b(t),u,D;return q}}function Ye(a){return 1<a.length}function te(){var a=[],b;return{lineStart:function(){a.push(b=[])},point:function(a,
c){b.push([a,c])},lineEnd:q,buffer:function(){var c=a;a=[];b=null;return c},rejoin:function(){1<a.length&&a.push(a.pop().concat(a.shift()))}}}function Ze(a,b){return(0>(a=a.x)[0]?a[1]-J-1E-6:J-a[1])-(0>(b=b.x)[0]?b[1]-J-1E-6:J-b[1])}function xc(a){function b(a,c){return Math.cos(a)*Math.cos(c)>e}function c(a,b,d){var f=Ib(a),r=Ib(b),g=[1,0,0],r=Mb(f,r),W=gc(r,r),f=r[0],h=W-f*f;if(!h)return!d&&a;W=e*W/h;h=-e*f/h;f=Mb(g,r);g=pd(g,W);r=pd(r,h);wc(g,r);r=gc(g,f);W=gc(f,f);h=r*r-W*(gc(g,g)-1);if(!(0>h)){var l=
Math.sqrt(h),h=pd(f,(-r-l)/W);wc(h,g);h=qd(h);if(!d)return h;d=a[0];var w=b[0];a=a[1];b=b[1];var m;w<d&&(m=d,d=w,w=m);var qb=w-d,B=1E-6>ia(qb-v);!B&&b<a&&(m=a,a=b,b=m);if(B||1E-6>qb?B?0<a+b^h[1]<(1E-6>ia(h[0]-d)?a:b):a<=h[1]&&h[1]<=b:qb>v^(d<=h[0]&&h[0]<=w))return b=pd(f,(-r+l)/W),wc(b,g),[h,qd(b)]}}function d(b,c){var e=f?a:v-a,r=0;b<-e?r|=1:b>e&&(r|=2);c<-e?r|=4:c>e&&(r|=8);return r}var e=Math.cos(a),f=0<e,r=1E-6<ia(e),g=Wb(a,6*B);return fe(b,function(a){var e,g,W,h,l;return{lineStart:function(){h=
W=!1;l=1},point:function(w,m){var B=[w,m],J,n=b(w,m),p=f?n?0:d(w,m):n?d(w+(0>w?v:-v),m):0;!e&&(h=W=n)&&a.lineStart();n!==W&&(J=c(e,B),Fd(e,J)||Fd(B,J))&&(B[0]+=1E-6,B[1]+=1E-6,n=b(B[0],B[1]));if(n!==W)l=0,n?(a.lineStart(),J=c(B,e),a.point(J[0],J[1])):(J=c(e,B),a.point(J[0],J[1]),a.lineEnd()),e=J;else if(r&&e&&f^n){var db;p&g||!(db=c(B,e,!0))||(l=0,f?(a.lineStart(),a.point(db[0][0],db[0][1]),a.point(db[1][0],db[1][1]),a.lineEnd()):(a.point(db[1][0],db[1][1]),a.lineEnd(),a.lineStart(),a.point(db[0][0],
db[0][1])))}!n||e&&Fd(e,B)||a.point(B[0],B[1]);e=B;W=n;g=p},lineEnd:function(){W&&a.lineEnd();e=null},clean:function(){return l|(h&&W)<<1}}},g,f?[0,-a]:[-v,a-v])}function Yb(a,b,c,d){return function(e){var f=e.a,r=e.b,g=f.x,f=f.y,h=0,v=1,l=r.x-g,r=r.y-f,w;w=a-g;if(l||!(0<w)){w/=l;if(0>l){if(w<h)return;w<v&&(v=w)}else if(0<l){if(w>v)return;w>h&&(h=w)}w=c-g;if(l||!(0>w)){w/=l;if(0>l){if(w>v)return;w>h&&(h=w)}else if(0<l){if(w<h)return;w<v&&(v=w)}w=b-f;if(r||!(0<w)){w/=r;if(0>r){if(w<h)return;w<v&&(v=
w)}else if(0<r){if(w>v)return;w>h&&(h=w)}w=d-f;if(r||!(0>w)){w/=r;if(0>r){if(w>v)return;w>h&&(h=w)}else if(0<r){if(w<h)return;w<v&&(v=w)}0<h&&(e.a={x:g+h*l,y:f+h*r});1>v&&(e.b={x:g+v*l,y:f+v*r});return e}}}}}}function ue(a,b,c,d){function e(d,f){return 1E-6>ia(d[0]-a)?0<f?0:3:1E-6>ia(d[0]-c)?0<f?2:1:1E-6>ia(d[1]-b)?0<f?1:0:0<f?3:2}function f(a,b){return r(a.x,b.x)}function r(a,b){var c=e(a,1),d=e(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(g){function h(f,
g,v,l){var w=0,m=0;if(null==f||(w=e(f,v))!==(m=e(g,v))||0>r(f,g)^0<v){do l.point(0===w||3===w?a:c,1<w?d:b);while((w=(w+v+4)%4)!==m)}else l.point(g[0],g[1])}function v(e,f){a<=e&&e<=c&&b<=f&&f<=d&&g.point(e,f)}function l(e,f){e=Math.max(-1E9,Math.min(1E9,e));f=Math.max(-1E9,Math.min(1E9,f));var r=a<=e&&e<=c&&b<=f&&f<=d;n&&p.push([e,f]);if(F)L=e,t=f,y=r,F=!1,r&&(g.lineStart(),g.point(e,f));else if(r&&ja)g.point(e,f);else{var h={a:{x:u,y:D},b:{x:e,y:f}};B(h)?(ja||(g.lineStart(),g.point(h.a.x,h.a.y)),
g.point(h.b.x,h.b.y),r||g.lineEnd(),x=!1):r&&(g.lineStart(),g.point(e,f),x=!1)}u=e;D=f;ja=r}var w=g,m=te(),B=Yb(a,b,c,d),J,n,p,q={point:v,lineStart:function(){q.point=l;n&&n.push(p=[]);F=!0;ja=!1;u=D=NaN},lineEnd:function(){J&&(l(L,t),y&&ja&&m.rejoin(),J.push(m.buffer()));q.point=v;ja&&g.lineEnd()},polygonStart:function(){g=m;J=[];n=[];x=!0},polygonEnd:function(){g=w;J=z.merge(J);var b;b=[a,d];for(var c=0,e=n.length,r=b[1],v=0;v<e;++v)for(var l=1,m=n[v],qb=m.length,B=m[0],Nb;l<qb;++l)Nb=m[l],B[1]<=
r?Nb[1]>r&&0<nb(B,Nb,b)&&++c:Nb[1]<=r&&0>nb(B,Nb,b)&&--c,B=Nb;b=0!==c;c=x&&b;e=J.length;if(c||e)g.polygonStart(),c&&(g.lineStart(),h(null,null,1,g),g.lineEnd()),e&&Ed(J,f,b,h,g),g.polygonEnd();J=n=p=null}},L,t,y,u,D,ja,F,x;return q}}function $e(a,b){function c(d,e){return d=a(d,e),b(d[0],d[1])}a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])});return c}function Md(a){var b=0,c=v/3,d=Vb(a);a=d(b,c);a.parallels=function(a){return arguments.length?d(b=a[0]*v/
180,c=a[1]*v/180):[b/v*180,c/v*180]};return a}function Nd(a,b){function c(a,b){var d=Math.sqrt(f-2*e*Math.sin(b))/e;return[d*Math.sin(a*=e),r-d*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),r=Math.sqrt(f)/e;c.invert=function(a,b){var c=r-b;return[Math.atan2(a,c)/e,Ga((f-(a*a+c*c)*e*e)/(2*e))]};return c}function ve(){function a(b,c){xg+=e*b-d*c;d=b;e=c}var b,c,d,e;Vd.point=function(f,r){Vd.point=a;b=d=f;c=e=r};Vd.lineEnd=function(){a(b,c)}}function af(){function a(b,c){r.push("M",
b,",",c,f)}function b(a,d){r.push("M",a,",",d);g.point=c}function c(a,b){r.push("L",a,",",b)}function d(){g.point=a}function e(){r.push("Z")}var f=Rc(4.5),r=[],g={point:a,lineStart:function(){g.point=b},lineEnd:d,polygonStart:function(){g.lineEnd=e},polygonEnd:function(){g.lineEnd=d;g.point=a},pointRadius:function(a){f=Rc(a);return g},result:function(){if(r.length){var a=r.join("");r=[];return a}}};return g}function Rc(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}
function mc(a,b){yd+=a;zd+=b;++ed}function cd(){function a(d,e){var f=d-b,r=e-c,f=Math.sqrt(f*f+r*r);Bc+=f*(b+d)/2;Cc+=f*(c+e)/2;cc+=f;mc(b=d,c=e)}var b,c;Wc.point=function(d,e){Wc.point=a;mc(b=d,c=e)}}function md(){Wc.point=mc}function dd(){function a(b,c){var f=b-d,r=c-e,f=Math.sqrt(f*f+r*r);Bc+=f*(d+b)/2;Cc+=f*(e+c)/2;cc+=f;f=e*b-d*c;Td+=f*(d+b);Ud+=f*(e+c);fd+=3*f;mc(d=b,e=c)}var b,c,d,e;Wc.point=function(f,r){Wc.point=a;mc(b=d=f,c=e=r)};Wc.lineEnd=function(){a(b,c)}}function bf(a){function b(c,
d){a.moveTo(c,d);a.arc(c,d,r,0,w)}function c(b,e){a.moveTo(b,e);g.point=d}function d(b,c){a.lineTo(b,c)}function e(){g.point=b}function f(){a.closePath()}var r=4.5,g={point:b,lineStart:function(){g.point=c},lineEnd:e,polygonStart:function(){g.lineEnd=f},polygonEnd:function(){g.lineEnd=e;g.point=b},pointRadius:function(a){r=a;return g},result:q};return g}function Od(a){function b(a){return(g?d:c)(a)}function c(b){return ac(b,function(c,d){c=a(c,d);b.point(c[0],c[1])})}function d(b){function c(d,e){d=
a(d,e);b.point(d[0],d[1])}function f(){Oa=NaN;vd.point=r;b.lineStart()}function r(c,d){var f=Ib([c,d]),h=a(c,d);e(Oa,Pf,p,q,L,t,Oa=h[0],Pf=h[1],p=c,q=f[0],L=f[1],t=f[2],g,b);b.point(Oa,Pf)}function h(){vd.point=c;b.lineEnd()}function v(){f();vd.point=l;vd.lineEnd=w}function l(a,b){r(m=a,b);qb=Oa;B=Pf;J=q;Nb=L;n=t;vd.point=r}function w(){e(Oa,Pf,p,q,L,t,qb,B,m,J,Nb,n,g,b);vd.lineEnd=h;h()}var m,qb,B,J,Nb,n,p,Oa,Pf,q,L,t,vd={point:c,lineStart:f,lineEnd:h,polygonStart:function(){b.polygonStart();vd.lineStart=
v},polygonEnd:function(){b.polygonEnd();vd.lineStart=f}};return vd}function e(b,c,d,g,h,v,l,w,m,qb,B,J,Nb,n){var p=l-b,Oa=w-c,q=p*p+Oa*Oa;if(q>4*f&&Nb--){var L=g+qb,t=h+B,nc=v+J,y=Math.sqrt(L*L+t*t+nc*nc),u=Math.asin(nc/=y),D=1E-6>ia(ia(nc)-1)||1E-6>ia(d-m)?(d+m)/2:Math.atan2(t,L),ja=a(D,u),u=ja[0],ja=ja[1],F=u-b,x=ja-c,Oe=Oa*F-p*x;if(Oe*Oe/q>f||.3<ia((p*F+Oa*x)/q-.5)||g*qb+h*B+v*J<r)e(b,c,d,g,h,v,u,ja,D,L/=y,t/=y,nc,Nb,n),n.point(u,ja),e(u,ja,D,L,t,nc,l,w,m,qb,B,J,Nb,n)}}var f=.5,r=Math.cos(30*B),
g=16;b.precision=function(a){if(!arguments.length)return Math.sqrt(f);g=0<(f=a*a)&&16;return b};return b}function sd(a){var b=Od(function(b,c){return a([b*L,c*L])});return function(a){return Sc(b(a))}}function td(a){this.stream=a}function ac(a,b){return{point:b,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function Zb(a){return Vb(function(){return a})()}function Vb(a){function b(a){a=
g(a[0]*B,a[1]*B);return[a[0]*v+t,y-a[1]*v]}function c(a){return(a=g.invert((a[0]-t)/v,(y-a[1])/v))&&[a[0]*L,a[1]*L]}function d(){g=$e(r=Tc(n,p,q),f);var a=f(m,J);t=l-a[0]*v;y=w+a[1]*v;return e()}function e(){x&&(x.valid=!1,x=null);return b}var f,r,g,h=Od(function(a,b){a=f(a,b);return[a[0]*v+t,y-a[1]*v]}),v=150,l=480,w=250,m=0,J=0,n=0,p=0,q=0,t,y,u=xh,D=Ba,ja=null,F=null,x;b.stream=function(a){x&&(x.valid=!1);x=Sc(u(r,h(D(a))));x.valid=!0;return x};b.clipAngle=function(a){if(!arguments.length)return ja;
u=null==a?(ja=a,xh):xc((ja=+a)*B);return e()};b.clipExtent=function(a){if(!arguments.length)return F;D=(F=a)?ue(a[0][0],a[0][1],a[1][0],a[1][1]):Ba;return e()};b.scale=function(a){if(!arguments.length)return v;v=+a;return d()};b.translate=function(a){if(!arguments.length)return[l,w];l=+a[0];w=+a[1];return d()};b.center=function(a){if(!arguments.length)return[m*L,J*L];m=a[0]%360*B;J=a[1]%360*B;return d()};b.rotate=function(a){if(!arguments.length)return[n*L,p*L,q*L];n=a[0]%360*B;p=a[1]%360*B;q=2<a.length?
a[2]%360*B:0;return d()};z.rebind(b,h,"precision");return function(){f=a.apply(this,arguments);b.invert=f.invert&&c;return d()}}function Sc(a){return ac(a,function(b,c){a.point(b*B,c*B)})}function bc(a,b){return[a,b]}function Kc(a,b){return[a>v?a-w:a<-v?a+w:a,b]}function Tc(a,b,c){return a?b||c?$e(ua(a),Qd(b,c)):ua(a):b||c?Qd(b,c):Kc}function Pd(a){return function(b,c){return b+=a,[b>v?b-w:b<-v?b+w:b,c]}}function ua(a){var b=Pd(a);b.invert=Pd(-a);return b}function Qd(a,b){function c(a,b){var g=Math.cos(b),
h=Math.cos(a)*g,g=Math.sin(a)*g,W=Math.sin(b),v=W*d+h*e;return[Math.atan2(g*f-v*r,h*d-W*e),Ga(v*f+g*r)]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),r=Math.sin(b);c.invert=function(a,b){var c=Math.cos(b),g=Math.cos(a)*c,c=Math.sin(a)*c,h=Math.sin(b),W=h*f-c*r;return[Math.atan2(c*f+h*r,g*d+W*e),Ga(W*d-g*e)]};return c}function Wb(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,r,g){var h=r*b;if(null!=e){if(e=Zc(c,e),f=Zc(c,f),0<r?e<f:e>f)e+=r*w}else e=a+r*w,f=a-.5*h;for(var v;0<r?e>f:e<f;e-=
h)g.point((v=qd([c,-d*Math.cos(e),-d*Math.sin(e)]))[0],v[1])}}function Zc(a,b){var c=Ib(b);c[0]-=a;Kd(c);var d=ib(-c[1]);return((0>-c[2]?-d:d)+2*Math.PI-1E-6)%(2*Math.PI)}function Rd(a,b,c){var d=z.range(a,b-1E-6,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function eg(a,b,c){var d=z.range(a,b-1E-6,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function Dd(a){return a.source}function ld(a){return a.target}function Cf(a,b,c,d){var e=Math.cos(b),f=
Math.sin(b),r=Math.cos(d),g=Math.sin(d),h=e*Math.cos(a),v=e*Math.sin(a),l=r*Math.cos(c),w=r*Math.sin(c),m=2*Math.asin(Math.sqrt(Da(d-b)+e*r*Da(c-a))),B=1/Math.sin(m);c=m?function(a){var b=Math.sin(a*=m)*B,c=Math.sin(m-a)*B;a=c*h+b*l;var d=c*v+b*w,b=c*f+b*g;return[Math.atan2(d,a)*L,Math.atan2(b,Math.sqrt(a*a+d*d))*L]}:function(){return[a*L,b*L]};c.distance=m;return c}function Yc(a,b){function c(b,d){var e=Math.cos(b),f=Math.cos(d),e=a(e*f);return[e*f*Math.sin(b),e*Math.sin(d)]}c.invert=function(a,
c){var d=Math.sqrt(a*a+c*c),e=b(d),f=Math.sin(e),e=Math.cos(e);return[Math.atan2(a*f,d*e),Math.asin(d&&c*f/d)]};return c}function Df(a,b){function c(a,b){var d=1E-6>ia(ia(b)-J)?0:f/Math.pow(Math.tan(v/4+b/2),e);return[d*Math.sin(e*a),f-d*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(Math.tan(v/4+b/2)/Math.tan(v/4+a/2)),f=d*Math.pow(Math.tan(v/4+a/2),e)/e;if(!e)return ge;c.invert=function(a,b){var c=f-b,d=(0<e?1:0>e?-1:0)*Math.sqrt(a*a+c*c);return[Math.atan2(a,
c)/e,2*Math.atan(Math.pow(f/d,1/e))-J]};return c}function fg(a,b){function c(a,b){var d=f-b;return[d*Math.sin(e*a),f-d*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),f=d/e+a;if(1E-6>ia(e))return bc;c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,f-(0<e?1:0>e?-1:0)*Math.sqrt(a*a+c*c)]};return c}function ge(a,b){return[a,Math.log(Math.tan(v/4+b/2))]}function Ef(a){var b=Zb(a),c=b.scale,d=b.translate,e=b.clipExtent,f;b.scale=function(){var a=c.apply(b,arguments);
return a===b?f?b.clipExtent(null):b:a};b.translate=function(){var a=d.apply(b,arguments);return a===b?f?b.clipExtent(null):b:a};b.clipExtent=function(a){var r=e.apply(b,arguments);if(r===b){if(f=null==a){var g=v*c(),h=d();e([[h[0]-g,h[1]-g],[h[0]+g,h[1]+g]])}}else f&&(r=null);return r};return b.clipExtent(null)}function Pe(a,b){return[Math.log(Math.tan(v/4+b/2)),-a]}function $b(a){return a[0]}function Gd(a){return a[1]}function hc(a){for(var b=a.length,c=[0,1],d=2,e=2;e<b;e++){for(;1<d&&0>=nb(a[c[d-
2]],a[c[d-1]],a[e]);)--d;c[d++]=e}return c.slice(0,d)}function he(a,b){return a[0]-b[0]||a[1]-b[1]}function Qe(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function $c(a,b,c,d){var e=a[0],f=c[0],r=b[0]-e,g=d[0]-f;a=a[1];c=c[1];b=b[1]-a;d=d[1]-c;f=(g*(a-c)-d*(e-f))/(d*r-g*b);return[e+f*r,a+f*b]}function Re(a){var b=a[0];a=a[a.length-1];return!(b[0]-a[0]||b[1]-a[1])}function ie(){Id(this);this.edge=this.site=this.circle=null}function jg(a){var b=yh.pop()||new ie;b.site=a;return b}function We(a){bd(a);
ef.remove(a);yh.push(a);Id(a)}function If(a,b){var c=a.site,d=c.x,e=c.y,f=e-b;if(!f)return d;var r=a.P;if(!r)return-Infinity;var c=r.site,r=c.x,c=c.y,g=c-b;if(!g)return r;var h=r-d,v=1/f-1/g,l=h/g;return v?(-l+Math.sqrt(l*l-2*v*(h*h/(-2*g)-c+g/2+e-f/2)))/v+d:(d+r)/2}function Se(a){this.site=a;this.edges=[]}function Nf(a,b){return b.angle-a.angle}function lg(){Id(this);this.x=this.y=this.arc=this.site=this.cy=null}function od(a){var b=a.P,c=a.N;if(b&&c){var d=b.site,b=a.site,e=c.site;if(d!==e){var c=
b.x,f=b.y,r=d.x-c,g=d.y-f,d=e.x-c,e=e.y-f,h=2*(r*e-g*d);if(!(-1E-12<=h)){var v=r*r+g*g,l=d*d+e*e,g=(e*v-g*l)/h,r=(r*l-d*v)/h,e=r+f,f=zh.pop()||new lg;f.arc=a;f.site=b;f.x=g+c;f.y=e+Math.sqrt(g*g+r*r);f.cy=e;a.circle=f;a=null;for(b=Sf._;b;)if(f.y<b.y||f.y===b.y&&f.x<=b.x)if(b.L)b=b.L;else{a=b.P;break}else if(b.R)b=b.R;else{a=b;break}Sf.insert(a,f);a||(bh=f)}}}}function bd(a){var b=a.circle;b&&(b.P||(bh=b.N),Sf.remove(b),zh.push(b),Id(b),a.circle=null)}function mg(a,b){var c=a.b;if(c)return!0;var d=
a.a,c=b[0][0],e=b[1][0],f=b[0][1],r=b[1][1],g=a.l,h=a.r,v=g.x,g=g.y,l=h.x,h=h.y,w=(v+l)/2,m;if(h===g){if(w<c||w>=e)return;if(v>l){if(!d)d={x:w,y:f};else if(d.y>=r)return;c={x:w,y:r}}else{if(!d)d={x:w,y:r};else if(d.y<f)return;c={x:w,y:f}}}else if(m=(v-l)/(h-g),w=(g+h)/2-m*w,-1>m||1<m)if(v>l){if(!d)d={x:(f-w)/m,y:f};else if(d.y>=r)return;c={x:(r-w)/m,y:r}}else{if(!d)d={x:(r-w)/m,y:r};else if(d.y<f)return;c={x:(f-w)/m,y:f}}else if(g<h){if(!d)d={x:c,y:m*c+w};else if(d.x>=e)return;c={x:e,y:m*e+w}}else{if(!d)d=
{x:e,y:m*e+w};else if(d.x<c)return;c={x:c,y:m*c+w}}a.a=d;a.b=c;return!0}function Kf(a,b){this.l=a;this.r=b;this.a=this.b=null}function je(a,b,c,d){var e=new Kf(a,b);ff.push(e);c&&Xe(e,a,b,c);d&&Xe(e,b,a,d);ze[a.i].edges.push(new ke(e,a,b));ze[b.i].edges.push(new ke(e,b,a));return e}function Zg(a,b,c){a=new Kf(a,null);a.a=b;a.b=c;ff.push(a);return a}function Xe(a,b,c,d){a.a||a.b?a.l===c?a.b=d:a.a=d:(a.a=d,a.l=b,a.r=c)}function ke(a,b,c){var d=a.a,e=a.b;this.edge=a;this.site=b;this.angle=c?Math.atan2(c.y-
b.y,c.x-b.x):a.l===b?Math.atan2(e.x-d.x,d.y-e.y):Math.atan2(d.x-e.x,e.y-d.y)}function Ue(){this._=null}function Id(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function Mc(a,b){var c=b.R,d=b.U;d?d.L===b?d.L=c:d.R=c:a._=c;c.U=d;b.U=c;b.R=c.L;b.R&&(b.R.U=b);c.L=b}function Nc(a,b){var c=b.L,d=b.U;d?d.L===b?d.L=c:d.R=c:a._=c;c.U=d;b.U=c;b.L=c.R;b.L&&(b.L.U=b);c.R=b}function ad(a){for(;a.L;)a=a.L;return a}function Te(a,b){var c=a.sort(la).pop(),d,e,f;ff=[];ze=Array(a.length);ef=new Ue;for(Sf=new Ue;;)if(f=bh,c&&(!f||
c.y<f.y||c.y===f.y&&c.x<f.x)){if(c.x!==d||c.y!==e){ze[c.i]=new Se(c);d=c;for(var r=d.x,g=d.y,h=f=e=void 0,v=void 0,l=ef._;l;)if(h=If(l,g)-r,1E-6<h)l=l.L;else{var w=l,v=g,m=w.N;m?v=If(m,v):(w=w.site,v=w.y===v?w.x:Infinity);v=r-v;if(1E-6<v){if(!l.R){e=l;break}l=l.R}else{-1E-6<h?(e=l.P,f=l):-1E-6<v?(e=l,f=l.N):e=f=l;break}}r=jg(d);ef.insert(e,r);if(e||f)if(e===f)bd(e),f=jg(e.site),ef.insert(r,f),r.edge=f.edge=je(e.site,r.site),od(e),od(f);else if(f){bd(e);bd(f);var g=e.site,l=g.x,v=g.y,w=d.x-l,m=d.y-
v,h=f.site,B=h.x-l,J=h.y-v,n=2*(w*J-m*B),p=w*w+m*m,q=B*B+J*J,l={x:(J*p-m*q)/n+l,y:(w*q-B*p)/n+v};Xe(f.edge,g,h,l);r.edge=je(g,d,null,l);f.edge=je(d,h,null,l);od(e);od(f)}else r.edge=je(e.site,r.site);d=c.x;e=c.y}c=a.pop()}else if(f){h=f.arc;f=h.circle;g=f.x;l=f.cy;f={x:g,y:l};w=h.P;v=h.N;r=[h];We(h);for(h=w;h.circle&&1E-6>ia(g-h.circle.x)&&1E-6>ia(l-h.circle.cy);)w=h.P,r.unshift(h),We(h),h=w;r.unshift(h);bd(h);for(w=v;w.circle&&1E-6>ia(g-w.circle.x)&&1E-6>ia(l-w.circle.cy);)v=w.N,r.push(w),We(w),
w=v;r.push(w);bd(w);g=r.length;l=void 0;for(l=1;l<g;++l)w=r[l],h=r[l-1],Xe(w.edge,h.site,w.site,f);h=r[0];w=r[g-1];w.edge=je(h.site,w.site,null,f);od(h);od(w)}else break;if(b){c=ff;d=Yb(b[0][0],b[0][1],b[1][0],b[1][1]);for(e=c.length;e--;)if(f=c[e],!mg(f,b)||!d(f)||1E-6>ia(f.a.x-f.b.x)&&1E-6>ia(f.a.y-f.b.y))f.a=f.b=null,c.splice(e,1);c=b[0][0];d=b[1][0];e=b[0][1];f=b[1][1];l=ze;for(v=l.length;v--;)if((w=l[v])&&w.prepare())for(B=w.edges,J=B.length,m=0;m<J;)if(n=B[m].end(),g=n.x,h=n.y,p=B[++m%J].start(),
r=p.x,p=p.y,1E-6<ia(g-r)||1E-6<ia(h-p))B.splice(m,0,new ke(Zg(w.site,n,1E-6>ia(g-c)&&1E-6<f-h?{x:c,y:1E-6>ia(r-c)?p:f}:1E-6>ia(h-f)&&1E-6<d-g?{x:1E-6>ia(p-f)?r:d,y:f}:1E-6>ia(g-d)&&1E-6<h-e?{x:d,y:1E-6>ia(r-d)?p:e}:1E-6>ia(h-e)&&1E-6<g-c?{x:1E-6>ia(p-e)?r:c,y:e}:null),w.site,null)),++J}c={cells:ze,edges:ff};ef=Sf=ff=ze=null;return c}function la(a,b){return b.y-a.y||b.x-a.x}function oe(a){return a.x}function Jf(a){return a.y}function lc(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Xa(a,
b,c,d,e,f){if(!a(b,c,d,e,f)){var r=.5*(c+e),g=.5*(d+f);b=b.nodes;b[0]&&Xa(a,b[0],c,d,r,g);b[1]&&Xa(a,b[1],r,d,e,g);b[2]&&Xa(a,b[2],c,g,r,f);b[3]&&Xa(a,b[3],r,g,e,f)}}function Oc(a,b){a=z.rgb(a);b=z.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,r=b.g-d,g=b.b-e;return function(a){return"#"+Ya(Math.round(c+f*a))+Ya(Math.round(d+r*a))+Ya(Math.round(e+g*a))}}function kc(a,b){var c={},d={},e;for(e in a)e in b?c[e]=Lc(a[e],b[e]):d[e]=a[e];for(e in b)e in a||(d[e]=b[e]);return function(a){for(e in c)d[e]=c[e](a);
return d}}function Bb(a,b){b-=a=+a;return function(c){return a+b*c}}function pe(a,b){var c,d,e=0,f=[],r=[],g,h;a+="";b+="";for(d=yg.lastIndex=0;c=yg.exec(b);++d)c.index&&f.push(b.substring(e,c.index)),r.push({i:f.length,x:c[0]}),f.push(null),e=yg.lastIndex;e<b.length&&f.push(b.substring(e));d=0;for(g=r.length;(c=yg.exec(a))&&d<g;++d)if(h=r[d],h.x==c[0]){if(h.i)if(null==f[h.i+1])for(f[h.i-1]+=h.x,f.splice(h.i,1),c=d+1;c<g;++c)r[c].i--;else for(f[h.i-1]+=h.x+f[h.i+1],f.splice(h.i,2),c=d+1;c<g;++c)r[c].i-=
2;else if(null==f[h.i+1])f[h.i]=h.x;else for(f[h.i]=h.x+f[h.i+1],f.splice(h.i+1,1),c=d+1;c<g;++c)r[c].i--;r.splice(d,1);g--;d--}else h.x=Bb(parseFloat(c[0]),parseFloat(h.x));for(;d<g;)h=r.pop(),null==f[h.i+1]?f[h.i]=h.x:(f[h.i]=h.x+f[h.i+1],f.splice(h.i+1,1)),g--;return 1===f.length?null==f[0]?(h=r[0].x,function(a){return h(a)+""}):function(){return b}:function(a){for(d=0;d<g;++d)f[(h=r[d]).i]=h.x(a);return f.join("")}}function Lc(a,b){for(var c=z.interpolators.length,d;0<=--c&&!(d=z.interpolators[c](a,
b)););return d}function ne(a,b){var c=[],d=[],e=a.length,f=b.length,r=Math.min(a.length,b.length),g;for(g=0;g<r;++g)c.push(Lc(a[g],b[g]));for(;g<e;++g)d[g]=a[g];for(;g<f;++g)d[g]=b[g];return function(a){for(g=0;g<r;++g)d[g]=c[g](a);return d}}function ng(a){return function(b){return 0>=b?0:1<=b?1:a(b)}}function qe(a){return function(b){return 1-a(1-b)}}function Mf(a){return function(b){return.5*(.5>b?a(2*b):2-a(2-2*b))}}function $g(a){return a*a}function Jd(a){return a*a*a}function og(a){if(0>=a)return 0;
if(1<=a)return 1;var b=a*a,c=b*a;return 4*(.5>a?c:3*(a-b)+c-.75)}function pg(a){return 1-Math.cos(a*J)}function ig(a){return Math.pow(2,10*(a-1))}function Of(a){return 1-Math.sqrt(1-a*a)}function qg(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function yb(a,b){b-=a;return function(c){return Math.round(a+b*c)}}function gg(a){var b=[a.a,a.b],c=[a.c,a.d],d=ic(b),e=b[0]*c[0]+b[1]*c[1],f=-e;c[0]+=f*b[0];c[1]+=
f*b[1];f=ic(c)||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1);this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*L;this.translate=[a.e,a.f];this.scale=[d,f];this.skew=f?Math.atan2(e,f)*L:0}function ic(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]);b&&(a[0]/=b,a[1]/=b);return b}function Ff(a,b){var c=[],d=[],e,f=z.transform(a),r=z.transform(b),g=f.translate,h=r.translate,v=f.rotate,l=r.rotate,w=f.skew,m=r.skew,f=f.scale,r=r.scale;g[0]!=h[0]||g[1]!=h[1]?(c.push("translate(",null,",",null,
")"),d.push({i:1,x:Bb(g[0],h[0])},{i:3,x:Bb(g[1],h[1])})):h[0]||h[1]?c.push("translate("+h+")"):c.push("");v!=l?(180<v-l?l+=360:180<l-v&&(v+=360),d.push({i:c.push(c.pop()+"rotate(",null,")")-2,x:Bb(v,l)})):l&&c.push(c.pop()+"rotate("+l+")");w!=m?d.push({i:c.push(c.pop()+"skewX(",null,")")-2,x:Bb(w,m)}):m&&c.push(c.pop()+"skewX("+m+")");f[0]!=r[0]||f[1]!=r[1]?(e=c.push(c.pop()+"scale(",null,",",null,")"),d.push({i:e-4,x:Bb(f[0],r[0])},{i:e-2,x:Bb(f[1],r[1])})):1==r[0]&&1==r[1]||c.push(c.pop()+"scale("+
r+")");e=d.length;return function(a){for(var b=-1,f;++b<e;)c[(f=d[b]).i]=f.x(a);return c.join("")}}function jc(a,b){b=b-(a=+a)?1/(b-a):0;return function(c){return(c-a)*b}}function Hd(a,b){b=b-(a=+a)?1/(b-a):0;return function(c){return Math.max(0,Math.min(1,(c-a)*b))}}function Gf(a){var b=a.source;a=a.target;var c;var d=a;if(b===d)c=b;else{c=Hf(b);for(var d=Hf(d),e=c.pop(),f=d.pop(),r=null;e===f;)r=e,e=c.pop(),f=d.pop();c=r}for(d=[b];b!==c;)b=b.parent,d.push(b);for(b=d.length;a!==c;)d.splice(b,0,a),
a=a.parent;return d}function Hf(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;b.push(a);return b}function hg(a){a.fixed|=2}function Wa(a){a.fixed&=-7}function Fb(a){a.fixed|=4;a.px=a.x;a.py=a.y}function le(a){a.fixed&=-5}function Lf(a,b,c){var d=0,e=0;a.charge=0;if(!a.leaf)for(var f=a.nodes,r=f.length,g=-1,h;++g<r;)h=f[g],null!=h&&(Lf(h,b,c),a.charge+=h.charge,d+=h.charge*h.cx,e+=h.charge*h.cy);a.point&&(a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5),b*=c[a.point.index],
a.charge+=a.pointCharge=b,d+=b*a.point.x,e+=b*a.point.y);a.cx=d/a.charge;a.cy=e/a.charge}function Pc(a,b){z.rebind(a,b,"sort","children","value");a.nodes=a;a.links=me;return a}function uc(a){return a.children}function Ve(a){return a.value}function kg(a,b){return b.value-a.value}function me(a){return z.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function ha(a){return a.x}function nd(a){return a.y}function pc(a,b,c){a.y0=b;a.y=c}function Dc(a){return z.range(a.length)}
function Ae(a){var b=-1;a=a[0].length;for(var c=[];++b<a;)c[b]=0;return c}function gf(a){for(var b=1,c=0,d=a[0][1],e,f=a.length;b<f;++b)(e=a[b][1])>d&&(c=b,d=e);return c}function hf(a){return a.reduce(Tf,0)}function Tf(a,b){return a+b[1]}function zg(a,b){return Ag(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function Ag(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function ch(a){return[z.min(a),z.max(a)]}function Bg(a,b){return a.parent==b.parent?1:2}function Uf(a){var b=
a.children;return b&&b.length?b[0]:a._tree.thread}function Be(a){var b=a.children,c;return b&&(c=b.length)?b[c-1]:a._tree.thread}function Wd(a,b){var c=a.children;if(c&&(e=c.length))for(var d,e,f=-1;++f<e;)0<b(d=Wd(c[f],b),a)&&(a=d);return a}function jf(a,b){return a.x-b.x}function kf(a,b){return b.x-a.x}function Cg(a,b){return a.depth-b.depth}function Ec(a,b){function c(a,d){var e=a.children;if(e&&(h=e.length))for(var f,r=null,g=-1,h;++g<h;)f=e[g],c(f,r),r=f;b(a,d)}c(a,null)}function Vf(a,b){return a.value-
b.value}function Ce(a,b){var c=a._pack_next;a._pack_next=b;b._pack_prev=a;b._pack_next=c;c._pack_prev=b}function lf(a,b){a._pack_next=b;b._pack_prev=a}function Wf(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return.999*e*e>c*c+d*d}function Xd(a){function b(a){d=Math.min(a.x-a.r,d);e=Math.max(a.x+a.r,e);f=Math.min(a.y-a.r,f);r=Math.max(a.y+a.r,r)}if((c=a.children)&&(B=c.length)){var c,d=Infinity,e=-Infinity,f=Infinity,r=-Infinity,g,h,v,l,w,m,B;c.forEach(Dg);g=c[0];g.x=-g.r;g.y=0;b(g);if(1<B&&(h=c[1],h.x=
h.r,h.y=0,b(h),2<B))for(v=c[2],Ta(g,h,v),b(v),Ce(g,v),g._pack_prev=v,Ce(v,h),h=g._pack_next,l=3;l<B;l++){Ta(g,h,v=c[l]);var J=0,n=1,p=1;for(w=h._pack_next;w!==h;w=w._pack_next,n++)if(Wf(w,v)){J=1;break}if(1==J)for(m=g._pack_prev;m!==w._pack_prev&&!Wf(m,v);m=m._pack_prev,p++);J?(n<p||n==p&&h.r<g.r?lf(g,h=w):lf(g=m,h),l--):(Ce(g,v),h=v,b(v))}g=(d+e)/2;h=(f+r)/2;for(l=w=0;l<B;l++)v=c[l],v.x-=g,v.y-=h,w=Math.max(w,v.r+Math.sqrt(v.x*v.x+v.y*v.y));a.r=w;c.forEach(Eg)}}function Dg(a){a._pack_next=a._pack_prev=
a}function Eg(a){delete a._pack_next;delete a._pack_prev}function Fa(a,b,c,d){var e=a.children;a.x=b+=d*a.x;a.y=c+=d*a.y;a.r*=d;if(e){a=-1;for(var f=e.length;++a<f;)Fa(e[a],b,c,d)}}function Ta(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var r=b.r+c.r,g=e*e+f*f,r=r*r,d=d*d;b=.5+(d-r)/(2*g);r=Math.sqrt(Math.max(0,2*r*(d+g)-(d-=g)*d-r*r))/(2*g);c.x=a.x+b*e+r*f;c.y=a.y+b*f-r*e}else c.x=a.x+d,c.y=a.y}function Gb(a){return 1+z.max(a,function(a){return a.y})}function dh(a){return a.reduce(function(a,
b){return a+b.x},0)/a.length}function Fg(a){var b=a.children;return b&&b.length?Fg(b[0]):a}function dc(a){var b=a.children,c;return b&&(c=b.length)?dc(b[c-1]):a}function mf(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function nf(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];0>e&&(c+=e/2,e=0);0>f&&(d+=f/2,f=0);return{x:c,y:d,dx:e,dy:f}}function Yd(a){var b=a[0];a=a[a.length-1];return b<a?[b,a]:[a,b]}function of(a){return a.rangeExtent?a.rangeExtent():Yd(a.range())}function De(a,b,c,d){var e=
c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function Zd(a,b){var c=0,d=a.length-1,e=a[c],f=a[d],r;f<e&&(r=c,c=d,d=r,r=e,e=f,f=r);a[c]=b.floor(e);a[d]=b.ceil(f);return a}function ec(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:Uh}function eh(a,b,c,d){var e=[],f=[],r=0,g=Math.min(a.length,b.length)-1;a[g]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());for(;++r<=g;)e.push(c(a[r-1],a[r])),f.push(d(b[r-1],b[r]));return function(b){var c=
z.bisect(a,b,1,g)-1;return f[c](e[c](b))}}function gd(a,b,c,d){function e(){var h=2<Math.min(a.length,b.length)?eh:De,v=d?Hd:jc;r=h(a,b,v,c);g=h(b,a,v,Lc);return f}function f(a){return r(a)}var r,g;f.invert=function(a){return g(a)};f.domain=function(b){if(!arguments.length)return a;a=b.map(Number);return e()};f.range=function(a){if(!arguments.length)return b;b=a;return e()};f.rangeRound=function(a){return f.range(a).interpolate(yb)};f.clamp=function(a){if(!arguments.length)return d;d=a;return e()};
f.interpolate=function(a){if(!arguments.length)return c;c=a;return e()};f.ticks=function(b){return z.range.apply(z,Fc(a,b))};f.tickFormat=function(b,c){return pf(a,b,c)};f.nice=function(b){Zd(a,ec(Fc(a,b)[2]));return e()};f.copy=function(){return gd(a,b,c,d)};return e()}function qf(a,b){return z.rebind(a,b,"range","rangeRound","interpolate","clamp")}function Fc(a,b){null==b&&(b=10);var c=Yd(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),d=b/d*e;.15>=d?e*=10:.35>=d?e*=5:.75>=d&&
(e*=2);c[0]=Math.ceil(c[0]/e)*e;c[1]=Math.floor(c[1]/e)*e+.5*e;c[2]=e;return c}function pf(a,b,c){var d=Fc(a,b);return z.format(c?c.replace(th,function(a,b,c,e,f,r,g,h,v,l){return[b,c,e,f,r,g,h,v||"."+V(l,d),l].join("")}):",."+Gc(d[2])+"f")}function Gc(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function V(a,b){var c=Gc(b[2]);return a in Vh?Math.abs(c-Gc(Math.max(Math.abs(b[0]),Math.abs(b[1]))))+ +("e"!==a):c-2*("%"===a)}function Aa(a,b,c,d){function e(a){return(c?Math.log(0>a?0:a):-Math.log(0<
a?0:-a))/Math.log(b)}function f(a){return c?Math.pow(b,a):-Math.pow(b,-a)}function r(b){return a(e(b))}r.invert=function(b){return f(a.invert(b))};r.domain=function(b){if(!arguments.length)return d;c=0<=b[0];a.domain((d=b.map(Number)).map(e));return r};r.base=function(c){if(!arguments.length)return b;b=+c;a.domain(d.map(e));return r};r.nice=function(){var b=Zd(d.map(e),c?Math:Wh);a.domain(b);d=b.map(f);return r};r.ticks=function(){var a=Yd(d),r=[],g=a[0],a=a[1],h=Math.floor(e(g)),v=Math.ceil(e(a)),
l=b%1?2:b;if(isFinite(v-h)){if(c){for(;h<v;h++)for(var w=1;w<l;w++)r.push(f(h)*w);r.push(f(h))}else for(r.push(f(h));h++<v;)for(w=l-1;0<w;w--)r.push(f(h)*w);for(h=0;r[h]<g;h++);for(v=r.length;r[v-1]>a;v--);r=r.slice(h,v)}return r};r.tickFormat=function(a,b){if(!arguments.length)return Ah;2>arguments.length?b=Ah:"function"!==typeof b&&(b=z.format(b));var d=Math.max(.1,a/r.ticks().length),g=c?(h=1E-12,Math.ceil):(h=-1E-12,Math.floor),h;return function(a){return a/f(g(e(a)+h))<=d?b(a):""}};r.copy=function(){return Aa(a.copy(),
b,c,d)};return qf(r,a)}function rf(a,b,c){function d(b){return a(e(b))}var e=Hc(b),f=Hc(1/b);d.invert=function(b){return f(a.invert(b))};d.domain=function(b){if(!arguments.length)return c;a.domain((c=b.map(Number)).map(e));return d};d.ticks=function(a){return z.range.apply(z,Fc(c,a))};d.tickFormat=function(a,b){return pf(c,a,b)};d.nice=function(a){return d.domain(Zd(c,ec(Fc(c,a)[2])))};d.exponent=function(r){if(!arguments.length)return b;e=Hc(b=r);f=Hc(1/b);a.domain(c.map(e));return d};d.copy=function(){return rf(a.copy(),
b,c)};return qf(d,a)}function Hc(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function Ad(a,b){function c(d){return r[((f.get(d)||"range"===b.t&&f.set(d,a.push(d)))-1)%r.length]}function e(b,c){return z.range(a.length).map(function(a){return b+c*a})}var f,r,g;c.domain=function(e){if(!arguments.length)return a;a=[];f=new d;for(var r=-1,g=e.length,h;++r<g;)f.has(h=e[r])||f.set(h,a.push(h));return c[b.t].apply(c,b.a)};c.range=function(a){if(!arguments.length)return r;r=a;g=0;b={t:"range",
a:arguments};return c};c.rangePoints=function(d,f){2>arguments.length&&(f=0);var h=d[0],v=d[1],l=(v-h)/(Math.max(1,a.length-1)+f);r=e(2>a.length?(h+v)/2:h+l*f/2,l);g=0;b={t:"rangePoints",a:arguments};return c};c.rangeBands=function(d,f,h){2>arguments.length&&(f=0);3>arguments.length&&(h=f);var v=d[1]<d[0],l=d[v-0],w=(d[1-v]-l)/(a.length-f+2*h);r=e(l+w*h,w);v&&r.reverse();g=w*(1-f);b={t:"rangeBands",a:arguments};return c};c.rangeRoundBands=function(d,f,h){2>arguments.length&&(f=0);3>arguments.length&&
(h=f);var v=d[1]<d[0],l=d[v-0],w=d[1-v],m=Math.floor((w-l)/(a.length-f+2*h));r=e(l+Math.round((w-l-(a.length-f)*m)/2),m);v&&r.reverse();g=Math.round(m*(1-f));b={t:"rangeRoundBands",a:arguments};return c};c.rangeBand=function(){return g};c.rangeExtent=function(){return Yd(b.a[0])};c.copy=function(){return Ad(a,b)};return c.domain(a)}function Gg(a,b){function c(){var f=0,r=b.length;for(e=[];++f<r;)e[f-1]=z.quantile(a,f/r);return d}function d(a){if(!isNaN(a=+a))return b[z.bisect(e,a)]}var e;d.domain=
function(b){if(!arguments.length)return a;a=b.filter(function(a){return!isNaN(a)}).sort(z.ascending);return c()};d.range=function(a){if(!arguments.length)return b;b=a;return c()};d.quantiles=function(){return e};d.invertExtent=function(c){c=b.indexOf(c);return 0>c?[NaN,NaN]:[0<c?e[c-1]:a[0],c<e.length?e[c]:a[a.length-1]]};d.copy=function(){return Gg(a,b)};return c()}function hd(a,b,c){function d(b){return c[Math.max(0,Math.min(r,Math.floor(f*(b-a))))]}function e(){f=c.length/(b-a);r=c.length-1;return d}
var f,r;d.domain=function(c){if(!arguments.length)return[a,b];a=+c[0];b=+c[c.length-1];return e()};d.range=function(a){if(!arguments.length)return c;c=a;return e()};d.invertExtent=function(b){b=c.indexOf(b);b=0>b?NaN:b/f+a;return[b,b+1/f]};d.copy=function(){return hd(a,b,c)};return e()}function Ee(a,b){function c(d){if(d<=d)return b[z.bisect(a,d)]}c.domain=function(b){if(!arguments.length)return a;a=b;return c};c.range=function(a){if(!arguments.length)return b;b=a;return c};c.invertExtent=function(c){c=
b.indexOf(c);return[a[c-1],a[c]]};c.copy=function(){return Ee(a,b)};return c}function Fe(a){function b(a){return+a}b.invert=b;b.domain=b.range=function(c){if(!arguments.length)return a;a=c.map(b);return b};b.ticks=function(b){return z.range.apply(z,Fc(a,b))};b.tickFormat=function(b,c){return pf(a,b,c)};b.copy=function(){return Fe(a)};return b}function Hg(a){return a.innerRadius}function sf(a){return a.outerRadius}function fc(a){return a.startAngle}function Xf(a){return a.endAngle}function tf(a){function b(r){function h(){v.push("M",
f(a(l),g))}for(var v=[],l=[],w=-1,m=r.length,B,J=fa(c),n=fa(d);++w<m;)e.call(this,B=r[w],w)?l.push([+J.call(this,B,w),+n.call(this,B,w)]):l.length&&(h(),l=[]);l.length&&h();return v.length?v.join(""):null}var c=$b,d=Gd,e=Db,f=rb,r=f.key,g=.7;b.x=function(a){if(!arguments.length)return c;c=a;return b};b.y=function(a){if(!arguments.length)return d;d=a;return b};b.defined=function(a){if(!arguments.length)return e;e=a;return b};b.interpolate=function(a){if(!arguments.length)return r;r="function"===typeof a?
f=a:(f=fh.get(a)||rb).key;return b};b.tension=function(a){if(!arguments.length)return g;g=a;return b};return b}function rb(a){return a.join("L")}function Yf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function id(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function Ge(a,b){if(1>b.length||a.length!=b.length&&a.length!=b.length+2)return rb(a);var c=a.length!=b.length,d="",
e=a[0],f=a[1],r=b[0],g=r,h=1;c&&(d+="Q"+(f[0]-2*r[0]/3)+","+(f[1]-2*r[1]/3)+","+f[0]+","+f[1],e=a[1],h=2);if(1<b.length)for(g=b[1],f=a[h],h++,d+="C"+(e[0]+r[0])+","+(e[1]+r[1])+","+(f[0]-g[0])+","+(f[1]-g[1])+","+f[0]+","+f[1],e=2;e<b.length;e++,h++)f=a[h],g=b[e],d+="S"+(f[0]-g[0])+","+(f[1]-g[1])+","+f[0]+","+f[1];c&&(c=a[h],d+="Q"+(f[0]+2*g[0]/3)+","+(f[1]+2*g[1]/3)+","+c[0]+","+c[1]);return d}function uf(a,b){for(var c=[],d=(1-b)/2,e,f=a[0],r=a[1],g=1,h=a.length;++g<h;)e=f,f=r,r=a[g],c.push([d*
(r[0]-e[0]),d*(r[1]-e[1])]);return c}function $d(a){if(3>a.length)return rb(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],r=[e,e,e,(d=a[1])[0]],g=[f,f,f,d[1]],e=[e,",",f,"L",Pb(ae,r),",",Pb(ae,g)];for(a.push(a[c-1]);++b<=c;)d=a[b],r.shift(),r.push(d[0]),g.shift(),g.push(d[1]),He(e,r,g);a.pop();e.push("L",d);return e.join("")}function Pb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function He(a,b,c){a.push("C",Pb(Bh,b),",",Pb(Bh,c),",",Pb(Ch,b),",",Pb(Ch,c),",",Pb(ae,b),",",Pb(ae,c))}function Xc(a,
b){return(b[1]-a[1])/(b[0]-a[0])}function be(a){for(var b,c=-1,d=a.length,e,f;++c<d;)b=a[c],e=b[0],f=b[1]+Ie,b[0]=e*Math.cos(f),b[1]=e*Math.sin(f);return a}function Ig(a){function b(h){function m(){B.push("M",g(a(n),w),l,v(a(J.reverse()),w),"Z")}for(var B=[],J=[],n=[],p=-1,q=h.length,L,qb=fa(c),t=fa(e),y=c===d?function(){return D}:fa(d),u=e===f?function(){return ja}:fa(f),D,ja;++p<q;)r.call(this,L=h[p],p)?(J.push([D=+qb.call(this,L,p),ja=+t.call(this,L,p)]),n.push([+y.call(this,L,p),+u.call(this,
L,p)])):J.length&&(m(),J=[],n=[]);J.length&&m();return B.length?B.join(""):null}var c=$b,d=$b,e=0,f=Gd,r=Db,g=rb,h=g.key,v=g,l="L",w=.7;b.x=function(a){if(!arguments.length)return d;c=d=a;return b};b.x0=function(a){if(!arguments.length)return c;c=a;return b};b.x1=function(a){if(!arguments.length)return d;d=a;return b};b.y=function(a){if(!arguments.length)return f;e=f=a;return b};b.y0=function(a){if(!arguments.length)return e;e=a;return b};b.y1=function(a){if(!arguments.length)return f;f=a;return b};
b.defined=function(a){if(!arguments.length)return r;r=a;return b};b.interpolate=function(a){if(!arguments.length)return h;h="function"===typeof a?g=a:(g=fh.get(a)||rb).key;v=g.reverse||g;l=g.closed?"M":"L";return b};b.tension=function(a){if(!arguments.length)return w;w=a;return b};return b}function vf(a){return a.radius}function Ic(a){return[a.x,a.y]}function wf(a){return function(){var b=a.apply(this,arguments),c=b[0],b=b[1]+Ie;return[c*Math.cos(b),c*Math.sin(b)]}}function gh(){return 64}function hh(){return"circle"}
function Je(a){a=Math.sqrt(a/v);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function qc(a,b){xe(a,zb);a.id=b;return a}function Zf(a,b,c,d){var e=a.id;return ra(a,"function"===typeof c?function(a,f,r){a.__transition__[e].tween.set(b,d(c.call(a,a.__data__,f,r)))}:(c=d(c),function(a){a.__transition__[e].tween.set(b,c)}))}function xf(a){null==a&&(a="");return function(){this.textContent=a}}function Bd(a,b,c,e){var f=a.__transition__||(a.__transition__={active:0,count:0}),r=
f[c];if(!r){var g=e.time,r=f[c]={tween:new d,time:g,ease:e.ease,delay:e.delay,duration:e.duration};++f.count;z.timer(function(d){function e(d){if(f.active>c)return v();f.active=c;r.event&&r.event.start.call(a,l,b);r.tween.forEach(function(c,d){(d=d.call(a,l,b))&&n.push(d)});z.timer(function(){J.c=h(d||1)?Db:h;return 1},0,g)}function h(d){if(f.active!==c)return v();d/=B;for(var e=w(d),g=n.length;0<g;)n[--g].call(a,e);if(1<=d)return r.event&&r.event.end.call(a,l,b),v()}function v(){--f.count?delete f[c]:
delete a.__transition__;return 1}var l=a.__data__,w=r.ease,m=r.delay,B=r.duration,J=xd,n=[];J.t=m+g;if(m<=d)return e(d-m);J.c=e},0,g)}}function jd(a,b){a.attr("transform",function(a){return"translate("+b(a)+",0)"})}function Jg(a,b){a.attr("transform",function(a){return"translate(0,"+b(a)+")"})}function $f(a){return a.toISOString()}function ag(a,b,c){function d(b){return a(b)}function e(a,c){var d=(a[1]-a[0])/c,f=z.bisect(Kg,d);return f==Kg.length?[b.year,Fc(a.map(function(a){return a/31536E6}),c)[2]]:
f?b[d/Kg[f-1]<Kg[f]/d?f-1:f]:[Xh,Fc(a,c)[2]]}d.invert=function(b){return sb(a.invert(b))};d.domain=function(b){if(!arguments.length)return a.domain().map(sb);a.domain(b);return d};d.nice=function(a,b){function c(d){return!isNaN(d)&&!a.range(d,sb(+d+1),b).length}var f=d.domain(),r=Yd(f);if(r=null==a?e(r,10):"number"===typeof a&&e(r,a))a=r[0],b=r[1];return d.domain(Zd(f,1<b?{floor:function(b){for(;c(b=a.floor(b));)b=sb(b-1);return b},ceil:function(b){for(;c(b=a.ceil(b));)b=sb(+b+1);return b}}:a))};
d.ticks=function(a,b){var c=Yd(d.domain()),f=null==a?e(c,10):"number"===typeof a?e(c,a):!a.range&&[{range:a},b];f&&(a=f[0],b=f[1]);return a.range(c[0],sb(+c[1]+1),1>b?1:b)};d.tickFormat=function(){return c};d.copy=function(){return ag(a.copy(),b,c)};return qf(d,a)}function sb(a){return new Date(a)}function ih(a){return JSON.parse(a.responseText)}function Ke(a){var b=oa.createRange();b.selectNode(oa.body);return b.createContextualFragment(a.responseText)}var z={version:"3.4.1"};Date.now||(Date.now=
function(){return+new Date});var Lg=[].slice,zc=function(a){return Lg.call(a)},oa=document,Ob=oa.documentElement,Ha=window;try{zc(Ob.childNodes)[0].nodeType}catch(yf){zc=function(a){for(var b=a.length,c=Array(b);b--;)c[b]=a[b];return c}}try{oa.createElement("div").style.setProperty("opacity",0,"")}catch(Jc){var Le=Ha.Element.prototype,kd=Le.setAttribute,bg=Le.setAttributeNS,ce=Ha.CSSStyleDeclaration.prototype,rc=ce.setProperty;Le.setAttribute=function(a,b){kd.call(this,a,b+"")};Le.setAttributeNS=
function(a,b,c){bg.call(this,a,b,c+"")};ce.setProperty=function(a,b,c){rc.call(this,a,b+"",c)}}z.ascending=function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN};z.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN};z.min=function(a,b){var c=-1,d=a.length,e,f;if(1===arguments.length){for(;++c<d&&!(null!=(e=a[c])&&e<=e);)e=void 0;for(;++c<d;)null!=(f=a[c])&&e>f&&(e=f)}else{for(;++c<d&&!(null!=(e=b.call(a,a[c],c))&&e<=e);)e=void 0;for(;++c<d;)null!=(f=b.call(a,a[c],c))&&e>f&&(e=f)}return e};z.max=function(a,
b){var c=-1,d=a.length,e,f;if(1===arguments.length){for(;++c<d&&!(null!=(e=a[c])&&e<=e);)e=void 0;for(;++c<d;)null!=(f=a[c])&&f>e&&(e=f)}else{for(;++c<d&&!(null!=(e=b.call(a,a[c],c))&&e<=e);)e=void 0;for(;++c<d;)null!=(f=b.call(a,a[c],c))&&f>e&&(e=f)}return e};z.extent=function(a,b){var c=-1,d=a.length,e,f,r;if(1===arguments.length){for(;++c<d&&!(null!=(e=r=a[c])&&e<=e);)e=r=void 0;for(;++c<d;)null!=(f=a[c])&&(e>f&&(e=f),r<f&&(r=f))}else{for(;++c<d&&!(null!=(e=r=b.call(a,a[c],c))&&e<=e);)e=void 0;
for(;++c<d;)null!=(f=b.call(a,a[c],c))&&(e>f&&(e=f),r<f&&(r=f))}return[e,r]};z.sum=function(a,b){var c=0,d=a.length,e,f=-1;if(1===arguments.length)for(;++f<d;)isNaN(e=+a[f])||(c+=e);else for(;++f<d;)isNaN(e=+b.call(a,a[f],f))||(c+=e);return c};z.mean=function(b,c){var d=b.length,e,f=0,r=-1,g=0;if(1===arguments.length)for(;++r<d;)a(e=b[r])&&(f+=(e-f)/++g);else for(;++r<d;)a(e=c.call(b,b[r],r))&&(f+=(e-f)/++g);return g?f:void 0};z.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-
1];return(c-=d)?e+c*(a[d]-e):e};z.median=function(b,c){1<arguments.length&&(b=b.map(c));b=b.filter(a);return b.length?z.quantile(b.sort(z.ascending),.5):void 0};z.bisector=function(a){return{left:function(b,c,d,e){3>arguments.length&&(d=0);4>arguments.length&&(e=b.length);for(;d<e;){var f=d+e>>>1;a.call(b,b[f],f)<c?d=f+1:e=f}return d},right:function(b,c,d,e){3>arguments.length&&(d=0);4>arguments.length&&(e=b.length);for(;d<e;){var f=d+e>>>1;c<a.call(b,b[f],f)?e=f:d=f+1}return d}}};var Me=z.bisector(function(a){return a});
z.bisectLeft=Me.left;z.bisect=z.bisectRight=Me.right;z.shuffle=function(a){for(var b=a.length,c,d;b;)d=Math.random()*b--|0,c=a[b],a[b]=a[d],a[d]=c;return a};z.permute=function(a,b){for(var c=b.length,d=Array(c);c--;)d[c]=a[b[c]];return d};z.pairs=function(a){for(var b=0,c=a.length-1,d=a[0],e=Array(0>c?0:c);b<c;)e[b]=[d,d=a[++b]];return e};z.zip=function(){if(!(f=arguments.length))return[];for(var a=-1,b=z.min(arguments,c),d=Array(b);++a<b;)for(var e=-1,f,r=d[a]=Array(f);++e<f;)r[e]=arguments[e][a];
return d};z.transpose=function(a){return z.zip.apply(z,a)};z.keys=function(a){var b=[],c;for(c in a)b.push(c);return b};z.values=function(a){var b=[],c;for(c in a)b.push(a[c]);return b};z.entries=function(a){var b=[],c;for(c in a)b.push({key:c,value:a[c]});return b};z.merge=function(a){var b=a.length,c;c=-1;for(var d=0,e,f;++c<b;)d+=a[c].length;for(e=Array(d);0<=--b;)for(f=a[b],c=f.length;0<=--c;)e[--d]=f[c];return e};var ia=Math.abs;z.range=function(a,b,c){3>arguments.length&&(c=1,2>arguments.length&&
(b=a,a=0));if(Infinity===(b-a)/c)throw Error("infinite range");var d=[],e;e=ia(c);for(var f=1;e*f%1;)f*=10;e=f;var f=-1,r;a*=e;b*=e;c*=e;if(0>c)for(;(r=a+c*++f)>b;)d.push(r/e);else for(;(r=a+c*++f)<b;)d.push(r/e);return d};z.map=function(a){var b=new d;if(a instanceof d)a.forEach(function(a,c){b.set(a,c)});else for(var c in a)b.set(c,a[c]);return b};b(d,{has:e,get:function(a){return this[ud+a]},set:function(a,b){return this[ud+a]=b},remove:function(a){a=ud+a;return a in this&&delete this[a]},keys:f,
values:function(){var a=[];this.forEach(function(b,c){a.push(c)});return a},entries:function(){var a=[];this.forEach(function(b,c){a.push({key:b,value:c})});return a},size:g,empty:h,forEach:function(a){for(var b in this)b.charCodeAt(0)===we&&a.call(this,b.substring(1),this[b])}});var ud="\x00",we=ud.charCodeAt(0);z.nest=function(){function a(b,f,h){if(h>=e.length)return g?g.call(c,f):r?f.sort(r):f;for(var v=-1,l=f.length,w=e[h++],m,B,J=new d,n;++v<l;)(n=J.get(m=w(B=f[v])))?n.push(B):J.set(m,[B]);
b?(B=b(),f=function(c,d){B.set(c,a(b,d,h))}):(B={},f=function(c,d){B[c]=a(b,d,h)});J.forEach(f);return B}function b(a,c){if(c>=e.length)return a;var d=[],r=f[c++];a.forEach(function(a,e){d.push({key:a,values:b(e,c)})});return r?d.sort(function(a,b){return r(a.key,b.key)}):d}var c={},e=[],f=[],r,g;c.map=function(b,c){return a(c,b,0)};c.entries=function(c){return b(a(z.map,c,0),0)};c.key=function(a){e.push(a);return c};c.sortKeys=function(a){f[e.length-1]=a;return c};c.sortValues=function(a){r=a;return c};
c.rollup=function(a){g=a;return c};return c};z.set=function(a){var b=new l;if(a)for(var c=0,d=a.length;c<d;++c)b.add(a[c]);return b};b(l,{has:e,add:function(a){this[ud+a]=!0;return a},remove:function(a){a=ud+a;return a in this&&delete this[a]},values:f,size:g,empty:h,forEach:function(a){for(var b in this)b.charCodeAt(0)===we&&a.call(this,b.substring(1))}});z.behavior={};z.rebind=function(a,b){for(var c=1,d=arguments.length,e;++c<d;)a[e=arguments[c]]=m(a,b,b[e]);return a};var rg="webkit ms moz Moz o O".split(" ");
z.dispatch=function(){for(var a=new t,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=x(a);return a};t.prototype.on=function(a,b){var c=a.indexOf("."),d="";0<=c&&(d=a.substring(c+1),a=a.substring(0,c));if(a)return 2>arguments.length?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)if(this.hasOwnProperty(a))this[a].on(d,null);return this}};z.event=null;z.requote=function(a){return a.replace(de,"\\$&")};var de=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,xe={}.__proto__?function(a,
b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},Qf=function(a,b){return b.querySelector(a)},wd=function(a,b){return b.querySelectorAll(a)},cg=Ob[n(Ob,"matchesSelector")],cf=function(a,b){return cg.call(a,b)};"function"===typeof Sizzle&&(Qf=function(a,b){return Sizzle(a,b)[0]||null},wd=function(a,b){return Sizzle.uniqueSort(Sizzle(a,b))},cf=Sizzle.matchesSelector);z.selection=function(){return zf};var za=z.selection.prototype=[];za.select=function(a){var b=[],c,d,e,f;a=I(a);for(var r=-1,
g=this.length;++r<g;){b.push(c=[]);c.parentNode=(e=this[r]).parentNode;for(var h=-1,v=e.length;++h<v;)(f=e[h])?(c.push(d=a.call(f,f.__data__,h,r)),d&&"__data__"in f&&(d.__data__=f.__data__)):c.push(null)}return H(b)};za.selectAll=function(a){var b=[],c,d;a=y(a);for(var e=-1,f=this.length;++e<f;)for(var r=this[e],g=-1,h=r.length;++g<h;)if(d=r[g])b.push(c=zc(a.call(d,d.__data__,g,e))),c.parentNode=d;return H(b)};var dg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",
xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};z.ns={prefix:dg,qualify:function(a){var b=a.indexOf(":"),c=a;0<=b&&(c=a.substring(0,b),a=a.substring(b+1));return dg.hasOwnProperty(c)?{space:dg[c],local:a}:a}};za.attr=function(a,b){if(2>arguments.length){if("string"===typeof a){var c=this.node();a=z.ns.qualify(a);return a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(D(b,a[b]));return this}return this.each(D(a,b))};za.classed=function(a,
b){if(2>arguments.length){if("string"===typeof a){var c=this.node(),d=(a=a.trim().split(/^|\s+/)).length,e=-1;if(b=c.classList)for(;++e<d;){if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!G(a[e]).test(b))return!1;return!0}for(b in a)this.each(N(b,a[b]));return this}return this.each(N(a,b))};za.style=function(a,b,c){var d=arguments.length;if(3>d){if("string"!==typeof a){2>d&&(b="");for(c in a)this.each(P(c,a[c],b));return this}if(2>d)return Ha.getComputedStyle(this.node(),
null).getPropertyValue(a);c=""}return this.each(P(a,b,c))};za.property=function(a,b){if(2>arguments.length){if("string"===typeof a)return this.node()[a];for(b in a)this.each(O(b,a[b]));return this}return this.each(O(a,b))};za.text=function(a){return arguments.length?this.each("function"===typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};za.html=function(a){return arguments.length?
this.each("function"===typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML};za.append=function(a){a=pa(a);return this.select(function(){return this.appendChild(a.apply(this,arguments))})};za.insert=function(a,b){a=pa(a);b=I(b);return this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})};za.remove=function(){return this.each(function(){var a=
this.parentNode;a&&a.removeChild(this)})};za.data=function(a,b){function c(a,e){var f,r=a.length,g=e.length,w=Math.min(r,g),m=Array(g),B=Array(g),J=Array(r),n,W;if(b){var w=new d,p=new d,q=[],L;for(f=-1;++f<r;)L=b.call(n=a[f],n.__data__,f),w.has(L)?J[f]=n:w.set(L,n),q.push(L);for(f=-1;++f<g;)L=b.call(e,W=e[f],f),(n=w.get(L))?(m[f]=n,n.__data__=W):p.has(L)||(B[f]={__data__:W}),p.set(L,W),w.remove(L);for(f=-1;++f<r;)w.has(q[f])&&(J[f]=a[f])}else{for(f=-1;++f<w;)n=a[f],W=e[f],n?(n.__data__=W,m[f]=n):
B[f]={__data__:W};for(;f<g;++f)B[f]={__data__:e[f]};for(;f<r;++f)J[f]=a[f]}B.update=m;B.parentNode=m.parentNode=J.parentNode=a.parentNode;h.push(B);v.push(m);l.push(J)}var e=-1,f=this.length,r,g;if(!arguments.length){for(a=Array(f=(r=this[0]).length);++e<f;)if(g=r[e])a[e]=g.__data__;return a}var h=aa([]),v=H([]),l=H([]);if("function"===typeof a)for(;++e<f;)c(r=this[e],a.call(r,r.parentNode.__data__,e));else for(;++e<f;)c(r=this[e],a);v.enter=function(){return h};v.exit=function(){return l};return v};
za.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")};za.filter=function(a){var b=[],c,d,e;"function"!==typeof a&&(a=ka(a));for(var f=0,r=this.length;f<r;f++){b.push(c=[]);c.parentNode=(d=this[f]).parentNode;for(var g=0,h=d.length;g<h;g++)(e=d[g])&&a.call(e,e.__data__,g,f)&&c.push(e)}return H(b)};za.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c=this[a],d=c.length-1,e=c[d],f;0<=--d;)if(f=c[d])e&&e!==f.nextSibling&&e.parentNode.insertBefore(f,
e),e=f;return this};za.sort=function(a){a=Ca.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()};za.each=function(a){return ra(this,function(b,c,d){a.call(b,b.__data__,c,d)})};za.call=function(a){var b=zc(arguments);a.apply(b[0]=this,b);return this};za.empty=function(){return!this.node()};za.node=function(){for(var a=0,b=this.length;a<b;a++)for(var c=this[a],d=0,e=c.length;d<e;d++){var f=c[d];if(f)return f}return null};za.size=function(){var a=0;this.each(function(){++a});
return a};var yc=[];z.selection.enter=aa;z.selection.enter.prototype=yc;yc.append=za.append;yc.empty=za.empty;yc.node=za.node;yc.call=za.call;yc.size=za.size;yc.select=function(a){for(var b=[],c,d,e,f,r,g=-1,h=this.length;++g<h;){e=(f=this[g]).update;b.push(c=[]);c.parentNode=f.parentNode;for(var v=-1,l=f.length;++v<l;)(r=f[v])?(c.push(e[v]=d=a.call(f.parentNode,r.__data__,v,g)),d.__data__=r.__data__):c.push(null)}return H(b)};yc.insert=function(a,b){2>arguments.length&&(b=wa(this));return za.insert.call(this,
a,b)};za.transition=function(){for(var a=Ne||++Dh,b=[],c,d,e=Mg||{time:Date.now(),ease:og,delay:0,duration:250},f=-1,r=this.length;++f<r;){b.push(c=[]);for(var g=this[f],h=-1,v=g.length;++h<v;)(d=g[h])&&Bd(d,h,a,e),c.push(d)}return qc(b,a)};za.interrupt=function(){return this.each(va)};z.select=function(a){a=["string"===typeof a?Qf(a,oa):a];a.parentNode=Ob;return H([a])};z.selectAll=function(a){a=zc("string"===typeof a?wd(a,oa):a);a.parentNode=Ob;return H([a])};var zf=z.select(Ob);za.on=function(a,
b,c){var d=arguments.length;if(3>d){if("string"!==typeof a){2>d&&(b=!1);for(c in a)this.each(sa(c,a[c],b));return this}if(2>d)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(sa(a,b,c))};var Ac=z.map({mouseenter:"mouseover",mouseleave:"mouseout"});Ac.forEach(function(a){"on"+a in oa&&Ac.remove(a)});var Uc="onselectstart"in oa?null:n(Ob.style,"userSelect"),ah=0;z.mouse=function(a){return da(a,E())};var r=/WebKit/.test(Ha.navigator.userAgent)?-1:0;z.touches=function(a,b){2>arguments.length&&
(b=E().touches);return b?zc(b).map(function(b){var c=da(a,b);c.identifier=b.identifier;return c}):[]};z.behavior.drag=function(){function a(){this.on("mousedown.drag",e).on("touchstart.drag",f)}function b(a,e,f,r){return function(){var b=this.parentNode,g=c.of(this,arguments),h=z.event.target,v=a(),l=null==v?"drag":"drag-"+v,w=e(b,v),m=0,B,J=z.select(Ha).on(f+"."+l,function(){var a=e(b,v),c=a[0]-w[0],d=a[1]-w[1];m=m|c|d;w=a;g({type:"drag",x:a[0]+B[0],y:a[1]+B[1],dx:c,dy:d})}).on(r+"."+l,function(){J.on(f+
"."+l,null).on(r+"."+l,null);n(m&&z.event.target===h);g({type:"dragend"})}),n=Q();d?(B=d.apply(this,arguments),B=[B.x-w[0],B.y-w[1]]):B=[0,0];g({type:"dragstart"})}}var c=A(a,"drag","dragstart","dragend"),d=null,e=b(q,z.mouse,"mousemove","mouseup"),f=b(function(){return z.event.changedTouches[0].identifier},function(a,b){return z.touches(a).filter(function(a){return a.identifier===b})[0]},"touchmove","touchend");a.origin=function(b){if(!arguments.length)return d;d=b;return a};return z.rebind(a,c,
"on")};var v=Math.PI,w=2*v,J=v/2,B=v/180,L=180/v,ja=Math.SQRT2;z.interpolateZoom=function(a,b){function c(a){var b=a*J;if(B){a=ta(m);var r,v=ja*b+m;r=((v=Math.exp(2*v))-1)/(v+1);r*=a;var w=m,v=((w=Math.exp(w))-1/w)/2;r=f/(2*l)*(r-v);return[d+r*g,e+r*h,f*a/ta(ja*b+m)]}return[d+a*g,e+a*h,f*Math.exp(ja*b)]}var d=a[0],e=a[1],f=a[2],r=b[2],g=b[0]-d,h=b[1]-e,v=g*g+h*h,l=Math.sqrt(v),w=(r*r-f*f+4*v)/(4*f*l),v=(r*r-f*f-4*v)/(4*r*l),m=Math.log(Math.sqrt(w*w+1)-w),B=Math.log(Math.sqrt(v*v+1)-v)-m,J=(B||Math.log(r/
f))/ja;c.duration=1E3*J;return c};z.behavior.zoom=function(){function a(b){b.on("mousedown.zoom",h).on(Yh+".zoom",l).on("mousemove.zoom",w).on("dblclick.zoom",m).on("touchstart.zoom",v)}function b(a){return[(a[0]-B.x)/B.k,(a[1]-B.y)/B.k]}function c(a){B.k=Math.max(q[0],Math.min(q[1],a))}function d(a,b){b=[b[0]*B.k+B.x,b[1]*B.k+B.y];B.x+=a[0]-b[0];B.y+=a[1]-b[1]}function e(){ja&&ja.domain(D.range().map(function(a){return(a-B.x)/B.k}).map(D.invert));x&&x.domain(F.range().map(function(a){return(a-B.y)/
B.k}).map(F.invert))}function f(a){a({type:"zoomstart"})}function r(a){e();a({type:"zoom",scale:B.k,translate:[B.x,B.y]})}function g(a){a({type:"zoomend"})}function h(){var a=this,c=y.of(a,arguments),e=z.event.target,v=0,l=z.select(Ha).on("mousemove.zoom",function(){v=1;d(z.mouse(a),m);r(c)}).on("mouseup.zoom",function(){l.on("mousemove.zoom",Ha===a?w:null).on("mouseup.zoom",null);B(v&&z.event.target===e);g(c)}),m=b(z.mouse(a)),B=Q();va.call(a);f(c)}function v(){function a(){var c=z.touches(l);n=
B.k;c.forEach(function(a){a.identifier in m&&(m[a.identifier]=b(a))});return c}function e(){for(var b=z.event.changedTouches,f=0,g=b.length;f<g;++f)m[b[f].identifier]=null;g=a();f=Date.now();1===g.length?(500>f-t&&(b=g[0],g=m[b.identifier],c(2*B.k),d(b,g),u(),r(w)),t=f):1<g.length&&(b=g[0],g=g[1],f=b[0]-g[0],b=b[1]-g[1],J=f*f+b*b)}var l=this,w=y.of(l,arguments),m={},J=0,n,W=z.event.changedTouches[0].identifier,p="touchmove.zoom-"+W,q="touchend.zoom-"+W,L=z.select(Ha).on(p,function(){for(var a=z.touches(l),
b,e,f,g,h=0,v=a.length;h<v;++h,g=null)if(f=a[h],g=m[f.identifier]){if(e)break;b=f;e=g}if(g){var B=(B=f[0]-b[0])*B+(B=f[1]-b[1])*B,a=J&&Math.sqrt(B/J);b=[(b[0]+f[0])/2,(b[1]+f[1])/2];e=[(e[0]+g[0])/2,(e[1]+g[1])/2];c(a*n)}t=null;d(b,e);r(w)}).on(q,function(){if(z.event.touches.length){for(var b=z.event.changedTouches,c=0,d=b.length;c<d;++c)delete m[b[c].identifier];for(var e in m)return void a()}L.on(p,null).on(q,null);D.on("mousedown.zoom",h).on("touchstart.zoom",v);ja();g(w)}),D=z.select(l).on("mousedown.zoom",
null).on("touchstart.zoom",e),ja=Q();va.call(l);e();f(w)}function l(){var a=y.of(this,arguments);L?clearTimeout(L):(va.call(this),f(a));L=setTimeout(function(){L=null;g(a)},50);u();var e=n||z.mouse(this);J||(J=b(e));c(Math.pow(2,.002*ee())*B.k);d(e,J);r(a)}function w(){J=null}function m(){var a=y.of(this,arguments),e=z.mouse(this),h=b(e),v=Math.log(B.k)/Math.LN2;f(a);c(Math.pow(2,z.event.shiftKey?Math.ceil(v)-1:Math.floor(v)+1));d(e,h);r(a);g(a)}var B={x:0,y:0,k:1},J,n,p=[960,500],q=Oe,L,t,y=A(a,
"zoomstart","zoom","zoomend"),D,ja,F,x;a.event=function(a){a.each(function(){var a=y.of(this,arguments),b=B;Ne?z.select(this).transition().each("start.zoom",function(){B=this.__chart__||{x:0,y:0,k:1};f(a)}).tween("zoom:zoom",function(){var c=p[0],d=c/2,e=p[1]/2,f=z.interpolateZoom([(d-B.x)/B.k,(e-B.y)/B.k,c/B.k],[(d-b.x)/b.k,(e-b.y)/b.k,c/b.k]);return function(b){b=f(b);var g=c/b[2];this.__chart__=B={x:d-b[0]*g,y:e-b[1]*g,k:g};r(a)}}).each("end.zoom",function(){g(a)}):(this.__chart__=B,f(a),r(a),
g(a))})};a.translate=function(b){if(!arguments.length)return[B.x,B.y];B={x:+b[0],y:+b[1],k:B.k};e();return a};a.scale=function(b){if(!arguments.length)return B.k;B={x:B.x,y:B.y,k:+b};e();return a};a.scaleExtent=function(b){if(!arguments.length)return q;q=null==b?Oe:[+b[0],+b[1]];return a};a.center=function(b){if(!arguments.length)return n;n=b&&[+b[0],+b[1]];return a};a.size=function(b){if(!arguments.length)return p;p=b&&[+b[0],+b[1]];return a};a.x=function(b){if(!arguments.length)return ja;ja=b;D=
b.copy();B={x:0,y:0,k:1};return a};a.y=function(b){if(!arguments.length)return x;x=b;F=b.copy();B={x:0,y:0,k:1};return a};return z.rebind(a,y,"on")};var Oe=[0,Infinity],ee,Yh="onwheel"in oa?(ee=function(){return-z.event.deltaY*(z.event.deltaMode?120:1)},"wheel"):"onmousewheel"in oa?(ee=function(){return z.event.wheelDelta},"mousewheel"):(ee=function(){return-z.event.detail},"MozMousePixelScroll");bb.prototype.toString=function(){return this.rgb()+""};z.hsl=function(a,b,c){return 1===arguments.length?
a instanceof ob?ca(a.h,a.s,a.l):Qb(""+a,Za,ca):ca(+a,+b,+c)};var jh=ob.prototype=new bb;jh.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);return ca(this.h,this.s,this.l/a)};jh.darker=function(a){a=Math.pow(.7,arguments.length?a:1);return ca(this.h,this.s,a*this.l)};jh.rgb=function(){return tb(this.h,this.s,this.l)};z.hcl=function(a,b,c){return 1===arguments.length?a instanceof lb?p(a.h,a.c,a.l):a instanceof Eb?ub(a.l,a.a,a.b):ub((a=eb((a=z.rgb(a)).r,a.g,a.b)).l,a.a,a.b):p(+a,+b,+c)};var kh=
lb.prototype=new bb;kh.brighter=function(a){return p(this.h,this.c,Math.min(100,this.l+Ng*(arguments.length?a:1)))};kh.darker=function(a){return p(this.h,this.c,Math.max(0,this.l-Ng*(arguments.length?a:1)))};kh.rgb=function(){return Jb(this.h,this.c,this.l).rgb()};z.lab=function(a,b,c){return 1===arguments.length?a instanceof Eb?Pa(a.l,a.a,a.b):a instanceof lb?Jb(a.l,a.c,a.h):eb((a=z.rgb(a)).r,a.g,a.b):Pa(+a,+b,+c)};var Ng=18,ph=.95047,qh=1,rh=1.08883,lh=Eb.prototype=new bb;lh.brighter=function(a){return Pa(Math.min(100,
this.l+Ng*(arguments.length?a:1)),this.a,this.b)};lh.darker=function(a){return Pa(Math.max(0,this.l-Ng*(arguments.length?a:1)),this.a,this.b)};lh.rgb=function(){return Ra(this.l,this.a,this.b)};z.rgb=function(a,b,c){return 1===arguments.length?a instanceof Lb?Ia(a.r,a.g,a.b):Qb(""+a,Ia,tb):Ia(~~a,~~b,~~c)};var Og=Lb.prototype=new bb;Og.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b;if(!b&&!c&&!d)return Ia(30,30,30);b&&30>b&&(b=30);c&&30>c&&(c=30);d&&30>d&&
(d=30);return Ia(Math.min(255,~~(b/a)),Math.min(255,~~(c/a)),Math.min(255,~~(d/a)))};Og.darker=function(a){a=Math.pow(.7,arguments.length?a:1);return Ia(~~(a*this.r),~~(a*this.g),~~(a*this.b))};Og.hsl=function(){return Za(this.r,this.g,this.b)};Og.toString=function(){return"#"+Ya(this.r)+Ya(this.g)+Ya(this.b)};var sg=z.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,
brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,
darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,
lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,
mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,
red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});sg.forEach(function(a,b){sg.set(a,
Ia(b>>16,b>>8&255,b&255))});z.functor=fa;z.xhr=pb(Ba);z.dsv=function(a,b){function c(a,f,r){3>arguments.length&&(r=f,f=null);var g=xb(a,b,null==f?d:e(f),r);g.row=function(a){return arguments.length?g.response(null==(f=a)?d:e(a)):f};return g}function d(a){return c.parse(a.responseText)}function e(a){return function(b){return c.parse(b.responseText,a)}}function f(b){return b.map(r).join(a)}function r(a){return g.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var g=new RegExp('["'+a+"\n]"),h=a.charCodeAt(0);
c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(e(a),c)}:e})};c.parseRows=function(a,b){function c(){if(g>=r)return e;if(w)return w=!1,d;var b=g;if(34===a.charCodeAt(b)){for(var f=b;f++<r;)if(34===a.charCodeAt(f)){if(34!==a.charCodeAt(f+1))break;++f}g=f+2;var v=a.charCodeAt(f+1);13===v?(w=!0,10===a.charCodeAt(f+2)&&++g):10===v&&
(w=!0);return a.substring(b+1,f).replace(/""/g,'"')}for(;g<r;){v=a.charCodeAt(g++);f=1;if(10===v)w=!0;else if(13===v)w=!0,10===a.charCodeAt(g)&&(++g,++f);else if(v!==h)continue;return a.substring(b,g-f)}return a.substring(b)}for(var d={},e={},f=[],r=a.length,g=0,v=0,l,w;(l=c())!==e;){for(var m=[];l!==d&&l!==e;)m.push(l),l=c();b&&!(m=b(m,v++))||f.push(m)}return f};c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);var d=new l,e=[];b.forEach(function(a){for(var b in a)d.has(b)||e.push(d.add(b))});
return[e.map(r).join(a)].concat(b.map(function(b){return e.map(function(a){return r(b[a])}).join(a)})).join("\n")};c.formatRows=function(a){return a.map(f).join("\n")};return c};z.csv=z.dsv(",","text/csv");z.tsv=z.dsv("\t","text/tab-separated-values");var vg,wg,ug,tg,xd,sh=Ha[n(Ha,"requestAnimationFrame")]||function(a){setTimeout(a,17)};z.timer=function(a,b,c){var d=arguments.length;2>d&&(b=0);3>d&&(c=Date.now());d={c:a,t:c+b,f:!1,n:null};wg?wg.n=d:vg=d;wg=d;ug||(tg=clearTimeout(tg),ug=1,sh(ea))};
z.timer.flush=function(){Sb();Ua()};z.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var Zh="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,b){var c=Math.pow(10,3*ia(8-b));return{scale:8<b?function(a){return a/c}:function(a){return a*c},symbol:a}});z.formatPrefix=function(a,b){var c=0;a&&(0>a&&(a*=-1),b&&(a=z.round(a,$a(a,b))),c=1+Math.floor(1E-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((0>=c?c+1:c-1)/3))));return Zh[8+c/3]};
var th=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Th=z.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=z.round(a,$a(a,b))).toFixed(Math.max(0,Math.min(20,$a(a*(1+1E-15),
b))))}}),U=z.time={},Tb=Date;Qa.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},
getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Cd.setUTCDate.apply(this._,arguments)},setDay:function(){Cd.setUTCDay.apply(this._,arguments)},setFullYear:function(){Cd.setUTCFullYear.apply(this._,arguments)},setHours:function(){Cd.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Cd.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Cd.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Cd.setUTCMonth.apply(this._,
arguments)},setSeconds:function(){Cd.setUTCSeconds.apply(this._,arguments)},setTime:function(){Cd.setTime.apply(this._,arguments)}};var Cd=Date.prototype;U.year=T(function(a){a=U.day(a);a.setMonth(0,1);return a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()});U.years=U.year.range;U.years.utc=U.year.utc.range;U.day=T(function(a){var b=new Tb(2E3,0);b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate());return b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-
1});U.days=U.day.range;U.days.utc=U.day.utc.range;U.dayOfYear=function(a){var b=U.year(a);return Math.floor((a-b-6E4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(a,b){b=7-b;var c=U[a]=T(function(a){(a=U.day(a)).setDate(a.getDate()-(a.getDay()+b)%7);return a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=U.year(a).getDay();return Math.floor((U.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});
U[a+"s"]=c.range;U[a+"s"].utc=c.utc.range;U[a+"OfYear"]=function(a){var c=U.year(a).getDay();return Math.floor((U.dayOfYear(a)+(c+b)%7)/7)}});U.week=U.sunday;U.weeks=U.sunday.range;U.weeks.utc=U.sunday.utc.range;U.weekOfYear=U.sundayOfYear;var uh={"-":"",_:" ",0:"0"},kb=/^\s*\d+/,vh=/^%/;z.locale=function(a){return{numberFormat:cb(a),timeFormat:Va(a)}};var Eh=z.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM",
"PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});z.format=Eh.numberFormat;z.geo={};Na.prototype={s:0,t:0,add:function(a){Xb(a,this.t,Pg);Xb(Pg.s,this.s,this);this.s?this.t+=Pg.t:this.s=Pg.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};
var Pg=new Na;z.geo.stream=function(a,b){if(a&&Fh.hasOwnProperty(a.type))Fh[a.type](a,b);else Ea(a,b)};var Fh={Feature:function(a,b){Ea(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)Ea(c[d].geometry,b)}},wh={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates;b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){mb(a.coordinates,b,0)},MultiLineString:function(a,
b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)mb(c[d],b,0)},Polygon:function(a,b){vc(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)vc(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)Ea(c[d],b)}};z.geo.area=function(a){Af=0;z.geo.stream(a,oc);return Af};var Af,ye=new Na,oc={sphere:function(){Af+=4*v},point:q,lineStart:q,lineEnd:q,polygonStart:function(){ye.reset();oc.lineStart=hb},polygonEnd:function(){var a=
2*ye;Af+=0>a?4*v+a:a;oc.lineStart=oc.lineEnd=oc.point=q}};z.geo.bounds=function(){function a(b,c){u.push(D=[l=b,m=b]);c<w&&(w=c);c>J&&(J=c)}function b(c,d){var e=Ib([c*B,d*B]);if(t){var f=Mb(t,e),f=Mb([f[1],-f[0],0],f);Kd(f);var f=qd(f),r=c-n,h=0<r?1:-1,v=f[0]*L*h,r=180<ia(r);r^(h*n<v&&v<h*c)?(f=f[1]*L,f>J&&(J=f)):(v=(v+360)%360-180,r^(h*n<v&&v<h*c))?(f=-f[1]*L,f<w&&(w=f)):(d<w&&(w=d),d>J&&(J=d));r?c<n?g(l,c)>g(l,m)&&(m=c):g(c,m)>g(l,m)&&(l=c):m>=l?(c<l&&(l=c),c>m&&(m=c)):c>n?g(l,c)>g(l,m)&&(m=c):
g(c,m)>g(l,m)&&(l=c)}else a(c,d);t=e;n=c}function c(){ja.point=b}function d(){D[0]=l;D[1]=m;ja.point=a;t=null}function e(a,c){if(t){var d=a-n;y+=180<ia(d)?d+(0<d?360:-360):d}else p=a,q=c;oc.point(a,c);b(a,c)}function f(){oc.lineStart()}function r(){e(p,q);oc.lineEnd();1E-6<ia(y)&&(l=-(m=180));D[0]=l;D[1]=m;t=null}function g(a,b){return 0>(b-=a)?b+360:b}function h(a,b){return a[0]-b[0]}function v(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var l,w,m,J,n,p,q,t,y,u,D,ja={point:a,lineStart:c,
lineEnd:d,polygonStart:function(){ja.point=e;ja.lineStart=f;ja.lineEnd=r;y=0;oc.polygonStart()},polygonEnd:function(){oc.polygonEnd();ja.point=a;ja.lineStart=c;ja.lineEnd=d;0>ye?(l=-(m=180),w=-(J=90)):1E-6<y?J=90:-1E-6>y&&(w=-90);D[0]=l;D[1]=m}};return function(a){J=m=-(l=w=Infinity);u=[];z.geo.stream(a,ja);if(a=u.length){u.sort(h);for(var b=1,c=u[0],d,e=[c];b<a;++b)d=u[b],v(d[0],c)||v(d[1],c)?(g(c[0],d[1])>g(c[0],c[1])&&(c[1]=d[1]),g(d[0],c[1])>g(c[0],c[1])&&(c[0]=d[0])):e.push(c=d);var f=-Infinity,
r;a=e.length-1;b=0;for(c=e[a];b<=a;c=d,++b)d=e[b],(r=g(c[1],d[0]))>f&&(f=r,l=d[0],m=c[1])}u=D=null;return Infinity===l||Infinity===w?[[NaN,NaN],[NaN,NaN]]:[[l,w],[m,J]]}}();z.geo.centroid=function(a){Rf=df=yd=zd=ed=Bc=Cc=cc=Td=Ud=fd=0;z.geo.stream(a,Vc);a=Td;var b=Ud,c=fd,d=a*a+b*b+c*c;return 1E-12>d&&(a=Bc,b=Cc,c=cc,1E-6>df&&(a=yd,b=zd,c=ed),d=a*a+b*b+c*c,1E-12>d)?[NaN,NaN]:[Math.atan2(b,a)*L,Ga(c/Math.sqrt(d))*L]};var Rf,df,yd,zd,ed,Bc,Cc,cc,Td,Ud,fd,Vc={sphere:q,point:sc,lineStart:tc,lineEnd:Qc,
polygonStart:function(){Vc.lineStart=re},polygonEnd:function(){Vc.lineStart=tc}},xh=fe(Db,function(a){var b=NaN,c=NaN,d=NaN,e;return{lineStart:function(){a.lineStart();e=1},point:function(f,r){var g=0<f?v:-v,h=ia(f-b);if(1E-6>ia(h-v))a.point(b,c=0<(c+r)/2?J:-J),a.point(d,c),a.lineEnd(),a.lineStart(),a.point(g,c),a.point(f,c),e=0;else if(d!==g&&h>=v){1E-6>ia(b-d)&&(b-=1E-6*d);1E-6>ia(f-g)&&(f-=1E-6*g);var h=b,l=c,w=f,m,B,n=Math.sin(h-w);c=1E-6<ia(n)?Math.atan((Math.sin(l)*(B=Math.cos(r))*Math.sin(w)-
Math.sin(r)*(m=Math.cos(l))*Math.sin(h))/(m*B*n)):(l+r)/2;a.point(d,c);a.lineEnd();a.lineStart();a.point(g,c);e=0}a.point(b=f,c=r);d=g},lineEnd:function(){a.lineEnd();b=c=NaN},clean:function(){return 2-e}}},function(a,b,c,d){null==a?(c*=J,d.point(-v,c),d.point(0,c),d.point(v,c),d.point(v,0),d.point(v,-c),d.point(0,-c),d.point(-v,-c),d.point(-v,0),d.point(-v,c)):1E-6<ia(a[0]-b[0])?(a=a[0]<b[0]?v:-v,c=c*a/2,d.point(-a,c),d.point(0,c),d.point(a,c)):d.point(b[0],b[1])},[-v,-v/2]);z.geo.clipExtent=function(){var a,
b,c,d,e,f,r={stream:function(a){e&&(e.valid=!1);e=f(a);e.valid=!0;return e},extent:function(g){if(!arguments.length)return[[a,b],[c,d]];f=ue(a=+g[0][0],b=+g[0][1],c=+g[1][0],d=+g[1][1]);e&&(e.valid=!1,e=null);return r}};return r.extent([[0,0],[960,500]])};(z.geo.conicEqualArea=function(){return Md(Nd)}).raw=Nd;z.geo.albers=function(){return z.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};z.geo.albersUsa=function(){function a(b){var c=b[0];b=b[1];e=null;
(r(c,b),e)||(g(c,b),e)||h(c,b);return e}var b=z.geo.albers(),c=z.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),d=z.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),e,f={point:function(a,b){e=[a,b]}},r,g,h;a.invert=function(a){var e=b.scale(),f=b.translate(),r=(a[0]-f[0])/e,e=(a[1]-f[1])/e;return(.12<=e&&.234>e&&-.425<=r&&-.214>r?c:.166<=e&&.234>e&&-.214<=r&&-.115>r?d:b).invert(a)};a.stream=function(a){var e=b.stream(a),f=c.stream(a),r=d.stream(a);
return{point:function(a,b){e.point(a,b);f.point(a,b);r.point(a,b)},sphere:function(){e.sphere();f.sphere();r.sphere()},lineStart:function(){e.lineStart();f.lineStart();r.lineStart()},lineEnd:function(){e.lineEnd();f.lineEnd();r.lineEnd()},polygonStart:function(){e.polygonStart();f.polygonStart();r.polygonStart()},polygonEnd:function(){e.polygonEnd();f.polygonEnd();r.polygonEnd()}}};a.precision=function(e){if(!arguments.length)return b.precision();b.precision(e);c.precision(e);d.precision(e);return a};
a.scale=function(e){if(!arguments.length)return b.scale();b.scale(e);c.scale(.35*e);d.scale(e);return a.translate(b.translate())};a.translate=function(e){if(!arguments.length)return b.translate();var v=b.scale(),l=+e[0],w=+e[1];r=b.translate(e).clipExtent([[l-.455*v,w-.238*v],[l+.455*v,w+.238*v]]).stream(f).point;g=c.translate([l-.307*v,w+.201*v]).clipExtent([[l-.425*v+1E-6,w+.12*v+1E-6],[l-.214*v-1E-6,w+.234*v-1E-6]]).stream(f).point;h=d.translate([l-.205*v,w+.212*v]).clipExtent([[l-.214*v+1E-6,
w+.166*v+1E-6],[l-.115*v-1E-6,w+.234*v-1E-6]]).stream(f).point;return a};return a.scale(1070)};var Qg,xg,Vd={point:q,lineStart:q,lineEnd:q,polygonStart:function(){xg=0;Vd.lineStart=ve},polygonEnd:function(){Vd.lineStart=Vd.lineEnd=Vd.point=q;Qg+=ia(xg/2)}},Rg,Sg,Tg,Ug,$h={point:function(a,b){a<Rg&&(Rg=a);a>Tg&&(Tg=a);b<Sg&&(Sg=b);b>Ug&&(Ug=b)},lineStart:q,lineEnd:q,polygonStart:q,polygonEnd:q},Wc={point:mc,lineStart:cd,lineEnd:md,polygonStart:function(){Wc.lineStart=dd},polygonEnd:function(){Wc.point=
mc;Wc.lineStart=cd;Wc.lineEnd=md}};z.geo.path=function(){function a(b){b&&("function"===typeof c&&r.pointRadius(+c.apply(this,arguments)),g&&g.valid||(g=f(r)),z.geo.stream(b,g));return r.result()}function b(){g=null;return a}var c=4.5,d,e,f,r,g;a.area=function(a){Qg=0;z.geo.stream(a,f(Vd));return Qg};a.centroid=function(a){yd=zd=ed=Bc=Cc=cc=Td=Ud=fd=0;z.geo.stream(a,f(Wc));return fd?[Td/fd,Ud/fd]:cc?[Bc/cc,Cc/cc]:ed?[yd/ed,zd/ed]:[NaN,NaN]};a.bounds=function(a){Tg=Ug=-(Rg=Sg=Infinity);z.geo.stream(a,
f($h));return[[Rg,Sg],[Tg,Ug]]};a.projection=function(a){if(!arguments.length)return d;f=(d=a)?a.stream||sd(a):Ba;return b()};a.context=function(a){if(!arguments.length)return e;r=null==(e=a)?new af:new bf(a);"function"!==typeof c&&r.pointRadius(c);return b()};a.pointRadius=function(b){if(!arguments.length)return c;c="function"===typeof b?b:(r.pointRadius(+b),+b);return a};return a.projection(z.geo.albersUsa()).context(null)};z.geo.transform=function(a){return{stream:function(b){b=new td(b);for(var c in a)b[c]=
a[c];return b}}};td.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};z.geo.projection=Zb;z.geo.projectionMutator=Vb;(z.geo.equirectangular=function(){return Zb(bc)}).raw=bc.invert=bc;z.geo.rotation=function(a){function b(c){c=a(c[0]*B,c[1]*B);return c[0]*=L,c[1]*=L,
c}a=Tc(a[0]%360*B,a[1]*B,2<a.length?a[2]*B:0);b.invert=function(b){b=a.invert(b[0]*B,b[1]*B);return b[0]*=L,b[1]*=L,b};return b};Kc.invert=bc;z.geo.circle=function(){function a(){var c="function"===typeof b?b.apply(this,arguments):b,d=Tc(-c[0]*B,-c[1]*B,0).invert,f=[];e(null,null,1,{point:function(a,b){f.push(a=d(a,b));a[0]*=L;a[1]*=L}});return{type:"Polygon",coordinates:[f]}}var b=[0,0],c,d=6,e;a.origin=function(c){if(!arguments.length)return b;b=c;return a};a.angle=function(b){if(!arguments.length)return c;
e=Wb((c=+b)*B,d*B);return a};a.precision=function(b){if(!arguments.length)return d;e=Wb(c*B,(d=+b)*B);return a};return a.angle(90)};z.geo.distance=function(a,b){var c=(b[0]-a[0])*B,d=a[1]*B,e=b[1]*B,f=Math.sin(c),c=Math.cos(c),r=Math.sin(d),d=Math.cos(d),g=Math.sin(e),e=Math.cos(e),h;return Math.atan2(Math.sqrt((h=e*f)*h+(h=d*g-r*e*c)*h),r*g+d*e*c)};z.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return z.range(Math.ceil(f/m)*m,e,m).map(p).concat(z.range(Math.ceil(v/
B)*B,h,B).map(q)).concat(z.range(Math.ceil(d/l)*l,c,l).filter(function(a){return 1E-6<ia(a%m)}).map(J)).concat(z.range(Math.ceil(g/w)*w,r,w).filter(function(a){return 1E-6<ia(a%B)}).map(n))}var c,d,e,f,r,g,h,v,l=10,w=l,m=90,B=360,J,n,p,q,L=2.5;a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})};a.outline=function(){return{type:"Polygon",coordinates:[p(f).concat(q(h).slice(1),p(e).reverse().slice(1),q(v).reverse().slice(1))]}};a.extent=function(b){return arguments.length?
a.majorExtent(b).minorExtent(b):a.minorExtent()};a.majorExtent=function(b){if(!arguments.length)return[[f,v],[e,h]];f=+b[0][0];e=+b[1][0];v=+b[0][1];h=+b[1][1];f>e&&(b=f,f=e,e=b);v>h&&(b=v,v=h,h=b);return a.precision(L)};a.minorExtent=function(b){if(!arguments.length)return[[d,g],[c,r]];d=+b[0][0];c=+b[1][0];g=+b[0][1];r=+b[1][1];d>c&&(b=d,d=c,c=b);g>r&&(b=g,g=r,r=b);return a.precision(L)};a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()};a.majorStep=function(b){if(!arguments.length)return[m,
B];m=+b[0];B=+b[1];return a};a.minorStep=function(b){if(!arguments.length)return[l,w];l=+b[0];w=+b[1];return a};a.precision=function(b){if(!arguments.length)return L;L=+b;J=Rd(g,r,90);n=eg(d,c,L);p=Rd(v,h,90);q=eg(f,e,L);return a};return a.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,-80.000001],[180,80.000001]])};z.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[c||b.apply(this,arguments),e||d.apply(this,arguments)]}}var b=Dd,c,d=ld,e;a.distance=
function(){return z.geo.distance(c||b.apply(this,arguments),e||d.apply(this,arguments))};a.source=function(d){if(!arguments.length)return b;b=d;c="function"===typeof d?null:d;return a};a.target=function(b){if(!arguments.length)return d;d=b;e="function"===typeof b?null:b;return a};a.precision=function(){return arguments.length?a:0};return a};z.geo.interpolate=function(a,b){return Cf(a[0]*B,a[1]*B,b[0]*B,b[1]*B)};z.geo.length=function(a){Vg=0;z.geo.stream(a,Bf);return Vg};var Vg,Bf={sphere:q,point:q,
lineStart:function(){function a(e,f){var r=Math.sin(f*=B),g=Math.cos(f),h=ia((e*=B)-b),v=Math.cos(h);Vg+=Math.atan2(Math.sqrt((h=g*Math.sin(h))*h+(h=d*r-c*g*v)*h),c*r+d*g*v);b=e;c=r;d=g}var b,c,d;Bf.point=function(e,f){b=e*B;c=Math.sin(f*=B);d=Math.cos(f);Bf.point=a};Bf.lineEnd=function(){Bf.point=Bf.lineEnd=q}},lineEnd:q,polygonStart:q,polygonEnd:q},Gh=Yc(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(z.geo.azimuthalEqualArea=function(){return Zb(Gh)}).raw=Gh;var Hh=
Yc(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},Ba);(z.geo.azimuthalEquidistant=function(){return Zb(Hh)}).raw=Hh;(z.geo.conicConformal=function(){return Md(Df)}).raw=Df;(z.geo.conicEquidistant=function(){return Md(fg)}).raw=fg;var Ih=Yc(function(a){return 1/a},Math.atan);(z.geo.gnomonic=function(){return Zb(Ih)}).raw=Ih;ge.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-J]};(z.geo.mercator=function(){return Ef(ge)}).raw=ge;var Jh=Yc(function(){return 1},Math.asin);(z.geo.orthographic=
function(){return Zb(Jh)}).raw=Jh;var Kh=Yc(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(z.geo.stereographic=function(){return Zb(Kh)}).raw=Kh;Pe.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-J]};(z.geo.transverseMercator=function(){var a=Ef(Pe),b=a.center,c=a.rotate;a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[-a[1],a[0]])};a.rotate=function(a){return a?c([a[0],a[1],2<a.length?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])};return a.rotate([0,0])}).raw=Pe;z.geom=
{};z.geom.hull=function(a){function b(a){if(3>a.length)return[];var e=fa(c),f=fa(d),r,g=a.length,h=[],v=[];for(r=0;r<g;r++)h.push([+e.call(this,a[r],r),+f.call(this,a[r],r),r]);h.sort(he);for(r=0;r<g;r++)v.push([h[r][0],-h[r][1]]);var e=hc(h),v=hc(v),f=v[0]===e[0],g=v[v.length-1]===e[e.length-1],l=[];for(r=e.length-1;0<=r;--r)l.push(a[h[e[r]][2]]);for(r=+f;r<v.length-g;++r)l.push(a[h[v[r]][2]]);return l}var c=$b,d=Gd;if(arguments.length)return b(a);b.x=function(a){return arguments.length?(c=a,b):
c};b.y=function(a){return arguments.length?(d=a,b):d};return b};z.geom.polygon=function(a){xe(a,Wg);return a};var Wg=z.geom.polygon.prototype=[];Wg.area=function(){for(var a=-1,b=this.length,c,d=this[b-1],e=0;++a<b;)c=d,d=this[a],e+=c[1]*d[0]-c[0]*d[1];return.5*e};Wg.centroid=function(a){var b=-1,c=this.length,d=0,e=0,f,r=this[c-1],g;for(arguments.length||(a=-1/(6*this.area()));++b<c;)f=r,r=this[b],g=f[0]*r[1]-r[0]*f[1],d+=(f[0]+r[0])*g,e+=(f[1]+r[1])*g;return[d*a,e*a]};Wg.clip=function(a){for(var b,
c=Re(a),d=-1,e=this.length-Re(this),f,r,g=this[e-1],h,v,l;++d<e;){b=a.slice();a.length=0;h=this[d];v=b[(r=b.length-c)-1];for(f=-1;++f<r;)l=b[f],Qe(l,g,h)?(Qe(v,g,h)||a.push($c(v,l,g,h)),a.push(l)):Qe(v,g,h)&&a.push($c(v,l,g,h)),v=l;c&&a.push(a[0]);g=h}return a};var ff,ze,ef,yh=[],bh,Sf,zh=[];Se.prototype.prepare=function(){for(var a=this.edges,b=a.length,c;b--;)c=a[b].edge,c.b&&c.a||a.splice(b,1);a.sort(Nf);return a.length};ke.prototype={start:function(){return this.edge.l===this.site?this.edge.a:
this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};Ue.prototype={insert:function(a,b){var c,d,e;if(a){b.P=a;if(b.N=a.N)a.N.P=b;a.N=b;if(a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;c=a}else this._?(a=ad(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);b.L=b.R=null;b.U=c;b.C=!0;for(a=b;c&&c.C;)d=c.U,c===d.L?(e=d.R)&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.R&&(Mc(this,c),a=c,c=a.U),c.C=!1,d.C=!0,Nc(this,d)):(e=d.L)&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.L&&
(Nc(this,c),a=c,c=a.U),c.C=!1,d.C=!0,Mc(this,d)),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P);a.P&&(a.P.N=a.N);a.N=a.P=null;var b=a.U,c=a.L,d=a.R,e,f;e=c?d?ad(d):c:d;b?b.L===a?b.L=e:b.R=e:this._=e;c&&d?(f=e.C,e.C=a.C,e.L=c,c.U=e,e!==d?(b=e.U,e.U=a.U,a=e.R,b.L=a,e.R=d,d.U=e):(e.U=b,b=e,a=e.R)):(f=a.C,a=e);a&&(a.U=b);if(!f)if(a&&a.C)a.C=!1;else{do{if(a===this._)break;if(a===b.L){if(a=b.R,a.C&&(a.C=!1,b.C=!0,Mc(this,b),a=b.R),a.L&&a.L.C||a.R&&a.R.C){a.R&&a.R.C||(a.L.C=!1,a.C=!0,Nc(this,a),
a=b.R);a.C=b.C;b.C=a.R.C=!1;Mc(this,b);a=this._;break}}else if(a=b.L,a.C&&(a.C=!1,b.C=!0,Nc(this,b),a=b.L),a.L&&a.L.C||a.R&&a.R.C){a.L&&a.L.C||(a.R.C=!1,a.C=!0,Mc(this,a),a=b.L);a.C=b.C;b.C=a.L.C=!1;Nc(this,b);a=this._;break}a.C=!0;a=b;b=b.U}while(!a.C);a&&(a.C=!1)}}};z.geom.voronoi=function(a){function b(a){var d=Array(a.length),e=g[0][0],f=g[0][1],r=g[1][0],h=g[1][1];Te(c(a),g).cells.forEach(function(b,c){var g=b.edges,v=b.site;(d[c]=g.length?g.map(function(a){a=a.start();return[a.x,a.y]}):v.x>=
e&&v.x<=r&&v.y>=f&&v.y<=h?[[e,h],[r,h],[r,f],[e,f]]:[]).point=a[c]});return d}function c(a){return a.map(function(a,b){return{x:1E-6*Math.round(f(a,b)/1E-6),y:1E-6*Math.round(r(a,b)/1E-6),i:b}})}var d=$b,e=Gd,f=d,r=e,g=Xg;if(a)return b(a);b.links=function(a){return Te(c(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})};b.triangles=function(a){var b=[];Te(c(a)).cells.forEach(function(c,d){for(var e=c.site,f=c.edges.sort(Nf),r=-1,g=f.length,h,
v=f[g-1].edge,v=v.l===e?v.r:v.l;++r<g;)h=v,v=f[r].edge,v=v.l===e?v.r:v.l,d<h.i&&d<v.i&&0>(e.x-v.x)*(h.y-e.y)-(e.x-h.x)*(v.y-e.y)&&b.push([a[d],a[h.i],a[v.i]])});return b};b.x=function(a){return arguments.length?(f=fa(d=a),b):d};b.y=function(a){return arguments.length?(r=fa(e=a),b):e};b.clipExtent=function(a){if(!arguments.length)return g===Xg?null:g;g=null==a?Xg:a;return b};b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):g===Xg?null:g&&g[1]};return b};var Xg=[[-1E6,-1E6],[1E6,
1E6]];z.geom.delaunay=function(a){return z.geom.voronoi().triangles(a)};z.geom.quadtree=function(a,b,c,d,e){function f(a){function v(a,b,c,d,e,f,r,g){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var h=a.x,w=a.y;if(null!=h){if(!(.01>ia(h-c)+ia(w-d))){var m=a.point;a.x=a.y=a.point=null;l(a,m,h,w,e,f,r,g)}l(a,b,c,d,e,f,r,g)}else a.x=c,a.y=d,a.point=b}else l(a,b,c,d,e,f,r,g)}function l(a,b,c,d,e,f,r,g){var h=.5*(e+r),w=.5*(f+g),m=c>=h,B=d>=w,J=(B<<1)+m;a.leaf=!1;a=a.nodes[J]||(a.nodes[J]=lc());m?e=h:r=h;B?f=w:
g=w;v(a,b,c,d,e,f,r,g)}var w,m=fa(r),B=fa(g),J,n,p,q,L,t,W,y;if(null!=b)L=b,t=c,W=d,y=e;else if(W=y=-(L=t=Infinity),J=[],n=[],q=a.length,h)for(p=0;p<q;++p)w=a[p],w.x<L&&(L=w.x),w.y<t&&(t=w.y),w.x>W&&(W=w.x),w.y>y&&(y=w.y),J.push(w.x),n.push(w.y);else for(p=0;p<q;++p){var u=+m(w=a[p],p);w=+B(w,p);u<L&&(L=u);w<t&&(t=w);u>W&&(W=u);w>y&&(y=w);J.push(u);n.push(w)}u=W-L;w=y-t;u>w?y=t+u:W=L+w;var D=lc();D.add=function(a){v(D,a,+m(a,++p),+B(a,p),L,t,W,y)};D.visit=function(a){Xa(a,D,L,t,W,y)};p=-1;if(null==
b){for(;++p<q;)v(D,a[p],J[p],n[p],L,t,W,y);--p}else a.forEach(D.add);J=n=a=w=null;return D}var r=$b,g=Gd,h;if(h=arguments.length)return r=oe,g=Jf,3===h&&(e=c,d=b,c=b=0),f(a);f.x=function(a){return arguments.length?(r=a,f):r};f.y=function(a){return arguments.length?(g=a,f):g};f.extent=function(a){if(!arguments.length)return null==b?null:[[b,c],[d,e]];null==a?b=c=d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]);return f};f.size=function(a){if(!arguments.length)return null==b?null:[d-b,e-c];null==
a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]);return f};return f};z.interpolateRgb=Oc;z.interpolateObject=kc;z.interpolateNumber=Bb;z.interpolateString=pe;var yg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;z.interpolate=Lc;z.interpolators=[function(a,b){var c=typeof b;return("string"===c?sg.has(b)||/^(#|rgb\(|hsl\()/.test(b)?Oc:pe:b instanceof bb?Oc:"object"===c?Array.isArray(b)?ne:kc:Bb)(a,b)}];z.interpolateArray=ne;var Lh=function(){return Ba},ai=z.map({linear:Lh,poly:function(a){return function(b){return Math.pow(b,
a)}},quad:function(){return $g},cubic:function(){return Jd},sin:function(){return pg},exp:function(){return ig},circle:function(){return Of},elastic:function(a,b){var c;2>arguments.length&&(b=.45);arguments.length?c=b/w*Math.asin(1/a):(a=1,c=b/4);return function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-c)*w/b)}},back:function(a){a||(a=1.70158);return function(b){return b*b*((a+1)*b-a)}},bounce:function(){return qg}}),bi=z.map({"in":Ba,out:qe,"in-out":Mf,"out-in":function(a){return Mf(qe(a))}});
z.ease=function(a){var b=a.indexOf("-"),c=0<=b?a.substring(0,b):a,b=0<=b?a.substring(b+1):"in",c=ai.get(c)||Lh,b=bi.get(b)||Ba;return ng(b(c.apply(null,Lg.call(arguments,1))))};z.interpolateHcl=function(a,b){a=z.hcl(a);b=z.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,r=b.c-d,g=b.l-e;isNaN(r)&&(r=0,d=isNaN(d)?b.c:d);isNaN(f)?(f=0,c=isNaN(c)?b.h:c):180<f?f-=360:-180>f&&(f+=360);return function(a){return Jb(c+f*a,d+r*a,e+g*a)+""}};z.interpolateHsl=function(a,b){a=z.hsl(a);b=z.hsl(b);var c=a.h,d=a.s,e=a.l,f=
b.h-c,r=b.s-d,g=b.l-e;isNaN(r)&&(r=0,d=isNaN(d)?b.s:d);isNaN(f)?(f=0,c=isNaN(c)?b.h:c):180<f?f-=360:-180>f&&(f+=360);return function(a){return tb(c+f*a,d+r*a,e+g*a)+""}};z.interpolateLab=function(a,b){a=z.lab(a);b=z.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,r=b.a-d,g=b.b-e;return function(a){return Ra(c+f*a,d+r*a,e+g*a)+""}};z.interpolateRound=yb;z.transform=function(a){var b=oa.createElementNS(z.ns.prefix.svg,"g");return(z.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new gg(c?
c.matrix:ci)})(a)};gg.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ci={a:1,b:0,c:0,d:1,e:0,f:0};z.interpolateTransform=Ff;z.layout={};z.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(Gf(a[c]));return b}};z.layout.chord=function(){function a(){var c={},m=[],B=z.range(r),J=[],n,p,q,L,t;d=[];e=[];n=0;for(L=-1;++L<r;){p=0;for(t=-1;++t<r;)p+=f[L][t];m.push(p);J.push(z.range(r));
n+=p}h&&B.sort(function(a,b){return h(m[a],m[b])});v&&J.forEach(function(a,b){a.sort(function(a,c){return v(f[b][a],f[b][c])})});n=(w-g*r)/n;p=0;for(L=-1;++L<r;){q=p;for(t=-1;++t<r;){var y=B[L],u=J[y][t],D=f[y][u],W=p,ja=p+=D*n;c[y+"-"+u]={index:y,subindex:u,startAngle:W,endAngle:ja,value:D}}e[y]={index:y,startAngle:q,endAngle:p,value:(p-q)/n};p+=g}for(L=-1;++L<r;)for(t=L-1;++t<r;)B=c[L+"-"+t],J=c[t+"-"+L],(B.value||J.value)&&d.push(B.value<J.value?{source:J,target:B}:{source:B,target:J});l&&b()}
function b(){d.sort(function(a,b){return l((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c={},d,e,f,r,g=0,h,v,l;c.matrix=function(a){if(!arguments.length)return f;r=(f=a)&&f.length;d=e=null;return c};c.padding=function(a){if(!arguments.length)return g;g=a;d=e=null;return c};c.sortGroups=function(a){if(!arguments.length)return h;h=a;d=e=null;return c};c.sortSubgroups=function(a){if(!arguments.length)return v;v=a;d=null;return c};c.sortChords=function(a){if(!arguments.length)return l;
l=a;d&&b();return c};c.chords=function(){d||a();return d};c.groups=function(){e||a();return e};return c};z.layout.force=function(){function a(b){return function(a,c,d,e){if(a.point!==b){d=a.cx-b.x;var f=a.cy-b.y;c=e-c;e=d*d+f*f;if(c*c/B<e)return e<w&&(c=a.charge/e,b.px-=d*c,b.py-=f*c),!0;a.point&&e&&e<w&&(c=a.pointCharge/e,b.px-=d*c,b.py-=f*c)}return!a.charge}}function b(a){a.px=z.event.x;a.py=z.event.y;c.resume()}var c={},d=z.dispatch("start","tick","end"),e=[1,1],f,r,g=.9,h=di,v=ei,l=-30,w=fi,m=
.1,B=.64,J=[],n=[],p,q,L;c.tick=function(){if(.005>(r*=.99))return d.end({type:"end",alpha:r=0}),!0;var b=J.length,c=n.length,f,h,v,w,B,t,y;for(f=0;f<c;++f)if(h=n[f],v=h.source,w=h.target,t=w.x-v.x,y=w.y-v.y,B=t*t+y*y)B=r*q[f]*((B=Math.sqrt(B))-p[f])/B,t*=B,y*=B,w.x-=t*(B=v.weight/(w.weight+v.weight)),w.y-=y*B,v.x+=t*(B=1-B),v.y+=y*B;if(B=r*m)if(t=e[0]/2,y=e[1]/2,f=-1,B)for(;++f<b;)h=J[f],h.x+=(t-h.x)*B,h.y+=(y-h.y)*B;if(l)for(Lf(c=z.geom.quadtree(J),r,L),f=-1;++f<b;)(h=J[f]).fixed||c.visit(a(h));
for(f=-1;++f<b;)h=J[f],h.fixed?(h.x=h.px,h.y=h.py):(h.x-=(h.px-(h.px=h.x))*g,h.y-=(h.py-(h.py=h.y))*g);d.tick({type:"tick",alpha:r})};c.nodes=function(a){if(!arguments.length)return J;J=a;return c};c.links=function(a){if(!arguments.length)return n;n=a;return c};c.size=function(a){if(!arguments.length)return e;e=a;return c};c.linkDistance=function(a){if(!arguments.length)return h;h="function"===typeof a?a:+a;return c};c.distance=c.linkDistance;c.linkStrength=function(a){if(!arguments.length)return v;
v="function"===typeof a?a:+a;return c};c.friction=function(a){if(!arguments.length)return g;g=+a;return c};c.charge=function(a){if(!arguments.length)return l;l="function"===typeof a?a:+a;return c};c.chargeDistance=function(a){if(!arguments.length)return Math.sqrt(w);w=a*a;return c};c.gravity=function(a){if(!arguments.length)return m;m=+a;return c};c.theta=function(a){if(!arguments.length)return Math.sqrt(B);B=a*a;return c};c.alpha=function(a){if(!arguments.length)return r;a=+a;r?r=0<a?a:0:0<a&&(d.start({type:"start",
alpha:r=a}),z.timer(c.tick));return c};c.start=function(){function a(c,e){if(!w){w=Array(d);for(r=0;r<d;++r)w[r]=[];for(r=0;r<g;++r){var f=n[r];w[f.source.index].push(f.target);w[f.target.index].push(f.source)}}for(var f=w[b],r=-1,g=f.length,h;++r<g;)if(!isNaN(h=f[r][c]))return h;return Math.random()*e}var b,d=J.length,f=n.length,r=e[0],g=e[1],w,m;for(b=0;b<d;++b)(m=J[b]).index=b,m.weight=0;for(b=0;b<f;++b)m=n[b],"number"==typeof m.source&&(m.source=J[m.source]),"number"==typeof m.target&&(m.target=
J[m.target]),++m.source.weight,++m.target.weight;for(b=0;b<d;++b)m=J[b],isNaN(m.x)&&(m.x=a("x",r)),isNaN(m.y)&&(m.y=a("y",g)),isNaN(m.px)&&(m.px=m.x),isNaN(m.py)&&(m.py=m.y);p=[];if("function"===typeof h)for(b=0;b<f;++b)p[b]=+h.call(this,n[b],b);else for(b=0;b<f;++b)p[b]=h;q=[];if("function"===typeof v)for(b=0;b<f;++b)q[b]=+v.call(this,n[b],b);else for(b=0;b<f;++b)q[b]=v;L=[];if("function"===typeof l)for(b=0;b<d;++b)L[b]=+l.call(this,J[b],b);else for(b=0;b<d;++b)L[b]=l;return c.resume()};c.resume=
function(){return c.alpha(.1)};c.stop=function(){return c.alpha(0)};c.drag=function(){f||(f=z.behavior.drag().origin(Ba).on("dragstart.force",hg).on("drag.force",b).on("dragend.force",Wa));if(!arguments.length)return f;this.on("mouseover.force",Fb).on("mouseout.force",le).call(f)};return z.rebind(c,d,"on")};var di=20,ei=1,fi=Infinity;z.layout.hierarchy=function(){function a(b,r,g){var h=e.call(c,b,r);b.depth=r;g.push(b);if(h&&(w=h.length)){var v=-1,w,l=b.children=Array(w),m=0;r+=1;for(var B;++v<w;)B=
l[v]=a(h[v],r,g),B.parent=b,m+=B.value;d&&l.sort(d);f&&(b.value=m)}else delete b.children,f&&(b.value=+f.call(c,b,r)||0);return b}function b(a,d){var e=a.children,r=0;if(e&&(h=e.length))for(var g=-1,h,v=d+1;++g<h;)r+=b(e[g],v);else f&&(r=+f.call(c,a,d)||0);f&&(a.value=r);return r}function c(b){var d=[];a(b,0,d);return d}var d=kg,e=uc,f=Ve;c.sort=function(a){if(!arguments.length)return d;d=a;return c};c.children=function(a){if(!arguments.length)return e;e=a;return c};c.value=function(a){if(!arguments.length)return f;
f=a;return c};c.revalue=function(a){b(a,0);return a};return c};z.layout.partition=function(){function a(b,c,d,e){var f=b.children;b.x=c;b.y=b.depth*e;b.dx=d;b.dy=e;if(f&&(g=f.length)){var r=-1,g,h;for(d=b.value?d/b.value:0;++r<g;)a(h=f[r],c,b=h.value*d,e),c+=b}}function b(a){a=a.children;var c=0;if(a&&(e=a.length))for(var d=-1,e;++d<e;)c=Math.max(c,b(a[d]));return 1+c}function c(f,r){var g=d.call(this,f,r);a(g[0],0,e[0],e[1]/b(g[0]));return g}var d=z.layout.hierarchy(),e=[1,1];c.size=function(a){if(!arguments.length)return e;
e=a;return c};return Pc(c,d)};z.layout.pie=function(){function a(f){var r=f.map(function(c,d){return+b.call(a,c,d)}),g=+("function"===typeof d?d.apply(this,arguments):d),h=(("function"===typeof e?e.apply(this,arguments):e)-g)/z.sum(r),v=z.range(f.length);null!=c&&v.sort(c===Mh?function(a,b){return r[b]-r[a]}:function(a,b){return c(f[a],f[b])});var w=[];v.forEach(function(a){var b;w[a]={data:f[a],value:b=r[a],startAngle:g,endAngle:g+=b*h}});return w}var b=Number,c=Mh,d=0,e=w;a.value=function(c){if(!arguments.length)return b;
b=c;return a};a.sort=function(b){if(!arguments.length)return c;c=b;return a};a.startAngle=function(b){if(!arguments.length)return d;d=b;return a};a.endAngle=function(b){if(!arguments.length)return e;e=b;return a};return a};var Mh={};z.layout.stack=function(){function a(g,h){var v=g.map(function(c,d){return b.call(a,c,d)}),w=v.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),r.call(a,b,c)]})}),l=c.call(a,w,h),v=z.permute(v,l),w=z.permute(w,l),l=d.call(a,w,h),m=v.length,B=v[0].length,
J,n,p;for(n=0;n<B;++n)for(e.call(a,v[0][n],p=l[n],w[0][n][1]),J=1;J<m;++J)e.call(a,v[J][n],p+=w[J-1][n][1],w[J][n][1]);return g}var b=Ba,c=Dc,d=Ae,e=pc,f=ha,r=nd;a.values=function(c){if(!arguments.length)return b;b=c;return a};a.order=function(b){if(!arguments.length)return c;c="function"===typeof b?b:gi.get(b)||Dc;return a};a.offset=function(b){if(!arguments.length)return d;d="function"===typeof b?b:hi.get(b)||Ae;return a};a.x=function(b){if(!arguments.length)return f;f=b;return a};a.y=function(b){if(!arguments.length)return r;
r=b;return a};a.out=function(b){if(!arguments.length)return e;e=b;return a};return a};var gi=z.map({"inside-out":function(a){var b=a.length,c,d=a.map(gf),e=a.map(hf),f=z.range(b).sort(function(a,b){return d[a]-d[b]}),r=0,g=0,h=[],v=[];for(a=0;a<b;++a)c=f[a],r<g?(r+=e[c],h.push(c)):(g+=e[c],v.push(c));return v.reverse().concat(h)},reverse:function(a){return z.range(a.length).reverse()},"default":Dc}),hi=z.map({silhouette:function(a){var b=a.length,c=a[0].length,d=[],e=0,f,r,g,h=[];for(r=0;r<c;++r){for(g=
f=0;f<b;f++)g+=a[f][r][1];g>e&&(e=g);d.push(g)}for(r=0;r<c;++r)h[r]=(e-d[r])/2;return h},wiggle:function(a){var b=a.length,c=a[0],d=c.length,e,f,r,g,h,v,w,l,m,B=[];B[0]=l=m=0;for(f=1;f<d;++f){for(g=e=0;e<b;++e)g+=a[e][f][1];h=e=0;for(w=c[f][0]-c[f-1][0];e<b;++e){r=0;for(v=(a[e][f][1]-a[e][f-1][1])/(2*w);r<e;++r)v+=(a[r][f][1]-a[r][f-1][1])/w;h+=v*a[e][f][1]}B[f]=l-=g?h/g*w:0;l<m&&(m=l)}for(f=0;f<d;++f)B[f]-=m;return B},expand:function(a){var b=a.length,c=a[0].length,d=1/b,e,f,r,g=[];for(f=0;f<c;++f){for(r=
e=0;e<b;e++)r+=a[e][f][1];if(r)for(e=0;e<b;e++)a[e][f][1]/=r;else for(e=0;e<b;e++)a[e][f][1]=d}for(f=0;f<c;++f)g[f]=0;return g},zero:Ae});z.layout.histogram=function(){function a(f,r){var g=[],h=f.map(c,this),v=d.call(this,h,r),w=e.call(this,v,h,r),l;r=-1;for(var m=h.length,B=w.length-1,J=b?1:1/m;++r<B;)l=g[r]=[],l.dx=w[r+1]-(l.x=w[r]),l.y=0;if(0<B)for(r=-1;++r<m;)l=h[r],l>=v[0]&&l<=v[1]&&(l=g[z.bisect(w,l,1,B)-1],l.y+=J,l.push(f[r]));return g}var b=!0,c=Number,d=ch,e=zg;a.value=function(b){if(!arguments.length)return c;
c=b;return a};a.range=function(b){if(!arguments.length)return d;d=fa(b);return a};a.bins=function(b){if(!arguments.length)return e;e="number"===typeof b?function(a){return Ag(a,b)}:fa(b);return a};a.frequency=function(c){if(!arguments.length)return b;b=!!c;return a};return a};z.layout.tree=function(){function a(f,r){function g(a,b){var d=a.children,e=a._tree;if(d&&(f=d.length)){for(var f,r=d[0],h,v=r,w,l=-1;++l<f;){w=d[l];g(w,h);var m=w;if(h){for(var B=m,J=m,n=m.parent.children[0],p=B._tree.mod,q=
J._tree.mod,L=h._tree.mod,t=n._tree.mod,y=void 0;h=Be(h),B=Uf(B),h&&B;){n=Uf(n);J=Be(J);J._tree.ancestor=m;y=h._tree.prelim+L-B._tree.prelim-p+c(h,B);if(0<y){var u=h._tree.ancestor.parent==m.parent?h._tree.ancestor:v,D=m,ja=y,u=u._tree,D=D._tree,F=ja/(D.number-u.number);u.change+=F;D.change-=F;D.shift+=ja;D.prelim+=ja;D.mod+=ja;p+=y;q+=y}L+=h._tree.mod;p+=B._tree.mod;t+=n._tree.mod;q+=J._tree.mod}h&&!Be(J)&&(J._tree.thread=h,J._tree.mod+=L-q);B&&!Uf(n)&&(n._tree.thread=B,n._tree.mod+=p-t,v=m)}h=w}f=
d=0;l=a.children;for(m=l.length;0<=--m;)v=l[m]._tree,v.prelim+=d,v.mod+=d,d+=v.shift+(f+=v.change);r=.5*(r._tree.prelim+w._tree.prelim);b?(e.prelim=b._tree.prelim+c(a,b),e.mod=e.prelim-r):e.prelim=r}else b&&(e.prelim=b._tree.prelim+c(a,b))}function h(a,b){a.x=a._tree.prelim+b;var c=a.children;if(c&&(e=c.length)){var d=-1,e;for(b+=a._tree.mod;++d<e;)h(c[d],b)}}var v=b.call(this,f,r),w=v[0];Ec(w,function(a,b){a._tree={ancestor:a,prelim:0,mod:0,change:0,shift:0,number:b?b._tree.number+1:0}});g(w);h(w,
-w._tree.prelim);var l=Wd(w,kf),m=Wd(w,jf),B=Wd(w,Cg),J=l.x-c(l,m)/2,n=m.x+c(m,l)/2,p=B.depth||1;Ec(w,e?function(a){a.x*=d[0];a.y=a.depth*d[1];delete a._tree}:function(a){a.x=(a.x-J)/(n-J)*d[0];a.y=a.depth/p*d[1];delete a._tree});return v}var b=z.layout.hierarchy().sort(null).value(null),c=Bg,d=[1,1],e=!1;a.separation=function(b){if(!arguments.length)return c;c=b;return a};a.size=function(b){if(!arguments.length)return e?null:d;e=null==(d=b);return a};a.nodeSize=function(b){if(!arguments.length)return e?
d:null;e=null!=(d=b);return a};return Pc(a,b)};z.layout.pack=function(){function a(f,r){var g=b.call(this,f,r),h=g[0],v=d[0],w=d[1],l=null==e?Math.sqrt:"function"===typeof e?e:function(){return e};h.x=h.y=0;Ec(h,function(a){a.r=+l(a.value)});Ec(h,Xd);if(c){var m=c*(e?1:Math.max(2*h.r/v,2*h.r/w))/2;Ec(h,function(a){a.r+=m});Ec(h,Xd);Ec(h,function(a){a.r-=m})}Fa(h,v/2,w/2,e?1:1/Math.max(2*h.r/v,2*h.r/w));return g}var b=z.layout.hierarchy().sort(Vf),c=0,d=[1,1],e;a.size=function(b){if(!arguments.length)return d;
d=b;return a};a.radius=function(b){if(!arguments.length)return e;e=null==b||"function"===typeof b?b:+b;return a};a.padding=function(b){if(!arguments.length)return c;c=+b;return a};return Pc(a,b)};z.layout.cluster=function(){function a(f,r){var g=b.call(this,f,r),h=g[0],v,w=0;Ec(h,function(a){var b=a.children;b&&b.length?(a.x=dh(b),a.y=Gb(b)):(a.x=v?w+=c(a,v):0,a.y=0,v=a)});var l=Fg(h),m=dc(h),B=l.x-c(l,m)/2,J=m.x+c(m,l)/2;Ec(h,e?function(a){a.x=(a.x-h.x)*d[0];a.y=(h.y-a.y)*d[1]}:function(a){a.x=(a.x-
B)/(J-B)*d[0];a.y=(1-(h.y?a.y/h.y:1))*d[1]});return g}var b=z.layout.hierarchy().sort(null).value(null),c=Bg,d=[1,1],e=!1;a.separation=function(b){if(!arguments.length)return c;c=b;return a};a.size=function(b){if(!arguments.length)return e?null:d;e=null==(d=b);return a};a.nodeSize=function(b){if(!arguments.length)return e?d:null;e=null!=(d=b);return a};return Pc(a,b)};z.layout.treemap=function(){function a(b,c){for(var d=-1,e=b.length,f,r;++d<e;)r=(f=b[d]).value*(0>c?0:c),f.area=isNaN(r)||0>=r?0:
r}function b(c){var e=c.children;if(e&&e.length){var f=v(c),r=[],g=e.slice(),h=Infinity,w,l="slice"===m?f.dx:"dice"===m?f.dy:"slice-dice"===m?c.depth&1?f.dy:f.dx:Math.min(f.dx,f.dy);a(g,f.dx*f.dy/c.value);for(r.area=0;0<(c=g.length);){r.push(c=g[c-1]);r.area+=c.area;if(!(c="squarify"!==m)){w=l;c=r.area;for(var J=void 0,n=0,p=Infinity,q=-1,L=r.length;++q<L;)if(J=r[q].area)J<p&&(p=J),J>n&&(n=J);c*=c;w*=w;c=(w=c?Math.max(w*n*B/c,c/(w*p*B)):Infinity)<=h}c?(g.pop(),h=w):(r.area-=r.pop().area,d(r,l,f,!1),
l=Math.min(f.dx,f.dy),r.length=r.area=0,h=Infinity)}r.length&&(d(r,l,f,!0),r.length=r.area=0);e.forEach(b)}}function c(b){var e=b.children;if(e&&e.length){var f=v(b),r=e.slice(),g=[];a(r,f.dx*f.dy/b.value);for(g.area=0;b=r.pop();)g.push(b),g.area+=b.area,null!=b.z&&(d(g,b.z?f.dx:f.dy,f,!r.length),g.length=g.area=0);e.forEach(c)}}function d(a,b,c,e){var f=-1,g=a.length,h=c.x,v=c.y,w=b?r(a.area/b):0,l;if(b==c.dx){if(e||w>c.dy)w=c.dy;for(;++f<g;)l=a[f],l.x=h,l.y=v,l.dy=w,h+=l.dx=Math.min(c.x+c.dx-h,
w?r(l.area/w):0);l.z=!0;l.dx+=c.x+c.dx-h;c.y+=w;c.dy-=w}else{if(e||w>c.dx)w=c.dx;for(;++f<g;)l=a[f],l.x=h,l.y=v,l.dx=w,v+=l.dy=Math.min(c.y+c.dy-v,w?r(l.area/w):0);l.z=!1;l.dy+=c.y+c.dy-v;c.x+=w;c.dx-=w}}function e(d){d=l||f(d);var r=d[0];r.x=0;r.y=0;r.dx=g[0];r.dy=g[1];l&&f.revalue(r);a([r],r.dx*r.dy/r.value);(l?c:b)(r);w&&(l=d);return d}var f=z.layout.hierarchy(),r=Math.round,g=[1,1],h=null,v=mf,w=!1,l,m="squarify",B=.5*(1+Math.sqrt(5));e.size=function(a){if(!arguments.length)return g;g=a;return e};
e.padding=function(a){function b(c){var d=a.call(e,c,c.depth);return null==d?mf(c):nf(c,"number"===typeof d?[d,d,d,d]:d)}function c(b){return nf(b,a)}if(!arguments.length)return h;var d;v=null==(h=a)?mf:"function"===(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c;return e};e.round=function(a){if(!arguments.length)return r!=Number;r=a?Math.round:Number;return e};e.sticky=function(a){if(!arguments.length)return w;w=a;l=null;return e};e.ratio=function(a){if(!arguments.length)return B;B=a;return e};e.mode=
function(a){if(!arguments.length)return m;m=a+"";return e};return Pc(e,f)};z.random={normal:function(a,b){var c=arguments.length;2>c&&(b=1);1>c&&(a=0);return function(){var c,d;do c=2*Math.random()-1,d=2*Math.random()-1,d=c*c+d*d;while(!d||1<d);return a+b*c*Math.sqrt(-2*Math.log(d)/d)}},logNormal:function(){var a=z.random.normal.apply(z,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=z.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=
0,c=0;c<a;c++)b+=Math.random();return b}}};z.scale={};var Uh={floor:Ba,ceil:Ba};z.scale.linear=function(){return gd([0,1],[0,1],Lc,!1)};var Vh={s:1,g:1,p:1,r:1,e:1};z.scale.log=function(){return Aa(z.scale.linear().domain([0,1]),10,!0,[1,10])};var Ah=z.format(".0e"),Wh={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};z.scale.pow=function(){return rf(z.scale.linear(),1,[0,1])};z.scale.sqrt=function(){return z.scale.pow().exponent(.5)};z.scale.ordinal=function(){return Ad([],
{t:"range",a:[[]]})};z.scale.category10=function(){return z.scale.ordinal().range(ii)};z.scale.category20=function(){return z.scale.ordinal().range(ji)};z.scale.category20b=function(){return z.scale.ordinal().range(ki)};z.scale.category20c=function(){return z.scale.ordinal().range(li)};var ii=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(wb),ji=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,
16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(wb),ki=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(wb),li=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(wb);z.scale.quantile=function(){return Gg([],[])};z.scale.quantize=
function(){return hd(0,1,[0,1])};z.scale.threshold=function(){return Ee([.5],[0,1])};z.scale.identity=function(){return Fe([0,1])};z.svg={};z.svg.arc=function(){function a(){var f=b.apply(this,arguments),r=c.apply(this,arguments),g=d.apply(this,arguments)+Ie,h=e.apply(this,arguments)+Ie,w=(h<g&&(w=g,g=h,h=w),h-g),l=w<v?"0":"1",m=Math.cos(g),g=Math.sin(g),B=Math.cos(h),h=Math.sin(h);return w>=mi?f?"M0,"+r+"A"+r+","+r+" 0 1,1 0,"+-r+"A"+r+","+r+" 0 1,1 0,"+r+"M0,"+f+"A"+f+","+f+" 0 1,0 0,"+-f+"A"+f+
","+f+" 0 1,0 0,"+f+"Z":"M0,"+r+"A"+r+","+r+" 0 1,1 0,"+-r+"A"+r+","+r+" 0 1,1 0,"+r+"Z":f?"M"+r*m+","+r*g+"A"+r+","+r+" 0 "+l+",1 "+r*B+","+r*h+"L"+f*B+","+f*h+"A"+f+","+f+" 0 "+l+",0 "+f*m+","+f*g+"Z":"M"+r*m+","+r*g+"A"+r+","+r+" 0 "+l+",1 "+r*B+","+r*h+"L0,0Z"}var b=Hg,c=sf,d=fc,e=Xf;a.innerRadius=function(c){if(!arguments.length)return b;b=fa(c);return a};a.outerRadius=function(b){if(!arguments.length)return c;c=fa(b);return a};a.startAngle=function(b){if(!arguments.length)return d;d=fa(b);return a};
a.endAngle=function(b){if(!arguments.length)return e;e=fa(b);return a};a.centroid=function(){var a=(b.apply(this,arguments)+c.apply(this,arguments))/2,f=(d.apply(this,arguments)+e.apply(this,arguments))/2+Ie;return[Math.cos(f)*a,Math.sin(f)*a]};return a};var Ie=-J,mi=w-1E-6;z.svg.line=function(){return tf(Ba)};var fh=z.map({linear:rb,"linear-closed":function(a){return rb(a)+"Z"},step:function(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);1<c&&
e.push("H",d[0]);return e.join("")},"step-before":Yf,"step-after":id,basis:$d,"basis-open":function(a){if(4>a.length)return rb(a);for(var b=[],c=-1,d=a.length,e,f=[0],r=[0];3>++c;)e=a[c],f.push(e[0]),r.push(e[1]);b.push(Pb(ae,f)+","+Pb(ae,r));for(--c;++c<d;)e=a[c],f.shift(),f.push(e[0]),r.shift(),r.push(e[1]),He(b,f,r);return b.join("")},"basis-closed":function(a){for(var b,c=-1,d=a.length,e=d+4,f,r=[],g=[];4>++c;)f=a[c%d],r.push(f[0]),g.push(f[1]);b=[Pb(ae,r),",",Pb(ae,g)];for(--c;++c<e;)f=a[c%d],
r.shift(),r.push(f[0]),g.shift(),g.push(f[1]),He(b,r,g);return b.join("")},bundle:function(a,b){var c=a.length-1;if(c)for(var d=a[0][0],e=a[0][1],f=a[c][0]-d,r=a[c][1]-e,g=-1,h,v;++g<=c;)h=a[g],v=g/c,h[0]=b*h[0]+(1-b)*(d+v*f),h[1]=b*h[1]+(1-b)*(e+v*r);return $d(a)},cardinal:function(a,b){return 3>a.length?rb(a):a[0]+Ge(a,uf(a,b))},"cardinal-open":function(a,b){return 4>a.length?rb(a):a[1]+Ge(a.slice(1,a.length-1),uf(a,b))},"cardinal-closed":function(a,b){return 3>a.length?rb(a):a[0]+Ge((a.push(a[0]),
a),uf([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length)a=rb(a);else{var b=a[0],c=[],d,e,f,r;d=0;e=a.length-1;var g=[];f=a[1];for(r=g[0]=Xc(a[0],f);++d<e;)g[d]=(r+(r=Xc(f,f=a[d+1])))/2;g[d]=r;for(var h=-1,v=a.length-1;++h<v;)d=Xc(a[h],a[h+1]),1E-6>ia(d)?g[h]=g[h+1]=0:(e=g[h]/d,f=g[h+1]/d,r=e*e+f*f,9<r&&(r=3*d/Math.sqrt(r),g[h]=r*e,g[h+1]=r*f));for(h=-1;++h<=v;)r=(a[Math.min(v,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+g[h]*g[h])),c.push([r||0,g[h]*r||0]);a=b+Ge(a,c)}return a}});
fh.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var Bh=[0,2/3,1/3,0],Ch=[0,1/3,2/3,0],ae=[0,1/6,2/3,1/6];z.svg.line.radial=function(){var a=tf(be);a.radius=a.x;delete a.x;a.angle=a.y;delete a.y;return a};Yf.reverse=id;id.reverse=Yf;z.svg.area=function(){return Ig(Ba)};z.svg.area.radial=function(){var a=Ig(be);a.radius=a.x;delete a.x;a.innerRadius=a.x0;delete a.x0;a.outerRadius=a.x1;delete a.x1;a.angle=a.y;delete a.y;a.startAngle=a.y0;delete a.y0;a.endAngle=a.y1;delete a.y1;return a};
z.svg.chord=function(){function a(f,r){var g=b(this,d,f,r),h=b(this,e,f,r);return"M"+g.p0+c(g.r,g.p1,g.a1-g.a0)+(g.a0==h.a0&&g.a1==h.a1?"Q 0,0 "+g.p0:"Q 0,0 "+h.p0+c(h.r,h.p1,h.a1-h.a0)+("Q 0,0 "+g.p0))+"Z"}function b(a,c,d,e){var h=c.call(a,d,e);c=f.call(a,h,e);d=r.call(a,h,e)+Ie;a=g.call(a,h,e)+Ie;return{r:c,a0:d,a1:a,p0:[c*Math.cos(d),c*Math.sin(d)],p1:[c*Math.cos(a),c*Math.sin(a)]}}function c(a,b,d){return"A"+a+","+a+" 0 "+ +(d>v)+",1 "+b}var d=Dd,e=ld,f=vf,r=fc,g=Xf;a.radius=function(b){if(!arguments.length)return f;
f=fa(b);return a};a.source=function(b){if(!arguments.length)return d;d=fa(b);return a};a.target=function(b){if(!arguments.length)return e;e=fa(b);return a};a.startAngle=function(b){if(!arguments.length)return r;r=fa(b);return a};a.endAngle=function(b){if(!arguments.length)return g;g=fa(b);return a};return a};z.svg.diagonal=function(){function a(e,f){var r=b.call(this,e,f),g=c.call(this,e,f),h=(r.y+g.y)/2,r=[r,{x:r.x,y:h},{x:g.x,y:h},g],r=r.map(d);return"M"+r[0]+"C"+r[1]+" "+r[2]+" "+r[3]}var b=Dd,
c=ld,d=Ic;a.source=function(c){if(!arguments.length)return b;b=fa(c);return a};a.target=function(b){if(!arguments.length)return c;c=fa(b);return a};a.projection=function(b){if(!arguments.length)return d;d=b;return a};return a};z.svg.diagonal.radial=function(){var a=z.svg.diagonal(),b=Ic,c=a.projection;a.projection=function(a){return arguments.length?c(wf(b=a)):b};return a};z.svg.symbol=function(){function a(d,e){return(Nh.get(b.call(this,d,e))||Je)(c.call(this,d,e))}var b=hh,c=gh;a.type=function(c){if(!arguments.length)return b;
b=fa(c);return a};a.size=function(b){if(!arguments.length)return c;c=fa(b);return a};return a};var Nh=z.map({circle:Je,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*Oh));var b=a*Oh;return"M0,"+-a+"L"+b+",0 0,"+a+" "+-b+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/
Yg);var b=a*Yg/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){a=Math.sqrt(a/Yg);var b=a*Yg/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});z.svg.symbolTypes=Nh.keys();var Yg=Math.sqrt(3),Oh=Math.tan(30*B),zb=[],Dh=0,Ne,Mg;zb.call=za.call;zb.empty=za.empty;zb.node=za.node;zb.size=za.size;z.transition=function(a){return arguments.length?Ne?a.transition():a:zf.transition()};z.transition.prototype=zb;zb.select=function(a){var b=this.id,c=[],d,e,f;a=I(a);for(var r=-1,g=this.length;++r<
g;){c.push(d=[]);for(var h=this[r],v=-1,w=h.length;++v<w;)(f=h[v])&&(e=a.call(f,f.__data__,v,r))?("__data__"in f&&(e.__data__=f.__data__),Bd(e,v,b,f.__transition__[b]),d.push(e)):d.push(null)}return qc(c,b)};zb.selectAll=function(a){var b=this.id,c=[],d,e,f,r;a=y(a);for(var g=-1,h=this.length;++g<h;)for(var v=this[g],w=-1,l=v.length;++w<l;)if(d=v[w]){r=d.__transition__[b];e=a.call(d,d.__data__,w,g);c.push(d=[]);for(var m=-1,B=e.length;++m<B;)(f=e[m])&&Bd(f,m,b,r),d.push(f)}return qc(c,b)};zb.filter=
function(a){var b=[],c,d,e;"function"!==typeof a&&(a=ka(a));for(var f=0,r=this.length;f<r;f++){b.push(c=[]);d=this[f];for(var g=0,h=d.length;g<h;g++)(e=d[g])&&a.call(e,e.__data__,g,f)&&c.push(e)}return qc(b,this.id)};zb.tween=function(a,b){var c=this.id;return 2>arguments.length?this.node().__transition__[c].tween.get(a):ra(this,null==b?function(b){b.__transition__[c].tween.remove(a)}:function(d){d.__transition__[c].tween.set(a,b)})};zb.attr=function(a,b){function c(){this.removeAttribute(g)}function d(){this.removeAttributeNS(g.space,
g.local)}function e(a){return null==a?c:(a+="",function(){var b=this.getAttribute(g),c;return b!==a&&(c=r(b,a),function(a){this.setAttribute(g,c(a))})})}function f(a){return null==a?d:(a+="",function(){var b=this.getAttributeNS(g.space,g.local),c;return b!==a&&(c=r(b,a),function(a){this.setAttributeNS(g.space,g.local,c(a))})})}if(2>arguments.length){for(b in a)this.attr(b,a[b]);return this}var r="transform"==a?Ff:Lc,g=z.ns.qualify(a);return Zf(this,"attr."+a,b,g.local?f:e)};zb.attrTween=function(a,
b){function c(a,d){var f=b.call(this,a,d,this.getAttribute(e));return f&&function(a){this.setAttribute(e,f(a))}}function d(a,c){var f=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return f&&function(a){this.setAttributeNS(e.space,e.local,f(a))}}var e=z.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)};zb.style=function(a,b,c){function d(){this.style.removeProperty(a)}var e=arguments.length;if(3>e){if("string"!==typeof a){2>e&&(b="");for(c in a)this.style(c,a[c],b);return this}c=""}return Zf(this,
"style."+a,b,function(b){return null==b?d:(b+="",function(){var d=Ha.getComputedStyle(this,null).getPropertyValue(a),e;return d!==b&&(e=Lc(d,b),function(b){this.style.setProperty(a,e(b),c)})})})};zb.styleTween=function(a,b,c){3>arguments.length&&(c="");return this.tween("style."+a,function(d,e){var f=b.call(this,d,e,Ha.getComputedStyle(this,null).getPropertyValue(a));return f&&function(b){this.style.setProperty(a,f(b),c)}})};zb.text=function(a){return Zf(this,"text",a,xf)};zb.remove=function(){return this.each("end.transition",
function(){var a;2>this.__transition__.count&&(a=this.parentNode)&&a.removeChild(this)})};zb.ease=function(a){var b=this.id;if(1>arguments.length)return this.node().__transition__[b].ease;"function"!==typeof a&&(a=z.ease.apply(z,arguments));return ra(this,function(c){c.__transition__[b].ease=a})};zb.delay=function(a){var b=this.id;return ra(this,"function"===typeof a?function(c,d,e){c.__transition__[b].delay=+a.call(c,c.__data__,d,e)}:(a=+a,function(c){c.__transition__[b].delay=a}))};zb.duration=
function(a){var b=this.id;return ra(this,"function"===typeof a?function(c,d,e){c.__transition__[b].duration=Math.max(1,a.call(c,c.__data__,d,e))}:(a=Math.max(1,a),function(c){c.__transition__[b].duration=a}))};zb.each=function(a,b){var c=this.id;if(2>arguments.length){var d=Mg,e=Ne;Ne=c;ra(this,function(b,d,e){Mg=b.__transition__[c];a.call(b,b.__data__,d,e)});Mg=d;Ne=e}else ra(this,function(d){d=d.__transition__[c];(d.event||(d.event=z.dispatch("start","end"))).on(a,b)});return this};zb.transition=
function(){for(var a=this.id,b=++Dh,c=[],d,e,f,r,g=0,h=this.length;g<h;g++){c.push(d=[]);e=this[g];for(var v=0,w=e.length;v<w;v++){if(f=e[v])r=Object.create(f.__transition__[a]),r.delay+=r.duration,Bd(f,v,b,r);d.push(f)}}return qc(c,b)};z.svg.axis=function(){function a(v){v.each(function(){var a=z.select(this),v=this.__chart__||b,w=this.__chart__=b.copy(),l=null==g?w.ticks?w.ticks.apply(w,r):w.domain():g,m=null==h?w.tickFormat?w.tickFormat.apply(w,r):Ba:h,B=a.selectAll(".tick").data(l,w),l=B.enter().insert("g",
".domain").attr("class","tick").style("opacity",1E-6),J=z.transition(B.exit()).style("opacity",1E-6).remove(),n=z.transition(B).style("opacity",1),p,q=of(w),a=a.selectAll(".domain").data([0]),a=(a.enter().append("path").attr("class","domain"),z.transition(a));l.append("line");l.append("text");var L=l.select("line"),t=n.select("line"),m=B.select("text").text(m),B=l.select("text"),y=n.select("text");switch(c){case "bottom":p=jd;L.attr("y2",d);B.attr("y",Math.max(d,0)+f);t.attr("x2",0).attr("y2",d);
y.attr("x",0).attr("y",Math.max(d,0)+f);m.attr("dy",".71em").style("text-anchor","middle");a.attr("d","M"+q[0]+","+e+"V0H"+q[1]+"V"+e);break;case "top":p=jd;L.attr("y2",-d);B.attr("y",-(Math.max(d,0)+f));t.attr("x2",0).attr("y2",-d);y.attr("x",0).attr("y",-(Math.max(d,0)+f));m.attr("dy","0em").style("text-anchor","middle");a.attr("d","M"+q[0]+","+-e+"V0H"+q[1]+"V"+-e);break;case "left":p=Jg;L.attr("x2",-d);B.attr("x",-(Math.max(d,0)+f));t.attr("x2",-d).attr("y2",0);y.attr("x",-(Math.max(d,0)+f)).attr("y",
0);m.attr("dy",".32em").style("text-anchor","end");a.attr("d","M"+-e+","+q[0]+"H0V"+q[1]+"H"+-e);break;case "right":p=Jg,L.attr("x2",d),B.attr("x",Math.max(d,0)+f),t.attr("x2",d).attr("y2",0),y.attr("x",Math.max(d,0)+f).attr("y",0),m.attr("dy",".32em").style("text-anchor","start"),a.attr("d","M"+e+","+q[0]+"H0V"+q[1]+"H"+e)}if(w.rangeBand)var D=w,u=D.rangeBand()/2,v=w=function(a){return D(a)+u};else v.rangeBand?v=w:J.call(p,w);l.call(p,v);n.call(p,w)})}var b=z.scale.linear(),c=Ph,d=6,e=6,f=3,r=[10],
g=null,h;a.scale=function(c){if(!arguments.length)return b;b=c;return a};a.orient=function(b){if(!arguments.length)return c;c=b in ni?b+"":Ph;return a};a.ticks=function(){if(!arguments.length)return r;r=arguments;return a};a.tickValues=function(b){if(!arguments.length)return g;g=b;return a};a.tickFormat=function(b){if(!arguments.length)return h;h=b;return a};a.tickSize=function(b){var c=arguments.length;if(!c)return d;d=+b;e=+arguments[c-1];return a};a.innerTickSize=function(b){if(!arguments.length)return d;
d=+b;return a};a.outerTickSize=function(b){if(!arguments.length)return e;e=+b;return a};a.tickPadding=function(b){if(!arguments.length)return f;f=+b;return a};a.tickSubdivide=function(){return arguments.length&&a};return a};var Ph="bottom",ni={top:1,right:1,bottom:1,left:1};z.svg.brush=function(){function a(f){f.each(function(){var f=z.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",e).on("touchstart.brush",e),h=f.selectAll(".background").data([0]);
h.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");f.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var v=f.selectAll(".resize").data(J,Ba);v.exit().remove();v.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return oi[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",
6).attr("height",6).style("visibility","hidden");v.style("display",a.empty()?"none":null);f=z.transition(f);h=z.transition(h);r&&(v=of(r),h.attr("x",v[0]).attr("width",v[1]-v[0]),c(f));g&&(v=of(g),h.attr("y",v[0]).attr("height",v[1]-v[0]),d(f));b(f)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+h[+/e$/.test(a)]+","+v[+/^s/.test(a)]+")"})}function c(a){a.select(".extent").attr("x",h[0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",h[1]-h[0])}function d(a){a.select(".extent").attr("y",
v[0]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",v[1]-v[0])}function e(){function J(){var a=z.mouse(q),e=!1;O&&(a[0]+=O[0],a[1]+=O[1]);x||(z.event.altKey?(A||(A=[(h[0]+h[1])/2,(v[0]+v[1])/2]),G[0]=h[+(a[0]<A[0])],G[1]=v[+(a[1]<A[1])]):A=null);ja&&n(a,r,0)&&(c(y),e=!0);F&&n(a,g,1)&&(d(y),e=!0);e&&(b(y),t({type:"brush",mode:x?"move":"resize"}))}function n(a,b,c){var d=of(b);b=d[0];var e=d[1],d=G[c],f=c?v:h,r=f[1]-f[0];x&&(b-=d,e-=r+d);a=(c?B:m)?Math.max(b,Math.min(e,a[c])):a[c];x?b=(a+=d)+
r:(A&&(d=Math.max(b,Math.min(e,2*A[c]-a))),d<a?(b=a,a=d):b=d);if(f[0]!=a||f[1]!=b)return c?l=null:w=null,f[0]=a,f[1]=b,!0}function p(){J();y.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);z.select("body").style("cursor",null);ee.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);Oe();t({type:"brushend"})}var q=this,L=z.select(z.event.target),t=f.of(q,arguments),
y=z.select(q),D=L.datum(),ja=!/^(n|s)$/.test(D)&&r,F=!/^(e|w)$/.test(D)&&g,x=L.classed("extent"),Oe=Q(),A,G=z.mouse(q),O,ee=z.select(Ha).on("keydown.brush",function(){32==z.event.keyCode&&(x||(A=null,G[0]-=h[1],G[1]-=v[1],x=2),u())}).on("keyup.brush",function(){32==z.event.keyCode&&2==x&&(G[0]+=h[1],G[1]+=v[1],x=0,u())});if(z.event.changedTouches)ee.on("touchmove.brush",J).on("touchend.brush",p);else ee.on("mousemove.brush",J).on("mouseup.brush",p);y.interrupt().selectAll("*").interrupt();if(x)G[0]=
h[0]-G[0],G[1]=v[0]-G[1];else if(D){var E=+/w$/.test(D),D=+/^n/.test(D);O=[h[1-E]-G[0],v[1-D]-G[1]];G[0]=h[E];G[1]=v[D]}else z.event.altKey&&(A=G.slice());y.style("pointer-events","none").selectAll(".resize").style("display",null);z.select("body").style("cursor",L.style("cursor"));t({type:"brushstart"});J()}var f=A(a,"brushstart","brush","brushend"),r=null,g=null,h=[0,0],v=[0,0],w,l,m=!0,B=!0,J=mh[0];a.event=function(a){a.each(function(){var a=f.of(this,arguments),b={x:h,y:v,i:w,j:l},c=this.__chart__||
b;this.__chart__=b;Ne?z.select(this).transition().each("start.brush",function(){w=c.i;l=c.j;h=c.x;v=c.y;a({type:"brushstart"})}).tween("brush:brush",function(){var c=ne(h,b.x),d=ne(v,b.y);w=l=null;return function(e){h=b.x=c(e);v=b.y=d(e);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){w=b.i;l=b.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})};a.x=function(b){if(!arguments.length)return r;r=b;J=
mh[!r<<1|!g];return a};a.y=function(b){if(!arguments.length)return g;g=b;J=mh[!r<<1|!g];return a};a.clamp=function(b){if(!arguments.length)return r&&g?[m,B]:r?m:g?B:null;r&&g?(m=!!b[0],B=!!b[1]):r?m=!!b:g&&(B=!!b);return a};a.extent=function(b){var c,d,e,f,m;if(!arguments.length)return r&&(w?(c=w[0],d=w[1]):(c=h[0],d=h[1],r.invert&&(c=r.invert(c),d=r.invert(d)),d<c&&(m=c,c=d,d=m))),g&&(l?(e=l[0],f=l[1]):(e=v[0],f=v[1],g.invert&&(e=g.invert(e),f=g.invert(f)),f<e&&(m=e,e=f,f=m))),r&&g?[[c,e],[d,f]]:
r?[c,d]:g&&[e,f];r&&(c=b[0],d=b[1],g&&(c=c[0],d=d[0]),w=[c,d],r.invert&&(c=r(c),d=r(d)),d<c&&(m=c,c=d,d=m),c!=h[0]||d!=h[1])&&(h=[c,d]);g&&(e=b[0],f=b[1],r&&(e=e[1],f=f[1]),l=[e,f],g.invert&&(e=g(e),f=g(f)),f<e&&(m=e,e=f,f=m),e!=v[0]||f!=v[1])&&(v=[e,f]);return a};a.clear=function(){a.empty()||(h=[0,0],v=[0,0],w=l=null);return a};a.empty=function(){return!!r&&h[0]==h[1]||!!g&&v[0]==v[1]};return z.rebind(a,f,"on")};var oi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",
se:"nwse-resize",sw:"nesw-resize"},mh=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],nh=U.format=Eh.timeFormat,Qh=nh.utc,Rh=Qh("%Y-%m-%dT%H:%M:%S.%LZ");nh.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?$f:Rh;$f.parse=function(a){a=new Date(a);return isNaN(a)?null:a};$f.toString=Rh.toString;U.second=T(function(a){return new Tb(1E3*Math.floor(a/1E3))},function(a,b){a.setTime(a.getTime()+1E3*Math.floor(b))},function(a){return a.getSeconds()});U.seconds=U.second.range;
U.seconds.utc=U.second.utc.range;U.minute=T(function(a){return new Tb(6E4*Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+6E4*Math.floor(b))},function(a){return a.getMinutes()});U.minutes=U.minute.range;U.minutes.utc=U.minute.utc.range;U.hour=T(function(a){var b=a.getTimezoneOffset()/60;return new Tb(36E5*(Math.floor(a/36E5-b)+b))},function(a,b){a.setTime(a.getTime()+36E5*Math.floor(b))},function(a){return a.getHours()});U.hours=U.hour.range;U.hours.utc=U.hour.utc.range;U.month=T(function(a){a=
U.day(a);a.setDate(1);return a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});U.months=U.month.range;U.months.utc=U.month.utc.range;var Kg=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],oh=[[U.second,1],[U.second,5],[U.second,15],[U.second,30],[U.minute,1],[U.minute,5],[U.minute,15],[U.minute,30],[U.hour,1],[U.hour,3],[U.hour,6],[U.hour,12],[U.day,1],[U.day,2],[U.week,1],[U.month,1],[U.month,3],[U.year,1]],pi=nh.multi([[".%L",
function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",Db]]),Xh={range:function(a,b,c){return z.range(+a,+b,c).map(sb)},floor:Ba,ceil:Ba};oh.year=U.year;U.scale=function(){return ag(z.scale.linear(),oh,pi)};var Sh=oh.map(function(a){return[a[0].utc,
a[1]]}),qi=Qh.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",Db]]);Sh.year=U.year.utc;U.scale.utc=function(){return ag(z.scale.linear(),Sh,qi)};z.text=pb(function(a){return a.responseText});
z.json=function(a,b){return xb(a,"application/json",ih,b)};z.html=function(a,b){return xb(a,"text/html",Ke,b)};z.xml=pb(function(a){return a.responseXML});"function"===typeof define&&define.amd?define(z):"object"===typeof module&&module.exports?module.exports=z:this.d3=z}();function str_repeat(a,c){for(var b=[];0<c;b[--c]=a);return b.join("")}
function sprintf(){for(var a=0,c,b=arguments[a++],d=[],e,f,g;b;){if(e=/^[^\x25]+/.exec(b))d.push(e[0]);else if(e=/^\x25{2}/.exec(b))d.push("%");else if(e=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(b)){if(null==(c=arguments[e[1]||a++])||void 0==c)throw"Too few arguments.";if(/[^s]/.test(e[7])&&"number"!=typeof c)throw"Expecting number but found "+typeof c;switch(e[7]){case "b":c=c.toString(2);break;case "c":c=String.fromCharCode(c);break;case "d":c=parseInt(c);break;
case "e":c=e[6]?c.toExponential(e[6]):c.toExponential();break;case "f":c=e[6]?parseFloat(c).toFixed(e[6]):parseFloat(c);break;case "o":c=c.toString(8);break;case "s":c=(c=String(c))&&e[6]?c.substring(0,e[6]):c;break;case "u":c=Math.abs(c);break;case "x":c=c.toString(16);break;case "X":c=c.toString(16).toUpperCase()}c=/[def]/.test(e[7])&&e[2]&&0<=c?"+"+c:c;f=e[3]?"0"==e[3]?"0":e[3].charAt(1):" ";g=e[5]-String(c).length-0;f=e[5]?str_repeat(f,g):"";d.push(""+(e[4]?c+f:f+c))}else throw"Huh ?!";b=b.substring(e[0].length)}return d.join("")}
(function(a,c){var b,d,e,f,g,h,l,m,n,q,t,x,u,E,A,H,I,y,D,F,G,N,M,P;b=function(a){return new b.prototype.init(a)};"undefined"!==typeof require&&"undefined"!==typeof exports&&"undefined"!==typeof module?module.exports=b:a.Globalize=b;b.cultures={};b.prototype={constructor:b,init:function(a){this.cultures=b.cultures;this.cultureSelector=a;return this}};b.prototype.init.prototype=b.prototype;b.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],
decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),namesAbbr:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
namesShort:"Su Mo Tu We Th Fr Sa".split(" ")},months:{names:"January February March April May June July August September October November December ".split(" "),namesAbbr:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec ".split(" ")},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",
S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}};b.cultures["default"].calendar=b.cultures["default"].calendars.standard;b.cultures.en=b.cultures["default"];b.cultureSelector="en";d=/^0x[a-f0-9]+$/i;e=/^[+\-]?infinity$/i;f=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/;g=/^\s+|\s+$/g;h=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1};l=function(a,b){return a.substr(a.length-b.length)===b};m=function(){var a,b,d,e,f,g=arguments[0]||{},h=1,l=arguments.length,
y=!1;"boolean"===typeof g&&(y=g,g=arguments[1]||{},h=2);for("object"===typeof g||q(g)||(g={});h<l;h++)if(null!=(a=arguments[h]))for(b in a)d=g[b],e=a[b],g!==e&&(y&&e&&(t(e)||(f=n(e)))?(f?(f=!1,d=d&&n(d)?d:[]):d=d&&t(d)?d:{},g[b]=m(y,d,e)):e!==c&&(g[b]=e));return g};n=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};q=function(a){return"[object Function]"===Object.prototype.toString.call(a)};t=function(a){return"[object Object]"===Object.prototype.toString.call(a)};
x=function(a,b){return 0===a.indexOf(b)};u=function(a){return(a+"").replace(g,"")};E=function(a){return isNaN(a)?NaN:Math[0>a?"ceil":"floor"](a)};A=function(a,b,c){var d;for(d=a.length;d<b;d+=1)a=c?"0"+a:a+"0";return a};H=function(a,b){for(var c=0,d=!1,e=0,f=a.length;e<f;e++){var g=a.charAt(e);switch(g){case "'":d?b.push("'"):c++;d=!1;break;case "\\":d&&b.push("\\");d=!d;break;default:b.push(g),d=!1}}return c};I=function(a,b){b=b||"F";var c;c=a.patterns;var d=b.length;if(1===d){c=c[b];if(!c)throw"Invalid date format string '"+
b+"'.";b=c}else 2===d&&"%"===b.charAt(0)&&(b=b.charAt(1));return b};y=function(a,b,c){function d(a,b){var c;c=a+"";return 1<b&&c.length<b?(c=q[b-2]+c,c.substr(c.length-b,b)):c}function e(){if(t||D)return t;t=u.test(b);D=!0;return t}function f(a,b){if(E)return E[b];switch(b){case 0:return a.getFullYear();case 1:return a.getMonth();case 2:return a.getDate();default:throw"Invalid part value "+b;}}var g=c.calendar,h=g.convert;if(!b||!b.length||"i"===b){if(c&&c.name.length)if(h)c=y(a,g.patterns.F,c);else{c=
new Date(a.getTime());var l=G(a,g.eras);c.setFullYear(N(a,g,l));c=c.toLocaleString()}else c=a.toString();return c}var l=g.eras,m="s"===b;b=I(g,b);c=[];var n,q=["0","00","000"],t,D,u=/([^d]|^)(d|dd)([^d]|$)/g,x=0,A=F(),E;for(!m&&h&&(E=h.fromGregorian(a));;){n=A.lastIndex;h=A.exec(b);n=b.slice(n,h?h.index:b.length);x+=H(n,c);if(!h)break;if(x%2)c.push(h[0]);else switch(n=h[0],h=n.length,n){case "ddd":case "dddd":c.push((3===h?g.days.namesAbbr:g.days.names)[a.getDay()]);break;case "d":case "dd":t=!0;
c.push(d(f(a,2),h));break;case "MMM":case "MMMM":n=f(a,1);c.push(g.monthsGenitive&&e()?g.monthsGenitive[3===h?"namesAbbr":"names"][n]:g.months[3===h?"namesAbbr":"names"][n]);break;case "M":case "MM":c.push(d(f(a,1)+1,h));break;case "y":case "yy":case "yyyy":n=E?E[0]:N(a,g,G(a,l),m);4>h&&(n%=100);c.push(d(n,h));break;case "h":case "hh":n=a.getHours()%12;0===n&&(n=12);c.push(d(n,h));break;case "H":case "HH":c.push(d(a.getHours(),h));break;case "m":case "mm":c.push(d(a.getMinutes(),h));break;case "s":case "ss":c.push(d(a.getSeconds(),
h));break;case "t":case "tt":n=12>a.getHours()?g.AM?g.AM[0]:" ":g.PM?g.PM[0]:" ";c.push(1===h?n.charAt(0):n);break;case "f":case "ff":case "fff":c.push(d(a.getMilliseconds(),3).substr(0,h));break;case "z":case "zz":n=a.getTimezoneOffset()/60;c.push((0>=n?"+":"-")+d(Math.floor(Math.abs(n)),h));break;case "zzz":n=a.getTimezoneOffset()/60;c.push((0>=n?"+":"-")+d(Math.floor(Math.abs(n)),2)+":"+d(Math.abs(a.getTimezoneOffset()%60),2));break;case "g":case "gg":g.eras&&c.push(g.eras[G(a,l)].name);break;
case "/":c.push(g["/"]);break;default:throw"Invalid date format pattern '"+n+"'.";}}return c.join("")};(function(){var a;a=function(a,b,c){var d=c.groupSizes,e=d[0],f=1,g=Math.pow(10,b),g=Math.round(a*g)/g;isFinite(g)||(g=a);a=g+"";var g="",g=a.split(/e/i),h=1<g.length?parseInt(g[1],10):0;a=g[0];g=a.split(".");a=g[0];g=1<g.length?g[1]:"";0<h?(g=A(g,h,!1),a+=g.slice(0,h),g=g.substr(h)):0>h&&(h=-h,a=A(a,h+1,!0),g=a.slice(-h,a.length)+g,a=a.slice(0,-h));g=0<b?c["."]+(g.length>b?g.slice(0,b):A(g,b)):
"";b=a.length-1;c=c[","];for(h="";0<=b;){if(0===e||e>b)return a.slice(0,b+1)+(h.length?c+h+g:g);h=a.slice(b-e+1,b+1)+(h.length?c+h:"");b-=e;f<d.length&&(e=d[f],f++)}return a.slice(0,b+1)+c+h+g};D=function(b,c,d){if(!isFinite(b))return Infinity===b?d.numberFormat.positiveInfinity:-Infinity===b?d.numberFormat.negativeInfinity:d.numberFormat.NaN;if(!c||"i"===c)return d.name.length?b.toLocaleString():b.toString();c=c||"D";d=d.numberFormat;var e=Math.abs(b),f=-1;1<c.length&&(f=parseInt(c.slice(1),10));
var g=c.charAt(0).toUpperCase(),h;switch(g){case "D":c="n";e=E(e);-1!==f&&(e=A(""+e,f,!0));0>b&&(e="-"+e);break;case "N":h=d;case "C":h=h||d.currency;case "P":h=h||d.percent;c=0>b?h.pattern[0]:h.pattern[1]||"n";-1===f&&(f=h.decimals);e=a(e*("P"===g?100:1),f,h);break;default:throw"Bad number format specifier: "+g;}b=/n|\$|-|%/g;for(h="";;){f=b.lastIndex;g=b.exec(c);h+=c.slice(f,g?g.index:c.length);if(!g)break;switch(g[0]){case "n":h+=e;break;case "$":h+=d.currency.symbol;break;case "-":/[1-9]/.test(e)&&
(h+=d["-"]);break;case "%":h+=d.percent.symbol}}return h}})();F=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g};G=function(a,b){if(!b)return 0;for(var c,d=a.getTime(),e=0,f=b.length;e<f;e++)if(c=b[e].start,null===c||d>=c)return e;return 0};N=function(a,b,c,d){a=a.getFullYear();!d&&b.eras&&(a-=b.eras[c].offset);return a};(function(){var a,b,c,d,e,f,g;a=function(a,b){if(100>b){var c=new Date,d=G(c),c=N(c,a,d),d=a.twoDigitYearMax,d="string"===
typeof d?(new Date).getFullYear()%100+parseInt(d,10):d;b+=c-c%100;b>d&&(b-=100)}return b};b=function(a,b,c){var d=a.days,e=a._upperDays;e||(a._upperDays=e=[g(d.names),g(d.namesAbbr),g(d.namesShort)]);b=f(b);c?(a=h(e[1],b),-1===a&&(a=h(e[2],b))):a=h(e[0],b);return a};c=function(a,b,c){var d=a.months,e=a.monthsGenitive||a.months,l=a._upperMonths,m=a._upperMonthsGen;l||(a._upperMonths=l=[g(d.names),g(d.namesAbbr)],a._upperMonthsGen=m=[g(e.names),g(e.namesAbbr)]);b=f(b);a=h(c?l[1]:l[0],b);0>a&&(a=h(c?
m[1]:m[0],b));return a};d=function(a,b){var c=a._parseRegExp;if(c){var d=c[b];if(d)return d}else a._parseRegExp=c={};for(var d=I(a,b).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),e=["^"],f=[],g=0,h=0,l=F(),m;null!==(m=l.exec(d));){var n=d.slice(g,m.index),g=l.lastIndex,h=h+H(n,e);if(h%2)e.push(m[0]);else{var n=m[0],q=n.length;switch(n){case "dddd":case "ddd":case "MMMM":case "MMM":case "gg":case "g":n="(\\D+)";break;case "tt":case "t":n="(\\D*)";break;case "yyyy":case "fff":case "ff":case "f":n=
"(\\d{"+q+"})";break;case "dd":case "d":case "MM":case "M":case "yy":case "y":case "HH":case "H":case "hh":case "h":case "mm":case "m":case "ss":case "s":n="(\\d\\d?)";break;case "zzz":n="([+-]?\\d\\d?:\\d{2})";break;case "zz":case "z":n="([+-]?\\d\\d?)";break;case "/":n="(\\/)";break;default:throw"Invalid date format pattern '"+n+"'.";}n&&e.push(n);f.push(m[0])}}H(d.slice(g),e);e.push("$");d={regExp:e.join("").replace(/\s+/g,"\\s+"),groups:f};return c[b]=d};e=function(a,b,c){return a<b||a>c};f=function(a){return a.split("\u00a0").join(" ").toUpperCase()};
g=function(a){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=f(a[c]);return b};M=function(f,g,h){f=u(f);h=h.calendar;g=d(h,g);var l=(new RegExp(g.regExp)).exec(f);if(null===l)return null;var m=g.groups,n=g=f=null,q=null,t=null,y=0,D,F=0,A=0,G=0;D=null;for(var E=!1,H=0,p=m.length;H<p;H++){var N=l[H+1];if(N){var I=m[H],M=I.length,aa=parseInt(N,10);switch(I){case "dd":case "d":q=aa;if(e(q,1,31))return null;break;case "MMM":case "MMMM":n=c(h,N,3===M);if(e(n,0,11))return null;break;case "M":case "MM":n=aa-1;
if(e(n,0,11))return null;break;case "y":case "yy":case "yyyy":g=4>M?a(h,aa):aa;if(e(g,0,9999))return null;break;case "h":case "hh":y=aa;12===y&&(y=0);if(e(y,0,11))return null;break;case "H":case "HH":y=aa;if(e(y,0,23))return null;break;case "m":case "mm":F=aa;if(e(F,0,59))return null;break;case "s":case "ss":A=aa;if(e(A,0,59))return null;break;case "tt":case "t":E=h.PM&&(N===h.PM[0]||N===h.PM[1]||N===h.PM[2]);if(!E&&(!h.AM||N!==h.AM[0]&&N!==h.AM[1]&&N!==h.AM[2]))return null;break;case "f":case "ff":case "fff":G=
aa*Math.pow(10,3-M);if(e(G,0,999))return null;break;case "ddd":case "dddd":t=b(h,N,3===M);if(e(t,0,6))return null;break;case "zzz":I=N.split(/:/);if(2!==I.length)return null;D=parseInt(I[0],10);if(e(D,-12,13))return null;I=parseInt(I[1],10);if(e(I,0,59))return null;D=60*D+(x(N,"-")?-I:I);break;case "z":case "zz":D=aa;if(e(D,-12,13))return null;D*=60;break;case "g":case "gg":if(!N||!h.eras)return null;N=u(N.toLowerCase());I=0;for(M=h.eras.length;I<M;I++)if(N===h.eras[I].name.toLowerCase()){f=I;break}if(null===
f)return null}}}l=new Date;m=(H=h.convert)?H.fromGregorian(l)[0]:l.getFullYear();null===g?g=m:h.eras&&(g+=h.eras[f||0].offset);null===n&&(n=0);null===q&&(q=1);if(H){if(l=H.toGregorian(g,n,q),null===l)return null}else if(l.setFullYear(g,n,q),l.getDate()!==q||null!==t&&l.getDay()!==t)return null;E&&12>y&&(y+=12);l.setHours(y,F,A,G);null!==D&&(h=l.getMinutes()-(D+l.getTimezoneOffset()),l.setHours(l.getHours()+parseInt(h/60,10),h%60));return l}})();P=function(a,b,c){var d=b["-"];b=b["+"];var e;switch(c){case "n -":d=
" "+d,b=" "+b;case "n-":l(a,d)?e=["-",a.substr(0,a.length-d.length)]:l(a,b)&&(e=["+",a.substr(0,a.length-b.length)]);break;case "- n":d+=" ",b+=" ";case "-n":x(a,d)?e=["-",a.substr(d.length)]:x(a,b)&&(e=["+",a.substr(b.length)]);break;case "(n)":x(a,"(")&&l(a,")")&&(e=["-",a.substr(1,a.length-2)])}return e||["",a]};b.prototype.findClosestCulture=function(a){return b.findClosestCulture.call(this,a)};b.prototype.format=function(a,c,d){return b.format.call(this,a,c,d)};b.prototype.localize=function(a,
c){return b.localize.call(this,a,c)};b.prototype.parseInt=function(a,c,d){return b.parseInt.call(this,a,c,d)};b.prototype.parseFloat=function(a,c,d){return b.parseFloat.call(this,a,c,d)};b.prototype.culture=function(a){return b.culture.call(this,a)};b.addCultureInfo=function(a,b,c){var d={},e=!1;"string"!==typeof a?(c=a,a=this.culture().name,d=this.cultures[a]):"string"!==typeof b?(c=b,e=null==this.cultures[a],d=this.cultures[a]||this.cultures["default"]):(e=!0,d=this.cultures[b]);this.cultures[a]=
m(!0,{},d,c);e&&(this.cultures[a].calendar=this.cultures[a].calendars.standard)};b.findClosestCulture=function(a){var b;if(!a)return this.findClosestCulture(this.cultureSelector)||this.cultures["default"];"string"===typeof a&&(a=a.split(","));if(n(a)){var c,d=this.cultures,e=a,f,g=e.length,h=[];for(f=0;f<g;f++)a=u(e[f]),a=a.split(";"),c=u(a[0]),1===a.length?a=1:(a=u(a[1]),0===a.indexOf("q=")?(a=a.substr(2),a=parseFloat(a),a=isNaN(a)?0:a):a=1),h.push({lang:c,pri:a});h.sort(function(a,b){return a.pri<
b.pri?1:a.pri>b.pri?-1:0});for(f=0;f<g;f++)if(c=h[f].lang,b=d[c])return b;for(f=0;f<g;f++){c=h[f].lang;do{e=c.lastIndexOf("-");if(-1===e)break;c=c.substr(0,e);if(b=d[c])return b}while(1)}for(f=0;f<g;f++){c=h[f].lang;for(var l in d)if(e=d[l],e.language==c)return e}}else if("object"===typeof a)return a;return b||null};b.format=function(a,b,c){c=this.findClosestCulture(c);a instanceof Date?a=y(a,b,c):"number"===typeof a&&(a=D(a,b,c));return a};b.localize=function(a,b){return this.findClosestCulture(b).messages[a]||
this.cultures["default"].messages[a]};b.parseDate=function(a,b,c){c=this.findClosestCulture(c);var d,e;if(b){if("string"===typeof b&&(b=[b]),b.length){e=0;for(var f=b.length;e<f;e++){var g=b[e];if(g&&(d=M(a,g,c)))break}}}else for(e in b=c.calendar.patterns,b)if(d=M(a,b[e],c))break;return d||null};b.parseInt=function(a,c,d){return E(b.parseFloat(a,c,d))};b.parseFloat=function(a,b,c){"number"!==typeof b&&(c=b,b=10);var g=this.findClosestCulture(c);c=NaN;var h=g.numberFormat;-1<a.indexOf(g.numberFormat.currency.symbol)&&
(a=a.replace(g.numberFormat.currency.symbol,""),a=a.replace(g.numberFormat.currency["."],g.numberFormat["."]));-1<a.indexOf(g.numberFormat.percent.symbol)&&(a=a.replace(g.numberFormat.percent.symbol,""));a=a.replace(/ /g,"");if(e.test(a))c=parseFloat(a);else if(!b&&d.test(a))c=parseInt(a,16);else{g=P(a,h,h.pattern[0]);b=g[0];g=g[1];""===b&&"(n)"!==h.pattern[0]&&(g=P(a,h,"(n)"),b=g[0],g=g[1]);""===b&&"-n"!==h.pattern[0]&&(g=P(a,h,"-n"),b=g[0],g=g[1]);b=b||"+";var l;a=g.indexOf("e");0>a&&(a=g.indexOf("E"));
0>a?(l=g,a=null):(l=g.substr(0,a),a=g.substr(a+1));var m=h["."],n=l.indexOf(m);0>n?(g=l,l=null):(g=l.substr(0,n),l=l.substr(n+m.length));m=h[","];g=g.split(m).join("");n=m.replace(/\u00A0/g," ");m!==n&&(g=g.split(n).join(""));b+=g;null!==l&&(b+="."+l);null!==a&&(h=P(a,h,"-n"),b+="e"+(h[0]||"+")+h[1]);f.test(b)&&(c=parseFloat(b))}return c};b.culture=function(a){"undefined"!==typeof a&&(this.cultureSelector=a);return this.findClosestCulture(a)||this.cultures["default"]}})(this);
Array.indexOf||(Array.prototype.indexOf=function(a,c){for(var b=c||0;b<this.length;b++)if(this[b]===a)return b;return-1});
var Parser=function(a){function c(a){function b(){}b.prototype=a;return new b}function b(a,b,c,d){this.type_=a;this.index_=b||0;this.prio_=c||0;this.number_=void 0!==d&&null!==d?d:0;this.toString=function(){switch(this.type_){case 0:return this.number_;case 1:case 2:case 3:return this.index_;case 4:return"CALL";default:return"Invalid Token"}}}function d(a,b,c,d){this.tokens=a;this.ops1=b;this.ops2=c;this.functions=d}function e(a){return"string"===typeof a?(H.lastIndex=0,H.test(a)?"'"+a.replace(H,
function(a){var b=I[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+"'":"'"+a+"'"):a}function f(a,b){return Number(a)+Number(b)}function g(a,b){return a-b}function h(a,b){return a*b}function l(a,b){return a/b}function m(a,b){return a%b}function n(a,b){return""+a+b}function q(a){return-a}function t(a){return Math.random()*(a||1)}function x(a){for(var b=a=Math.floor(a);1<a;)b*=--a;return b}function u(a,b){return Math.sqrt(a*a+b*b)}function E(a,b){if("[object Array]"!=
Object.prototype.toString.call(a))return[a,b];a=a.slice();a.push(b);return a}function A(){this.success=!1;this.expression=this.errormsg="";this.tmpprio=this.tokenindex=this.tokenprio=this.tokennumber=this.pos=0;this.ops1={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sqrt:Math.sqrt,log:Math.log,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,"-":q,exp:Math.exp};this.ops2={"+":f,"-":g,"*":h,"/":l,"%":m,"^":Math.pow,",":E,"||":n};this.functions={random:t,
fac:x,min:Math.min,max:Math.max,pyt:u,pow:Math.pow,atan2:Math.atan2};this.consts={E:Math.E,PI:Math.PI}}var H=/[\\\'\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,I={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"};d.prototype={simplify:function(a){a=a||{};for(var e=[],f=[],g,h,l,m=this.tokens.length,n=0,n=0;n<m;n++)if(l=this.tokens[n],g=l.type_,0===g)e.push(l);else if(3===g&&l.index_ in a)l=new b(0,
0,0,a[l.index_]),e.push(l);else if(2===g&&1<e.length)h=e.pop(),g=e.pop(),l=this.ops2[l.index_],l=new b(0,0,0,l(g.number_,h.number_)),e.push(l);else if(1===g&&0<e.length)g=e.pop(),l=this.ops1[l.index_],l=new b(0,0,0,l(g.number_)),e.push(l);else{for(;0<e.length;)f.push(e.shift());f.push(l)}for(;0<e.length;)f.push(e.shift());return new d(f,c(this.ops1),c(this.ops2),c(this.functions))},substitute:function(a,e){e instanceof d||(e=(new A).parse(String(e)));for(var f=[],g=this.tokens.length,h,l=0,l=0;l<
g;l++)if(h=this.tokens[l],3===h.type_&&h.index_===a)for(h=0;h<e.tokens.length;h++){var m=e.tokens[h],m=new b(m.type_,m.index_,m.prio_,m.number_);f.push(m)}else f.push(h);return new d(f,c(this.ops1),c(this.ops2),c(this.functions))},evaluate:function(a){a=a||{};for(var b=[],c,d,e,f=this.tokens.length,g=0,g=0;g<f;g++)if(e=this.tokens[g],c=e.type_,0===c)b.push(e.number_);else if(2===c)d=b.pop(),c=b.pop(),e=this.ops2[e.index_],b.push(e(c,d));else if(3===c)if(e.index_ in a)b.push(a[e.index_]);else if(e.index_ in
this.functions)b.push(this.functions[e.index_]);else throw Error("undefined variable: "+e.index_);else if(1===c)c=b.pop(),e=this.ops1[e.index_],b.push(e(c));else if(4===c)if(c=b.pop(),e=b.pop(),e.apply&&e.call)"[object Array]"==Object.prototype.toString.call(c)?b.push(e.apply(void 0,c)):b.push(e.call(void 0,c));else throw Error(e+" is not a function");else throw Error("invalid Expression");if(1<b.length)throw Error("invalid Expression (parity)");return b[0]},toString:function(a){for(var b=[],c,d,
f,g=this.tokens.length,h=0,h=0;h<g;h++)if(f=this.tokens[h],c=f.type_,0===c)b.push(e(f.number_));else if(2===c)d=b.pop(),c=b.pop(),f=f.index_,a&&"^"==f?b.push("Math.pow("+c+","+d+")"):b.push("("+c+f+d+")");else if(3===c)b.push(f.index_);else if(1===c)c=b.pop(),f=f.index_,"-"===f?b.push("("+f+c+")"):b.push(f+"("+c+")");else if(4===c)c=b.pop(),f=b.pop(),b.push(f+"("+c+")");else throw Error("invalid Expression");if(1<b.length)throw Error("invalid Expression (parity)");return b[0]},variables:function(){for(var a=
this.tokens.length,b=[],c=0;c<a;c++){var d=this.tokens[c];3===d.type_&&-1==b.indexOf(d.index_)&&b.push(d.index_)}return b},toJSFunction:function(a,b){return new Function(a,"with(Parser.values) { return "+this.simplify(b).toString(!0)+"; }")}};A.parse=function(a){return(new A).parse(a)};A.evaluate=function(a,b){return A.parse(a).evaluate(b)};A.Expression=d;A.values={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sqrt:Math.sqrt,log:Math.log,abs:Math.abs,ceil:Math.ceil,
floor:Math.floor,round:Math.round,random:t,fac:x,exp:Math.exp,min:Math.min,max:Math.max,pyt:u,pow:Math.pow,atan2:Math.atan2,E:Math.E,PI:Math.PI};A.prototype={parse:function(a){this.errormsg="";this.success=!0;var e=[],f=[];this.tmpprio=0;var g=77,h=0;this.expression=a;for(this.pos=0;this.pos<this.expression.length;)this.isOperator()?this.isSign()&&g&64?(this.isNegativeSign()&&(this.tokenprio=2,this.tokenindex="-",h++,this.addfunc(f,e,1)),g=77):this.isComment()||(0===(g&2)&&this.error_parsing(this.pos,
"unexpected operator"),h+=2,this.addfunc(f,e,2),g=77):this.isNumber()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected number"),a=new b(0,0,0,this.tokennumber),f.push(a),g=50):this.isString()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected string"),a=new b(0,0,0,this.tokennumber),f.push(a),g=50):this.isLeftParenth()?(0===(g&8)&&this.error_parsing(this.pos,'unexpected "("'),g&128&&(h+=2,this.tokenprio=-2,this.tokenindex=-1,this.addfunc(f,e,4)),g=333):this.isRightParenth()?(g&256?(a=new b(0,
0,0,[]),f.push(a)):0===(g&16)&&this.error_parsing(this.pos,'unexpected ")"'),g=186):this.isComma()?(0===(g&32)&&this.error_parsing(this.pos,'unexpected ","'),this.addfunc(f,e,2),h+=2,g=77):this.isConst()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected constant"),a=new b(0,0,0,this.tokennumber),f.push(a),g=50):this.isOp2()?(0===(g&4)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(f,e,2),h+=2,g=8):this.isOp1()?(0===(g&4)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(f,
e,1),h++,g=8):this.isVar()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected variable"),a=new b(3,this.tokenindex,0,0),f.push(a),g=186):this.isWhite()||(""===this.errormsg?this.error_parsing(this.pos,"unknown character"):this.error_parsing(this.pos,this.errormsg));for((0>this.tmpprio||10<=this.tmpprio)&&this.error_parsing(this.pos,'unmatched "()"');0<e.length;)a=e.pop(),f.push(a);h+1!==f.length&&this.error_parsing(this.pos,"parity");return new d(f,c(this.ops1),c(this.ops2),c(this.functions))},evaluate:function(a,
b){return this.parse(a).evaluate(b)},error_parsing:function(a,b){this.success=!1;this.errormsg="parse error [column "+a+"]: "+b;throw Error(this.errormsg);},addfunc:function(a,c,d){for(d=new b(d,this.tokenindex,this.tokenprio+this.tmpprio,0);0<c.length;)if(d.prio_<=c[c.length-1].prio_)a.push(c.pop());else break;c.push(d)},isNumber:function(){for(var a=!1,b="";this.pos<this.expression.length;){var c=this.expression.charCodeAt(this.pos);if(48<=c&&57>=c||46===c)b+=this.expression.charAt(this.pos),this.pos++,
this.tokennumber=parseFloat(b),a=!0;else break}return a},unescape:function(a,b){for(var c=[],d=!1,e=0;e<a.length;e++){var f=a.charAt(e);if(d){switch(f){case "'":c.push("'");break;case "\\":c.push("\\");break;case "/":c.push("/");break;case "b":c.push("\b");break;case "f":c.push("\f");break;case "n":c.push("\n");break;case "r":c.push("\r");break;case "t":c.push("\t");break;case "u":d=parseInt(a.substring(e+1,e+5),16);c.push(String.fromCharCode(d));e+=4;break;default:throw this.error_parsing(b+e,"Illegal escape sequence: '\\"+
f+"'");}d=!1}else"\\"==f?d=!0:c.push(f)}return c.join("")},isString:function(){var a=!1,b="",c=this.pos;if(this.pos<this.expression.length&&"'"==this.expression.charAt(this.pos))for(this.pos++;this.pos<this.expression.length;)if("'"!=this.expression.charAt(this.pos)||"\\"==b.slice(-1))b+=this.expression.charAt(this.pos),this.pos++;else{this.pos++;this.tokennumber=this.unescape(b,c);a=!0;break}return a},isConst:function(){var a,b;for(b in this.consts){var c=b.length;a=this.expression.substr(this.pos,
c);if(b===a)return this.tokennumber=this.consts[b],this.pos+=c,!0}return!1},isOperator:function(){var a=this.expression.charCodeAt(this.pos);if(43===a)this.tokenprio=0,this.tokenindex="+";else if(45===a)this.tokenprio=0,this.tokenindex="-";else if(124===a)if(124===this.expression.charCodeAt(this.pos+1))this.pos++,this.tokenprio=0,this.tokenindex="||";else return!1;else if(42===a)this.tokenprio=1,this.tokenindex="*";else if(47===a)this.tokenprio=2,this.tokenindex="/";else if(37===a)this.tokenprio=
2,this.tokenindex="%";else if(94===a)this.tokenprio=3,this.tokenindex="^";else return!1;this.pos++;return!0},isSign:function(){var a=this.expression.charCodeAt(this.pos-1);return 45===a||43===a?!0:!1},isPositiveSign:function(){return 43===this.expression.charCodeAt(this.pos-1)?!0:!1},isNegativeSign:function(){return 45===this.expression.charCodeAt(this.pos-1)?!0:!1},isLeftParenth:function(){return 40===this.expression.charCodeAt(this.pos)?(this.pos++,this.tmpprio+=10,!0):!1},isRightParenth:function(){return 41===
this.expression.charCodeAt(this.pos)?(this.pos++,this.tmpprio-=10,!0):!1},isComma:function(){return 44===this.expression.charCodeAt(this.pos)?(this.pos++,this.tokenprio=-1,this.tokenindex=",",!0):!1},isWhite:function(){var a=this.expression.charCodeAt(this.pos);return 32===a||9===a||10===a||13===a?(this.pos++,!0):!1},isOp1:function(){for(var a="",b=this.pos;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!=c&&("0">c||"9"<c)))break;
a+=c}return 0<a.length&&a in this.ops1?(this.tokenindex=a,this.tokenprio=5,this.pos+=a.length,!0):!1},isOp2:function(){for(var a="",b=this.pos;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!=c&&("0">c||"9"<c)))break;a+=c}return 0<a.length&&a in this.ops2?(this.tokenindex=a,this.tokenprio=5,this.pos+=a.length,!0):!1},isVar:function(){for(var a="",b=this.pos;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===
c.toLowerCase()&&(b===this.pos||"_"!=c&&("0">c||"9"<c)))break;a+=c}return 0<a.length?(this.tokenindex=a,this.tokenprio=4,this.pos+=a.length,!0):!1},isComment:function(){return 47===this.expression.charCodeAt(this.pos-1)&&42===this.expression.charCodeAt(this.pos)?(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0):!1}};return a.Parser=A}("undefined"===typeof exports?{}:exports);
(function(a){if("object"==typeof exports&&"object"==typeof module)module.exports=a();else{if("function"==typeof define&&define.amd)return define([],a);this.CodeMirror=a()}})(function(){function a(b,d){if(!(this instanceof a))return new a(b,d);this.options=d=d||{};Pc(Yf,d,!1);x(d);var e=d.value;"string"==typeof e&&(e=new sb(e,d.mode));this.doc=e;var f=this.display=new c(b,e);f.wrapper.CodeMirror=this;m(this);h(this);d.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");d.autofocus&&
!Zd&&mb(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new Gf};Fa&&11>Ta&&setTimeout(uc(Ea,this,!0),20);Ib(this);xe||(Ag(),xe=!0);var g=this;Sa(this,function(){g.curOp.forceUpdate=!0;Te(g,e);d.autofocus&&!Zd||Dc()==f.input?setTimeout(uc(xc,g),20):Yb(g);for(var a in id)if(id.hasOwnProperty(a))id[a](g,d[a],Ge);I(g);for(a=0;a<He.length;++a)He[a](g)})}function c(a,b){var c=this.input=ha("textarea",null,
null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");Gb?c.style.width="1000px":c.setAttribute("wrap","off");De&&(c.style.border="1px solid black");c.setAttribute("autocorrect","off");c.setAttribute("autocapitalize","off");c.setAttribute("spellcheck","false");this.inputDiv=ha("div",[c],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");this.scrollbarH=ha("div",[ha("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");this.scrollbarV=
ha("div",[ha("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");this.scrollbarFiller=ha("div",null,"CodeMirror-scrollbar-filler");this.gutterFiller=ha("div",null,"CodeMirror-gutter-filler");this.lineDiv=ha("div",null,"CodeMirror-code");this.selectionDiv=ha("div",null,null,"position: relative; z-index: 1");this.cursorDiv=ha("div",null,"CodeMirror-cursors");this.measure=ha("div",null,"CodeMirror-measure");this.lineMeasure=ha("div",null,"CodeMirror-measure");this.lineSpace=ha("div",[this.measure,
this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");this.mover=ha("div",[ha("div",[this.lineSpace],"CodeMirror-lines")],null,"position: relative");this.sizer=ha("div",[this.mover],"CodeMirror-sizer");this.heightForcer=ha("div",null,null,"position: absolute; height: "+Jc+"px; width: 1px;");this.gutters=ha("div",null,"CodeMirror-gutters");this.lineGutter=null;this.scroller=ha("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll");
this.scroller.setAttribute("tabIndex","-1");this.wrapper=ha("div",[this.inputDiv,this.scrollbarH,this.scrollbarV,this.scrollbarFiller,this.gutterFiller,this.scroller],"CodeMirror");Fa&&8>Ta&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=0);De&&(c.style.width="0px");Gb||(this.scroller.draggable=!0);nf&&(this.inputDiv.style.height="1px",this.inputDiv.style.position="absolute");Fa&&8>Ta&&(this.scrollbarH.style.minHeight=this.scrollbarV.style.minWidth="18px");a.appendChild?a.appendChild(this.wrapper):
a(this.wrapper);this.viewFrom=this.viewTo=b.first;this.view=[];this.externalMeasured=null;this.lastSizeC=this.viewOffset=0;this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=this.updateLineNumbers=null;this.prevInput="";this.pollingFast=this.alignWidgets=!1;this.poll=new Gf;this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=null;this.inaccurateSelection=!1;this.maxLine=null;this.maxLineLength=0;this.maxLineChanged=!1;this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=
null;this.shift=!1;this.selForContextMenu=null}function b(b){b.doc.mode=a.getMode(b.options,b.doc.modeOption);d(b)}function d(a){a.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null)});a.doc.frontier=a.doc.first;eb(a,100);a.state.modeGen++;a.curOp&&C(a)}function e(a){var b=Cb(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/Ub(a.display)-3);return function(e){if($c(a.doc,e))return 0;var f=0;if(e.widgets)for(var g=0;g<e.widgets.length;g++)e.widgets[g].height&&
(f+=e.widgets[g].height);return c?f+(Math.ceil(e.text.length/d)||1)*b:f+b}}function f(a){var b=a.doc,c=e(a);b.iter(function(a){var b=c(a);b!=a.height&&lc(a,b)})}function g(a){var b=Ic[a.options.keyMap].style;a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(b?" cm-keymap-"+b:"")}function h(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-");$a(a)}function l(a){m(a);C(a);setTimeout(function(){H(a)},
20)}function m(a){var b=a.display.gutters,c=a.options.gutters;nd(b);for(var d=0;d<c.length;++d){var e=c[d],f=b.appendChild(ha("div",null,"CodeMirror-gutter "+e));"CodeMirror-linenumbers"==e&&(a.display.lineGutter=f,f.style.width=(a.display.lineNumWidth||1)+"px")}b.style.display=d?"":"none";n(a)}function n(a){var b=a.display.gutters.offsetWidth;a.display.sizer.style.marginLeft=b+"px";a.display.scrollbarH.style.left=a.options.fixedGutter?b+"px":0}function q(a){if(0==a.height)return 0;for(var b=a.text.length,
c,d=a;c=$b(d,!0);)c=c.find(0,!0),d=c.from.line,b+=c.from.ch-c.to.ch;for(d=a;c=$b(d,!1);)c=c.find(0,!0),b-=d.text.length-c.from.ch,d=c.to.line,b+=d.text.length-c.to.ch;return b}function t(a){var b=a.display;a=a.doc;b.maxLine=la(a,a.first);b.maxLineLength=q(b.maxLine);b.maxLineChanged=!0;a.iter(function(a){var c=q(a);c>b.maxLineLength&&(b.maxLineLength=c,b.maxLine=a)})}function x(a){var b=Fb(a.gutters,"CodeMirror-linenumbers");-1==b&&a.lineNumbers?a.gutters=a.gutters.concat(["CodeMirror-linenumbers"]):
-1<b&&!a.lineNumbers&&(a.gutters=a.gutters.slice(0),a.gutters.splice(b,1))}function u(a){var b=a.display.scroller;return{clientHeight:b.clientHeight,barHeight:a.display.scrollbarV.clientHeight,scrollWidth:b.scrollWidth,clientWidth:b.clientWidth,hScrollbarTakesSpace:a.display.scroller.clientHeight-a.display.wrapper.clientHeight<Jc-3,barWidth:a.display.scrollbarH.clientWidth,docHeight:Math.round(a.doc.height+Ba(a.display))}}function E(a,b){b||(b=u(a));var c=a.display,d=ch(c.measure),e=b.docHeight+Jc,
f=b.scrollWidth>b.clientWidth;f&&b.scrollWidth<=b.clientWidth+1&&0<d&&!b.hScrollbarTakesSpace&&(f=!1);var g=e>b.clientHeight;g?(c.scrollbarV.style.display="block",c.scrollbarV.style.bottom=f?d+"px":"0",c.scrollbarV.firstChild.style.height=Math.max(0,e-b.clientHeight+(b.barHeight||c.scrollbarV.clientHeight))+"px"):(c.scrollbarV.style.display="",c.scrollbarV.firstChild.style.height="0");f?(c.scrollbarH.style.display="block",c.scrollbarH.style.right=g?d+"px":"0",c.scrollbarH.firstChild.style.width=b.scrollWidth-
b.clientWidth+(b.barWidth||c.scrollbarH.clientWidth)+"px"):(c.scrollbarH.style.display="",c.scrollbarH.firstChild.style.width="0");f&&g?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=c.scrollbarFiller.style.width=d+"px"):c.scrollbarFiller.style.display="";f&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=d+"px",c.gutterFiller.style.width=c.gutters.offsetWidth+"px"):c.gutterFiller.style.display=
"";!a.state.checkedOverlayScrollbar&&0<b.clientHeight&&(0===d&&(c.scrollbarV.style.minWidth=c.scrollbarH.style.minHeight=ec&&!Yd?"12px":"18px",d=function(b){(b.target||b.srcElement)!=c.scrollbarV&&(b.target||b.srcElement)!=c.scrollbarH&&ma(a,pd)(b)},oa(c.scrollbarV,"mousedown",d),oa(c.scrollbarH,"mousedown",d)),a.state.checkedOverlayScrollbar=!0)}function A(a,b,c){var d=c&&null!=c.top?Math.max(0,c.top):a.scroller.scrollTop,d=Math.floor(d-a.lineSpace.offsetTop),e=c&&null!=c.bottom?c.bottom:d+a.wrapper.clientHeight,
d=Oc(b,d),e=Oc(b,e);if(c&&c.ensure){var f=c.ensure.from.line;c=c.ensure.to.line;if(f<d)return{from:f,to:Oc(b,kc(la(b,f))+a.wrapper.clientHeight)};if(Math.min(c,b.lastLine())>=e)return{from:Oc(b,kc(la(b,c))-a.wrapper.clientHeight),to:c}}return{from:d,to:Math.max(e,d+1)}}function H(a){var b=a.display,c=b.view;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var d=D(b)-b.scroller.scrollLeft+a.doc.scrollLeft,e=b.gutters.offsetWidth,f=d+"px",g=0;g<c.length;g++)if(!c[g].hidden){a.options.fixedGutter&&
c[g].gutter&&(c[g].gutter.style.left=f);var h=c[g].alignable;if(h)for(var l=0;l<h.length;l++)h[l].style.left=f}a.options.fixedGutter&&(b.gutters.style.left=d+e+"px")}}function I(a){if(!a.options.lineNumbers)return!1;var b=a.doc,b=y(a.options,b.first+b.size-1),c=a.display;if(b.length!=c.lineNumChars){var d=c.measure.appendChild(ha("div",[ha("div",b)],"CodeMirror-linenumber CodeMirror-gutter-elt")),e=d.firstChild.offsetWidth,d=d.offsetWidth-e;c.lineGutter.style.width="";c.lineNumInnerWidth=Math.max(e,
c.lineGutter.offsetWidth-d);c.lineNumWidth=c.lineNumInnerWidth+d;c.lineNumChars=c.lineNumInnerWidth?b.length:-1;c.lineGutter.style.width=c.lineNumWidth+"px";n(a);return!0}return!1}function y(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function D(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function F(a,b,c){var d=a.display;this.viewport=b;this.visible=A(d,a.doc,b);this.editorIsHidden=!d.wrapper.offsetWidth;this.wrapperHeight=d.wrapper.clientHeight;
this.oldViewFrom=d.viewFrom;this.oldViewTo=d.viewTo;this.oldScrollerWidth=d.scroller.clientWidth;this.force=c;this.dims=ka(a)}function G(a,b){var c=a.display,d=a.doc;if(b.editorIsHidden)return Y(a),!1;if(!b.force&&b.visible.from>=c.viewFrom&&b.visible.to<=c.viewTo&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo)&&0==Hb(a))return!1;I(a)&&(Y(a),b.dims=ka(a));var e=d.first+d.size,f=Math.max(b.visible.from-a.options.viewportMargin,d.first),g=Math.min(e,b.visible.to+a.options.viewportMargin);
c.viewFrom<f&&20>f-c.viewFrom&&(f=Math.max(d.first,c.viewFrom));c.viewTo>g&&20>c.viewTo-g&&(g=Math.min(e,c.viewTo));Gc&&(f=he(a.doc,f),g=Qe(a.doc,g));d=f!=c.viewFrom||g!=c.viewTo||c.lastSizeC!=b.wrapperHeight;e=a.display;0==e.view.length||f>=e.viewTo||g<=e.viewFrom?(e.view=Ja(a,f,g),e.viewFrom=f):(e.viewFrom>f?e.view=Ja(a,f,e.viewFrom).concat(e.view):e.viewFrom<f&&(e.view=e.view.slice(La(a,f))),e.viewFrom=f,e.viewTo<g?e.view=e.view.concat(Ja(a,e.viewTo,g)):e.viewTo>g&&(e.view=e.view.slice(0,La(a,
g))));e.viewTo=g;c.viewOffset=kc(la(a.doc,c.viewFrom));a.display.mover.style.top=c.viewOffset+"px";g=Hb(a);if(!d&&0==g&&!b.force&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo))return!1;f=Dc();4<g&&(c.lineDiv.style.display="none");Ca(a,c.updateLineNumbers,b.dims);4<g&&(c.lineDiv.style.display="");f&&Dc()!=f&&f.offsetHeight&&f.focus();nd(c.cursorDiv);nd(c.selectionDiv);d&&(c.lastSizeC=b.wrapperHeight,eb(a,400));c.updateLineNumbers=null;return!0}function N(a,b){for(var c=b.viewport,d=!0;;d=
!1){if(!d||!a.options.lineWrapping||b.oldScrollerWidth==a.display.scroller.clientWidth)if(c&&null!=c.top&&(c={top:Math.min(a.doc.height+Ba(a.display)-Jc-a.display.scroller.clientHeight,c.top)}),b.visible=A(a.display,a.doc,c),b.visible.from>=a.display.viewFrom&&b.visible.to<=a.display.viewTo)break;if(!G(a,b))break;O(a);d=u(a);Ya(a);P(a,d);E(a,d)}yb(a,"update",a);a.display.viewFrom==b.oldViewFrom&&a.display.viewTo==b.oldViewTo||yb(a,"viewportChange",a,a.display.viewFrom,a.display.viewTo)}function M(a,
b){var c=new F(a,b);G(a,c)&&(O(a),N(a,c),c=u(a),Ya(a),P(a,c),E(a,c))}function P(a,b){a.display.sizer.style.minHeight=a.display.heightForcer.style.top=b.docHeight+"px";a.display.gutters.style.height=Math.max(b.docHeight,b.clientHeight-Jc)+"px"}function O(a){a=a.display;for(var b=a.lineDiv.offsetTop,c=0;c<a.view.length;c++){var d=a.view[c],e;if(!d.hidden){if(Fa&&8>Ta){var f=d.node.offsetTop+d.node.offsetHeight;e=f-b;b=f}else e=d.node.getBoundingClientRect(),e=e.bottom-e.top;f=d.line.height-e;2>e&&(e=
Cb(a));if(.001<f||-.001>f)if(lc(d.line,e),pa(d.line),d.rest)for(e=0;e<d.rest.length;e++)pa(d.rest[e])}}}function pa(a){if(a.widgets)for(var b=0;b<a.widgets.length;++b)a.widgets[b].height=a.widgets[b].node.offsetHeight}function ka(a){for(var b=a.display,c={},d={},e=b.gutters.firstChild,f=0;e;e=e.nextSibling,++f)c[a.options.gutters[f]]=e.offsetLeft,d[a.options.gutters[f]]=e.offsetWidth;return{fixedPos:D(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}
function Ca(a,b,c){function d(b){var c=b.nextSibling;Gb&&ec&&a.display.currentWheelTarget==b?b.style.display="none":b.parentNode.removeChild(b);return c}for(var e=a.display,f=a.options.lineNumbers,g=e.lineDiv,h=g.firstChild,l=e.view,e=e.viewFrom,m=0;m<l.length;m++){var n=l[m];if(!n.hidden)if(n.node){for(;h!=n.node;)h=d(h);h=f&&null!=b&&b<=e&&n.lineNumber;n.changes&&(-1<Fb(n.changes,"gutter")&&(h=!1),ra(a,n,e,c));h&&(nd(n.lineNumber),n.lineNumber.appendChild(document.createTextNode(y(a.options,e))));
h=n.node.nextSibling}else{var p=qa(a,n,e,c);g.insertBefore(p,h)}e+=n.size}for(;h;)h=d(h)}function ra(a,b,c,d){for(var e=0;e<b.changes.length;e++){var f=b.changes[e];if("text"==f){var f=b,g=f.text.className,h=wa(a,f);f.text==f.node&&(f.node=h.pre);f.text.parentNode.replaceChild(h.pre,f.text);f.text=h.pre;h.bgClass!=f.bgClass||h.textClass!=f.textClass?(f.bgClass=h.bgClass,f.textClass=h.textClass,va(f)):g&&(f.text.className=g)}else if("gutter"==f)sa(a,b,c,d);else if("class"==f)va(b);else if("widget"==
f){f=b;g=d;f.alignable&&(f.alignable=null);for(var h=f.node.firstChild,l=void 0;h;h=l)l=h.nextSibling,"CodeMirror-linewidget"==h.className&&f.node.removeChild(h);na(f,g)}}b.changes=null}function aa(a){a.node==a.text&&(a.node=ha("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),Fa&&8>Ta&&(a.node.style.zIndex=2));return a.node}function wa(a,b){var c=a.display.externalMeasured;return c&&c.line==b.line?(a.display.externalMeasured=
null,b.measure=c.measure,c.built):Kf(a,b)}function va(a){var b=a.bgClass?a.bgClass+" "+(a.line.bgClass||""):a.line.bgClass;b&&(b+=" CodeMirror-linebackground");if(a.background)b?a.background.className=b:(a.background.parentNode.removeChild(a.background),a.background=null);else if(b){var c=aa(a);a.background=c.insertBefore(ha("div",null,b),c.firstChild)}a.line.wrapClass?aa(a).className=a.line.wrapClass:a.node!=a.text&&(a.node.className="");a.text.className=(a.textClass?a.textClass+" "+(a.line.textClass||
""):a.line.textClass)||""}function sa(a,b,c,d){b.gutter&&(b.node.removeChild(b.gutter),b.gutter=null);var e=b.line.gutterMarkers;if(a.options.lineNumbers||e){var f=aa(b),f=b.gutter=f.insertBefore(ha("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px"),b.text);!a.options.lineNumbers||e&&e["CodeMirror-linenumbers"]||(b.lineNumber=f.appendChild(ha("div",y(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+
"px; width: "+a.display.lineNumInnerWidth+"px")));if(e)for(b=0;b<a.options.gutters.length;++b){c=a.options.gutters[b];var g=e.hasOwnProperty(c)&&e[c];g&&f.appendChild(ha("div",[g],"CodeMirror-gutter-elt","left: "+d.gutterLeft[c]+"px; width: "+d.gutterWidth[c]+"px"))}}}function qa(a,b,c,d){var e=wa(a,b);b.text=b.node=e.pre;e.bgClass&&(b.bgClass=e.bgClass);e.textClass&&(b.textClass=e.textClass);va(b);sa(a,b,c,d);na(b,d);return b.node}function na(a,b){Q(a.line,a,b,!0);if(a.rest)for(var c=0;c<a.rest.length;c++)Q(a.rest[c],
a,b,!1)}function Q(a,b,c,d){if(a.widgets){var e=aa(b),f=0;for(a=a.widgets;f<a.length;++f){var g=a[f],h=ha("div",[g.node],"CodeMirror-linewidget");g.handleMouseEvents||(h.ignoreEvents=!0);var l=g,m=h,n=c;if(l.noHScroll){(b.alignable||(b.alignable=[])).push(m);var p=n.wrapperWidth;m.style.left=n.fixedPos+"px";l.coverGutter||(p-=n.gutterTotalWidth,m.style.paddingLeft=n.gutterTotalWidth+"px");m.style.width=p+"px"}l.coverGutter&&(m.style.zIndex=5,m.style.position="relative",l.noHScroll||(m.style.marginLeft=
-n.gutterTotalWidth+"px"));d&&g.above?e.insertBefore(h,b.gutter||b.text):e.appendChild(h);yb(g,"redraw")}}}function da(a){return V(a.line,a.ch)}function nb(a,b){return 0>Aa(a,b)?b:a}function ib(a,b){return 0>Aa(a,b)?a:b}function Ga(a,b){this.ranges=a;this.primIndex=b}function ta(a,b){this.anchor=a;this.head=b}function Da(a,b){var c=a[b];a.sort(function(a,b){return Aa(a.from(),b.from())});b=Fb(a,c);for(c=1;c<a.length;c++){var d=a[c],e=a[c-1];if(0<=Aa(e.to(),d.from())){var f=ib(e.from(),d.from()),g=
nb(e.to(),d.to()),d=e.empty()?d.from()==d.head:e.from()==e.head;c<=b&&--b;a.splice(--c,2,new ta(d?g:f,d?f:g))}}return new Ga(a,b)}function bb(a,b){return new Ga([new ta(a,b||a)],0)}function ca(a,b){if(b.line<a.first)return V(a.first,0);var c=a.first+a.size-1;if(b.line>c)return V(c,la(a,c).text.length);var c=la(a,b.line).text.length,d=b.ch,c=null==d||d>c?V(b.line,c):0>d?V(b.line,0):b;return c}function ob(a,b){return b>=a.first&&b<a.first+a.size}function tb(a,b,c,d){return a.cm&&a.cm.display.shift||
a.extend?(a=b.anchor,d&&(b=0>Aa(c,a),b!=0>Aa(d,a)?(a=c,c=d):b!=0>Aa(c,d)&&(c=d)),new ta(a,c)):new ta(d||c,c)}function p(a,b,c,d){Ra(a,new Ga([tb(a,a.sel.primary(),b,c)],0),d)}function lb(a,b,c){for(var d=[],e=0;e<a.sel.ranges.length;e++)d[e]=tb(a,a.sel.ranges[e],b[e],null);b=Da(d,a.sel.primIndex);Ra(a,b,c)}function Jb(a,b,c,d){var e=a.sel.ranges.slice(0);e[b]=c;Ra(a,Da(e,a.sel.primIndex),d)}function Pa(a,b){var c={ranges:b.ranges,update:function(b){this.ranges=[];for(var c=0;c<b.length;c++)this.ranges[c]=
new ta(ca(a,b[c].anchor),ca(a,b[c].head))}};Ha(a,"beforeSelectionChange",a,c);a.cm&&Ha(a.cm,"beforeSelectionChange",a.cm,c);return c.ranges!=b.ranges?Da(c.ranges,c.ranges.length-1):b}function Eb(a,b,c){var d=a.history.done,e=Wa(d);e&&e.ranges?(d[d.length-1]=b,ub(a,b,c)):Ra(a,b,c)}function Ra(a,b,c){ub(a,b,c);b=a.sel;var d=a.cm?a.cm.curOp.id:NaN,e=a.history,f=c&&c.origin,g;if(!(g=d==e.lastSelOp)&&(g=f&&e.lastSelOrigin==f)&&!(g=e.lastModTime==e.lastSelTime&&e.lastOrigin==f)){g=Wa(e.done);var h=f.charAt(0);
g="*"==h||"+"==h&&g.ranges.length==b.ranges.length&&g.somethingSelected()==b.somethingSelected()&&new Date-a.history.lastSelTime<=(a.cm?a.cm.options.historyEventDelay:500)}g?e.done[e.done.length-1]=b:qe(b,e.done);e.lastSelTime=+new Date;e.lastSelOrigin=f;e.lastSelOp=d;c&&!1!==c.clearRedo&&ne(e.undone)}function ub(a,b,c){if(jc(a,"beforeSelectionChange")||a.cm&&jc(a.cm,"beforeSelectionChange"))b=Pa(a,b);var d=c&&c.bias||(0>Aa(b.primary().head,a.sel.primary().head)?-1:1);vb(a,Ab(a,b,d,!0));c&&!1===c.scroll||
!a.cm||ac(a.cm)}function vb(a,b){b.equals(a.sel)||(a.sel=b,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=!0,Ff(a.cm)),yb(a,"cursorActivity",a))}function Kb(a){vb(a,Ab(a,a.sel,null,!1),kd)}function Ab(a,b,c,d){for(var e,f=0;f<b.ranges.length;f++){var g=b.ranges[f],h=wb(a,g.anchor,c,d),l=wb(a,g.head,c,d);if(e||h!=g.anchor||l!=g.head)e||(e=b.ranges.slice(0,f)),e[f]=new ta(h,l)}return e?Da(e,b.primIndex):b}function wb(a,b,c,d){var e=!1,f=b,g=c||1;a.cantEdit=!1;a:for(;;){var h=la(a,f.line);
if(h.markedSpans)for(var l=0;l<h.markedSpans.length;++l){var m=h.markedSpans[l],n=m.marker;if((null==m.from||(n.inclusiveLeft?m.from<=f.ch:m.from<f.ch))&&(null==m.to||(n.inclusiveRight?m.to>=f.ch:m.to>f.ch))){if(d&&(Ha(n,"beforeCursorEnter"),n.explicitlyCleared))if(h.markedSpans){--l;continue}else break;if(n.atomic){l=n.find(0>g?-1:1);if(0==Aa(l,f)&&(l.ch+=g,0>l.ch?l=l.line>a.first?ca(a,V(l.line-1)):null:l.ch>h.text.length&&(l=l.line<a.first+a.size-1?V(l.line+1,0):null),!l)){if(e){if(!d)return wb(a,
b,c,!0);a.cantEdit=!0;return V(a.first,0)}e=!0;l=b;g=-g}f=l;continue a}}}return f}}function Ia(a){for(var b=a.display,c=a.doc,d={},e=d.cursors=document.createDocumentFragment(),f=d.selection=document.createDocumentFragment(),g=0;g<c.sel.ranges.length;g++){var h=c.sel.ranges[g],l=h.empty();if(l||a.options.showCursorWhenSelecting){var m=a,n=e,p=T(m,h.head,"div",null,null,!m.options.singleCursorHeightPerLine),q=n.appendChild(ha("div","\u00a0","CodeMirror-cursor"));q.style.left=p.left+"px";q.style.top=
p.top+"px";q.style.height=Math.max(0,p.bottom-p.top)*m.options.cursorHeight+"px";p.other&&(m=n.appendChild(ha("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor")),m.style.display="",m.style.left=p.other.left+"px",m.style.top=p.other.top+"px",m.style.height=.85*(p.other.bottom-p.other.top)+"px")}l||Qb(a,h,f)}a.options.moveInputWithCursor&&(a=T(a,c.sel.primary().head,"div"),c=b.wrapper.getBoundingClientRect(),e=b.lineDiv.getBoundingClientRect(),d.teTop=Math.max(0,Math.min(b.wrapper.clientHeight-
10,a.top+e.top-c.top)),d.teLeft=Math.max(0,Math.min(b.wrapper.clientWidth-10,a.left+e.left-c.left)));return d}function Lb(a,b){pc(a.display.cursorDiv,b.cursors);pc(a.display.selectionDiv,b.selection);null!=b.teTop&&(a.display.inputDiv.style.top=b.teTop+"px",a.display.inputDiv.style.left=b.teLeft+"px")}function Ya(a){Lb(a,Ia(a))}function Qb(a,b,c){function d(a,b,c,e){0>b&&(b=0);b=Math.round(b);e=Math.round(e);h.appendChild(ha("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+
b+"px; width: "+(null==c?n-a:c)+"px; height: "+(e-b)+"px"))}function e(b,c,f){var h=la(g,b),v=h.text.length,l,w;Uf(Bb(h),c||0,null==f?v:f,function(e,g,B){var p=Qa(a,V(b,e),"div",h,"left"),q,t;e==g?(q=p,B=t=p.left):(q=Qa(a,V(b,g-1),"div",h,"right"),"rtl"==B&&(B=p,p=q,q=B),B=p.left,t=q.right);null==c&&0==e&&(B=m);3<q.top-p.top&&(d(B,p.top,null,p.bottom),B=m,p.bottom<q.top&&d(B,p.bottom,null,q.top));null==f&&g==v&&(t=n);if(!l||p.top<l.top||p.top==l.top&&p.left<l.left)l=p;if(!w||q.bottom>w.bottom||q.bottom==
w.bottom&&q.right>w.right)w=q;B<m+1&&(B=m);d(B,q.top,t-B,q.bottom)});return{start:l,end:w}}var f=a.display,g=a.doc,h=document.createDocumentFragment(),l=pb(a.display),m=l.left,n=f.lineSpace.offsetWidth-l.right,f=b.from();b=b.to();if(f.line==b.line)e(f.line,f.ch,b.ch);else{var p=la(g,f.line),l=la(g,b.line),l=hc(p)==hc(l),f=e(f.line,f.ch,l?p.text.length+1:null).end;b=e(b.line,l?0:null,b.ch).start;l&&(f.top<b.top-2?(d(f.right,f.top,null,f.bottom),d(m,b.top,b.left,b.bottom)):d(f.right,f.top,b.left-f.right,
f.bottom));f.bottom<b.top&&d(m,f.bottom,null,b.top)}c.appendChild(h)}function Za(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursorDiv.style.visibility="";0<a.options.cursorBlinkRate?b.blinker=setInterval(function(){b.cursorDiv.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate):0>a.options.cursorBlinkRate&&(b.cursorDiv.style.visibility="hidden")}}function eb(a,b){a.doc.mode.startState&&a.doc.frontier<a.display.viewTo&&a.state.highlight.set(b,uc(gb,a))}function gb(a){var b=
a.doc;b.frontier<b.first&&(b.frontier=b.first);if(!(b.frontier>=a.display.viewTo)){var c=+new Date+a.options.workTime,d=be(b.mode,fa(a,b.frontier)),e=[];b.iter(b.frontier,Math.min(b.first+b.size,a.display.viewTo+500),function(f){if(b.frontier>=a.display.viewFrom){var g=f.styles,h=lg(a,f,d,!0);f.styles=h.styles;var l=f.styleClasses;(h=h.classes)?f.styleClasses=h:l&&(f.styleClasses=null);l=!g||g.length!=f.styles.length||l!=h&&(!l||!h||l.bgClass!=h.bgClass||l.textClass!=h.textClass);for(h=0;!l&&h<g.length;++h)l=
g[h]!=f.styles[h];l&&e.push(b.frontier);f.stateAfter=be(b.mode,d)}else bd(a,f.text,d),f.stateAfter=0==b.frontier%5?be(b.mode,d):null;++b.frontier;if(+new Date>c)return eb(a,a.options.workDelay),!0});e.length&&Sa(a,function(){for(var b=0;b<e.length;b++)K(a,e[b],"text")})}}function fb(a,b,c){for(var d,e,f=a.doc,g=c?-1:b-(a.doc.mode.innerMode?1E3:100);b>g;--b){if(b<=f.first)return f.first;var h=la(f,b-1);if(h.stateAfter&&(!c||b<=f.frontier))return b;h=rc(h.text,null,a.options.tabSize);if(null==e||d>
h)e=b-1,d=h}return e}function fa(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return!0;var f=fb(a,b,c),g=f>d.first&&la(d,f-1).stateAfter,g=g?be(d.mode,g):Ig(d.mode);d.iter(f,b,function(c){bd(a,c.text,g);c.stateAfter=f==b-1||0==f%5||f>=e.viewFrom&&f<e.viewTo?be(d.mode,g):null;++f});c&&(d.frontier=f);return g}function Ba(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function pb(a){if(a.cachedPaddingH)return a.cachedPaddingH;var b=pc(a.measure,ha("pre","x")),b=window.getComputedStyle?
window.getComputedStyle(b):b.currentStyle,b={left:parseInt(b.paddingLeft),right:parseInt(b.paddingRight)};isNaN(b.left)||isNaN(b.right)||(a.cachedPaddingH=b);return b}function xb(a,b){if(b>=a.display.viewFrom&&b<a.display.viewTo)return a.display.view[La(a,b)];var c=a.display.externalMeasured;if(c&&b>=c.lineN&&b<c.lineN+c.size)return c}function Rb(a,b){var c=Xa(b),d=xb(a,c);d&&!d.text?d=null:d&&d.changes&&ra(a,d,c,ka(a));if(!d){var e;e=hc(b);d=Xa(e);e=a.display.externalMeasured=new X(a.doc,e,d);e.lineN=
d;d=e.built=Kf(a,e);e.text=d.pre;pc(a.display.lineMeasure,d.pre);d=e}a:if(e=d,e.line==b)c={map:e.measure.map,cache:e.measure.cache};else{for(var f=0;f<e.rest.length;f++)if(e.rest[f]==b){c={map:e.measure.maps[f],cache:e.measure.caches[f]};break a}for(f=0;f<e.rest.length;f++)if(Xa(e.rest[f])>c){c={map:e.measure.maps[f],cache:e.measure.caches[f],before:!0};break a}c=void 0}return{line:b,view:d,rect:null,map:c.map,cache:c.cache,before:c.before,hasHeights:!1}}function ea(a,b,c,d,e){b.before&&(c=-1);var f=
c+(d||"");if(b.cache.hasOwnProperty(f))a=b.cache[f];else{b.rect||(b.rect=b.view.text.getBoundingClientRect());if(!b.hasHeights){var g=b.view,h=b.rect,l=a.options.lineWrapping,m=l&&a.display.scroller.clientWidth;if(!g.measure.heights||l&&g.measure.width!=m){var n=g.measure.heights=[];if(l)for(g.measure.width=m,g=g.text.firstChild.getClientRects(),l=0;l<g.length-1;l++){var m=g[l],p=g[l+1];2<Math.abs(m.bottom-p.bottom)&&n.push((m.bottom+p.top)/2-h.top)}n.push(h.bottom-h.top)}b.hasHeights=!0}var h=d,
n=b.map,q,t,u,y;for(d=0;d<n.length;d+=3){var x=n[d],D=n[d+1];if(c<x)t=0,u=1,y="left";else if(c<D)t=c-x,u=t+1;else if(d==n.length-3||c==D&&n[d+3]>c)u=D-x,t=u-1,c>=D&&(y="right");if(null!=t){q=n[d+2];x==D&&h==(q.insertLeft?"left":"right")&&(y=h);if("left"==h&&0==t)for(;d&&n[d-2]==n[d-3]&&n[d-1].insertLeft;)q=n[(d-=3)+2],y="left";if("right"==h&&t==D-x)for(;d<n.length-3&&n[d+3]==n[d+4]&&!n[d+5].insertLeft;)q=n[(d+=3)+2],y="right";break}}if(3==q.nodeType)for(;;){for(;t&&me(b.line.text.charAt(x+t));)--t;
for(;x+u<D&&me(b.line.text.charAt(x+u));)++u;if(Fa&&9>Ta&&0==t&&u==D-x)c=q.parentNode.getBoundingClientRect();else if(Fa&&a.options.lineWrapping){var F=de(q,t,u).getClientRects();c=F.length?F["right"==h?F.length-1:0]:rf}else c=de(q,t,u).getBoundingClientRect()||rf;if(c.left||c.right||0==t)break;u=t;t-=1;y="right"}else 0<t&&(y=h="right"),c=a.options.lineWrapping&&1<(F=q.getClientRects()).length?F["right"==h?F.length-1:0]:q.getBoundingClientRect();!(Fa&&9>Ta)||t||c&&(c.left||c.right)||(c=(q=q.parentNode.getClientRects()[0])?
{left:q.left,right:q.left+Ub(a.display),top:q.top,bottom:q.bottom}:rf);if(Fa&&11>Ta){q=c;if(t=window.screen&&null!=screen.logicalXDPI&&screen.logicalXDPI!=screen.deviceXDPI)null!=zf?t=zf:(x=pc(a.display.measure,ha("span","x")),t=x.getBoundingClientRect(),x=de(x,0,1).getBoundingClientRect(),t=zf=1<Math.abs(t.left-x.left));t?(t=screen.logicalXDPI/screen.deviceXDPI,x=screen.logicalYDPI/screen.deviceYDPI,c={left:q.left*t,right:q.right*t,top:q.top*x,bottom:q.bottom*x}):c=q}q=c.top-b.rect.top;t=c.bottom-
b.rect.top;x=(q+t)/2;D=b.view.measure.heights;for(d=0;d<D.length-1&&!(x<D[d]);d++);y={left:("right"==y?c.right:c.left)-b.rect.left,right:("left"==y?c.left:c.right)-b.rect.left,top:d?D[d-1]:0,bottom:D[d]};c.left||c.right||(y.bogus=!0);a.options.singleCursorHeightPerLine||(y.rtop=q,y.rbottom=t);a=y;a.bogus||(b.cache[f]=a)}return{left:a.left,right:a.right,top:e?a.rtop:a.top,bottom:e?a.rbottom:a.bottom}}function Sb(a){if(a.measure&&(a.measure.cache={},a.measure.heights=null,a.rest))for(var b=0;b<a.rest.length;b++)a.measure.caches[b]=
{}}function Ua(a){a.display.externalMeasure=null;nd(a.display.lineMeasure);for(var b=0;b<a.display.view.length;b++)Sb(a.display.view[b])}function $a(a){Ua(a);a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null;a.options.lineWrapping||(a.display.maxLineChanged=!0);a.display.lineNumChars=null}function cb(a,b,c,d){if(b.widgets)for(var e=0;e<b.widgets.length;++e)if(b.widgets[e].above){var f=ie(b.widgets[e]);c.top+=f;c.bottom+=f}if("line"==d)return c;d||(d="local");b=kc(b);
b="local"==d?b+a.display.lineSpace.offsetTop:b-a.display.viewOffset;if("page"==d||"window"==d)a=a.display.lineSpace.getBoundingClientRect(),b+=a.top+("window"==d?0:window.pageYOffset||(document.documentElement||document.body).scrollTop),d=a.left+("window"==d?0:window.pageXOffset||(document.documentElement||document.body).scrollLeft),c.left+=d,c.right+=d;c.top+=b;c.bottom+=b;return c}function Z(a,b,c){if("div"==c)return b;var d=b.left;b=b.top;"page"==c?(d-=window.pageXOffset||(document.documentElement||
document.body).scrollLeft,b-=window.pageYOffset||(document.documentElement||document.body).scrollTop):"local"!=c&&c||(c=a.display.sizer.getBoundingClientRect(),d+=c.left,b+=c.top);a=a.display.lineSpace.getBoundingClientRect();return{left:d-a.left,top:b-a.top}}function Qa(a,b,c,d,e){d||(d=la(a.doc,b.line));var f=d;b=b.ch;d=ea(a,Rb(a,d),b,e);return cb(a,f,d,c)}function T(a,b,c,d,e,f){function g(b,h){var l=ea(a,e,b,h?"right":"left",f);h?l.left=l.right:l.right=l.left;return cb(a,d,l,c)}function h(a,b){var c=
l[b],d=c.level%2;a==Be(c)&&b&&c.level<l[b-1].level?(c=l[--b],a=Wd(c)-(c.level%2?0:1),d=!0):a==Wd(c)&&b<l.length-1&&c.level<l[b+1].level&&(c=l[++b],a=Be(c)-c.level%2,d=!1);return d&&a==c.to&&a>c.from?g(a-1):g(a,d)}d=d||la(a.doc,b.line);e||(e=Rb(a,d));var l=Bb(d);b=b.ch;if(!l)return g(b);var m=Vf(l,b),m=h(b,m);null!=Uc&&(m.other=h(b,Uc));return m}function jb(a,b){var c=0;b=ca(a.doc,b);a.options.lineWrapping||(c=Ub(a.display)*b.ch);var d=la(a.doc,b.line),e=kc(d)+a.display.lineSpace.offsetTop;return{left:c,
right:c,top:e,bottom:e+d.height}}function Va(a,b,c,d){a=V(a,b);a.xRel=d;c&&(a.outside=!0);return a}function xa(a,b,c){var d=a.doc;c+=a.display.viewOffset;if(0>c)return Va(d.first,0,!0,-1);var e=Oc(d,c),f=d.first+d.size-1;if(e>f)return Va(d.first+d.size-1,la(d,f).text.length,!0,1);0>b&&(b=0);for(d=la(d,e);;)if(e=ba(a,d,e,b,c),f=(d=$b(d,!1))&&d.find(0,!0),d&&(e.ch>f.from.ch||e.ch==f.from.ch&&0<e.xRel))e=Xa(d=f.to.line);else return e}function ba(a,b,c,d,e){function f(d){d=T(a,V(c,d),"line",b,m);h=!0;
if(g>d.bottom)return d.left-l;if(g<d.top)return d.left+l;h=!1;return d.left}var g=e-kc(b),h=!1,l=2*a.display.wrapper.clientWidth,m=Rb(a,b),n=Bb(b),p=b.text.length;e=jf(b);var q=kf(b),t=f(e),u=h,y=f(q),x=h;if(d>y)return Va(c,q,x,1);for(;;){if(n?q==e||q==lf(b,e,1):1>=q-e){n=d<t||d-t<=y-d?e:q;for(d-=n==e?t:y;me(b.text.charAt(n));)++n;return Va(c,n,n==e?u:x,-1>d?-1:1<d?1:0)}var D=Math.ceil(p/2),F=e+D;if(n)for(var F=e,A=0;A<D;++A)F=lf(b,F,1);A=f(F);if(A>d){q=F;y=A;if(x=h)y+=1E3;p=D}else e=F,t=A,u=h,p-=
D}}function Cb(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==Hc){Hc=ha("pre");for(var b=0;49>b;++b)Hc.appendChild(document.createTextNode("x")),Hc.appendChild(ha("br"));Hc.appendChild(document.createTextNode("x"))}pc(a.measure,Hc);b=Hc.offsetHeight/50;3<b&&(a.cachedTextHeight=b);nd(a.measure);return b||1}function Ub(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=ha("span","xxxxxxxxxx"),c=ha("pre",[b]);pc(a.measure,c);b=b.getBoundingClientRect();b=(b.right-b.left)/
10;2<b&&(a.cachedCharWidth=b);return b||10}function S(a){a.curOp={cm:a,viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++Gg};Ad?Ad.ops.push(a.curOp):a.curOp.ownsGroup=Ad={ops:[a.curOp],delayedCallbacks:[]}}function R(a){if(a=a.curOp.ownsGroup)try{var b=a.delayedCallbacks,c=0;do{for(;c<b.length;c++)b[c]();for(var d=
0;d<a.ops.length;d++){var e=a.ops[d];if(e.cursorActivityHandlers)for(;e.cursorActivityCalled<e.cursorActivityHandlers.length;)e.cursorActivityHandlers[e.cursorActivityCalled++](e.cm)}}while(c<b.length)}finally{Ad=null;for(b=0;b<a.ops.length;b++)a.ops[b].cm.curOp=null;a=a.ops;for(b=0;b<a.length;b++)e=a[b],c=e.cm,d=c.display,e.updateMaxLine&&t(c),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<d.viewFrom||e.scrollToPos.to.line>=d.viewTo)||d.maxLineChanged&&
c.options.lineWrapping,e.update=e.mustUpdate&&new F(c,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate);for(b=0;b<a.length;b++)e=a[b],e.updatedDisplay=e.mustUpdate&&G(e.cm,e.update);for(b=0;b<a.length;b++){e=a[b];c=e.cm;d=c.display;e.updatedDisplay&&O(c);e.barMeasure=u(c);if(d.maxLineChanged&&!c.options.lineWrapping){var f=e,g;g=d.maxLine.text.length;g=ea(c,Rb(c,d.maxLine),g,void 0);f.adjustWidthTo=g.left+3;e.maxScrollLeft=Math.max(0,d.sizer.offsetLeft+e.adjustWidthTo+Jc-d.scroller.clientWidth)}if(e.updatedDisplay||
e.selectionChanged)e.newSelectionNodes=Ia(c)}for(b=0;b<a.length;b++)e=a[b],c=e.cm,null!=e.adjustWidthTo&&(c.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<c.doc.scrollLeft&&Qc(c,Math.min(c.display.scroller.scrollLeft,e.maxScrollLeft),!0),c.display.maxLineChanged=!1),e.newSelectionNodes&&Lb(c,e.newSelectionNodes),e.updatedDisplay&&P(c,e.barMeasure),(e.updatedDisplay||e.startHeight!=c.doc.height)&&E(c,e.barMeasure),e.selectionChanged&&Za(c),c.state.focused&&e.updateInput&&Ea(c,e.typing);
for(b=0;b<a.length;b++){e=a[b];c=e.cm;d=c.display;f=c.doc;null!=e.adjustWidthTo&&1<Math.abs(e.barMeasure.scrollWidth-c.display.scroller.scrollWidth)&&E(c);e.updatedDisplay&&N(c,e.update);null==d.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(d.wheelStartX=d.wheelStartY=null);null!=e.scrollTop&&d.scroller.scrollTop!=e.scrollTop&&(g=Math.max(0,Math.min(d.scroller.scrollHeight-d.scroller.clientHeight,e.scrollTop)),d.scroller.scrollTop=d.scrollbarV.scrollTop=f.scrollTop=g);null!=
e.scrollLeft&&d.scroller.scrollLeft!=e.scrollLeft&&(g=Math.max(0,Math.min(d.scroller.scrollWidth-d.scroller.clientWidth,e.scrollLeft)),d.scroller.scrollLeft=d.scrollbarH.scrollLeft=f.scrollLeft=g,H(c));if(e.scrollToPos){var h;a:{g=c;h=ca(f,e.scrollToPos.from);var l=ca(f,e.scrollToPos.to),m=e.scrollToPos.margin;for(null==m&&(m=0);;){var n=!1,p=T(g,h),q=l&&l!=h?T(g,l):p,q=sd(g,Math.min(p.left,q.left),Math.min(p.top,q.top)-m,Math.max(p.left,q.left),Math.max(p.bottom,q.bottom)+m),y=g.doc.scrollTop,x=
g.doc.scrollLeft;null!=q.scrollTop&&(tc(g,q.scrollTop),1<Math.abs(g.doc.scrollTop-y)&&(n=!0));null!=q.scrollLeft&&(Qc(g,q.scrollLeft),1<Math.abs(g.doc.scrollLeft-x)&&(n=!0));if(!n){h=p;break a}}}e.scrollToPos.isCursor&&c.state.focused&&(g=c,l=h,m=g.display,n=m.sizer.getBoundingClientRect(),h=null,0>l.top+n.top?h=!0:l.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(h=!1),null==h||of||(l=ha("div","\u200b",null,"position: absolute; top: "+(l.top-m.viewOffset-g.display.lineSpace.offsetTop)+
"px; height: "+(l.bottom-l.top+Jc)+"px; left: "+l.left+"px; width: 2px;"),g.display.lineSpace.appendChild(l),l.scrollIntoView(h),g.display.lineSpace.removeChild(l)))}g=e.maybeHiddenMarkers;h=e.maybeUnhiddenMarkers;if(g)for(l=0;l<g.length;++l)g[l].lines.length||Ha(g[l],"hide");if(h)for(l=0;l<h.length;++l)h[l].lines.length&&Ha(h[l],"unhide");d.wrapper.offsetHeight&&(f.scrollTop=c.display.scroller.scrollTop);e.updatedDisplay&&Gb&&(c.options.lineWrapping&&(d=c,f=e.barMeasure,d.display.sizer.offsetWidth+
d.display.gutters.offsetWidth<d.display.scroller.clientWidth-1&&(d.display.sizer.style.minHeight=d.display.heightForcer.style.top="0px",d.display.gutters.style.height=f.docHeight+"px")),e.barMeasure.scrollWidth>e.barMeasure.clientWidth&&e.barMeasure.scrollWidth<e.barMeasure.clientWidth+1&&!(c.display.scroller.clientHeight-c.display.wrapper.clientHeight<Jc-3)&&E(c));e.changeObjs&&Ha(c,"changes",c,e.changeObjs)}}}function Sa(a,b){if(a.curOp)return b();S(a);try{return b()}finally{R(a)}}function ma(a,
b){return function(){if(a.curOp)return b.apply(a,arguments);S(a);try{return b.apply(a,arguments)}finally{R(a)}}}function ya(a){return function(){if(this.curOp)return a.apply(this,arguments);S(this);try{return a.apply(this,arguments)}finally{R(this)}}}function Ka(a){return function(){var b=this.cm;if(!b||b.curOp)return a.apply(this,arguments);S(b);try{return a.apply(this,arguments)}finally{R(b)}}}function X(a,b,c){for(var d=this.line=b,e;d=$b(d,!1);)d=d.find(1,!0).line,(e||(e=[])).push(d);this.size=
(this.rest=e)?Xa(Wa(this.rest))-c+1:1;this.node=this.text=null;this.hidden=$c(a,b)}function Ja(a,b,c){var d=[],e;for(e=b;e<c;)b=new X(a.doc,la(a.doc,e),e),e+=b.size,d.push(b);return d}function C(a,b,c,d){null==b&&(b=a.doc.first);null==c&&(c=a.doc.first+a.doc.size);d||(d=0);var e=a.display;d&&c<e.viewTo&&(null==e.updateLineNumbers||e.updateLineNumbers>b)&&(e.updateLineNumbers=b);a.curOp.viewChanged=!0;if(b>=e.viewTo)Gc&&he(a.doc,b)<e.viewTo&&Y(a);else if(c<=e.viewFrom)Gc&&Qe(a.doc,c+d)>e.viewFrom?
Y(a):(e.viewFrom+=d,e.viewTo+=d);else if(b<=e.viewFrom&&c>=e.viewTo)Y(a);else if(b<=e.viewFrom){var f=Ma(a,c,c+d,1);f?(e.view=e.view.slice(f.index),e.viewFrom=f.lineN,e.viewTo+=d):Y(a)}else if(c>=e.viewTo)(f=Ma(a,b,b,-1))?(e.view=e.view.slice(0,f.index),e.viewTo=f.lineN):Y(a);else{var f=Ma(a,b,b,-1),g=Ma(a,c,c+d,1);f&&g?(e.view=e.view.slice(0,f.index).concat(Ja(a,f.lineN,g.lineN)).concat(e.view.slice(g.index)),e.viewTo+=d):Y(a)}if(a=e.externalMeasured)c<a.lineN?a.lineN+=d:b<a.lineN+a.size&&(e.externalMeasured=
null)}function K(a,b,c){a.curOp.viewChanged=!0;var d=a.display,e=a.display.externalMeasured;e&&b>=e.lineN&&b<e.lineN+e.size&&(d.externalMeasured=null);b<d.viewFrom||b>=d.viewTo||(a=d.view[La(a,b)],null!=a.node&&(a=a.changes||(a.changes=[]),-1==Fb(a,c)&&a.push(c)))}function Y(a){a.display.viewFrom=a.display.viewTo=a.doc.first;a.display.view=[];a.display.viewOffset=0}function La(a,b){if(b>=a.display.viewTo)return null;b-=a.display.viewFrom;if(0>b)return null;for(var c=a.display.view,d=0;d<c.length;d++)if(b-=
c[d].size,0>b)return d}function Ma(a,b,c,d){var e=La(a,b),f=a.display.view;if(!Gc||c==a.doc.first+a.doc.size)return{index:e,lineN:c};for(var g=0,h=a.display.viewFrom;g<e;g++)h+=f[g].size;if(h!=b){if(0<d){if(e==f.length-1)return null;b=h+f[e].size-b;e++}else b=h-b;c+=b}for(;he(a.doc,c)!=c;){if(e==(0>d?0:f.length-1))return null;c+=d*f[e-(0>d?1:0)].size;e+=d}return{index:e,lineN:c}}function Hb(a){a=a.display.view;for(var b=0,c=0;c<a.length;c++){var d=a[c];d.hidden||d.node&&!d.changes||++b}return b}function ab(a){a.display.pollingFast||
a.display.poll.set(a.options.pollInterval,function(){Xb(a);a.state.focused&&ab(a)})}function Na(a){function b(){Xb(a)||c?(a.display.pollingFast=!1,ab(a)):(c=!0,a.display.poll.set(60,b))}var c=!1;a.display.pollingFast=!0;a.display.poll.set(20,b)}function Xb(a){var b=a.display.input,c=a.display.prevInput,d=a.doc;if(!a.state.focused||dg(b)&&!c||hb(a)||a.options.disableInput)return!1;a.state.pasteIncoming&&a.state.fakedLastChar&&(b.value=b.value.substring(0,b.value.length-1),a.state.fakedLastChar=!1);
var e=b.value;if(e==c&&!a.somethingSelected())return!1;if(Fa&&9<=Ta&&a.display.inputHasSelection===e||ec&&/[\uf700-\uf7ff]/.test(e))return Ea(a),!1;var f=!a.curOp;f&&S(a);a.display.shift=!1;8203!=e.charCodeAt(0)||d.sel!=a.display.selForContextMenu||c||(c="\u200b");for(var g=0,h=Math.min(c.length,e.length);g<h&&c.charCodeAt(g)==e.charCodeAt(g);)++g;var h=e.slice(g),l=za(h),m=null;a.state.pasteIncoming&&1<d.sel.ranges.length&&(hd&&hd.join("\n")==h?m=0==d.sel.ranges.length%hd.length&&le(hd,za):l.length==
d.sel.ranges.length&&(m=le(l,function(a){return[a]})));for(var n=d.sel.ranges.length-1;0<=n;n--){var p=d.sel.ranges[n],q=p.from(),t=p.to();g<c.length?q=V(q.line,q.ch-(c.length-g)):a.state.overwrite&&p.empty()&&!a.state.pasteIncoming&&(t=V(t.line,Math.min(la(d,t.line).text.length,t.ch+Wa(l).length)));var u=a.curOp.updateInput,t={from:q,to:t,text:m?m[n%m.length]:l,origin:a.state.pasteIncoming?"paste":a.state.cutIncoming?"cut":"+input"};Rc(a.doc,t);yb(a,"inputRead",a,t);if(h&&!a.state.pasteIncoming&&
a.options.electricChars&&a.options.smartIndent&&100>p.head.ch&&(!n||d.sel.ranges[n-1].head.line!=p.head.line))if(q=a.getModeAt(p.head),q.electricChars)for(t=0;t<q.electricChars.length;t++){if(-1<h.indexOf(q.electricChars.charAt(t))){Vb(a,p.head.line,"smart");break}}else q.electricInput&&(t=rb(t),q.electricInput.test(la(d,t.line).text.slice(0,t.ch))&&Vb(a,p.head.line,"smart"))}ac(a);a.curOp.updateInput=u;a.curOp.typing=!0;1E3<e.length||-1<e.indexOf("\n")?b.value=a.display.prevInput="":a.display.prevInput=
e;f&&R(a);a.state.pasteIncoming=a.state.cutIncoming=!1;return!0}function Ea(a,b){var c,d,e=a.doc;a.somethingSelected()?(a.display.prevInput="",c=e.sel.primary(),d=(c=yc&&(100<c.to().line-c.from().line||1E3<(d=a.getSelection()).length))?"-":d||a.getSelection(),a.display.input.value=d,a.state.focused&&ia(a.display.input),Fa&&9<=Ta&&(a.display.inputHasSelection=d)):b||(a.display.prevInput=a.display.input.value="",Fa&&9<=Ta&&(a.display.inputHasSelection=null));a.display.inaccurateSelection=c}function mb(a){"nocursor"==
a.options.readOnly||Zd&&Dc()==a.display.input||a.display.input.focus()}function vc(a){a.state.focused||(mb(a),xc(a))}function hb(a){return a.options.readOnly||a.doc.cantEdit}function Ib(a){function b(){a.state.focused&&setTimeout(uc(mb,a),0)}function c(b){ic(a,b)||zc(b)}function d(b){if(a.somethingSelected())hd=a.getSelections(),e.inaccurateSelection&&(e.prevInput="",e.inaccurateSelection=!1,e.input.value=hd.join("\n"),ia(e.input));else{for(var c=[],f=[],g=0;g<a.doc.sel.ranges.length;g++){var h=a.doc.sel.ranges[g].head.line,
h={anchor:V(h,0),head:V(h+1,0)};f.push(h);c.push(a.getRange(h.anchor,h.head))}"cut"==b.type?a.setSelections(f,null,kd):(e.prevInput="",e.input.value=c.join("\n"),ia(e.input));hd=c}"cut"==b.type&&(a.state.cutIncoming=!0)}var e=a.display;oa(e.scroller,"mousedown",ma(a,pd));Fa&&11>Ta?oa(e.scroller,"dblclick",ma(a,function(b){if(!ic(a,b)){var c=wc(a,b);!c||sc(a,b,"gutterClick",!0,yb)||Mb(a.display,b)||(z(b),b=Pd(a,c),p(a.doc,b.anchor,b.head))}})):oa(e.scroller,"dblclick",function(b){ic(a,b)||z(b)});oa(e.lineSpace,
"selectstart",function(a){Mb(e,a)||z(a)});Fc||oa(e.scroller,"contextmenu",function(b){ue(a,b)});oa(e.scroller,"scroll",function(){e.scroller.clientHeight&&(tc(a,e.scroller.scrollTop),Qc(a,e.scroller.scrollLeft,!0),Ha(a,"scroll",a))});oa(e.scrollbarV,"scroll",function(){e.scroller.clientHeight&&tc(a,e.scrollbarV.scrollTop)});oa(e.scrollbarH,"scroll",function(){e.scroller.clientHeight&&Qc(a,e.scrollbarH.scrollLeft)});oa(e.scroller,"mousewheel",function(b){re(a,b)});oa(e.scroller,"DOMMouseScroll",function(b){re(a,
b)});oa(e.scrollbarH,"mousedown",b);oa(e.scrollbarV,"mousedown",b);oa(e.wrapper,"scroll",function(){e.wrapper.scrollTop=e.wrapper.scrollLeft=0});oa(e.input,"keyup",function(b){te.call(a,b)});oa(e.input,"input",function(){Fa&&9<=Ta&&a.display.inputHasSelection&&(a.display.inputHasSelection=null);Na(a)});oa(e.input,"keydown",ma(a,fe));oa(e.input,"keypress",ma(a,Ze));oa(e.input,"focus",uc(xc,a));oa(e.input,"blur",uc(Yb,a));a.options.dragDrop&&(oa(e.scroller,"dragstart",function(b){if(Fa&&(!a.state.draggingText||
100>+new Date-Hg))zc(b);else if(!ic(a,b)&&!Mb(a.display,b)&&(b.dataTransfer.setData("Text",a.getSelection()),b.dataTransfer.setDragImage&&!mf)){var c=ha("img",null,null,"position: fixed; left: 0; top: 0;");c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";dc&&(c.width=c.height=1,a.display.wrapper.appendChild(c),c._top=c.offsetTop);b.dataTransfer.setDragImage(c,0,0);dc&&c.parentNode.removeChild(c)}}),oa(e.scroller,"dragenter",c),oa(e.scroller,"dragover",c),oa(e.scroller,
"drop",ma(a,rd)));oa(e.scroller,"paste",function(b){Mb(e,b)||(a.state.pasteIncoming=!0,mb(a),Na(a))});oa(e.input,"paste",function(){if(Gb&&!a.state.fakedLastChar&&!(200>new Date-a.state.lastMiddleDown)){var b=e.input.selectionStart,c=e.input.selectionEnd;e.input.value+="$";e.input.selectionEnd=c;e.input.selectionStart=b;a.state.fakedLastChar=!0}a.state.pasteIncoming=!0;Na(a)});oa(e.input,"cut",d);oa(e.input,"copy",d);nf&&oa(e.sizer,"mouseup",function(){Dc()==e.input&&e.input.blur();mb(a)})}function gc(a){var b=
a.display;b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null;a.setSize()}function Mb(a,b){for(var c=b.target||b.srcElement;c!=a.wrapper;c=c.parentNode)if(!c||c.ignoreEvents||c.parentNode==a.sizer&&c!=a.mover)return!0}function wc(a,b,c,d){var e=a.display;if(!c&&(c=b.target||b.srcElement,c==e.scrollbarH||c==e.scrollbarV||c==e.scrollbarFiller||c==e.gutterFiller))return null;var f,g,e=e.lineSpace.getBoundingClientRect();try{f=b.clientX-e.left,g=b.clientY-e.top}catch(h){return null}b=xa(a,f,g);
var l;d&&1==b.xRel&&(l=la(a.doc,b.line).text).length==b.ch&&(d=rc(l,l.length,a.options.tabSize)-l.length,b=V(b.line,Math.max(0,Math.round((f-pb(a.display).left)/Ub(a.display))-d)));return b}function pd(a){if(!ic(this,a)){var b=this.display;b.shift=a.shiftKey;if(Mb(b,a))Gb||(b.scroller.draggable=!1,setTimeout(function(){b.scroller.draggable=!0},100));else if(!sc(this,a,"gutterClick",!0,yb)){var c=wc(this,a);window.focus();switch(qg(a)){case 1:c?Kd(this,a,c):(a.target||a.srcElement)==b.scroller&&z(a);
break;case 2:Gb&&(this.state.lastMiddleDown=+new Date);c&&p(this.doc,c);setTimeout(uc(mb,this),20);z(a);break;case 3:Fc&&ue(this,a)}}}}function Kd(a,b,c){setTimeout(uc(vc,a),0);var d=+new Date,e;Fe&&Fe.time>d-400&&0==Aa(Fe.pos,c)?e="triple":Ee&&Ee.time>d-400&&0==Aa(Ee.pos,c)?(e="double",Fe={time:d,pos:c}):(e="single",Ee={time:d,pos:c});var d=a.doc.sel,f=ec?b.metaKey:b.ctrlKey;a.options.dragDrop&&Qf&&!hb(a)&&"single"==e&&-1<d.contains(c)&&d.somethingSelected()?qd(a,b,c,f):Fd(a,b,c,e,f)}function qd(a,
b,c,d){var e=a.display,f=ma(a,function(g){Gb&&(e.scroller.draggable=!1);a.state.draggingText=!1;Ob(document,"mouseup",f);Ob(e.scroller,"drop",f);10>Math.abs(b.clientX-g.clientX)+Math.abs(b.clientY-g.clientY)&&(z(g),d||p(a.doc,c),mb(a),Fa&&9==Ta&&setTimeout(function(){document.body.focus();mb(a)},20))});Gb&&(e.scroller.draggable=!0);a.state.draggingText=f;e.scroller.dragDrop&&e.scroller.dragDrop();oa(document,"mouseup",f);oa(e.scroller,"drop",f)}function Fd(a,b,c,d,e){function f(b){if(0!=Aa(t,b))if(t=
b,"rect"==d){for(var e=[],g=a.options.tabSize,h=rc(la(m,c.line).text,c.ch,g),l=rc(la(m,b.line).text,b.ch,g),v=Math.min(h,l),h=Math.max(h,l),l=Math.min(c.line,b.line),B=Math.min(a.lastLine(),Math.max(c.line,b.line));l<=B;l++){var u=la(m,l).text,L=Hf(u,v,g);v==h?e.push(new ta(V(l,L),V(l,L))):u.length>L&&e.push(new ta(V(l,L),V(l,Hf(u,h,g))))}e.length||e.push(new ta(c,c));Ra(m,Da(q.ranges.slice(0,p).concat(e),p),{origin:"*mouse",scroll:!1});a.scrollIntoView(b)}else e=n,g=e.anchor,v=b,"single"!=d&&(b=
"double"==d?Pd(a,b):new ta(V(b.line,0),ca(m,V(b.line+1,0))),0<Aa(b.anchor,g)?(v=b.head,g=ib(e.from(),b.anchor)):(v=b.anchor,g=nb(e.to(),b.head))),e=q.ranges.slice(0),e[p]=new ta(ca(m,g),v),Ra(m,Da(e,p),bg)}function g(b){var c=++y,e=wc(a,b,!0,"rect"==d);if(e)if(0!=Aa(e,t)){vc(a);f(e);var h=A(l,m);(e.line>=h.to||e.line<h.from)&&setTimeout(ma(a,function(){y==c&&g(b)}),150)}else{var v=b.clientY<u.top?-20:b.clientY>u.bottom?20:0;v&&setTimeout(ma(a,function(){y==c&&(l.scroller.scrollTop+=v,g(b))}),50)}}
function h(b){y=Infinity;z(b);mb(a);Ob(document,"mousemove",x);Ob(document,"mouseup",D);m.history.lastSelOrigin=null}var l=a.display,m=a.doc;z(b);var n,p,q=m.sel;e&&!b.shiftKey?(p=m.sel.contains(c),n=-1<p?m.sel.ranges[p]:new ta(c,c)):n=m.sel.primary();b.altKey?(d="rect",e||(n=new ta(c,c)),c=wc(a,b,!0,!0),p=-1):"double"==d?(b=Pd(a,c),n=a.display.shift||m.extend?tb(m,n,b.anchor,b.head):b):"triple"==d?(b=new ta(V(c.line,0),ca(m,V(c.line+1,0))),n=a.display.shift||m.extend?tb(m,n,b.anchor,b.head):b):n=
tb(m,n,c);e?-1<p?Jb(m,p,n,bg):(p=m.sel.ranges.length,Ra(m,Da(m.sel.ranges.concat([n]),p),{scroll:!1,origin:"*mouse"})):(p=0,Ra(m,new Ga([n],0),bg),q=m.sel);var t=c,u=l.wrapper.getBoundingClientRect(),y=0,x=ma(a,function(a){qg(a)?g(a):h(a)}),D=ma(a,h);oa(document,"mousemove",x);oa(document,"mouseup",D)}function sc(a,b,c,d,e){try{var f=b.clientX,g=b.clientY}catch(h){return!1}if(f>=Math.floor(a.display.gutters.getBoundingClientRect().right))return!1;d&&z(b);d=a.display;var l=d.lineDiv.getBoundingClientRect();
if(g>l.bottom||!jc(a,c))return Of(b);g-=l.top-d.viewOffset;for(l=0;l<a.options.gutters.length;++l){var m=d.gutters.childNodes[l];if(m&&m.getBoundingClientRect().right>=f)return f=Oc(a.doc,g),e(a,c,a,f,a.options.gutters[l],b),Of(b)}}function rd(a){var b=this;if(!ic(b,a)&&!Mb(b.display,a)){z(a);Fa&&(Hg=+new Date);var c=wc(b,a,!0),d=a.dataTransfer.files;if(c&&!hb(b))if(d&&d.length&&window.FileReader&&window.File){var e=d.length,f=Array(e),g=0;a=function(a,d){var h=new FileReader;h.onload=ma(b,function(){f[d]=
h.result;if(++g==e){c=ca(b.doc,c);var a={from:c,to:c,text:za(f.join("\n")),origin:"paste"};Rc(b.doc,a);Eb(b.doc,bb(c,rb(a)))}});h.readAsText(a)};for(var h=0;h<e;++h)a(d[h],h)}else if(b.state.draggingText&&-1<b.doc.sel.contains(c))b.state.draggingText(a),setTimeout(uc(mb,b),20);else try{if(f=a.dataTransfer.getData("Text")){if(b.state.draggingText&&(ec?!a.metaKey:!a.ctrlKey))var l=b.listSelections();ub(b.doc,bb(c,c));if(l)for(h=0;h<l.length;++h)Od(b.doc,"",l[h].anchor,l[h].head,"drag");b.replaceSelection(f,
"around","paste");mb(b)}}catch(m){}}}function tc(a,b){2>Math.abs(a.doc.scrollTop-b)||(a.doc.scrollTop=b,Xd||M(a,{top:b}),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b),a.display.scrollbarV.scrollTop!=b&&(a.display.scrollbarV.scrollTop=b),Xd&&M(a),eb(a,100))}function Qc(a,b,c){(c?b==a.doc.scrollLeft:2>Math.abs(a.doc.scrollLeft-b))||(b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth),a.doc.scrollLeft=b,H(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=
b),a.display.scrollbarH.scrollLeft!=b&&(a.display.scrollbarH.scrollLeft=b))}function re(a,b){var c=b.wheelDeltaX,d=b.wheelDeltaY;null==c&&b.detail&&b.axis==b.HORIZONTAL_AXIS&&(c=b.detail);null==d&&b.detail&&b.axis==b.VERTICAL_AXIS?d=b.detail:null==d&&(d=b.wheelDelta);var e=a.display,f=e.scroller;if(c&&f.scrollWidth>f.clientWidth||d&&f.scrollHeight>f.clientHeight){if(d&&ec&&Gb){var g=b.target,h=e.view;a:for(;g!=f;g=g.parentNode)for(var l=0;l<h.length;l++)if(h[l].node==g){a.display.currentWheelTarget=
g;break a}}!c||Xd||dc||null==fc?(d&&null!=fc&&(g=d*fc,h=a.doc.scrollTop,l=h+e.wrapper.clientHeight,0>g?h=Math.max(0,h+g-50):l=Math.min(a.doc.height,l+g+50),M(a,{top:h,bottom:l})),20>sf&&(null==e.wheelStartX?(e.wheelStartX=f.scrollLeft,e.wheelStartY=f.scrollTop,e.wheelDX=c,e.wheelDY=d,setTimeout(function(){if(null!=e.wheelStartX){var a=f.scrollLeft-e.wheelStartX,b=f.scrollTop-e.wheelStartY,a=b&&e.wheelDY&&b/e.wheelDY||a&&e.wheelDX&&a/e.wheelDX;e.wheelStartX=e.wheelStartY=null;a&&(fc=(fc*sf+a)/(sf+
1),++sf)}},200)):(e.wheelDX+=c,e.wheelDY+=d))):(d&&tc(a,Math.max(0,Math.min(f.scrollTop+d*fc,f.scrollHeight-f.clientHeight))),Qc(a,Math.max(0,Math.min(f.scrollLeft+c*fc,f.scrollWidth-f.clientWidth))),z(b),e.wheelStartX=null)}}function Db(a,b,c){if("string"==typeof b&&(b=vf[b],!b))return!1;a.display.pollingFast&&Xb(a)&&(a.display.pollingFast=!1);var d=a.display.shift,e=!1;try{hb(a)&&(a.state.suppressEdits=!0),c&&(a.display.shift=!1),e=b(a)!=Le}finally{a.display.shift=d,a.state.suppressEdits=!1}return e}
function Ed(a){var b=a.state.keyMaps.slice(0);a.options.extraKeys&&b.push(a.options.extraKeys);b.push(a.options.keyMap);return b}function se(a,b){var c=Qd(a.options.keyMap),d=c.auto;clearTimeout(Xf);d&&!gh(b)&&(Xf=setTimeout(function(){Qd(a.options.keyMap)==c&&(a.options.keyMap=d.call?d.call(null,a):d,g(a))},50));var e=hh(b,!0),f=!1;if(!e)return!1;f=Ed(a);if(f=b.shiftKey?wf("Shift-"+e,f,function(b){return Db(a,b,!0)})||wf(e,f,function(b){if("string"==typeof b?/^go[A-Z]/.test(b):b.motion)return Db(a,
b)}):wf(e,f,function(b){return Db(a,b)}))z(b),Za(a),yb(a,"keyHandled",a,e,b);return f}function Ld(a,b,c){var d=wf("'"+c+"'",Ed(a),function(b){return Db(a,b,!0)});d&&(z(b),Za(a),yb(a,"keyHandled",a,"'"+c+"'",b));return d}function fe(a){vc(this);if(!ic(this,a)){Fa&&11>Ta&&27==a.keyCode&&(a.returnValue=!1);var b=a.keyCode;this.display.shift=16==b||a.shiftKey;var c=se(this,a);dc&&(tf=c?b:null,!c&&88==b&&!yc&&(ec?a.metaKey:a.ctrlKey)&&this.replaceSelection("",null,"cut"));18!=b||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||
Ye(this)}}function Ye(a){function b(a){18!=a.keyCode&&a.altKey||(gf(c,"CodeMirror-crosshair"),Ob(document,"keyup",b),Ob(document,"mouseover",b))}var c=a.display.lineDiv;hf(c,"CodeMirror-crosshair");oa(document,"keyup",b);oa(document,"mouseover",b)}function te(a){16==a.keyCode&&(this.doc.sel.shift=!1);ic(this,a)}function Ze(a){if(!(ic(this,a)||a.ctrlKey&&!a.altKey||ec&&a.metaKey)){var b=a.keyCode,c=a.charCode;dc&&b==tf?(tf=null,z(a)):(dc&&(!a.which||10>a.which)||nf)&&se(this,a)||(b=String.fromCharCode(null==
c?b:c),Ld(this,a,b)||(Fa&&9<=Ta&&(this.display.inputHasSelection=null),Na(this)))}}function xc(a){"nocursor"!=a.options.readOnly&&(a.state.focused||(Ha(a,"focus",a),a.state.focused=!0,hf(a.display.wrapper,"CodeMirror-focused"),a.curOp||a.display.selForContextMenu==a.doc.sel||(Ea(a),Gb&&setTimeout(uc(Ea,a,!0),0))),ab(a),Za(a))}function Yb(a){a.state.focused&&(Ha(a,"blur",a),a.state.focused=!1,gf(a.display.wrapper,"CodeMirror-focused"));clearInterval(a.display.blinker);setTimeout(function(){a.state.focused||
(a.display.shift=!1)},150)}function ue(a,b){function c(){if(null!=e.input.selectionStart){var b=a.somethingSelected(),d=e.input.value="\u200b"+(b?e.input.value:"");e.prevInput=b?"":"\u200b";e.input.selectionStart=1;e.input.selectionEnd=d.length;e.selForContextMenu=a.doc.sel}}function d(){e.inputDiv.style.position="relative";e.input.style.cssText=h;Fa&&9>Ta&&(e.scrollbarV.scrollTop=e.scroller.scrollTop=g);ab(a);if(null!=e.input.selectionStart){(!Fa||Fa&&9>Ta)&&c();var b=0,f=function(){e.selForContextMenu==
a.doc.sel&&0==e.input.selectionStart?ma(a,vf.selectAll)(a):10>b++?e.detectingSelectAll=setTimeout(f,500):Ea(a)};e.detectingSelectAll=setTimeout(f,200)}}if(!ic(a,b,"contextmenu")){var e=a.display;if(!Mb(e,b)&&!$e(a,b)){var f=wc(a,b),g=e.scroller.scrollTop;if(f&&!dc){a.options.resetSelectionOnContextMenu&&-1==a.doc.sel.contains(f)&&ma(a,Ra)(a.doc,bb(f),kd);var h=e.input.style.cssText;e.inputDiv.style.position="absolute";e.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(b.clientY-
5)+"px; left: "+(b.clientX-5)+"px; z-index: 1000; background: "+(Fa?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";if(Gb)var l=window.scrollY;mb(a);Gb&&window.scrollTo(null,l);Ea(a);a.somethingSelected()||(e.input.value=e.prevInput=" ");e.selForContextMenu=a.doc.sel;clearTimeout(e.detectingSelectAll);Fa&&9<=Ta&&c();if(Fc){zc(b);var m=function(){Ob(window,"mouseup",m);setTimeout(d,20)};oa(window,
"mouseup",m)}else setTimeout(d,50)}}}}function $e(a,b){return jc(a,"gutterContextMenu")?sc(a,b,"gutterContextMenu",!1,Ha):!1}function Md(a,b){if(0>Aa(a,b.from))return a;if(0>=Aa(a,b.to))return rb(b);var c=a.line+b.text.length-(b.to.line-b.from.line)-1,d=a.ch;a.line==b.to.line&&(d+=rb(b).ch-b.to.ch);return V(c,d)}function Nd(a,b){for(var c=[],d=0;d<a.sel.ranges.length;d++){var e=a.sel.ranges[d];c.push(new ta(Md(e.anchor,b),Md(e.head,b)))}return Da(c,a.sel.primIndex)}function ve(a,b,c){return a.line==
b.line?V(c.line,a.ch-b.ch+c.ch):V(c.line+(a.line-b.line),a.ch)}function af(a,b,c){b={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){this.canceled=!0}};c&&(b.update=function(b,c,d,e){b&&(this.from=ca(a,b));c&&(this.to=ca(a,c));d&&(this.text=d);void 0!==e&&(this.origin=e)});Ha(a,"beforeChange",a,b);a.cm&&Ha(a.cm,"beforeChange",a.cm,b);return b.canceled?null:{from:b.from,to:b.to,text:b.text,origin:b.origin}}function Rc(a,b,c){if(a.cm){if(!a.cm.curOp)return ma(a.cm,Rc)(a,
b,c);if(a.cm.state.suppressEdits)return}if(jc(a,"beforeChange")||a.cm&&jc(a.cm,"beforeChange"))if(b=af(a,b,!0),!b)return;if(c=pf&&!c&&fg(a,b.from,b.to))for(var d=c.length-1;0<=d;--d)mc(a,{from:c[d].from,to:c[d].to,text:d?[""]:b.text});else mc(a,b)}function mc(a,b){if(1!=b.text.length||""!=b.text[0]||0!=Aa(b.from,b.to)){var c=Nd(a,b);ng(a,b,c,a.cm?a.cm.curOp.id:NaN);dd(a,b,c,Cf(a,b));var d=[];ad(a,function(a,c){c||-1!=Fb(d,a.history)||(ig(a.history,b),d.push(a.history));dd(a,b,null,Cf(a,b))})}}function cd(a,
b,c){if(!a.cm||!a.cm.state.suppressEdits){for(var d=a.history,e,f=a.sel,g="undo"==b?d.done:d.undone,h="undo"==b?d.undone:d.done,l=0;l<g.length&&(e=g[l],c?!e.ranges||e.equals(a.sel):e.ranges);l++);if(l!=g.length){for(d.lastOrigin=d.lastSelOrigin=null;;)if(e=g.pop(),e.ranges){qe(e,h);if(c&&!e.equals(a.sel)){Ra(a,e,{clearRedo:!1});return}f=e}else break;c=[];qe(f,h);h.push({changes:c,generation:d.generation});d.generation=e.generation||++d.maxGeneration;d=jc(a,"beforeChange")||a.cm&&jc(a.cm,"beforeChange");
for(l=e.changes.length-1;0<=l;--l){var m=e.changes[l];m.origin=b;if(d&&!af(a,m,!1)){g.length=0;break}c.push(Lc(a,m));f=l?Nd(a,m):Wa(g);dd(a,m,f,Df(a,m));!l&&a.cm&&a.cm.scrollIntoView({from:m.from,to:rb(m)});var n=[];ad(a,function(a,b){b||-1!=Fb(n,a.history)||(ig(a.history,m),n.push(a.history));dd(a,m,null,Df(a,m))})}}}}function md(a,b){if(0!=b&&(a.first+=b,a.sel=new Ga(le(a.sel.ranges,function(a){return new ta(V(a.anchor.line+b,a.anchor.ch),V(a.head.line+b,a.head.ch))}),a.sel.primIndex),a.cm)){C(a.cm,
a.first,a.first-b,b);for(var c=a.cm.display,d=c.viewFrom;d<c.viewTo;d++)K(a.cm,d,"gutter")}}function dd(a,b,c,d){if(a.cm&&!a.cm.curOp)return ma(a.cm,dd)(a,b,c,d);if(b.to.line<a.first)md(a,b.text.length-1-(b.to.line-b.from.line));else if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);md(a,e);b={from:V(a.first,0),to:V(b.to.line+e,b.to.ch),text:[Wa(b.text)],origin:b.origin}}e=a.lastLine();b.to.line>e&&(b={from:b.from,to:V(e,la(a,e).text.length),text:[b.text[0]],
origin:b.origin});b.removed=oe(a,b.from,b.to);c||(c=Nd(a,b));a.cm?bf(a.cm,b,d):Id(a,b,d);ub(a,c,kd)}}function bf(a,b,c){var d=a.doc,f=a.display,g=b.from,h=b.to,l=!1,m=g.line;a.options.lineWrapping||(m=Xa(hc(la(d,g.line))),d.iter(m,h.line+1,function(a){if(a==f.maxLine)return l=!0}));-1<d.sel.contains(b.from,b.to)&&Ff(a);Id(d,b,c,e(a));a.options.lineWrapping||(d.iter(m,g.line+b.text.length,function(a){var b=q(a);b>f.maxLineLength&&(f.maxLine=a,f.maxLineLength=b,f.maxLineChanged=!0,l=!1)}),l&&(a.curOp.updateMaxLine=
!0));d.frontier=Math.min(d.frontier,g.line);eb(a,400);c=b.text.length-(h.line-g.line)-1;g.line!=h.line||1!=b.text.length||Ue(a.doc,b)?C(a,g.line,h.line+1,c):K(a,g.line,"text");c=jc(a,"changes");if((d=jc(a,"change"))||c)b={from:g,to:h,text:b.text,removed:b.removed,origin:b.origin},d&&yb(a,"change",a,b),c&&(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push(b);a.display.selForContextMenu=null}function Od(a,b,c,d,e){d||(d=c);if(0>Aa(d,c)){var f=d;d=c;c=f}"string"==typeof b&&(b=za(b));Rc(a,{from:c,to:d,
text:b,origin:e})}function sd(a,b,c,d,e){var f=a.display,g=Cb(a.display);0>c&&(c=0);var h=a.curOp&&null!=a.curOp.scrollTop?a.curOp.scrollTop:f.scroller.scrollTop,l=f.scroller.clientHeight-Jc,m={};e-c>l&&(e=c+l);var n=a.doc.height+Ba(f),p=c<g,g=e>n-g;c<h?m.scrollTop=p?0:c:e>h+l&&(e=Math.min(c,(g?n:e)-l),e!=h&&(m.scrollTop=e));a=a.curOp&&null!=a.curOp.scrollLeft?a.curOp.scrollLeft:f.scroller.scrollLeft;f=f.scroller.clientWidth-Jc-f.gutters.offsetWidth;(h=d-b>f)&&(d=c+l);10>b?m.scrollLeft=0:b<a?m.scrollLeft=
Math.max(0,b-(h?0:10)):d>f+a-3&&(m.scrollLeft=d+(h?0:10)-f);return m}function td(a,b,c){null==b&&null==c||Zb(a);null!=b&&(a.curOp.scrollLeft=(null==a.curOp.scrollLeft?a.doc.scrollLeft:a.curOp.scrollLeft)+b);null!=c&&(a.curOp.scrollTop=(null==a.curOp.scrollTop?a.doc.scrollTop:a.curOp.scrollTop)+c)}function ac(a){Zb(a);var b=a.getCursor(),c=b,d=b;a.options.lineWrapping||(c=b.ch?V(b.line,b.ch-1):b,d=V(b.line,b.ch+1));a.curOp.scrollToPos={from:c,to:d,margin:a.options.cursorScrollMargin,isCursor:!0}}function Zb(a){var b=
a.curOp.scrollToPos;if(b){a.curOp.scrollToPos=null;var c=jb(a,b.from),d=jb(a,b.to),b=sd(a,Math.min(c.left,d.left),Math.min(c.top,d.top)-b.margin,Math.max(c.right,d.right),Math.max(c.bottom,d.bottom)+b.margin);a.scrollTo(b.scrollLeft,b.scrollTop)}}function Vb(a,b,c,d){var e=a.doc,f;null==c&&(c="add");"smart"==c&&(e.mode.indent?f=fa(a,b):c="prev");var g=a.options.tabSize,h=la(e,b),l=rc(h.text,null,g);h.stateAfter&&(h.stateAfter=null);var m=h.text.match(/^\s*/)[0],n;if(!d&&!/\S/.test(h.text))n=0,c="not";
else if("smart"==c&&(n=e.mode.indent(f,h.text.slice(m.length),h.text),n==Le||150<n)){if(!d)return;c="prev"}"prev"==c?n=b>e.first?rc(la(e,b-1).text,null,g):0:"add"==c?n=l+a.options.indentUnit:"subtract"==c?n=l-a.options.indentUnit:"number"==typeof c&&(n=l+c);n=Math.max(0,n);c="";d=0;if(a.options.indentWithTabs)for(a=Math.floor(n/g);a;--a)d+=g,c+="\t";d<n&&(c+=hg(n-d));if(c!=m)Od(e,c,V(b,0),V(b,m.length),"+input");else for(a=0;a<e.sel.ranges.length;a++)if(g=e.sel.ranges[a],g.head.line==b&&g.head.ch<
m.length){d=V(b,m.length);Jb(e,a,new ta(d,d));break}h.stateAfter=null}function Sc(a,b,c,d){var e=b,f=b;"number"==typeof b?f=la(a,Math.max(a.first,Math.min(b,a.first+a.size-1))):e=Xa(b);if(null==e)return null;d(f,e)&&a.cm&&K(a.cm,e,c);return f}function bc(a,b){for(var c=a.doc.sel.ranges,d=[],e=0;e<c.length;e++){for(var f=b(c[e]);d.length&&0>=Aa(f.from,Wa(d).to);){var g=d.pop();if(0>Aa(g.from,f.from)){f.from=g.from;break}}d.push(f)}Sa(a,function(){for(var b=d.length-1;0<=b;b--)Od(a.doc,"",d[b].from,
d[b].to,"+delete");ac(a)})}function Kc(a,b,c,d,e){function f(b){var d=(e?lf:Wf)(m,h,c,!0);if(null==d){if(b=!b)b=g+c,b<a.first||b>=a.first+a.size?b=n=!1:(g=b,b=m=la(a,b));if(b)h=e?(0>c?kf:jf)(m):0>c?m.text.length:0;else return n=!1}else h=d;return!0}var g=b.line,h=b.ch,l=c,m=la(a,g),n=!0;if("char"==d)f();else if("column"==d)f(!0);else if("word"==d||"group"==d){var p=null;d="group"==d;b=a.cm&&a.cm.getHelper(b,"wordChars");for(var q=!0;!(0>c)||f(!q);q=!1){var t=m.text.charAt(h)||"\n",t=Ve(t,b)?"w":d&&
"\n"==t?"n":!d||/\s/.test(t)?null:"p";!d||q||t||(t="s");if(p&&p!=t){0>c&&(c=1,f());break}t&&(p=t);if(0<c&&!f(!q))break}}l=wb(a,V(g,h),l,!0);n||(l.hitSide=!0);return l}function Tc(a,b,c,d){var e=a.doc,f=b.left,g;"page"==d?(g=Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),g=b.top+c*(g-(0>c?1.5:.5)*Cb(a.display))):"line"==d&&(g=0<c?b.bottom+3:b.top-3);for(;;){b=xa(a,f,g);if(!b.outside)break;if(0>c?0>=g:g>=e.height){b.hitSide=!0;break}g+=5*c}return b}
function Pd(a,b){var c=la(a.doc,b.line).text,d=b.ch,e=b.ch;if(c){var f=a.getHelper(b,"wordChars");(0>b.xRel||e==c.length)&&d?--d:++e;for(var g=c.charAt(d),g=Ve(g,f)?function(a){return Ve(a,f)}:/\s/.test(g)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!Ve(a)};0<d&&g(c.charAt(d-1));)--d;for(;e<c.length&&g(c.charAt(e));)++e}return new ta(V(b.line,d),V(b.line,e))}function ua(b,c,d,e){a.defaults[b]=c;d&&(id[b]=e?function(a,b,c){c!=Ge&&d(a,b,c)}:d)}function Qd(a){return"string"==typeof a?
Ic[a]:a}function Wb(a,b,c,d,e){if(d&&d.shared)return Zc(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return ma(a.cm,Wb)(a,b,c,d,e);var f=new qc(a,e);e=Aa(b,c);d&&Pc(d,f,!1);if(0<e||0==e&&!1!==f.clearWhenEmpty)return f;f.replacedWith&&(f.collapsed=!0,f.widgetNode=ha("span",[f.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||(f.widgetNode.ignoreEvents=!0),d.insertLeft&&(f.widgetNode.insertLeft=!0));if(f.collapsed){if(Gd(a,b.line,b,c,f)||b.line!=c.line&&Gd(a,c.line,b,c,f))throw Error("Inserting collapsed marker partially overlapping an existing one");
Gc=!0}f.addToHistory&&ng(a,{from:b,to:c,origin:"markText"},a.sel,NaN);var g=b.line,h=a.cm,l;a.iter(g,c.line+1,function(a){h&&f.collapsed&&!h.options.lineWrapping&&hc(a)==h.display.maxLine&&(l=!0);f.collapsed&&g!=b.line&&lc(a,0);var d=new Dd(f,g==b.line?b.ch:null,g==c.line?c.ch:null);a.markedSpans=a.markedSpans?a.markedSpans.concat([d]):[d];d.marker.attachLine(a);++g});f.collapsed&&a.iter(b.line,c.line+1,function(b){$c(a,b)&&lc(b,0)});f.clearOnEnter&&oa(f,"beforeCursorEnter",function(){f.clear()});
f.readOnly&&(pf=!0,(a.history.done.length||a.history.undone.length)&&a.clearHistory());f.collapsed&&(f.id=++Zf,f.atomic=!0);if(h){l&&(h.curOp.updateMaxLine=!0);if(f.collapsed)C(h,b.line,c.line+1);else if(f.className||f.title||f.startStyle||f.endStyle)for(d=b.line;d<=c.line;d++)K(h,d,"text");f.atomic&&Kb(h.doc);yb(h,"markerAdded",h,f)}return f}function Zc(a,b,c,d,e){d=Pc(d);d.shared=!1;var f=[Wb(a,b,c,d,e)],g=f[0],h=d.widgetNode;ad(a,function(a){h&&(d.widgetNode=h.cloneNode(!0));f.push(Wb(a,ca(a,b),
ca(a,c),d,e));for(var r=0;r<a.linked.length;++r)if(a.linked[r].isParent)return;g=Wa(f)});return new xf(f,g)}function Rd(a){return a.findMarks(V(a.first,0),a.clipPos(V(a.lastLine())),function(a){return a.parent})}function eg(a){for(var b=0;b<a.length;b++){var c=a[b],d=[c.primary.doc];ad(c.primary.doc,function(a){d.push(a)});for(var e=0;e<c.markers.length;e++){var f=c.markers[e];-1==Fb(d,f.doc)&&(f.parent=null,c.markers.splice(e--,1))}}}function Dd(a,b,c){this.marker=a;this.from=b;this.to=c}function ld(a,
b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function Cf(a,b){var c=ob(a,b.from.line)&&la(a,b.from.line).markedSpans,d=ob(a,b.to.line)&&la(a,b.to.line).markedSpans;if(!c&&!d)return null;var e=b.from.ch,f=b.to.ch,g=0==Aa(b.from,b.to);if(c)for(var h=0,l;h<c.length;++h){var m=c[h],n=m.marker;if(null==m.from||(n.inclusiveLeft?m.from<=e:m.from<e)||!(m.from!=e||"bookmark"!=n.type||g&&m.marker.insertLeft)){var p=null==m.to||(n.inclusiveRight?m.to>=e:m.to>e);(l||(l=[])).push(new Dd(n,
m.from,p?null:m.to))}}c=l;if(d)for(var h=0,q;h<d.length;++h)if(l=d[h],m=l.marker,null==l.to||(m.inclusiveRight?l.to>=f:l.to>f)||l.from==f&&"bookmark"==m.type&&(!g||l.marker.insertLeft))n=null==l.from||(m.inclusiveLeft?l.from<=f:l.from<f),(q||(q=[])).push(new Dd(m,n?null:l.from-f,null==l.to?null:l.to-f));d=q;g=1==b.text.length;q=Wa(b.text).length+(g?e:0);if(c)for(f=0;f<c.length;++f)if(h=c[f],null==h.to)(l=ld(d,h.marker),l)?g&&(h.to=null==l.to?null:l.to+q):h.to=e;if(d)for(f=0;f<d.length;++f)h=d[f],
null!=h.to&&(h.to+=q),null==h.from?(l=ld(c,h.marker),l||(h.from=q,g&&(c||(c=[])).push(h))):(h.from+=q,g&&(c||(c=[])).push(h));c&&(c=Yc(c));d&&d!=c&&(d=Yc(d));e=[c];if(!g){var g=b.text.length-2,t;if(0<g&&c)for(f=0;f<c.length;++f)null==c[f].to&&(t||(t=[])).push(new Dd(c[f].marker,null,null));for(f=0;f<g;++f)e.push(t);e.push(d)}return e}function Yc(a){for(var b=0;b<a.length;++b){var c=a[b];null!=c.from&&c.from==c.to&&!1!==c.marker.clearWhenEmpty&&a.splice(b--,1)}return a.length?a:null}function Df(a,
b){var c;if(c=b["spans_"+a.id]){for(var d=0,e=[];d<b.text.length;++d)e.push($g(c[d]));c=e}else c=null;d=Cf(a,b);if(!c)return d;if(!d)return c;for(e=0;e<c.length;++e){var f=c[e],g=d[e];if(f&&g){var h=0;a:for(;h<g.length;++h){for(var l=g[h],m=0;m<f.length;++m)if(f[m].marker==l.marker)continue a;f.push(l)}}else g&&(c[e]=g)}return c}function fg(a,b,c){var d=null;a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=
Fb(d,c)||(d||(d=[])).push(c)}});if(!d)return null;a=[{from:b,to:c}];for(b=0;b<d.length;++b){c=d[b];for(var e=c.find(0),f=0;f<a.length;++f){var g=a[f];if(!(0>Aa(g.to,e.from)||0<Aa(g.from,e.to))){var h=[f,1],l=Aa(g.from,e.from),m=Aa(g.to,e.to);(0>l||!c.inclusiveLeft&&!l)&&h.push({from:g.from,to:e.from});(0<m||!c.inclusiveRight&&!m)&&h.push({from:e.to,to:g.to});a.splice.apply(a,h);f+=h.length-1}}}return a}function ge(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=
null}}function Ef(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function Pe(a,b){var c=a.lines.length-b.lines.length;if(0!=c)return c;var c=a.find(),d=b.find(),e=Aa(c.from,d.from)||(a.inclusiveLeft?-1:0)-(b.inclusiveLeft?-1:0);return e?-e:(c=Aa(c.to,d.to)||(a.inclusiveRight?1:0)-(b.inclusiveRight?1:0))?c:b.id-a.id}function $b(a,b){var c=Gc&&a.markedSpans,d;if(c)for(var e,f=0;f<c.length;++f)e=c[f],e.marker.collapsed&&null==(b?e.from:e.to)&&(!d||0>Pe(d,e.marker))&&
(d=e.marker);return d}function Gd(a,b,c,d,e){a=la(a,b);if(a=Gc&&a.markedSpans)for(b=0;b<a.length;++b){var f=a[b];if(f.marker.collapsed){var g=f.marker.find(0),h=Aa(g.from,c)||(f.marker.inclusiveLeft?-1:0)-(e.inclusiveLeft?-1:0),l=Aa(g.to,d)||(f.marker.inclusiveRight?1:0)-(e.inclusiveRight?1:0);if(!(0<=h&&0>=l||0>=h&&0<=l)&&(0>=h&&(0<Aa(g.to,c)||f.marker.inclusiveRight&&e.inclusiveLeft)||0<=h&&(0>Aa(g.from,d)||f.marker.inclusiveLeft&&e.inclusiveRight)))return!0}}}function hc(a){for(var b;b=$b(a,!0);)a=
b.find(-1,!0).line;return a}function he(a,b){var c=la(a,b),d=hc(c);return c==d?b:Xa(d)}function Qe(a,b){if(b>a.lastLine())return b;var c=la(a,b),d;if(!$c(a,c))return b;for(;d=$b(c,!1);)c=d.find(1,!0).line;return Xa(c)+1}function $c(a,b){var c=Gc&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed&&(null==d.from||!d.marker.widgetNode&&0==d.from&&d.marker.inclusiveLeft&&Re(a,b,d)))return!0}function Re(a,b,c){if(null==c.to)return b=c.marker.find(1,!0),Re(a,b.line,ld(b.line.markedSpans,
c.marker));if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var d,e=0;e<b.markedSpans.length;++e)if(d=b.markedSpans[e],d.marker.collapsed&&!d.marker.widgetNode&&d.from==c.to&&(null==d.to||d.to!=c.from)&&(d.marker.inclusiveLeft||c.marker.inclusiveRight)&&Re(a,b,d))return!0}function ie(a){if(null!=a.height)return a.height;var b;a:{b=document.body;var c=a.node;if(b.contains)b=b.contains(c);else{for(;c=c.parentNode;)if(c==b){b=!0;break a}b=void 0}}b||(b="position: relative;",a.coverGutter&&
(b+="margin-left: -"+a.cm.getGutterElement().offsetWidth+"px;"),pc(a.cm.display.measure,ha("div",[a.node],null,b)));return a.height=a.node.offsetHeight}function jg(a,b,c,d){var e=new Bd(a,c,d);e.noHScroll&&(a.display.alignWidgets=!0);Sc(a.doc,b,"widget",function(b){var c=b.widgets||(b.widgets=[]);null==e.insertAt?c.push(e):c.splice(Math.min(c.length-1,Math.max(0,e.insertAt)),0,e);e.line=b;$c(a.doc,b)||(c=kc(b)<a.doc.scrollTop,lc(b,b.height+ie(e)),c&&td(a,null,e.height),a.curOp.forceUpdate=!0);return!0});
return e}function We(a,b){if(a)for(;;){var c=a.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;a=a.slice(0,c.index)+a.slice(c.index+c[0].length);var d=c[1]?"bgClass":"textClass";null==b[d]?b[d]=c[2]:(new RegExp("(?:^|s)"+c[2]+"(?:$|s)")).test(b[d])||(b[d]+=" "+c[2])}return a}function If(b,c){if(b.blankLine)return b.blankLine(c);if(b.innerMode){var d=a.innerMode(b,c);if(d.mode.blankLine)return d.mode.blankLine(d.state)}}function Se(a,b,c){for(var d=0;10>d;d++){var e=a.token(b,c);if(b.pos>b.start)return e}throw Error("Mode "+
a.name+" failed to advance stream.");}function Nf(b,c,d,e,f,g,h){var l=d.flattenSpans;null==l&&(l=b.options.flattenSpans);var m=0,n=null,p=new Je(c,b.options.tabSize),q;for(""==c&&We(If(d,e),g);!p.eol();){p.pos>b.options.maxHighlightLength?(l=!1,h&&bd(b,c,e,p.pos),p.pos=c.length,q=null):q=We(Se(d,p,e),g);if(b.options.addModeClass){var t=a.innerMode(d,e).mode.name;t&&(q="m-"+(q?t+" "+q:t))}l&&n==q||(m<p.start&&f(p.start,n),m=p.start,n=q);p.start=p.pos}for(;m<p.pos;)b=Math.min(p.pos,m+5E4),f(b,n),m=
b}function lg(a,b,c,d){var e=[a.state.modeGen],f={};Nf(a,b.text,a.doc.mode,c,function(a,b){e.push(a,b)},f,d);for(c=0;c<a.state.overlays.length;++c){var g=a.state.overlays[c],h=1,l=0;Nf(a,b.text,g.mode,!0,function(a,b){for(var c=h;l<a;){var d=e[h];d>a&&e.splice(h,1,a,e[h+1],d);h+=2;l=Math.min(a,d)}if(b)if(g.opaque)e.splice(c,h-c,a,"cm-overlay "+b),h=c+2;else for(;c<h;c+=2)d=e[c+1],e[c+1]=(d?d+" ":"")+"cm-overlay "+b},f)}return{styles:e,classes:f.bgClass||f.textClass?f:null}}function od(a,b){if(!b.styles||
b.styles[0]!=a.state.modeGen){var c=lg(a,b,b.stateAfter=fa(a,Xa(b)));b.styles=c.styles;c.classes?b.styleClasses=c.classes:b.styleClasses&&(b.styleClasses=null)}return b.styles}function bd(a,b,c,d){var e=a.doc.mode,f=new Je(b,a.options.tabSize);f.start=f.pos=d||0;for(""==b&&If(e,c);!f.eol()&&f.pos<=a.options.maxHighlightLength;)Se(e,f,c),f.start=f.pos}function mg(a,b){if(!a||/^\s*$/.test(a))return null;var c=b.addModeClass?$f:Jg;return c[a]||(c[a]=a.replace(/\S+/g,"cm-$&"))}function Kf(a,b){var c=
ha("span",null,null,Gb?"padding-right: .1px":null),c={pre:ha("pre",[c]),content:c,col:0,pos:0,cm:a};b.measure={};for(var d=0;d<=(b.rest?b.rest.length:0);d++){var e=d?b.rest[d-1]:b.line,f;c.pos=0;c.addToken=je;(Fa||Gb)&&a.getOption("lineWrapping")&&(c.addToken=Zg(c.addToken));var g;if(null!=cf)g=cf;else{g=pc(a.display.measure,document.createTextNode("A\u062eA"));var h=de(g,0,1).getBoundingClientRect();g=h.left==h.right?!1:cf=3>de(g,1,2).getBoundingClientRect().right-h.right}g&&(f=Bb(e))&&(c.addToken=
Xe(c.addToken,f));c.map=[];a:{g=c;var h=od(a,e),l=e.markedSpans,m=e.text,n=0;if(l)for(var p=m.length,q=0,t=1,u="",y=void 0,x=0,D=void 0,F=void 0,A=void 0,z=void 0,G=void 0;;){if(x==q){for(var D=F=A=z="",G=null,x=Infinity,E=[],C=0;C<l.length;++C){var T=l[C],H=T.marker;T.from<=q&&(null==T.to||T.to>q)?(null!=T.to&&x>T.to&&(x=T.to,F=""),H.className&&(D+=" "+H.className),H.startStyle&&T.from==q&&(A+=" "+H.startStyle),H.endStyle&&T.to==x&&(F+=" "+H.endStyle),H.title&&!z&&(z=H.title),H.collapsed&&(!G||0>
Pe(G.marker,H))&&(G=T)):T.from>q&&x>T.from&&(x=T.from);"bookmark"==H.type&&T.from==q&&H.widgetNode&&E.push(H)}if(G&&(G.from||0)==q&&(ke(g,(null==G.to?p+1:G.to)-q,G.marker,null==G.from),null==G.to))break a;if(!G&&E.length)for(C=0;C<E.length;++C)ke(g,0,E[C])}if(q>=p)break;for(E=Math.min(p,x);;){if(u){C=q+u.length;G||(T=C>E?u.slice(0,E-q):u,g.addToken(g,T,y?y+D:D,A,q+T.length==x?F:"",z));if(C>=E){u=u.slice(E-q);q=E;break}q=C;A=""}u=m.slice(n,n=h[t++]);y=mg(h[t++],g.cm.options)}}else for(var t=1;t<h.length;t+=
2)g.addToken(g,m.slice(n,n=h[t]),mg(h[t+1],g.cm.options))}e.styleClasses&&(e.styleClasses.bgClass&&(c.bgClass=Tf(e.styleClasses.bgClass,c.bgClass||"")),e.styleClasses.textClass&&(c.textClass=Tf(e.styleClasses.textClass,c.textClass||"")));0==c.map.length&&c.map.push(0,0,c.content.appendChild(Bg(a.display.measure)));0==d?(b.measure.map=c.map,b.measure.cache={}):((b.measure.maps||(b.measure.maps=[])).push(c.map),(b.measure.caches||(b.measure.caches=[])).push({}))}Ha(a,"renderLine",a,b.line,c.pre);c.pre.className&&
(c.textClass=Tf(c.pre.className,c.textClass||""));return c}function je(a,b,c,d,e,f){if(b){var g=a.cm.options.specialChars,h=!1;if(g.test(b))for(var l=document.createDocumentFragment(),m=0;;){g.lastIndex=m;var n=g.exec(b),p=n?n.index-m:b.length-m;if(p){var q=document.createTextNode(b.slice(m,m+p));Fa&&9>Ta?l.appendChild(ha("span",[q])):l.appendChild(q);a.map.push(a.pos,a.pos+p,q);a.col+=p;a.pos+=p}if(!n)break;m+=p+1;"\t"==n[0]?(q=a.cm.options.tabSize,n=q-a.col%q,q=l.appendChild(ha("span",hg(n),"cm-tab")),
a.col+=n):(q=a.cm.options.specialCharPlaceholder(n[0]),Fa&&9>Ta?l.appendChild(ha("span",[q])):l.appendChild(q),a.col+=1);a.map.push(a.pos,a.pos+1,q);a.pos++}else{a.col+=b.length;var l=document.createTextNode(b);a.map.push(a.pos,a.pos+b.length,l);Fa&&9>Ta&&(h=!0);a.pos+=b.length}if(c||d||e||h)return b=c||"",d&&(b+=d),e&&(b+=e),d=ha("span",[l],b),f&&(d.title=f),a.content.appendChild(d);a.content.appendChild(l)}}function Zg(a){function b(a){for(var c=" ",d=0;d<a.length-2;++d)c+=d%2?" ":"\u00a0";return c+
" "}return function(c,d,e,f,g,h){a(c,d.replace(/ {3,}/g,b),e,f,g,h)}}function Xe(a,b){return function(c,d,e,f,g,h){e=e?e+" cm-force-border":"cm-force-border";for(var l=c.pos,m=l+d.length;;){for(var n=0;n<b.length;n++){var p=b[n];if(p.to>l&&p.from<=l)break}if(p.to>=m)return a(c,d,e,f,g,h);a(c,d.slice(0,p.to-l),e,f,null,h);f=null;d=d.slice(p.to-l);l=p.to}}}function ke(a,b,c,d){if(c=!d&&c.widgetNode)a.map.push(a.pos,a.pos+b,c),a.content.appendChild(c);a.pos+=b}function Ue(a,b){return 0==b.from.ch&&0==
b.to.ch&&""==Wa(b.text)&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function Id(a,b,c,d){function e(a,c,f){a.text=c;a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null);null!=a.order&&(a.order=null);ge(a);Ef(a,f);c=d?d(a):1;c!=a.height&&lc(a,c);yb(a,"change",a,b)}var f=b.from,g=b.to,h=b.text,l=la(a,f.line),m=la(a,g.line),n=Wa(h),p=c?c[h.length-1]:null,q=g.line-f.line;if(Ue(a,b)){for(var t=0,u=[];t<h.length-1;++t)u.push(new jd(h[t],c?c[t]:null,d));e(m,m.text,p);q&&a.remove(f.line,q);u.length&&
a.insert(f.line,u)}else if(l==m)if(1==h.length)e(l,l.text.slice(0,f.ch)+n+l.text.slice(g.ch),p);else{u=[];for(t=1;t<h.length-1;++t)u.push(new jd(h[t],c?c[t]:null,d));u.push(new jd(n+l.text.slice(g.ch),p,d));e(l,l.text.slice(0,f.ch)+h[0],c?c[0]:null);a.insert(f.line+1,u)}else if(1==h.length)e(l,l.text.slice(0,f.ch)+h[0]+m.text.slice(g.ch),c?c[0]:null),a.remove(f.line+1,q);else{e(l,l.text.slice(0,f.ch)+h[0],c?c[0]:null);e(m,n+m.text.slice(g.ch),p);t=1;for(u=[];t<h.length-1;++t)u.push(new jd(h[t],c?
c[t]:null,d));1<q&&a.remove(f.line+1,q-1);a.insert(f.line+1,u)}yb(a,"change",a,b)}function Mc(a){this.lines=a;this.parent=null;for(var b=0,c=0;b<a.length;++b)a[b].parent=this,c+=a[b].height;this.height=c}function Nc(a){this.children=a;for(var b=0,c=0,d=0;d<a.length;++d){var e=a[d],b=b+e.chunkSize(),c=c+e.height;e.parent=this}this.size=b;this.height=c;this.parent=null}function ad(a,b,c){function d(a,e,f){if(a.linked)for(var g=0;g<a.linked.length;++g){var h=a.linked[g];if(h.doc!=e){var l=f&&h.sharedHist;
if(!c||l)b(h.doc,l),d(h.doc,a,l)}}}d(a,null,!0)}function Te(a,c){if(c.cm)throw Error("This document is already in use.");a.doc=c;c.cm=a;f(a);b(a);a.options.lineWrapping||t(a);a.options.mode=c.modeOption;C(a)}function la(a,b){b-=a.first;if(0>b||b>=a.size)throw Error("There is no line "+(b+a.first)+" in the document.");for(var c=a;!c.lines;)for(var d=0;;++d){var e=c.children[d],f=e.chunkSize();if(b<f){c=e;break}b-=f}return c.lines[b]}function oe(a,b,c){var d=[],e=b.line;a.iter(b.line,c.line+1,function(a){a=
a.text;e==c.line&&(a=a.slice(0,c.ch));e==b.line&&(a=a.slice(b.ch));d.push(a);++e});return d}function Jf(a,b,c){var d=[];a.iter(b,c,function(a){d.push(a.text)});return d}function lc(a,b){var c=b-a.height;if(c)for(var d=a;d;d=d.parent)d.height+=c}function Xa(a){if(null==a.parent)return null;var b=a.parent;a=Fb(b.lines,a);for(var c=b.parent;c;b=c,c=c.parent)for(var d=0;c.children[d]!=b;++d)a+=c.children[d].chunkSize();return a+b.first}function Oc(a,b){var c=a.first;a:do{for(var d=0;d<a.children.length;++d){var e=
a.children[d],f=e.height;if(b<f){a=e;continue a}b-=f;c+=e.chunkSize()}return c}while(!a.lines);for(d=0;d<a.lines.length;++d){e=a.lines[d].height;if(b<e)break;b-=e}return c+d}function kc(a){a=hc(a);for(var b=0,c=a.parent,d=0;d<c.lines.length;++d){var e=c.lines[d];if(e==a)break;else b+=e.height}for(a=c.parent;a;c=a,a=c.parent)for(d=0;d<a.children.length&&(e=a.children[d],e!=c);++d)b+=e.height;return b}function Bb(a){var b=a.order;null==b&&(b=a.order=ah(a.text));return b}function pe(a){this.done=[];
this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOrigin=this.lastSelOrigin=this.lastOp=this.lastSelOp=null;this.generation=this.maxGeneration=a||1}function Lc(a,b){var c={from:da(b.from),to:rb(b),text:oe(a,b.from,b.to)};Mf(a,c,b.from.line,b.to.line+1);ad(a,function(a){Mf(a,c,b.from.line,b.to.line+1)},!0);return c}function ne(a){for(;a.length;)if(Wa(a).ranges)a.pop();else break}function ng(a,b,c,d){var e=a.history;e.undone.length=0;var f=+new Date,g,h;if(h=e.lastOp==
d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.cm&&e.lastModTime>f-a.cm.options.historyEventDelay||"*"==b.origin.charAt(0)))e.lastOp==d?(ne(e.done),g=Wa(e.done)):e.done.length&&!Wa(e.done).ranges?g=Wa(e.done):1<e.done.length&&!e.done[e.done.length-2].ranges?(e.done.pop(),g=Wa(e.done)):g=void 0,h=g;if(h){var l=Wa(g.changes);0==Aa(b.from,b.to)&&0==Aa(b.from,l.to)?l.to=rb(b):g.changes.push(Lc(a,b))}else for((g=Wa(e.done))&&g.ranges||qe(a.sel,e.done),g={changes:[Lc(a,b)],generation:e.generation},
e.done.push(g);e.done.length>e.undoDepth;)e.done.shift(),e.done[0].ranges||e.done.shift();e.done.push(c);e.generation=++e.maxGeneration;e.lastModTime=e.lastSelTime=f;e.lastOp=e.lastSelOp=d;e.lastOrigin=e.lastSelOrigin=b.origin;l||Ha(a,"historyAdded")}function qe(a,b){var c=Wa(b);c&&c.ranges&&c.equals(a)||b.push(a)}function Mf(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[f]=c.markedSpans);++f})}function $g(a){if(!a)return null;
for(var b=0,c;b<a.length;++b)a[b].marker.explicitlyCleared?c||(c=a.slice(0,b)):c&&c.push(a[b]);return c?c.length?c:null:a}function Jd(a,b,c){for(var d=0,e=[];d<a.length;++d){var f=a[d];if(f.ranges)e.push(c?Ga.prototype.deepCopy.call(f):f);else{var f=f.changes,g=[];e.push({changes:g});for(var h=0;h<f.length;++h){var l=f[h],m;g.push({from:l.from,to:l.to,text:l.text});if(b)for(var n in l)(m=n.match(/^spans_(\d+)$/))&&-1<Fb(b,Number(m[1]))&&(Wa(g)[n]=l[n],delete l[n])}}}return e}function og(a,b,c,d){c<
a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function pg(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e],g=!0;if(f.ranges){f.copied||(f=a[e]=f.deepCopy(),f.copied=!0);for(var h=0;h<f.ranges.length;h++)og(f.ranges[h].anchor,b,c,d),og(f.ranges[h].head,b,c,d)}else{for(h=0;h<f.changes.length;++h){var l=f.changes[h];if(c<l.from.line)l.from=V(l.from.line+d,l.from.ch),l.to=V(l.to.line+d,l.to.ch);else if(b<=l.to.line){g=!1;break}}g||(a.splice(0,e+1),e=0)}}}function ig(a,b){var c=b.from.line,d=b.to.line,e=
b.text.length-(d-c)-1;pg(a.done,c,d,e);pg(a.undone,c,d,e)}function Of(a){return null!=a.defaultPrevented?a.defaultPrevented:0==a.returnValue}function qg(a){var b=a.which;null==b&&(a.button&1?b=1:a.button&2?b=3:a.button&4&&(b=2));ec&&a.ctrlKey&&1==b&&(b=3);return b}function yb(a,b){function c(a){return function(){a.apply(null,e)}}var d=a._handlers&&a._handlers[b];if(d){var e=Array.prototype.slice.call(arguments,2),f;Ad?f=Ad.delayedCallbacks:yf?f=yf:(f=yf=[],setTimeout(gg,0));for(var g=0;g<d.length;++g)f.push(c(d[g]))}}
function gg(){var a=yf;yf=null;for(var b=0;b<a.length;++b)a[b]()}function ic(a,b,c){Ha(a,c||b.type,a,b);return Of(b)||b.codemirrorIgnore}function Ff(a){var b=a._handlers&&a._handlers.cursorActivity;if(b){a=a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]);for(var c=0;c<b.length;++c)-1==Fb(a,b[c])&&a.push(b[c])}}function jc(a,b){var c=a._handlers&&a._handlers[b];return c&&0<c.length}function Hd(a){a.prototype.on=function(a,b){oa(this,a,b)};a.prototype.off=function(a,b){Ob(this,a,
b)}}function Gf(){this.id=null}function Hf(a,b,c){for(var d=0,e=0;;){var f=a.indexOf("\t",d);-1==f&&(f=a.length);var g=f-d;if(f==a.length||e+g>=b)return d+Math.min(g,b-e);e+=f-d;e+=c-e%c;d=f+1;if(e>=b)return d}}function hg(a){for(;Me.length<=a;)Me.push(Wa(Me)+" ");return Me[a]}function Wa(a){return a[a.length-1]}function Fb(a,b){for(var c=0;c<a.length;++c)if(a[c]==b)return c;return-1}function le(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d],d);return c}function Lf(a,b){var c;Object.create?c=Object.create(a):
(c=function(){},c.prototype=a,c=new c);b&&Pc(b,c);return c}function Pc(a,b,c){b||(b={});for(var d in a)!a.hasOwnProperty(d)||!1===c&&b.hasOwnProperty(d)||(b[d]=a[d]);return b}function uc(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function Ve(a,b){return b?-1<b.source.indexOf("\\w")&&we(a)?!0:b.test(a):we(a)}function kg(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function me(a){return 768<=a.charCodeAt(0)&&rg.test(a)}function ha(a,
b,c,d){a=document.createElement(a);c&&(a.className=c);d&&(a.style.cssText=d);if("string"==typeof b)a.appendChild(document.createTextNode(b));else if(b)for(c=0;c<b.length;++c)a.appendChild(b[c]);return a}function nd(a){for(var b=a.childNodes.length;0<b;--b)a.removeChild(a.firstChild);return a}function pc(a,b){return nd(a).appendChild(b)}function Dc(){return document.activeElement}function Ae(a){return new RegExp("\\b"+a+"\\b\\s*")}function gf(a,b){var c=Ae(b);c.test(a.className)&&(a.className=a.className.replace(c,
""))}function hf(a,b){Ae(b).test(a.className)||(a.className+=" "+b)}function Tf(a,b){for(var c=a.split(" "),d=0;d<c.length;d++)c[d]&&!Ae(c[d]).test(b)&&(b+=" "+c[d]);return b}function zg(a){if(document.body.getElementsByClassName)for(var b=document.body.getElementsByClassName("CodeMirror"),c=0;c<b.length;c++){var d=b[c].CodeMirror;d&&a(d)}}function Ag(){var a;oa(window,"resize",function(){null==a&&(a=setTimeout(function(){wd=a=null;zg(gc)},100))});oa(window,"blur",function(){zg(Yb)})}function ch(a){if(null!=
wd)return wd;var b=ha("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");pc(a,b);b.offsetWidth&&(wd=b.offsetHeight-b.clientHeight);return wd||0}function Bg(a){if(null==cg){var b=ha("span","\u200b");pc(a,ha("span",[b,document.createTextNode("x")]));0!=a.firstChild.offsetHeight&&(cg=1>=b.offsetWidth&&2<b.offsetHeight&&!(Fa&&8>Ta))}return cg?ha("span","\u200b"):ha("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px")}function Uf(a,b,c,d){if(!a)return d(b,c,"ltr");
for(var e=!1,f=0;f<a.length;++f){var g=a[f];if(g.from<c&&g.to>b||b==c&&g.to==b)d(Math.max(g.from,b),Math.min(g.to,c),1==g.level?"rtl":"ltr"),e=!0}e||d(b,c,"ltr")}function Be(a){return a.level%2?a.to:a.from}function Wd(a){return a.level%2?a.from:a.to}function jf(a){return(a=Bb(a))?Be(a[0]):0}function kf(a){var b=Bb(a);return b?Wd(Wa(b)):a.text.length}function Cg(a,b){var c=la(a.doc,b),d=hc(c);d!=c&&(b=Xa(d));d=(c=Bb(d))?c[0].level%2?kf(d):jf(d):0;return V(b,d)}function Ec(a,b){var c=Cg(a,b.line),d=
la(a.doc,c.line),e=Bb(d);return e&&0!=e[0].level?c:(d=Math.max(0,d.text.search(/\S/)),V(c.line,b.line==c.line&&b.ch<=d&&b.ch?0:d))}function Vf(a,b){Uc=null;for(var c=0,d;c<a.length;++c){var e=a[c];if(e.from<b&&e.to>b)return c;if(e.from==b||e.to==b)if(null==d)d=c;else{var f;f=e.level;var g=a[d].level,h=a[0].level;f=f==h?!0:g==h?!1:f<g;if(f)return e.from!=e.to&&(Uc=d),c;e.from!=e.to&&(Uc=c);break}}return d}function Ce(a,b,c,d){if(!d)return b+c;do b+=c;while(0<b&&me(a.text.charAt(b)));return b}function lf(a,
b,c,d){var e=Bb(a);if(!e)return Wf(a,b,c,d);var f=Vf(e,b),g=e[f];for(b=Ce(a,b,g.level%2?-c:c,d);;){if(b>g.from&&b<g.to)return b;if(b==g.from||b==g.to){if(Vf(e,b)==f)return b;g=e[f+c];return 0<c==g.level%2?g.to:g.from}g=e[f+=c];if(!g)return null;b=0<c==g.level%2?Ce(a,g.to,-1,d):Ce(a,g.from,1,d)}}function Wf(a,b,c,d){b+=c;if(d)for(;0<b&&me(a.text.charAt(b));)b+=c;return 0>b||b>a.text.length?null:b}var Xd=/gecko\/\d/i.test(navigator.userAgent),Dg=/MSIE \d/.test(navigator.userAgent),Eg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),
Fa=Dg||Eg,Ta=Fa&&(Dg?document.documentMode||6:Eg[1]),Gb=/WebKit\//.test(navigator.userAgent),dh=Gb&&/Qt\/\d+\.\d+/.test(navigator.userAgent),Fg=/Chrome\//.test(navigator.userAgent),dc=/Opera\//.test(navigator.userAgent),mf=/Apple Computer/.test(navigator.vendor),nf=/KHTML\//.test(navigator.userAgent),Yd=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),of=/PhantomJS/.test(navigator.userAgent),De=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Zd=De||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),
ec=De||/Mac/.test(navigator.platform),eh=/win/i.test(navigator.platform),gd=dc&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);gd&&(gd=Number(gd[1]));gd&&15<=gd&&(dc=!1,Gb=!0);var qf=ec&&(dh||dc&&(null==gd||12.11>gd)),Fc=Xd||Fa&&9<=Ta,pf=!1,Gc=!1,V=a.Pos=function(a,b){if(!(this instanceof V))return new V(a,b);this.line=a;this.ch=b},Aa=a.cmpPos=function(a,b){return a.line-b.line||a.ch-b.ch};Ga.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(a){if(a==this)return!0;
if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length)return!1;for(var b=0;b<this.ranges.length;b++){var c=this.ranges[b],d=a.ranges[b];if(0!=Aa(c.anchor,d.anchor)||0!=Aa(c.head,d.head))return!1}return!0},deepCopy:function(){for(var a=[],b=0;b<this.ranges.length;b++)a[b]=new ta(da(this.ranges[b].anchor),da(this.ranges[b].head));return new Ga(a,this.primIndex)},somethingSelected:function(){for(var a=0;a<this.ranges.length;a++)if(!this.ranges[a].empty())return!0;return!1},contains:function(a,
b){b||(b=a);for(var c=0;c<this.ranges.length;c++){var d=this.ranges[c];if(0<=Aa(b,d.from())&&0>=Aa(a,d.to()))return c}return-1}};ta.prototype={from:function(){return ib(this.anchor,this.head)},to:function(){return nb(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var rf={left:0,right:0,top:0,bottom:0},Hc,Ad=null,Gg=0,hd=null,Ee,Fe,Hg=0,sf=0,fc=null;Fa?fc=-.53:Xd?fc=15:Fg?fc=-.7:mf&&(fc=-1/3);var Xf,tf=null,rb=a.changeEnd=function(a){return a.text?
V(a.from.line+a.text.length-1,Wa(a.text).length+(1==a.text.length?a.from.ch:0)):a.to};a.prototype={constructor:a,focus:function(){window.focus();mb(this);Na(this)},setOption:function(a,b){var c=this.options,d=c[a];if(c[a]!=b||"mode"==a)c[a]=b,id.hasOwnProperty(a)&&ma(this,id[a])(this,b,d)},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](a)},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==
a||"string"!=typeof b[c]&&b[c].name==a)return b.splice(c,1),!0},addOverlay:ya(function(b,c){var d=b.token?b:a.getMode(this.options,b);if(d.startState)throw Error("Overlays may not be stateful.");this.state.overlays.push({mode:d,modeSpec:b,opaque:c&&c.opaque});this.state.modeGen++;C(this)}),removeOverlay:ya(function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var d=b[c].modeSpec;if(d==a||"string"==typeof a&&d.name==a){b.splice(c,1);this.state.modeGen++;C(this);break}}}),indentLine:ya(function(a,
b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract");ob(this.doc,a)&&Vb(this,a,b,c)}),indentSelection:ya(function(a){for(var b=this.doc.sel.ranges,c=-1,d=0;d<b.length;d++){var e=b[d];if(e.empty())e.head.line>c&&(Vb(this,e.head.line,a,!0),c=e.head.line,d==this.doc.sel.primIndex&&ac(this));else{for(var f=e.from(),e=e.to(),g=Math.max(c,f.line),c=Math.min(this.lastLine(),e.line-(e.ch?0:1))+1,e=g;e<c;++e)Vb(this,e,a);e=this.doc.sel.ranges;
0==f.ch&&b.length==e.length&&0<e[d].from().ch&&Jb(this.doc,d,new ta(f,e[d].to()),kd)}}}),getTokenAt:function(a,b){var c=this.doc;a=ca(c,a);for(var d=fa(this,a.line,b),e=this.doc.mode,c=la(c,a.line),c=new Je(c.text,this.options.tabSize);c.pos<a.ch&&!c.eol();){c.start=c.pos;var f=Se(e,c,d)}return{start:c.start,end:c.pos,string:c.current(),type:f||null,state:d}},getTokenTypeAt:function(a){a=ca(this.doc,a);var b=od(this,la(this.doc,a.line)),c=0,d=(b.length-1)/2;a=a.ch;if(0==a)b=b[2];else for(;;){var e=
c+d>>1;if((e?b[2*e-1]:0)>=a)d=e;else if(b[2*e+1]<a)c=e+1;else{b=b[2*e+2];break}}c=b?b.indexOf("cm-overlay "):-1;return 0>c?b:0==c?null:b.slice(0,c-1)},getModeAt:function(b){var c=this.doc.mode;return c.innerMode?a.innerMode(c,this.getTokenAt(b).state).mode:c},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(a,b){var c=[];if(!Xc.hasOwnProperty(b))return Xc;var d=Xc[b],e=this.getModeAt(a);if("string"==typeof e[b])d[e[b]]&&c.push(d[e[b]]);else if(e[b])for(var f=0;f<e[b].length;f++){var g=
d[e[b][f]];g&&c.push(g)}else e.helperType&&d[e.helperType]?c.push(d[e.helperType]):d[e.name]&&c.push(d[e.name]);for(f=0;f<d._global.length;f++)g=d._global[f],g.pred(e,this)&&-1==Fb(c,g.val)&&c.push(g.val);return c},getStateAfter:function(a,b){var c=this.doc;a=Math.max(c.first,Math.min(null==a?c.first+c.size-1:a,c.first+c.size-1));return fa(this,a+1,b)},cursorCoords:function(a,b){var c;c=this.doc.sel.primary();c=null==a?c.head:"object"==typeof a?ca(this.doc,a):a?c.from():c.to();return T(this,c,b||
"page")},charCoords:function(a,b){return Qa(this,ca(this.doc,a),b||"page")},coordsChar:function(a,b){a=Z(this,a,b||"page");return xa(this,a.left,a.top)},lineAtHeight:function(a,b){a=Z(this,{top:a,left:0},b||"page").top;return Oc(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b){var c=!1,d=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>d&&(a=d,c=!0);d=la(this.doc,a);return cb(this,d,{top:0,left:0},b||"page").top+(c?this.doc.height-kc(d):0)},defaultTextHeight:function(){return Cb(this.display)},
defaultCharWidth:function(){return Ub(this.display)},setGutterMarker:ya(function(a,b,c){return Sc(this.doc,a,"gutter",function(a){var d=a.gutterMarkers||(a.gutterMarkers={});d[b]=c;!c&&kg(d)&&(a.gutterMarkers=null);return!0})}),clearGutter:ya(function(a){var b=this,c=b.doc,d=c.first;c.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&(c.gutterMarkers[a]=null,K(b,d,"gutter"),kg(c.gutterMarkers)&&(c.gutterMarkers=null));++d})}),addLineWidget:ya(function(a,b,c){return jg(this,a,b,c)}),removeLineWidget:function(a){a.clear()},
lineInfo:function(a){if("number"==typeof a){if(!ob(this.doc,a))return null;var b=a;a=la(this.doc,a);if(!a)return null}else if(b=Xa(a),null==b)return null;return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,b,c,d,e){var f=this.display;a=T(this,ca(this.doc,a));var g=a.bottom,h=a.left;b.style.position="absolute";
f.sizer.appendChild(b);if("over"==d)g=a.top;else if("above"==d||"near"==d){var l=Math.max(f.wrapper.clientHeight,this.doc.height),m=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>l)&&a.top>b.offsetHeight?g=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=l&&(g=a.bottom);h+b.offsetWidth>m&&(h=m-b.offsetWidth)}b.style.top=g+"px";b.style.left=b.style.right="";"right"==e?(h=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?h=0:"middle"==e&&(h=(f.sizer.clientWidth-
b.offsetWidth)/2),b.style.left=h+"px");c&&(a=sd(this,h,g,h+b.offsetWidth,g+b.offsetHeight),null!=a.scrollTop&&tc(this,a.scrollTop),null!=a.scrollLeft&&Qc(this,a.scrollLeft))},triggerOnKeyDown:ya(fe),triggerOnKeyPress:ya(Ze),triggerOnKeyUp:te,execCommand:function(a){if(vf.hasOwnProperty(a))return vf[a](this)},findPosH:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var f=0;for(a=ca(this.doc,a);f<b&&(a=Kc(this.doc,a,e,c,d),!a.hitSide);++f);return a},moveH:ya(function(a,b){var c=this;c.extendSelectionsBy(function(d){return c.display.shift||
c.doc.extend||d.empty()?Kc(c.doc,d.head,a,b,c.options.rtlMoveVisually):0>a?d.from():d.to()},ce)}),deleteH:ya(function(a,b){var c=this.doc;this.doc.sel.somethingSelected()?c.replaceSelection("",null,"+delete"):bc(this,function(d){var e=Kc(c,d.head,a,b,!1);return 0>a?{from:e,to:d.head}:{from:d.head,to:e}})}),findPosV:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var f=0;for(a=ca(this.doc,a);f<b&&(a=T(this,a,"div"),null==d?d=a.left:a.left=d,a=Tc(this,a,e,c),!a.hitSide);++f);return a},moveV:ya(function(a,
b){var c=this,d=this.doc,e=[],f=!c.display.shift&&!d.extend&&d.sel.somethingSelected();d.extendSelectionsBy(function(g){if(f)return 0>a?g.from():g.to();var h=T(c,g.head,"div");null!=g.goalColumn&&(h.left=g.goalColumn);e.push(h.left);var l=Tc(c,h,a,b);"page"==b&&g==d.sel.primary()&&td(c,null,Qa(c,l,"div").top-h.top);return l},ce);if(e.length)for(var g=0;g<d.sel.ranges.length;g++)d.sel.ranges[g].goalColumn=e[g]}),toggleOverwrite:function(a){if(null==a||a!=this.state.overwrite)(this.state.overwrite=
!this.state.overwrite)?hf(this.display.cursorDiv,"CodeMirror-overwrite"):gf(this.display.cursorDiv,"CodeMirror-overwrite"),Ha(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return Dc()==this.display.input},scrollTo:ya(function(a,b){null==a&&null==b||Zb(this);null!=a&&(this.curOp.scrollLeft=a);null!=b&&(this.curOp.scrollTop=b)}),getScrollInfo:function(){var a=this.display.scroller,b=Jc;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-b,width:a.scrollWidth-b,clientHeight:a.clientHeight-
b,clientWidth:a.clientWidth-b}},scrollIntoView:ya(function(a,b){null==a?(a={from:this.doc.sel.primary().head,to:null},null==b&&(b=this.options.cursorScrollMargin)):"number"==typeof a?a={from:V(a,0),to:null}:null==a.from&&(a={from:a,to:null});a.to||(a.to=a.from);a.margin=b||0;if(null!=a.from.line)Zb(this),this.curOp.scrollToPos=a;else{var c=sd(this,Math.min(a.from.left,a.to.left),Math.min(a.from.top,a.to.top)-a.margin,Math.max(a.from.right,a.to.right),Math.max(a.from.bottom,a.to.bottom)+a.margin);
this.scrollTo(c.scrollLeft,c.scrollTop)}}),setSize:ya(function(a,b){function c(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":a}var d=this;null!=a&&(d.display.wrapper.style.width=c(a));null!=b&&(d.display.wrapper.style.height=c(b));d.options.lineWrapping&&Ua(this);var e=d.display.viewFrom;d.doc.iter(e,d.display.viewTo,function(a){if(a.widgets)for(var b=0;b<a.widgets.length;b++)if(a.widgets[b].noHScroll){K(d,e,"widget");break}++e});d.curOp.forceUpdate=!0;Ha(d,"refresh",this)}),operation:function(a){return Sa(this,
a)},refresh:ya(function(){var a=this.display.cachedTextHeight;C(this);this.curOp.forceUpdate=!0;$a(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);n(this);(null==a||.5<Math.abs(a-Cb(this.display)))&&f(this);Ha(this,"refresh",this)}),swapDoc:ya(function(a){var b=this.doc;b.cm=null;Te(this,a);$a(this);Ea(this);this.scrollTo(a.scrollLeft,a.scrollTop);yb(this,"swapDoc",this,b);return b}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},
getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};Hd(a);var Yf=a.defaults={},id=a.optionHandlers={},Ge=a.Init={toString:function(){return"CodeMirror.Init"}};ua("value","",function(a,b){a.setValue(b)},!0);ua("mode",null,function(a,c){a.doc.modeOption=c;b(a)},!0);ua("indentUnit",2,b,!0);ua("indentWithTabs",!1);ua("smartIndent",!0);ua("tabSize",4,function(a){d(a);$a(a);C(a)},!0);ua("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,
function(a,b){a.options.specialChars=new RegExp(b.source+(b.test("\t")?"":"|\t"),"g");a.refresh()},!0);ua("specialCharPlaceholder",function(a){var b=ha("span","\u2022","cm-invalidchar");b.title="\\u"+a.charCodeAt(0).toString(16);return b},function(a){a.refresh()},!0);ua("electricChars",!0);ua("rtlMoveVisually",!eh);ua("wholeLineUpdateBefore",!0);ua("theme","default",function(a){h(a);l(a)},!0);ua("keyMap","default",g);ua("extraKeys",null);ua("lineWrapping",!1,function(a){a.options.lineWrapping?(hf(a.display.wrapper,
"CodeMirror-wrap"),a.display.sizer.style.minWidth=""):(gf(a.display.wrapper,"CodeMirror-wrap"),t(a));f(a);C(a);$a(a);setTimeout(function(){E(a)},100)},!0);ua("gutters",[],function(a){x(a.options);l(a)},!0);ua("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?D(a.display)+"px":"0";a.refresh()},!0);ua("coverGutterNextToScrollbar",!1,E,!0);ua("lineNumbers",!1,function(a){x(a.options);l(a)},!0);ua("firstLineNumber",1,l,!0);ua("lineNumberFormatter",function(a){return a},l,!0);ua("showCursorWhenSelecting",
!1,Ya,!0);ua("resetSelectionOnContextMenu",!0);ua("readOnly",!1,function(a,b){"nocursor"==b?(Yb(a),a.display.input.blur(),a.display.disabled=!0):(a.display.disabled=!1,b||Ea(a))});ua("disableInput",!1,function(a,b){b||Ea(a)},!0);ua("dragDrop",!0);ua("cursorBlinkRate",530);ua("cursorScrollMargin",0);ua("cursorHeight",1,Ya,!0);ua("singleCursorHeightPerLine",!0,Ya,!0);ua("workTime",100);ua("workDelay",100);ua("flattenSpans",!0,d,!0);ua("addModeClass",!1,d,!0);ua("pollInterval",100);ua("undoDepth",200,
function(a,b){a.doc.history.undoDepth=b});ua("historyEventDelay",1250);ua("viewportMargin",10,function(a){a.refresh()},!0);ua("maxHighlightLength",1E4,d,!0);ua("moveInputWithCursor",!0,function(a,b){b||(a.display.inputDiv.style.top=a.display.inputDiv.style.left=0)});ua("tabindex",null,function(a,b){a.display.input.tabIndex=b||""});ua("autofocus",null);var uf=a.modes={},$d=a.mimeModes={};a.defineMode=function(b,c){a.defaults.mode||"null"==b||(a.defaults.mode=b);if(2<arguments.length){c.dependencies=
[];for(var d=2;d<arguments.length;++d)c.dependencies.push(arguments[d])}uf[b]=c};a.defineMIME=function(a,b){$d[a]=b};a.resolveMode=function(b){if("string"==typeof b&&$d.hasOwnProperty(b))b=$d[b];else if(b&&"string"==typeof b.name&&$d.hasOwnProperty(b.name)){var c=$d[b.name];"string"==typeof c&&(c={name:c});b=Lf(c,b);b.name=c.name}else if("string"==typeof b&&/^[\w\-]+\/[\w\-]+\+xml$/.test(b))return a.resolveMode("application/xml");return"string"==typeof b?{name:b}:b||{name:"null"}};a.getMode=function(b,
c){c=a.resolveMode(c);var d=uf[c.name];if(!d)return a.getMode(b,"text/plain");d=d(b,c);if(Pb.hasOwnProperty(c.name)){var e=Pb[c.name],f;for(f in e)e.hasOwnProperty(f)&&(d.hasOwnProperty(f)&&(d["_"+f]=d[f]),d[f]=e[f])}d.name=c.name;c.helperType&&(d.helperType=c.helperType);if(c.modeProps)for(f in c.modeProps)d[f]=c.modeProps[f];return d};a.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});a.defineMIME("text/plain","null");var Pb=a.modeExtensions={};a.extendMode=function(a,b){var c=
Pb.hasOwnProperty(a)?Pb[a]:Pb[a]={};Pc(b,c)};a.defineExtension=function(b,c){a.prototype[b]=c};a.defineDocExtension=function(a,b){sb.prototype[a]=b};a.defineOption=ua;var He=[];a.defineInitHook=function(a){He.push(a)};var Xc=a.helpers={};a.registerHelper=function(b,c,d){Xc.hasOwnProperty(b)||(Xc[b]=a[b]={_global:[]});Xc[b][c]=d};a.registerGlobalHelper=function(b,c,d,e){a.registerHelper(b,c,e);Xc[b]._global.push({pred:d,val:e})};var be=a.copyState=function(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);
var c={},d;for(d in b){var e=b[d];e instanceof Array&&(e=e.concat([]));c[d]=e}return c},Ig=a.startState=function(a,b,c){return a.startState?a.startState(b,c):!0};a.innerMode=function(a,b){for(;a.innerMode;){var c=a.innerMode(b);if(!c||c.mode==a)break;b=c.state;a=c.mode}return c||{mode:a,state:b}};var vf=a.commands={selectAll:function(a){a.setSelection(V(a.firstLine(),0),V(a.lastLine()),kd)},singleSelection:function(a){a.setSelection(a.getCursor("anchor"),a.getCursor("head"),kd)},killLine:function(a){bc(a,
function(b){if(b.empty()){var c=la(a.doc,b.head.line).text.length;return b.head.ch==c&&b.head.line<a.lastLine()?{from:b.head,to:V(b.head.line+1,0)}:{from:b.head,to:V(b.head.line,c)}}return{from:b.from(),to:b.to()}})},deleteLine:function(a){bc(a,function(b){return{from:V(b.from().line,0),to:ca(a.doc,V(b.to().line+1,0))}})},delLineLeft:function(a){bc(a,function(a){return{from:V(a.from().line,0),to:a.from()}})},delWrappedLineLeft:function(a){bc(a,function(b){var c=a.charCoords(b.head,"div").top+5;return{from:a.coordsChar({left:0,
top:c},"div"),to:b.from()}})},delWrappedLineRight:function(a){bc(a,function(b){var c=a.charCoords(b.head,"div").top+5,c=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div");return{from:b.from(),to:c}})},undo:function(a){a.undo()},redo:function(a){a.redo()},undoSelection:function(a){a.undoSelection()},redoSelection:function(a){a.redoSelection()},goDocStart:function(a){a.extendSelection(V(a.firstLine(),0))},goDocEnd:function(a){a.extendSelection(V(a.lastLine()))},goLineStart:function(a){a.extendSelectionsBy(function(b){return Cg(a,
b.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(a){a.extendSelectionsBy(function(b){return Ec(a,b.head)},{origin:"+move",bias:1})},goLineEnd:function(a){a.extendSelectionsBy(function(b){b=b.head.line;for(var c,d=la(a.doc,b);c=$b(d,!1);)d=c.find(1,!0).line,b=null;c=(c=Bb(d))?c[0].level%2?jf(d):kf(d):d.text.length;return V(null==b?Xa(d):b,c)},{origin:"+move",bias:-1})},goLineRight:function(a){a.extendSelectionsBy(function(b){b=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+
100,top:b},"div")},ce)},goLineLeft:function(a){a.extendSelectionsBy(function(b){b=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:0,top:b},"div")},ce)},goLineLeftSmart:function(a){a.extendSelectionsBy(function(b){var c=a.charCoords(b.head,"div").top+5,c=a.coordsChar({left:0,top:c},"div");return c.ch<a.getLine(c.line).search(/\S/)?Ec(a,b.head):c},ce)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,
"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},
delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},delGroupAfter:function(a){a.deleteH(1,"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t")},insertSoftTab:function(a){for(var b=[],c=a.listSelections(),d=a.options.tabSize,e=0;e<c.length;e++){var f=c[e].from(),f=rc(a.getLine(f.line),f.ch,d);b.push(Array(d-
f%d+1).join(" "))}a.replaceSelections(b)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){Sa(a,function(){for(var b=a.listSelections(),c=[],d=0;d<b.length;d++){var e=b[d].head,f=la(a.doc,e.line).text;if(f)if(e.ch==f.length&&(e=new V(e.line,e.ch-1)),0<e.ch)e=new V(e.line,e.ch+1),a.replaceRange(f.charAt(e.ch-1)+f.charAt(e.ch-2),V(e.line,e.ch-2),e,"+transpose");else if(e.line>a.doc.first){var g=la(a.doc,e.line-1).text;g&&a.replaceRange(f.charAt(0)+
"\n"+g.charAt(g.length-1),V(e.line-1,g.length-1),V(e.line,1),"+transpose")}c.push(new ta(e,e))}a.setSelections(c)})},newlineAndIndent:function(a){Sa(a,function(){for(var b=a.listSelections().length,c=0;c<b;c++){var d=a.listSelections()[c];a.replaceRange("\n",d.anchor,d.head,"+input");a.indentLine(d.from().line+1,null,!0);ac(a)}})},toggleOverwrite:function(a){a.toggleOverwrite()}},Ic=a.keyMap={};Ic.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",
PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};Ic.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart",
"Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};Ic.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart",
"Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection",
"Shift-Cmd-U":"redoSelection",fallthrough:["basic","emacsy"]};Ic.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};Ic["default"]=ec?Ic.macDefault:Ic.pcDefault;var wf=a.lookupKey=
function(a,b,c){function d(b){b=Qd(b);var e=b[a];if(!1===e)return"stop";if(null!=e&&c(e))return!0;if(b.nofallthrough)return"stop";b=b.fallthrough;if(null==b)return!1;if("[object Array]"!=Object.prototype.toString.call(b))return d(b);for(e=0;e<b.length;++e){var f=d(b[e]);if(f)return f}return!1}for(var e=0;e<b.length;++e){var f=d(b[e]);if(f)return"stop"!=f}},gh=a.isModifierKey=function(a){a=Ac[a.keyCode];return"Ctrl"==a||"Alt"==a||"Shift"==a||"Mod"==a},hh=a.keyName=function(a,b){if(dc&&34==a.keyCode&&
a["char"])return!1;var c=Ac[a.keyCode];if(null==c||a.altGraphKey)return!1;a.altKey&&(c="Alt-"+c);if(qf?a.metaKey:a.ctrlKey)c="Ctrl-"+c;if(qf?a.ctrlKey:a.metaKey)c="Cmd-"+c;!b&&a.shiftKey&&(c="Shift-"+c);return c};a.fromTextArea=function(b,c){function d(){b.value=m.getValue()}c||(c={});c.value=b.value;!c.tabindex&&b.tabindex&&(c.tabindex=b.tabindex);!c.placeholder&&b.placeholder&&(c.placeholder=b.placeholder);if(null==c.autofocus){var e=Dc();c.autofocus=e==b||null!=b.getAttribute("autofocus")&&e==
document.body}if(b.form&&(oa(b.form,"submit",d),!c.leaveSubmitMethodAlone)){var f=b.form,g=f.submit;try{var h=f.submit=function(){d();f.submit=g;f.submit();f.submit=h}}catch(l){}}b.style.display="none";var m=a(function(a){b.parentNode.insertBefore(a,b.nextSibling)},c);m.save=d;m.getTextArea=function(){return b};m.toTextArea=function(){d();b.parentNode.removeChild(m.getWrapperElement());b.style.display="";b.form&&(Ob(b.form,"submit",d),"function"==typeof b.form.submit&&(b.form.submit=g))};return m};
var Je=a.StringStream=function(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8;this.lineStart=this.lastColumnPos=this.lastColumnValue=0};Je.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=this.string.charAt(this.pos);if("string"==typeof a?b==a:b&&(a.test?a.test(b):
a(b)))return++this.pos,b},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){a=this.string.indexOf(a,this.pos);if(-1<a)return this.pos=a,!0},backUp:function(a){this.pos-=a},column:function(){this.lastColumnPos<this.start&&(this.lastColumnValue=rc(this.string,this.start,this.tabSize,this.lastColumnPos,
this.lastColumnValue),this.lastColumnPos=this.start);return this.lastColumnValue-(this.lineStart?rc(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return rc(this.string,null,this.tabSize)-(this.lineStart?rc(this.string,this.lineStart,this.tabSize):0)},match:function(a,b,c){if("string"==typeof a){var d=function(a){return c?a.toLowerCase():a},e=this.string.substr(this.pos,a.length);if(d(e)==d(a))return!1!==b&&(this.pos+=a.length),!0}else{if((a=this.string.slice(this.pos).match(a))&&
0<a.index)return null;a&&!1!==b&&(this.pos+=a[0].length);return a}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=a}}};var qc=a.TextMarker=function(a,b){this.lines=[];this.type=b;this.doc=a};Hd(qc);qc.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;b&&S(a);if(jc(this,"clear")){var c=this.find();c&&yb(this,"clear",c.from,c.to)}for(var d=c=null,e=0;e<this.lines.length;++e){var f=
this.lines[e],g=ld(f.markedSpans,this);a&&!this.collapsed?K(a,Xa(f),"text"):a&&(null!=g.to&&(d=Xa(f)),null!=g.from&&(c=Xa(f)));for(var h=f,l=f.markedSpans,m=g,n=void 0,p=0;p<l.length;++p)l[p]!=m&&(n||(n=[])).push(l[p]);h.markedSpans=n;null==g.from&&this.collapsed&&!$c(this.doc,f)&&a&&lc(f,Cb(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(e=0;e<this.lines.length;++e)f=hc(this.lines[e]),g=q(f),g>a.display.maxLineLength&&(a.display.maxLine=f,a.display.maxLineLength=g,a.display.maxLineChanged=
!0);null!=c&&a&&this.collapsed&&C(a,c,d+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&Kb(a.doc));a&&yb(a,"markerCleared",a,this);b&&R(a);this.parent&&this.parent.clear()}};qc.prototype.find=function(a,b){null==a&&"bookmark"==this.type&&(a=1);for(var c,d,e=0;e<this.lines.length;++e){var f=this.lines[e],g=ld(f.markedSpans,this);if(null!=g.from&&(c=V(b?f:Xa(f),g.from),-1==a))return c;if(null!=g.to&&(d=V(b?f:Xa(f),g.to),1==a))return d}return c&&
{from:c,to:d}};qc.prototype.changed=function(){var a=this.find(-1,!0),b=this,c=this.doc.cm;a&&c&&Sa(c,function(){var d=a.line,e=Xa(a.line);if(e=xb(c,e))Sb(e),c.curOp.selectionChanged=c.curOp.forceUpdate=!0;c.curOp.updateMaxLine=!0;$c(b.doc,d)||null==b.height||(e=b.height,b.height=null,(e=ie(b)-e)&&lc(d,d.height+e))})};qc.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=Fb(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=
[])).push(this)}this.lines.push(a)};qc.prototype.detachLine=function(a){this.lines.splice(Fb(this.lines,a),1);!this.lines.length&&this.doc.cm&&(a=this.doc.cm.curOp,(a.maybeHiddenMarkers||(a.maybeHiddenMarkers=[])).push(this))};var Zf=0,xf=a.SharedTextMarker=function(a,b){this.markers=a;this.primary=b;for(var c=0;c<a.length;++c)a[c].parent=this};Hd(xf);xf.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();yb(this,
"clear")}};xf.prototype.find=function(a,b){return this.primary.find(a,b)};var Bd=a.LineWidget=function(a,b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.cm=a;this.node=b};Hd(Bd);Bd.prototype.clear=function(){var a=this.cm,b=this.line.widgets,c=this.line,d=Xa(c);if(null!=d&&b){for(var e=0;e<b.length;++e)b[e]==this&&b.splice(e--,1);b.length||(c.widgets=null);var f=ie(this);Sa(a,function(){var b=-f;kc(c)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&td(a,null,b);K(a,d,"widget");lc(c,
Math.max(0,c.height-f))})}};Bd.prototype.changed=function(){var a=this.height,b=this.cm,c=this.line;this.height=null;var d=ie(this)-a;d&&Sa(b,function(){b.curOp.forceUpdate=!0;kc(c)<(b.curOp&&b.curOp.scrollTop||b.doc.scrollTop)&&td(b,null,d);lc(c,c.height+d)})};var jd=a.Line=function(a,b,c){this.text=a;Ef(this,b);this.height=c?c(this):1};Hd(jd);jd.prototype.lineNo=function(){return Xa(this)};var Jg={},$f={};Mc.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=
a,d=a+b;c<d;++c){var e=this.lines[c];this.height-=e.height;var f=e;f.parent=null;ge(f);yb(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(a=0;a<b.length;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};Nc.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){this.size-=b;for(var c=
0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(a<e){var f=Math.min(b,e-a),g=d.height;d.removeInner(a,f);this.height-=g-d.height;e==f&&(this.children.splice(c--,1),d.parent=null);if(0==(b-=f))break;a=0}else a-=e}25>this.size-b&&(1<this.children.length||!(this.children[0]instanceof Mc))&&(c=[],this.collapse(c),this.children=[new Mc(c)],this.children[0].parent=this)},collapse:function(a){for(var b=0;b<this.children.length;++b)this.children[b].collapse(a)},insertInner:function(a,
b,c){this.size+=b.length;this.height+=c;for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<=f){e.insertInner(a,b,c);if(e.lines&&50<e.lines.length){for(;50<e.lines.length;)a=e.lines.splice(e.lines.length-25,25),a=new Mc(a),e.height-=a.height,this.children.splice(d+1,0,a),a.parent=this;this.maybeSpill()}break}a-=f}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=a.children.splice(a.children.length-5,5),b=new Nc(b);if(a.parent){a.size-=b.size;
a.height-=b.height;var c=Fb(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else c=new Nc(a.children),c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<a.children.length);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<f){f=Math.min(b,f-a);if(e.iterN(a,f,c))return!0;if(0==(b-=f))break;a=0}else a-=f}}};var ag=0,sb=a.Doc=function(a,b,c){if(!(this instanceof sb))return new sb(a,b,c);null==c&&(c=0);Nc.call(this,
[new Mc([new jd("",null)])]);this.first=c;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.cleanGeneration=1;this.frontier=c;c=V(c,0);this.sel=bb(c);this.history=new pe(null);this.id=++ag;this.modeOption=b;"string"==typeof a&&(a=za(a));Id(this,{from:c,to:c,text:a});Ra(this,bb(c),kd)};sb.prototype=Lf(Nc.prototype,{constructor:sb,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0;d<b.length;++d)c+=b[d].height;
this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=Jf(this,this.first,this.first+this.size);return!1===a?b:b.join(a||"\n")},setValue:Ka(function(a){var b=V(this.first,0),c=this.first+this.size-1;Rc(this,{from:b,to:V(c,la(this,c).text.length),text:za(a),origin:"setValue"},!0);Ra(this,bb(b))}),replaceRange:function(a,b,c,d){b=ca(this,b);c=c?ca(this,c):b;Od(this,a,b,c,d)},getRange:function(a,b,c){a=oe(this,ca(this,a),ca(this,b));return!1===
c?a:a.join(c||"\n")},getLine:function(a){return(a=this.getLineHandle(a))&&a.text},getLineHandle:function(a){if(ob(this,a))return la(this,a)},getLineNumber:function(a){return Xa(a)},getLineHandleVisualStart:function(a){"number"==typeof a&&(a=la(this,a));return hc(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return ca(this,a)},getCursor:function(a){var b=this.sel.primary();return null==a||"head"==
a?b.head:"anchor"==a?b.anchor:"end"==a||"to"==a||!1===a?b.to():b.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Ka(function(a,b,c){a=ca(this,"number"==typeof a?V(a,b||0):a);Ra(this,bb(a,null),c)}),setSelection:Ka(function(a,b,c){var d=ca(this,a);a=ca(this,b||a);Ra(this,bb(d,a),c)}),extendSelection:Ka(function(a,b,c){p(this,ca(this,a),b&&ca(this,b),c)}),extendSelections:Ka(function(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=
ca(this,a[d]);lb(this,c)}),extendSelectionsBy:Ka(function(a,b){lb(this,le(this.sel.ranges,a),b)}),setSelections:Ka(function(a,b,c){if(a.length){for(var d=0,e=[];d<a.length;d++)e[d]=new ta(ca(this,a[d].anchor),ca(this,a[d].head));null==b&&(b=Math.min(a.length-1,this.sel.primIndex));Ra(this,Da(e,b),c)}}),addSelection:Ka(function(a,b,c){var d=this.sel.ranges.slice(0);d.push(new ta(ca(this,a),ca(this,b||a)));Ra(this,Da(d,d.length-1),c)}),getSelection:function(a){for(var b=this.sel.ranges,c,d=0;d<b.length;d++){var e=
oe(this,b[d].from(),b[d].to());c=c?c.concat(e):e}return!1===a?c:c.join(a||"\n")},getSelections:function(a){for(var b=[],c=this.sel.ranges,d=0;d<c.length;d++){var e=oe(this,c[d].from(),c[d].to());!1!==a&&(e=e.join(a||"\n"));b[d]=e}return b},replaceSelection:function(a,b,c){for(var d=[],e=0;e<this.sel.ranges.length;e++)d[e]=a;this.replaceSelections(d,b,c||"+input")},replaceSelections:Ka(function(a,b,c){for(var d=[],e=this.sel,f=0;f<e.ranges.length;f++){var g=e.ranges[f];d[f]={from:g.from(),to:g.to(),
text:za(a[f]),origin:c}}if(f=b&&"end"!=b){f=[];c=a=V(this.first,0);for(e=0;e<d.length;e++){var h=d[e],g=ve(h.from,a,c),l=ve(rb(h),a,c);a=h.to;c=l;"around"==b?(h=this.sel.ranges[e],h=0>Aa(h.head,h.anchor),f[e]=new ta(h?l:g,h?g:l)):f[e]=new ta(g,g)}f=new Ga(f,this.sel.primIndex)}b=f;for(f=d.length-1;0<=f;f--)Rc(this,d[f]);b?Eb(this,b):this.cm&&ac(this.cm)}),undo:Ka(function(){cd(this,"undo")}),redo:Ka(function(){cd(this,"redo")}),undoSelection:Ka(function(){cd(this,"undo",!0)}),redoSelection:Ka(function(){cd(this,
"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var a=this.history,b=0,c=0,d=0;d<a.done.length;d++)a.done[d].ranges||++b;for(d=0;d<a.undone.length;d++)a.undone[d].ranges||++c;return{undo:b,redo:c}},clearHistory:function(){this.history=new pe(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){a&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=
null);return this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:Jd(this.history.done),undone:Jd(this.history.undone)}},setHistory:function(a){var b=this.history=new pe(this.history.maxGeneration);b.done=Jd(a.done.slice(0),null,!0);b.undone=Jd(a.undone.slice(0),null,!0)},addLineClass:Ka(function(a,b,c){return Sc(this,a,"class",function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass";if(a[d]){if((new RegExp("(?:^|\\s)"+
c+"(?:$|\\s)")).test(a[d]))return!1;a[d]+=" "+c}else a[d]=c;return!0})}),removeLineClass:Ka(function(a,b,c){return Sc(this,a,"class",function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass",e=a[d];if(e)if(null==c)a[d]=null;else{var f=e.match(new RegExp("(?:^|\\s+)"+c+"(?:$|\\s+)"));if(!f)return!1;var g=f.index+f[0].length;a[d]=e.slice(0,f.index)+(f.index&&g!=e.length?" ":"")+e.slice(g)||null}else return!1;return!0})}),markText:function(a,b,c){return Wb(this,ca(this,a),ca(this,
b),c,"range")},setBookmark:function(a,b){var c={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft,clearWhenEmpty:!1,shared:b&&b.shared};a=ca(this,a);return Wb(this,a,a,c,"bookmark")},findMarksAt:function(a){a=ca(this,a);var b=[],c=la(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},findMarks:function(a,b,c){a=ca(this,a);b=ca(this,b);var d=[],e=a.line;this.iter(a.line,
b.line+1,function(f){if(f=f.markedSpans)for(var g=0;g<f.length;g++){var h=f[g];e==a.line&&a.ch>h.to||null==h.from&&e!=a.line||e==b.line&&h.from>b.ch||c&&!c(h.marker)||d.push(h.marker.parent||h.marker)}++e});return d},getAllMarks:function(){var a=[];this.iter(function(b){if(b=b.markedSpans)for(var c=0;c<b.length;++c)null!=b[c].from&&a.push(b[c].marker)});return a},posFromIndex:function(a){var b,c=this.first;this.iter(function(d){d=d.text.length+1;if(d>a)return b=a,!0;a-=d;++c});return ca(this,V(c,
b))},indexFromPos:function(a){a=ca(this,a);var b=a.ch;if(a.line<this.first||0>a.ch)return 0;this.iter(this.first,a.line,function(a){b+=a.text.length+1});return b},copy:function(a){var b=new sb(Jf(this,this.first,this.first+this.size),this.modeOption,this.first);b.scrollTop=this.scrollTop;b.scrollLeft=this.scrollLeft;b.sel=this.sel;b.extend=!1;a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory()));return b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;
null!=a.from&&a.from>b&&(b=a.from);null!=a.to&&a.to<c&&(c=a.to);b=new sb(Jf(this,b,c),a.mode||this.modeOption,b);a.sharedHist&&(b.history=this.history);(this.linked||(this.linked=[])).push({doc:b,sharedHist:a.sharedHist});b.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}];a=Rd(this);for(c=0;c<a.length;c++){var d=a[c],e=d.find(),f=b.clipPos(e.from),e=b.clipPos(e.to);Aa(f,e)&&(f=Wb(b,f,e,d.primary,d.primary.type),d.markers.push(f),f.parent=d)}return b},unlinkDoc:function(b){b instanceof a&&(b=
b.doc);if(this.linked)for(var c=0;c<this.linked.length;++c)if(this.linked[c].doc==b){this.linked.splice(c,1);b.unlinkDoc(this);eg(Rd(this));break}if(b.history==this.history){var d=[b.id];ad(b,function(a){d.push(a.id)},!0);b.history=new pe(null);b.history.done=Jd(this.history.done,d);b.history.undone=Jd(this.history.undone,d)}},iterLinkedDocs:function(a){ad(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm}});sb.prototype.eachLine=sb.prototype.iter;var ih=["iter","insert",
"remove","copy","getEditor"],Ke;for(Ke in sb.prototype)sb.prototype.hasOwnProperty(Ke)&&0>Fb(ih,Ke)&&(a.prototype[Ke]=function(a){return function(){return a.apply(this.doc,arguments)}}(sb.prototype[Ke]));Hd(sb);var z=a.e_preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},Lg=a.e_stopPropagation=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},zc=a.e_stop=function(a){z(a);Lg(a)},oa=a.on=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?
a.attachEvent("on"+b,c):(a=a._handlers||(a._handlers={}),(a[b]||(a[b]=[])).push(c))},Ob=a.off=function(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else if(a=a._handlers&&a._handlers[b])for(b=0;b<a.length;++b)if(a[b]==c){a.splice(b,1);break}},Ha=a.signal=function(a,b){var c=a._handlers&&a._handlers[b];if(c)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)},yf=null,Jc=30,Le=a.Pass={toString:function(){return"CodeMirror.Pass"}},
kd={scroll:!1},bg={origin:"*mouse"},ce={origin:"+move"};Gf.prototype.set=function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)};var rc=a.countColumn=function(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));d=d||0;for(e=e||0;;){var f=a.indexOf("\t",d);if(0>f||f>=b)return e+(b-d);e+=f-d;e+=c-e%c;d=f+1}},Me=[""],ia=function(a){a.select()};De?ia=function(a){a.selectionStart=0;a.selectionEnd=a.value.length}:Fa&&(ia=function(a){try{a.select()}catch(b){}});[].indexOf&&(Fb=function(a,
b){return a.indexOf(b)});[].map&&(le=function(a,b){return a.map(b)});var ud=/[\u00df\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,we=a.isWordChar=function(a){return/\w/.test(a)||"\u0080"<a&&(a.toUpperCase()!=a.toLowerCase()||ud.test(a))},rg=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,
de;de=document.createRange?function(a,b,c){var d=document.createRange();d.setEnd(a,c);d.setStart(a,b);return d}:function(a,b,c){var d=document.body.createTextRange();d.moveToElementText(a.parentNode);d.collapse(!0);d.moveEnd("character",c);d.moveStart("character",b);return d};Fa&&11>Ta&&(Dc=function(){try{return document.activeElement}catch(a){return document.body}});var xe=!1,Qf=function(){if(Fa&&9>Ta)return!1;var a=ha("div");return"draggable"in a||"dragDrop"in a}(),wd,cg,cf,za=a.splitLines=3!="\n\nb".split(/\n/).length?
function(a){for(var b=0,c=[],d=a.length;b<=d;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)},dg=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},yc=
function(){var a=ha("div");if("oncopy"in a)return!0;a.setAttribute("oncopy","return;");return"function"==typeof a.oncopy}(),zf=null,Ac={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",
192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};a.keyNames=Ac;(function(){for(var a=0;10>a;a++)Ac[a+48]=Ac[a+96]=String(a);for(a=65;90>=a;a++)Ac[a]=String.fromCharCode(a);for(a=1;12>=a;a++)Ac[a+111]=Ac[a+63235]="F"+a})();var Uc,ah=function(){function a(b){return 247>=b?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(b):
1424<=b&&1524>=b?"R":1536<=b&&1773>=b?"rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm".charAt(b-1536):1774<=b&&2220>=b?"r":8192<=b&&8203>=b?"w":8204==b?"b":"L"}function b(a,c,d){this.level=a;this.from=c;this.to=d}var c=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,d=/[stwN]/,e=/[LRr]/,f=/[Lb1n]/,g=/[1n]/;return function(h){if(!c.test(h))return!1;
for(var l=h.length,m=[],n=0,p;n<l;++n)m.push(a(h.charCodeAt(n)));for(var n=0,q="L";n<l;++n)p=m[n],"m"==p?m[n]=q:q=p;n=0;for(q="L";n<l;++n)p=m[n],"1"==p&&"r"==q?m[n]="n":e.test(p)&&(q=p,"r"==p&&(m[n]="R"));n=1;for(q=m[0];n<l-1;++n)p=m[n],"+"==p&&"1"==q&&"1"==m[n+1]?m[n]="1":","!=p||q!=m[n+1]||"1"!=q&&"n"!=q||(m[n]=q),q=p;for(n=0;n<l;++n)if(p=m[n],","==p)m[n]="N";else if("%"==p){for(q=n+1;q<l&&"%"==m[q];++q);var t=n&&"!"==m[n-1]||q<l&&"1"==m[q]?"1":"N";for(p=n;p<q;++p)m[p]=t;n=q-1}n=0;for(q="L";n<l;++n)p=
m[n],"L"==q&&"1"==p?m[n]="L":e.test(p)&&(q=p);for(n=0;n<l;++n)if(d.test(m[n])){for(q=n+1;q<l&&d.test(m[q]);++q);p="L"==(q<l?m[q]:"L");t="L"==(n?m[n-1]:"L")||p?"L":"R";for(p=n;p<q;++p)m[p]=t;n=q-1}for(var q=[],u,n=0;n<l;)if(f.test(m[n])){p=n;for(++n;n<l&&f.test(m[n]);++n);q.push(new b(0,p,n))}else{var y=n,t=q.length;for(++n;n<l&&"L"!=m[n];++n);for(p=y;p<n;)if(g.test(m[p])){y<p&&q.splice(t,0,new b(1,y,p));y=p;for(++p;p<n&&g.test(m[p]);++p);q.splice(t,0,new b(2,y,p));y=p}else++p;y<n&&q.splice(t,0,new b(1,
y,n))}1==q[0].level&&(u=h.match(/^\s+/))&&(q[0].from=u[0].length,q.unshift(new b(0,0,u[0].length)));1==Wa(q).level&&(u=h.match(/\s+$/))&&(Wa(q).to-=u[0].length,q.push(new b(0,l-u[0].length,l)));q[0].level!=Wa(q).level&&q.push(new b(q[0].level,l,l));return q}}();a.version="4.5.0";return a});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function c(a,c,d,e){var f=a.getLineHandle(c.line),l=c.ch-1,f=0<=l&&h[f.text.charAt(l)]||h[f.text.charAt(++l)];if(!f)return null;var E=">"==f.charAt(1)?1:-1;if(d&&0<E!=(l==c.ch))return null;d=a.getTokenTypeAt(g(c.line,l+1));a=b(a,g(c.line,l+(0<E?1:0)),E,d||null,e);return null==a?null:{from:g(c.line,l),
to:a&&a.pos,match:a&&a.ch==f.charAt(0),forward:0<E}}function b(a,b,c,d,e){var f=e&&e.maxScanLineLength||1E4,l=e&&e.maxScanLines||1E3,A=[];e=e&&e.bracketRegex?e.bracketRegex:/[(){}[\]]/;for(var l=0<c?Math.min(b.line+l,a.lastLine()+1):Math.max(a.firstLine()-1,b.line-l),H=b.line;H!=l;H+=c){var I=a.getLine(H);if(I){var y=0<c?0:I.length-1,D=0<c?I.length:-1;if(!(I.length>f))for(H==b.line&&(y=b.ch-(0>c?1:0));y!=D;y+=c){var F=I.charAt(y);if(e.test(F)&&(void 0===d||a.getTokenTypeAt(g(H,y+1))==d))if(">"==h[F].charAt(1)==
0<c)A.push(F);else if(A.length)A.pop();else return{pos:g(H,y),ch:F}}}}return H-c==(0<c?a.lastLine():a.firstLine())?!1:null}function d(a,b,d){for(var e=a.state.matchBrackets.maxHighlightLineLength||1E3,h=[],l=a.listSelections(),E=0;E<l.length;E++){var A=l[E].empty()&&c(a,l[E].head,!1,d);if(A&&a.getLine(A.from.line).length<=e){var H=A.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";h.push(a.markText(A.from,g(A.from.line,A.from.ch+1),{className:H}));A.to&&a.getLine(A.to.line).length<=
e&&h.push(a.markText(A.to,g(A.to.line,A.to.ch+1),{className:H}))}}if(h.length)if(f&&a.state.focused&&a.display.input.focus(),d=function(){a.operation(function(){for(var a=0;a<h.length;a++)h[a].clear()})},b)setTimeout(d,800);else return d}function e(a){a.operation(function(){l&&(l(),l=null);l=d(a,!1,a.state.matchBrackets)})}var f=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||8>document.documentMode),g=a.Pos,h={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},l=null;a.defineOption("matchBrackets",
!1,function(b,c,d){d&&d!=a.Init&&b.off("cursorActivity",e);c&&(b.state.matchBrackets="object"==typeof c?c:{},b.on("cursorActivity",e))});a.defineExtension("matchBrackets",function(){d(this,!0)});a.defineExtension("findMatchingBracket",function(a,b,d){return c(this,a,b,d)});a.defineExtension("scanForBracket",function(a,c,d,e){return b(this,a,c,d,e)})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function c(c){if(c.getOption("disableInput"))return a.Pass;for(var d=c.listSelections(),e,l=[],m=0;m<d.length;m++){var n=d[m].head,q=c.getTokenAt(n);if("comment"!=q.type)return a.Pass;var t=a.innerMode(c.getMode(),q.state).mode;if(!e)e=t;else if(e!=t)return a.Pass;t=null;if(e.blockCommentStart&&e.blockCommentContinue){var x=
q.string.indexOf(e.blockCommentEnd),u=c.getRange(a.Pos(n.line,0),a.Pos(n.line,q.end)),E;if(!(-1!=x&&x==q.string.length-e.blockCommentEnd.length&&n.ch>=x))if(0==q.string.indexOf(e.blockCommentStart)){if(t=u.slice(0,q.start),!/^\s*$/.test(t))for(t="",x=0;x<q.start;++x)t+=" "}else-1!=(E=u.indexOf(e.blockCommentContinue))&&E+e.blockCommentContinue.length>q.start&&/^\s*$/.test(u.slice(0,E))&&(t=u.slice(0,E));null!=t&&(t+=e.blockCommentContinue)}null==t&&e.lineComment&&b(c)&&(n=c.getLine(n.line),E=n.indexOf(e.lineComment),
-1<E&&(t=n.slice(0,E),t=/\S/.test(t)?null:t+(e.lineComment+n.slice(E+e.lineComment.length).match(/^\s*/)[0])));if(null==t)return a.Pass;l[m]="\n"+t}c.operation(function(){for(var a=d.length-1;0<=a;a--)c.replaceRange(l[a],d[a].from(),d[a].to(),"+insert")})}function b(a){return(a=a.getOption("continueComments"))&&"object"==typeof a?!1!==a.continueLineComment:!0}for(var d=["clike","css","javascript"],e=0;e<d.length;++e)a.extendMode(d[e],{blockCommentContinue:" * "});a.defineOption("continueComments",
null,function(b,d,e){e&&e!=a.Init&&b.removeKeyMap("continueComment");d&&(e="Enter","string"==typeof d?e=d:"object"==typeof d&&d.key&&(e=d.key),d={name:"continueComment"},d[e]=c,b.addKeyMap(d))})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function c(a){a=a.search(d);return-1==a?0:a}var b={},d=/[^\s\u00a0]/,e=a.Pos;a.commands.toggleComment=function(a){for(var b=Infinity,c=a.listSelections(),d=null,m=c.length-1;0<=m;m--){var n=c[m].from(),q=c[m].to();n.line>=b||(q.line>=b&&(q=e(b,0)),b=n.line,null==d?a.uncomment(n,q)?d="un":(a.lineComment(n,
q),d="line"):"un"==d?a.uncomment(n,q):a.lineComment(n,q))}};a.defineExtension("lineComment",function(a,g,h){h||(h=b);var l=this,m=l.getModeAt(a),n=h.lineComment||m.lineComment;if(n){var q=l.getLine(a.line);if(null!=q){var t=Math.min(0!=g.ch||g.line==a.line?g.line+1:g.line,l.lastLine()+1),x=null==h.padding?" ":h.padding,u=h.commentBlankLines||a.line==g.line;l.operation(function(){if(h.indent)for(var b=q.slice(0,c(q)),g=a.line;g<t;++g){var m=l.getLine(g),I=b.length;if(u||d.test(m))m.slice(0,I)!=b&&
(I=c(m)),l.replaceRange(b+n+x,e(g,0),e(g,I))}else for(g=a.line;g<t;++g)(u||d.test(l.getLine(g)))&&l.replaceRange(n+x,e(g,0))})}}else if(h.blockCommentStart||m.blockCommentStart)h.fullLines=!0,l.blockComment(a,g,h)});a.defineExtension("blockComment",function(a,c,h){h||(h=b);var l=this,m=l.getModeAt(a),n=h.blockCommentStart||m.blockCommentStart,q=h.blockCommentEnd||m.blockCommentEnd;if(n&&q){var t=Math.min(c.line,l.lastLine());t!=a.line&&0==c.ch&&d.test(l.getLine(t))&&--t;var x=null==h.padding?" ":
h.padding;a.line>t||l.operation(function(){if(0!=h.fullLines){var b=d.test(l.getLine(t));l.replaceRange(x+q,e(t));l.replaceRange(n+x,e(a.line,0));var E=h.blockCommentLead||m.blockCommentLead;if(null!=E)for(var A=a.line+1;A<=t;++A)(A!=t||b)&&l.replaceRange(E+x,e(A,0))}else l.replaceRange(q,c),l.replaceRange(n,a)})}else(h.lineComment||m.lineComment)&&0!=h.fullLines&&l.lineComment(a,c,h)});a.defineExtension("uncomment",function(a,c,h){h||(h=b);var l=this,m=l.getModeAt(a),n=Math.min(c.line,l.lastLine()),
q=Math.min(a.line,n),t=h.lineComment||m.lineComment,x=[],u=null==h.padding?" ":h.padding,E;a:if(t){for(var A=q;A<=n;++A){var H=l.getLine(A),I=H.indexOf(t);-1<I&&!/comment/.test(l.getTokenTypeAt(e(A,I+1)))&&(I=-1);if(-1==I&&(A!=n||A==q)&&d.test(H))break a;if(-1<I&&d.test(H.slice(0,I)))break a;x.push(H)}l.operation(function(){for(var a=q;a<=n;++a){var b=x[a-q],c=b.indexOf(t),d=c+t.length;0>c||(b.slice(d,d+u.length)==u&&(d+=u.length),E=!0,l.replaceRange("",e(a,c),e(a,d)))}});if(E)return!0}var y=h.blockCommentStart||
m.blockCommentStart,D=h.blockCommentEnd||m.blockCommentEnd;if(!y||!D)return!1;var F=h.blockCommentLead||m.blockCommentLead,G=l.getLine(q),N=n==q?G:l.getLine(n),M=G.indexOf(y),P=N.lastIndexOf(D);-1==P&&q!=n&&(N=l.getLine(--n),P=N.lastIndexOf(D));if(-1==M||-1==P||!/comment/.test(l.getTokenTypeAt(e(q,M+1)))||!/comment/.test(l.getTokenTypeAt(e(n,P+1))))return!1;m=G.lastIndexOf(y,a.ch);h=-1==m?-1:G.slice(0,a.ch).indexOf(D,m+y.length);if(-1!=m&&-1!=h&&h+D.length!=a.ch)return!1;h=N.indexOf(D,c.ch);a=N.slice(c.ch).lastIndexOf(y,
h-c.ch);m=-1==h||-1==a?-1:c.ch+a;if(-1!=h&&-1!=m&&m!=c.ch)return!1;l.operation(function(){l.replaceRange("",e(n,P-(u&&N.slice(P-u.length,P)==u?u.length:0)),e(n,P+D.length));var a=M+y.length;u&&G.slice(a,a+u.length)==u&&(a+=u.length);l.replaceRange("",e(q,M),e(q,a));if(F)for(a=q+1;a<=n;++a){var b=l.getLine(a),c=b.indexOf(F);if(-1!=c&&!d.test(b.slice(0,c))){var f=c+F.length;u&&b.slice(f,f+u.length)==u&&(f+=u.length);l.replaceRange("",e(a,c),e(a,f))}}});return!0})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){a.defineMode("javascript",function(c,b){function d(a,b,c){Ua=a;$a=c;return b}function e(a,b){var c=a.next();if('"'==c||"'"==c)return b.tokenize=f(c),b.tokenize(a,b);if("."==c&&a.match(/^\d+(?:[eE][+\-]?\d+)?/))return d("number","number");if("."==c&&a.match(".."))return d("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(c))return d(c);
if("="==c&&a.eat(">"))return d("=>","operator");if("0"==c&&a.eat(/x/i))return a.eatWhile(/[\da-f]/i),d("number","number");if(/\d/.test(c))return a.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),d("number","number");if("/"==c){if(a.eat("*"))return b.tokenize=g,g(a,b);if(a.eat("/"))return a.skipToEnd(),d("comment","comment");if("operator"==b.lastType||"keyword c"==b.lastType||"sof"==b.lastType||/^[\[{}\(,;:]$/.test(b.lastType)){a:for(var c=!1,e,l=!1;null!=(e=a.next());){if(!c){if("/"==e&&!l)break a;"["==
e?l=!0:l&&"]"==e&&(l=!1)}c=!c&&"\\"==e}a.eatWhile(/[gimy]/);return d("regexp","string-2")}a.eatWhile(ea);return d("operator","operator",a.current())}if("`"==c)return b.tokenize=h,h(a,b);if("#"==c)return a.skipToEnd(),d("error","error");if(ea.test(c))return a.eatWhile(ea),d("operator","operator",a.current());if(xb.test(c))return a.eatWhile(xb),c=a.current(),(e=Rb.propertyIsEnumerable(c)&&Rb[c])&&"."!=b.lastType?d(e.type,e.style,c):d("variable","variable",c)}function f(a){return function(b,c){var f=
!1,g;if(fa&&"@"==b.peek()&&b.match(Sb))return c.tokenize=e,d("jsonld-keyword","meta");for(;null!=(g=b.next())&&(g!=a||f);)f=!f&&"\\"==g;f||(c.tokenize=e);return d("string","string")}}function g(a,b){for(var c=!1,f;f=a.next();){if("/"==f&&c){b.tokenize=e;break}c="*"==f}return d("comment","comment")}function h(a,b){for(var c=!1,f;null!=(f=a.next());){if(!c&&("`"==f||"$"==f&&a.eat("{"))){b.tokenize=e;break}c=!c&&"\\"==f}return d("quasi","string-2",a.current())}function l(a,b){b.fatArrowAt&&(b.fatArrowAt=
null);var c=a.string.indexOf("=>",a.start);if(!(0>c)){for(var d=0,e=!1,c=c-1;0<=c;--c){var f=a.string.charAt(c),g="([{}])".indexOf(f);if(0<=g&&3>g){if(!d){++c;break}if(0==--d)break}else if(3<=g&&6>g)++d;else if(xb.test(f))e=!0;else if(e&&!d){++c;break}}e&&!d&&(b.fatArrowAt=c)}}function m(a,b,c,d,e,f){this.indented=a;this.column=b;this.type=c;this.prev=e;this.info=f;null!=d&&(this.align=d)}function n(){for(var a=arguments.length-1;0<=a;a--)Z.cc.push(arguments[a])}function q(){n.apply(null,arguments);
return!0}function t(a){function c(b){for(;b;b=b.next)if(b.name==a)return!0;return!1}var d=Z.state;d.context?(Z.marked="def",c(d.localVars)||(d.localVars={name:a,next:d.localVars})):!c(d.globalVars)&&b.globalVars&&(d.globalVars={name:a,next:d.globalVars})}function x(){Z.state.context={prev:Z.state.context,vars:Z.state.localVars};Z.state.localVars=Qa}function u(){Z.state.localVars=Z.state.context.vars;Z.state.context=Z.state.context.prev}function E(a,b){var c=function(){var c=Z.state,d=c.indented;if("stat"==
c.lexical.type)d=c.lexical.indented;else for(var e=c.lexical;e&&")"==e.type&&e.align;e=e.prev)d=e.indented;c.lexical=new m(d,Z.stream.column(),a,null,c.lexical,b)};c.lex=!0;return c}function A(){var a=Z.state;a.lexical.prev&&(")"==a.lexical.type&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function H(a){function b(c){return c==a?q():";"==a?n():q(b)}return b}function I(a,b){return"var"==a?q(E("vardef",b.length),ib,H(";"),A):"keyword a"==a?q(E("form"),y,I,A):"keyword b"==a?q(E("form"),
I,A):"{"==a?q(E("}"),Q,A):";"==a?q():"if"==a?("else"==Z.state.lexical.info&&Z.state.cc[Z.state.cc.length-1]==A&&Z.state.cc.pop()(),q(E("form"),y,I,A,ca)):"function"==a?q(Pa):"for"==a?q(E("form"),ob,I,A):"variable"==a?q(E("stat"),ra):"switch"==a?q(E("form"),y,E("}","switch"),H("{"),Q,A,A):"case"==a?q(y,H(":")):"default"==a?q(H(":")):"catch"==a?q(E("form"),x,H("("),Eb,H(")"),I,A,u):"module"==a?q(E("form"),x,Ab,u,A):"class"==a?q(E("form"),Ra,A):"export"==a?q(E("form"),wb,A):"import"==a?q(E("form"),Ia,
A):n(E("stat"),y,H(";"),A)}function y(a){return F(a,!1)}function D(a){return F(a,!0)}function F(a,b){if(Z.state.fatArrowAt==Z.stream.start){var c=b?Ca:ka;if("("==a)return q(x,E(")"),qa(Ga,")"),A,H("=>"),c,u);if("variable"==a)return n(x,Ga,H("=>"),c,u)}c=b?P:M;return cb.hasOwnProperty(a)?q(c):"function"==a?q(Pa,c):"keyword c"==a?q(b?N:G):"("==a?q(E(")"),G,eb,H(")"),A,c):"operator"==a||"spread"==a?q(b?D:y):"["==a?q(E("]"),Qb,A,c):"{"==a?na(wa,"}",null,c):"quasi"==a?n(O,c):q()}function G(a){return a.match(/[;\}\)\],]/)?
n():n(y)}function N(a){return a.match(/[;\}\)\],]/)?n():n(D)}function M(a,b){return","==a?q(y):P(a,b,!1)}function P(a,b,c){var d=0==c?M:P,e=0==c?y:D;if("=>"==b)return q(x,c?Ca:ka,u);if("operator"==a)return/\+\+|--/.test(b)?q(d):"?"==b?q(y,H(":"),e):q(e);if("quasi"==a)return n(O,d);if(";"!=a){if("("==a)return na(D,")","call",d);if("."==a)return q(aa,d);if("["==a)return q(E("]"),G,H("]"),A,d)}}function O(a,b){return"quasi"!=a?n():"${"!=b.slice(b.length-2)?q(O):q(y,pa)}function pa(a){if("}"==a)return Z.marked=
"string-2",Z.state.tokenize=h,q(O)}function ka(a){l(Z.stream,Z.state);return"{"==a?n(I):n(y)}function Ca(a){l(Z.stream,Z.state);return"{"==a?n(I):n(D)}function ra(a){return":"==a?q(A,I):n(M,H(";"),A)}function aa(a){if("variable"==a)return Z.marked="property",q()}function wa(a,b){if("variable"==a||"keyword"==Z.style)return Z.marked="property","get"==b||"set"==b?q(va):q(sa);if("number"==a||"string"==a)return Z.marked=fa?"property":Z.style+" property",q(sa);if("jsonld-keyword"==a)return q(sa);if("["==
a)return q(y,H("]"),sa)}function va(a){if("variable"!=a)return n(sa);Z.marked="property";return q(Pa)}function sa(a){if(":"==a)return q(D);if("("==a)return n(Pa)}function qa(a,b){function c(d){return","==d?(d=Z.state.lexical,"call"==d.info&&(d.pos=(d.pos||0)+1),q(a,c)):d==b?q():q(H(b))}return function(d){return d==b?q():n(a,c)}}function na(a,b,c){for(var d=3;d<arguments.length;d++)Z.cc.push(arguments[d]);return q(E(b,c),qa(a,b),A)}function Q(a){return"}"==a?q():n(I,Q)}function da(a){if(pb&&":"==a)return q(nb)}
function nb(a){if("variable"==a)return Z.marked="variable-3",q()}function ib(){return n(Ga,da,Da,bb)}function Ga(a,b){if("variable"==a)return t(b),q();if("["==a)return na(Ga,"]");if("{"==a)return na(ta,"}")}function ta(a,b){if("variable"==a&&!Z.stream.match(/^\s*:/,!1))return t(b),q(Da);"variable"==a&&(Z.marked="property");return q(H(":"),Ga,Da)}function Da(a,b){if("="==b)return q(D)}function bb(a){if(","==a)return q(ib)}function ca(a,b){if("keyword b"==a&&"else"==b)return q(E("form","else"),I,A)}
function ob(a){if("("==a)return q(E(")"),tb,H(")"),A)}function tb(a){return"var"==a?q(ib,H(";"),lb):";"==a?q(lb):"variable"==a?q(p):n(y,H(";"),lb)}function p(a,b){return"in"==b||"of"==b?(Z.marked="keyword",q(y)):q(M,lb)}function lb(a,b){return";"==a?q(Jb):"in"==b||"of"==b?(Z.marked="keyword",q(y)):n(y,H(";"),Jb)}function Jb(a){")"!=a&&q(y)}function Pa(a,b){if("*"==b)return Z.marked="keyword",q(Pa);if("variable"==a)return t(b),q(Pa);if("("==a)return q(x,E(")"),qa(Eb,")"),A,I,u)}function Eb(a){return"spread"==
a?q(Eb):n(Ga,da)}function Ra(a,b){if("variable"==a)return t(b),q(ub)}function ub(a,b){if("extends"==b)return q(y,ub);if("{"==a)return q(E("}"),vb,A)}function vb(a,b){if("variable"==a||"keyword"==Z.style)return Z.marked="property","get"==b||"set"==b?q(Kb,Pa,vb):q(Pa,vb);if("*"==b)return Z.marked="keyword",q(vb);if(";"==a)return q(vb);if("}"==a)return q()}function Kb(a){if("variable"!=a)return n();Z.marked="property";return q()}function Ab(a,b){if("string"==a)return q(I);if("variable"==a)return t(b),
q(Ya)}function wb(a,b){return"*"==b?(Z.marked="keyword",q(Ya,H(";"))):"default"==b?(Z.marked="keyword",q(y,H(";"))):n(I)}function Ia(a){return"string"==a?q():n(Lb,Ya)}function Lb(a,b){if("{"==a)return na(Lb,"}");"variable"==a&&t(b);return q()}function Ya(a,b){if("from"==b)return Z.marked="keyword",q(y)}function Qb(a){return"]"==a?q():n(D,Za)}function Za(a){return"for"==a?n(eb,H("]")):","==a?q(qa(D,"]")):n(qa(D,"]"))}function eb(a){if("for"==a)return q(ob,eb);if("if"==a)return q(y,eb)}var gb=c.indentUnit,
fb=b.statementIndent,fa=b.jsonld,Ba=b.json||fa,pb=b.typescript,xb=b.wordCharacters||/[\w$]/,Rb=function(){function a(b){return{type:b,style:"keyword"}}var b=a("keyword a"),c=a("keyword b"),d=a("keyword c"),e=a("operator"),f={type:"atom",style:"atom"},b={"if":a("if"),"while":b,"with":b,"else":c,"do":c,"try":c,"finally":c,"return":d,"break":d,"continue":d,"new":d,"delete":d,"throw":d,"debugger":d,"var":a("var"),"const":a("var"),let:a("var"),"function":a("function"),"catch":a("catch"),"for":a("for"),
"switch":a("switch"),"case":a("case"),"default":a("default"),"in":e,"typeof":e,"instanceof":e,"true":f,"false":f,"null":f,undefined:f,NaN:f,Infinity:f,"this":a("this"),module:a("module"),"class":a("class"),"super":a("atom"),yield:d,"export":a("export"),"import":a("import"),"extends":d};if(pb){var c={type:"variable",style:"variable-3"},c={"interface":a("interface"),"extends":a("extends"),constructor:a("constructor"),"public":a("public"),"private":a("private"),"protected":a("protected"),"static":a("static"),
string:c,number:c,bool:c,any:c},g;for(g in c)b[g]=c[g]}return b}(),ea=/[+\-*&%=<>!?|~^]/,Sb=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,Ua,$a,cb={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},Z={state:null,column:null,marked:null,cc:null},Qa={name:"this",next:{name:"arguments"}};A.lex=!0;return{startState:function(a){a={tokenize:e,lastType:"sof",cc:[],lexical:new m((a||0)-gb,0,"block",!1),localVars:b.localVars,context:b.localVars&&
{vars:b.localVars},indented:0};b.globalVars&&"object"==typeof b.globalVars&&(a.globalVars=b.globalVars);return a},token:function(a,b){a.sol()&&(b.lexical.hasOwnProperty("align")||(b.lexical.align=!1),b.indented=a.indentation(),l(a,b));if(b.tokenize!=g&&a.eatSpace())return null;var c=b.tokenize(a,b);if("comment"==Ua)return c;b.lastType="operator"!=Ua||"++"!=$a&&"--"!=$a?Ua:"incdec";a:{var d=Ua,e=$a,f=b.cc;Z.state=b;Z.stream=a;Z.marked=null;Z.cc=f;Z.style=c;b.lexical.hasOwnProperty("align")||(b.lexical.align=
!0);for(;;)if((f.length?f.pop():Ba?y:I)(d,e)){for(;f.length&&f[f.length-1].lex;)f.pop()();if(Z.marked){c=Z.marked;break a}if(d="variable"==d)b:{for(d=b.localVars;d;d=d.next)if(d.name==e){d=!0;break b}for(f=b.context;f;f=f.prev)for(d=f.vars;d;d=d.next)if(d.name==e){d=!0;break b}d=void 0}if(d){c="variable-2";break a}break a}}return c},indent:function(c,d){if(c.tokenize==g)return a.Pass;if(c.tokenize!=e)return 0;var f=d&&d.charAt(0),h=c.lexical;if(!/^\s*else\b/.test(d))for(var l=c.cc.length-1;0<=l;--l){var m=
c.cc[l];if(m==A)h=h.prev;else if(m!=ca)break}"stat"==h.type&&"}"==f&&(h=h.prev);fb&&")"==h.type&&"stat"==h.prev.type&&(h=h.prev);l=h.type;m=f==l;return"vardef"==l?h.indented+("operator"==c.lastType||","==c.lastType?h.info+1:0):"form"==l&&"{"==f?h.indented:"form"==l?h.indented+gb:"stat"==l?h.indented+("operator"==c.lastType||","==c.lastType?fb||gb:0):"switch"!=h.info||m||0==b.doubleIndentSwitch?h.align?h.column+(m?0:1):h.indented+(m?0:gb):h.indented+(/^(?:case|default)\b/.test(d)?gb:2*gb)},electricChars:":{}",
blockCommentStart:Ba?null:"/*",blockCommentEnd:Ba?null:"*/",lineComment:Ba?null:"//",fold:"brace",helperType:Ba?"json":"javascript",jsonldMode:fa,jsonMode:Ba}});a.registerHelper("wordChars","javascript",/[\w$]/);a.defineMIME("text/javascript","javascript");a.defineMIME("text/ecmascript","javascript");a.defineMIME("application/javascript","javascript");a.defineMIME("application/x-javascript","javascript");a.defineMIME("application/ecmascript","javascript");a.defineMIME("application/json",{name:"javascript",
json:!0});a.defineMIME("application/x-json",{name:"javascript",json:!0});a.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});a.defineMIME("text/typescript",{name:"javascript",typescript:!0});a.defineMIME("application/typescript",{name:"javascript",typescript:!0})});var COMPILED=!0,goog=goog||{};goog.global=this;
goog.exportPath_=function(a,c,b){a=a.split(".");b=b||goog.global;a[0]in b||!b.execScript||b.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===c?b=b[d]?b[d]:b[d]={}:b[d]=c};goog.define=function(a,c){var b=c;COMPILED||goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,a)&&(b=goog.global.CLOSURE_DEFINES[a]);goog.exportPath_(a,b)};goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;
goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a];for(var c=a;(c=c.substring(0,c.lastIndexOf(".")))&&!goog.getObjectByName(c);)goog.implicitNamespaces_[c]=!0}goog.exportPath_(a)};goog.setTestOnly=function(a){if(COMPILED&&!goog.DEBUG)throw a=a||"",Error("Importing test-only code into non-debug environment"+a?": "+a:".");};
COMPILED||(goog.isProvided_=function(a){return!goog.implicitNamespaces_[a]&&!!goog.getObjectByName(a)},goog.implicitNamespaces_={});goog.getObjectByName=function(a,c){for(var b=a.split("."),d=c||goog.global,e;e=b.shift();)if(goog.isDefAndNotNull(d[e]))d=d[e];else return null;return d};goog.globalize=function(a,c){var b=c||goog.global,d;for(d in a)b[d]=a[d]};
goog.addDependency=function(a,c,b){if(goog.DEPENDENCIES_ENABLED){var d;a=a.replace(/\\/g,"/");for(var e=goog.dependencies_,f=0;d=c[f];f++)e.nameToPath[d]=a,a in e.pathToNames||(e.pathToNames[a]={}),e.pathToNames[a][d]=!0;for(d=0;c=b[d];d++)a in e.requires||(e.requires[a]={}),e.requires[a][c]=!0}};goog.ENABLE_DEBUG_LOADER=!0;
goog.require=function(a){if(!COMPILED&&!goog.isProvided_(a)){if(goog.ENABLE_DEBUG_LOADER){var c=goog.getPathFromDeps_(a);if(c){goog.included_[c]=!0;goog.writeScripts_();return}}a="goog.require could not find: "+a;goog.global.console&&goog.global.console.error(a);throw Error(a);}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(a,c){return a};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;
goog.DEPENDENCIES_ENABLED&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return"undefined"!=typeof a&&"write"in a},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("script"),c=a.length-1;0<=c;--c){var b=a[c].src,d=b.lastIndexOf("?"),d=-1==d?b.length:
d;if("base.js"==b.substr(d-7,7)){goog.basePath=b.substr(0,d-7);break}}},goog.importScript_=function(a){var c=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[a]&&c(a)&&(goog.dependencies_.written[a]=!0)},goog.writeScriptTag_=function(a){if(goog.inHtmlDocument_()){var c=goog.global.document;if("complete"==c.readyState){if(/\bdeps.js$/.test(a))return!1;throw Error('Cannot write "'+a+'" after document load');}c.write('<script type="text/javascript" src="'+a+'">\x3c/script>');
return!0}return!1},goog.writeScripts_=function(){function a(e){if(!(e in d.written)){if(!(e in d.visited)&&(d.visited[e]=!0,e in d.requires))for(var g in d.requires[e])if(!goog.isProvided_(g))if(g in d.nameToPath)a(d.nameToPath[g]);else throw Error("Undefined nameToPath for "+g);e in b||(b[e]=!0,c.push(e))}}var c=[],b={},d=goog.dependencies_,e;for(e in goog.included_)d.written[e]||a(e);for(e=0;e<c.length;e++)if(c[e])goog.importScript_(goog.basePath+c[e]);else throw Error("Undefined script input");
},goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));
goog.typeOf=function(a){var c=typeof a;if("object"==c)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return c;var b=Object.prototype.toString.call(a);if("[object Window]"==b)return"object";if("[object Array]"==b||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==b||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==c&&"undefined"==typeof a.call)return"object";return c};goog.isDef=function(a){return void 0!==a};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var c=goog.typeOf(a);return"array"==c||"object"==c&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isString=function(a){return"string"==typeof a};
goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};goog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){var c=typeof a;return"object"==c&&null!=a||"function"==c};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(a){return!!a[goog.UID_PROPERTY_]};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(c){}};
goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var c=goog.typeOf(a);if("object"==c||"array"==c){if(a.clone)return a.clone();var c="array"==c?[]:{},b;for(b in a)c[b]=goog.cloneObject(a[b]);return c}return a};goog.bindNative_=function(a,c,b){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,c,b){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(b,d);return a.apply(c,b)}}return function(){return a.apply(c,arguments)}};goog.bind=function(a,c,b){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,c){var b=Array.prototype.slice.call(arguments,1);return function(){var c=b.slice();c.push.apply(c,arguments);return a.apply(this,c)}};goog.mixin=function(a,c){for(var b in c)a[b]=c[b]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval)if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(a);else{var c=goog.global.document,b=c.createElement("script");b.type="text/javascript";b.defer=!1;b.appendChild(c.createTextNode(a));c.body.appendChild(b);
c.body.removeChild(b)}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,c){var b=function(a){return goog.cssNameMapping_[a]||a},d=function(a){a=a.split("-");for(var c=[],d=0;d<a.length;d++)c.push(b(a[d]));return c.join("-")},d=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?b:d:function(a){return a};return c?a+"-"+d(c):d(a)};goog.setCssNameMapping=function(a,c){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=c};
!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,c){var b=c||{},d;for(d in b){var e=(""+b[d]).replace(/\$/g,"$$$$");a=a.replace(new RegExp("\\{\\$"+d+"\\}","gi"),e)}return a};goog.getMsgWithFallback=function(a,c){return a};goog.exportSymbol=function(a,c,b){goog.exportPath_(a,c,b)};goog.exportProperty=function(a,c,b){a[c]=b};
goog.inherits=function(a,c){function b(){}b.prototype=c.prototype;a.superClass_=c.prototype;a.prototype=new b;a.prototype.constructor=a};
goog.base=function(a,c,b){var d=arguments.callee.caller;if(goog.DEBUG&&!d)throw Error("arguments.caller not defined.  goog.base() expects not to be running in strict mode. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(d.superClass_)return d.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var e=Array.prototype.slice.call(arguments,2),f=!1,g=a.constructor;g;g=g.superClass_&&g.superClass_.constructor)if(g.prototype[c]===d)f=!0;else if(f)return g.prototype[c].apply(a,
e);if(a[c]===d)return a.constructor.prototype[c].apply(a,e);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(a){a.call(goog.global)};goog.structs={};goog.structs.Collection=function(){};var epiviz={deferred:{}};epiviz.deferred.Deferred=function(a){this._deferred=a||$.Deferred()};epiviz.deferred.Deferred.State={PENDING:"pending",RESOLVED:"resolved",REJECTED:"rejected"};
epiviz.deferred.Deferred.prototype.then=function(a,c,b){return new epiviz.deferred.Promise(this._deferred.then(a,c,b))};epiviz.deferred.Deferred.prototype.done=function(a,c){return new epiviz.deferred.Deferred(this._deferred.done(a,c))};epiviz.deferred.Deferred.prototype.fail=function(a,c){return new epiviz.deferred.Deferred(this._deferred.fail(a,c))};epiviz.deferred.Deferred.prototype.always=function(a,c){return new epiviz.deferred.Deferred(this._deferred.always(a,c))};
epiviz.deferred.Deferred.prototype.state=function(){return this._deferred.state()};epiviz.deferred.Deferred.prototype.notify=function(a){return new epiviz.deferred.Deferred(this._deferred.notify(a))};epiviz.deferred.Deferred.prototype.notifyWith=function(a,c){return new epiviz.deferred.Deferred(this._deferred.notifyWith(a,c))};epiviz.deferred.Deferred.prototype.progress=function(a,c){return new epiviz.deferred.Deferred(this._deferred.progress(a,c))};epiviz.deferred.Deferred.prototype.promise=function(a){return new epiviz.deferred.Promise(this._deferred.promise(a))};
epiviz.deferred.Deferred.prototype.reject=function(a){return new epiviz.deferred.Deferred(this._deferred.reject(a))};epiviz.deferred.Deferred.prototype.rejectWith=function(a,c){return new epiviz.deferred.Deferred(this._deferred.rejectWith(a,c))};epiviz.deferred.Deferred.prototype.resolve=function(a){return new epiviz.deferred.Deferred(this._deferred.resolve(a))};epiviz.deferred.Deferred.prototype.resolveWith=function(a,c){return new epiviz.deferred.Deferred(this._deferred.resolveWith(a,c))};
epiviz.deferred.Promise=function(a){this._promise=a};epiviz.deferred.Promise.prototype.then=function(a,c,b){return new epiviz.deferred.Promise(this._promise.then(a,c,b))};epiviz.deferred.Promise.prototype.done=function(a,c){return new epiviz.deferred.Deferred(this._promise.done(a,c))};epiviz.deferred.Promise.prototype.fail=function(a,c){return new epiviz.deferred.Deferred(this._promise.fail(a,c))};
epiviz.deferred.Promise.prototype.always=function(a,c){return new epiviz.deferred.Deferred(this._promise.always(a,c))};epiviz.deferred.Promise.prototype.state=function(){return this._promise.state()};epiviz.utils={};epiviz.utils.capitalizeFirstLetter=function(a){return a.charAt(0).toUpperCase()+a.slice(1)};epiviz.utils.stringContains=function(a,c){return-1!=a.indexOf(c)};epiviz.utils.stringStartsWith=function(a,c){return 0==a.indexOf(c)};
epiviz.utils.stringEndsWith=function(a,c){return a.lastIndexOf(c)==a.length-c.length};epiviz.utils.fillArray=function(a,c){a=a||0;for(var b=Array(a),d=0;d<a;++d)b[d]=c;return b};epiviz.utils.indexOf=function(a,c){for(var b=0;b<a.length;++b)if(c(a[b]))return b;return-1};epiviz.utils.arraysEqual=function(a,c){if(a==c)return!0;if(!a||!c||a.length!=c.length||a<c||c<a)return!1;for(var b=0;b<a.length;++b)if(a[b]!=c[b])return!1;return!0};
epiviz.utils.elementsEqual=function(a,c){if(a==c)return!0;if(!a||!c||a.length!=c.length)return!1;var b={},d;for(d=0;d<a.length;++d)a[d]in b||(b[a[d]]=0),++b[a[d]];for(d=0;d<c.length;++d){if(!b[c[d]])return!1;--b[c[d]]}return!0};epiviz.utils.range=function(a,c){c=c||0;a=a||0;for(var b=Array(a),d=0;d<a;++d)b[d]=d+c;return b};epiviz.utils.arrayAppend=function(a,c){a.push.apply(a,c)};epiviz.utils.arrayFlip=function(a){for(var c={},b=0;b<a.length;++b)c[a[b]]=b;return c};
epiviz.utils.indexOfMin=function(a,c){for(var b=null,d=null,e=0;e<a.length;++e)for(var f=c?e+1:0;f<a[e].length;++f)if(null==d||a[e][f]<d)d=a[e][f],b=[e,f];return{min:d,index:b}};epiviz.utils.arrayIntersection=function(a,c){var b={};a.forEach(function(a){b[a]=a});var d=[];c.forEach(function(a){a in b&&d.push(a)});return d};epiviz.utils.asyncFor=function(a,c,b){if(a){var d=function(e){e>=a?b&&b():c(e,function(a){a?b&&b():d(e+1)})};d(0)}else b&&b()};
epiviz.utils.deferredFor=function(a,c){var b=function(c,e){var f=new epiviz.deferred.Deferred;c>=a?f.resolve():e(c).then(function(){0!=c%1E3?b(c+1,e).done(function(){f.resolve()}):setTimeout(function(){b(c+1,e).done(function(){f.resolve()})},0)},function(){f.resolve()});return f};return b(0,c)};epiviz.utils.mapCopy=function(a){var c={},b;for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c};
epiviz.utils.mapEquals=function(a,c){if(a==c)return!0;if(!a||!c)return!1;for(var b in a)if(a.hasOwnProperty(b)&&(!c.hasOwnProperty(b)||a[b]!=c[b]))return!1;for(b in c)if(c.hasOwnProperty(b)&&!a.hasOwnProperty(b))return!1;return!0};epiviz.utils.mapCombine=function(a,c,b){var d={},e;if(c)for(e in c)c.hasOwnProperty(e)&&(d[e]=c[e]);if(a)for(e in a)a.hasOwnProperty(e)&&(b&&d[e]&&$.isArray(d[e])&&a[e]&&$.isArray(a[e])?d[e]=d[e].concat(a[e]):d[e]=a[e]);return d};
epiviz.utils.mapJoin=function(a,c,b){c||""===c||(c=":");b||""===b||(b=",");var d="",e;for(e in a)a.hasOwnProperty(e)&&(d&&(d+=b),d+=e+c+a[e]);return d};epiviz.utils.mapKeyIntersection=function(a,c){var b=[];if(!a||!c)return b;for(var d in a)a.hasOwnProperty(d)&&d in c&&b.push(d);return b};
epiviz.utils.evaluateFullyQualifiedTypeName=function(a){try{for(var c=a.split("."),b=c.pop(),d=window,e=0;e<c.length;++e)d=d[c[e]];var f=d[b];return"function"!==typeof f?(console.error("Unknown type name: "+a),null):f}catch(g){return console.error("Unknown type name: "+a),null}};epiviz.utils.applyConstructor=function(a,c){var b;b=function(){};b.prototype=a.prototype;b=new b;b.constructor=a;a.apply(b,c);return b};epiviz.utils.RAD_TO_DEG=180/Math.PI;epiviz.utils.DEG_TO_RAD=Math.PI/180;
epiviz.utils.getInternetExplorerVersion=function(){var a=-1;if("Microsoft Internet Explorer"==navigator.appName){var c=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent);null!=c&&(a=parseFloat(c[1]))}return a};epiviz.utils.generatePseudoGUID=function(a){for(var c="",b=0;b<a;++b)c+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.round(61*Math.random())];return c};epiviz.utils.colorize=function(a,c,b,d,e,f){return d3.scale.linear().domain([a,b,c]).range([d,f,e])};
epiviz.utils.colorizeBinary=function(a,c,b,d){return d3.scale.linear().domain([a,c]).range([b,d])};epiviz.utils.sign=function(a){return 0>a?-1:0==a?0:1};epiviz.caja={};epiviz.caja.cajole=function(a,c){var b=new epiviz.deferred.Deferred;caja.load(void 0,void 0,function(d){d.code(void 0,"application/javascript","return ("+a+");").api(c?c:{}).run(function(a){b.resolve(a)})});return b};
epiviz.caja.run=function(a,c){var b=new epiviz.deferred.Deferred;caja.load(void 0,void 0,function(d){d.code(a,"application/javascript",void 0).api(c?c:{}).run(function(){b.resolve()})});return b};epiviz.caja.chain=function(a,c){$.isArray(c)||(c=epiviz.utils.fillArray(a.length,c));return epiviz.utils.deferredFor(a.length,function(b){return epiviz.caja.run(a[b],c[b])})};
epiviz.caja.buildChartMethodContext=function(){return{epiviz:{ui:{charts:epiviz.ui.charts,controls:epiviz.ui.controls},utils:epiviz.utils,plugins:epiviz.plugins,measurements:epiviz.measurements,events:epiviz.events,deferred:epiviz.deferred,datatypes:epiviz.datatypes,data:{DataProvider:epiviz.data.DataProvider,Request:epiviz.data.Request,Response:epiviz.data.Response,WebServerDataProvider:{makeGetRequest:epiviz.data.WebServerDataProvider.makeGetRequest}},Config:epiviz.Config},d3:d3,$:$,sprintf:sprintf,
goog:goog}};Array.indexOf||(Array.prototype.indexOf=function(a,c){for(var b=c||0;b<this.length;b++)if(this[b]===a)return b;return-1});
epiviz.utils.ExpressionParser=function(a){function c(a){function b(){}b.prototype=a;return new b}function b(a,b,c,d){this.type_=a;this.index_=b||0;this.prio_=c||0;this.number_=void 0!==d&&null!==d?d:0;this.toString=function(){switch(this.type_){case 0:return this.number_;case 1:case 2:case 3:return this.index_;case 4:return"CALL";default:return"Invalid Token"}}}function d(a,b,c,d){this.tokens=a;this.ops1=b;this.ops2=c;this.functions=d}function e(a){return"string"===typeof a?(H.lastIndex=0,H.test(a)?
"'"+a.replace(H,function(a){var b=I[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+"'":"'"+a+"'"):a}function f(a,b){return Number(a)+Number(b)}function g(a,b){return a-b}function h(a,b){return a*b}function l(a,b){return a/b}function m(a,b){return a%b}function n(a,b){return""+a+b}function q(a){return-a}function t(a){return Math.random()*(a||1)}function x(a){for(var b=a=Math.floor(a);1<a;)b*=--a;return b}function u(a,b){return Math.sqrt(a*a+b*b)}function E(a,
b){if("[object Array]"!=Object.prototype.toString.call(a))return[a,b];a=a.slice();a.push(b);return a}function A(){this.success=!1;this.expression=this.errormsg="";this.tmpprio=this.tokenindex=this.tokenprio=this.tokennumber=this.pos=0;this.ops1={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sqrt:Math.sqrt,log:Math.log,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,"-":q,exp:Math.exp};this.ops2={"+":f,"-":g,"*":h,"/":l,"%":m,"^":Math.pow,",":E,"||":n};
this.functions={random:t,fac:x,min:Math.min,max:Math.max,pyt:u,pow:Math.pow,atan2:Math.atan2};this.consts={E:Math.E,PI:Math.PI}}var H=/[\\\'\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,I={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"};d.prototype={simplify:function(a){a=a||{};for(var e=[],f=[],g,h,l,m=this.tokens.length,n=0,n=0;n<m;n++)if(l=this.tokens[n],g=l.type_,0===g)e.push(l);else if(3===g&&
l.index_ in a)l=new b(0,0,0,a[l.index_]),e.push(l);else if(2===g&&1<e.length)h=e.pop(),g=e.pop(),l=this.ops2[l.index_],l=new b(0,0,0,l(g.number_,h.number_)),e.push(l);else if(1===g&&0<e.length)g=e.pop(),l=this.ops1[l.index_],l=new b(0,0,0,l(g.number_)),e.push(l);else{for(;0<e.length;)f.push(e.shift());f.push(l)}for(;0<e.length;)f.push(e.shift());return new d(f,c(this.ops1),c(this.ops2),c(this.functions))},substitute:function(a,e){e instanceof d||(e=(new A).parse(String(e)));for(var f=[],g=this.tokens.length,
h,l=0,l=0;l<g;l++)if(h=this.tokens[l],3===h.type_&&h.index_===a)for(h=0;h<e.tokens.length;h++){var m=e.tokens[h],m=new b(m.type_,m.index_,m.prio_,m.number_);f.push(m)}else f.push(h);return new d(f,c(this.ops1),c(this.ops2),c(this.functions))},evaluate:function(a){a=a||{};for(var b=[],c,d,e,f=this.tokens.length,g=0,g=0;g<f;g++)if(e=this.tokens[g],c=e.type_,0===c)b.push(e.number_);else if(2===c)d=b.pop(),c=b.pop(),e=this.ops2[e.index_],b.push(e(c,d));else if(3===c)if(e.index_ in a)b.push(a[e.index_]);
else if(e.index_ in this.functions)b.push(this.functions[e.index_]);else throw Error("undefined variable: "+e.index_);else if(1===c)c=b.pop(),e=this.ops1[e.index_],b.push(e(c));else if(4===c)if(c=b.pop(),e=b.pop(),e.apply&&e.call)"[object Array]"==Object.prototype.toString.call(c)?b.push(e.apply(void 0,c)):b.push(e.call(void 0,c));else throw Error(e+" is not a function");else throw Error("invalid Expression");if(1<b.length)throw Error("invalid Expression (parity)");return b[0]},evaluateArr:function(a){for(var b=
[],c=!1;!c;){var d={},e;for(e in a)if(a.hasOwnProperty(e)){if(b.length>=a[e].length){c=!0;break}d[e]=a[e][b.length]}c||b.push(this.evaluate(d))}return b},toString:function(a){for(var b=[],c,d,f,g=this.tokens.length,h=0,h=0;h<g;h++)if(f=this.tokens[h],c=f.type_,0===c)b.push(e(f.number_));else if(2===c)d=b.pop(),c=b.pop(),f=f.index_,a&&"^"==f?b.push("Math.pow("+c+","+d+")"):b.push("("+c+f+d+")");else if(3===c)b.push(f.index_);else if(1===c)c=b.pop(),f=f.index_,"-"===f?b.push("("+f+c+")"):b.push(f+"("+
c+")");else if(4===c)c=b.pop(),f=b.pop(),b.push(f+"("+c+")");else throw Error("invalid Expression");if(1<b.length)throw Error("invalid Expression (parity)");return b[0]},variables:function(){for(var a=this.tokens.length,b=[],c=0;c<a;c++){var d=this.tokens[c];3===d.type_&&-1==b.indexOf(d.index_)&&b.push(d.index_)}return b},toJSFunction:function(a,b){return new Function(a,"with(Parser.values) { return "+this.simplify(b).toString(!0)+"; }")}};A.parse=function(a){return(new A).parse(a)};A.evaluate=function(a,
b){return A.parse(a).evaluate(b)};A.Expression=d;A.values={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sqrt:Math.sqrt,log:Math.log,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,random:t,fac:x,exp:Math.exp,min:Math.min,max:Math.max,pyt:u,pow:Math.pow,atan2:Math.atan2,E:Math.E,PI:Math.PI};A.prototype={parse:function(a){this.errormsg="";this.success=!0;var e=[],f=[];this.tmpprio=0;var g=77,h=0;this.expression=a;for(this.pos=0;this.pos<this.expression.length;)this.isOperator()?
this.isSign()&&g&64?(this.isNegativeSign()&&(this.tokenprio=2,this.tokenindex="-",h++,this.addfunc(f,e,1)),g=77):this.isComment()||(0===(g&2)&&this.error_parsing(this.pos,"unexpected operator"),h+=2,this.addfunc(f,e,2),g=77):this.isNumber()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected number"),a=new b(0,0,0,this.tokennumber),f.push(a),g=50):this.isString()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected string"),a=new b(0,0,0,this.tokennumber),f.push(a),g=50):this.isLeftParenth()?(0===
(g&8)&&this.error_parsing(this.pos,'unexpected "("'),g&128&&(h+=2,this.tokenprio=-2,this.tokenindex=-1,this.addfunc(f,e,4)),g=333):this.isRightParenth()?(g&256?(a=new b(0,0,0,[]),f.push(a)):0===(g&16)&&this.error_parsing(this.pos,'unexpected ")"'),g=186):this.isComma()?(0===(g&32)&&this.error_parsing(this.pos,'unexpected ","'),this.addfunc(f,e,2),h+=2,g=77):this.isConst()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected constant"),a=new b(0,0,0,this.tokennumber),f.push(a),g=50):this.isOp2()?(0===
(g&4)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(f,e,2),h+=2,g=8):this.isOp1()?(0===(g&4)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(f,e,1),h++,g=8):this.isVar()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected variable"),a=new b(3,this.tokenindex,0,0),f.push(a),g=186):this.isWhite()||(""===this.errormsg?this.error_parsing(this.pos,"unknown character"):this.error_parsing(this.pos,this.errormsg));for((0>this.tmpprio||10<=this.tmpprio)&&this.error_parsing(this.pos,
'unmatched "()"');0<e.length;)a=e.pop(),f.push(a);h+1!==f.length&&this.error_parsing(this.pos,"parity");return new d(f,c(this.ops1),c(this.ops2),c(this.functions))},evaluate:function(a,b){return this.parse(a).evaluate(b)},error_parsing:function(a,b){this.success=!1;this.errormsg="parse error [column "+a+"]: "+b;throw Error(this.errormsg);},addfunc:function(a,c,d){for(d=new b(d,this.tokenindex,this.tokenprio+this.tmpprio,0);0<c.length;)if(d.prio_<=c[c.length-1].prio_)a.push(c.pop());else break;c.push(d)},
isNumber:function(){for(var a=!1,b="";this.pos<this.expression.length;){var c=this.expression.charCodeAt(this.pos);if(48<=c&&57>=c||46===c)b+=this.expression.charAt(this.pos),this.pos++,this.tokennumber=parseFloat(b),a=!0;else break}return a},unescape:function(a,b){for(var c=[],d=!1,e=0;e<a.length;e++){var f=a.charAt(e);if(d){switch(f){case "'":c.push("'");break;case "\\":c.push("\\");break;case "/":c.push("/");break;case "b":c.push("\b");break;case "f":c.push("\f");break;case "n":c.push("\n");break;
case "r":c.push("\r");break;case "t":c.push("\t");break;case "u":d=parseInt(a.substring(e+1,e+5),16);c.push(String.fromCharCode(d));e+=4;break;default:throw this.error_parsing(b+e,"Illegal escape sequence: '\\"+f+"'");}d=!1}else"\\"==f?d=!0:c.push(f)}return c.join("")},isString:function(){var a=!1,b="",c=this.pos;if(this.pos<this.expression.length&&"'"==this.expression.charAt(this.pos))for(this.pos++;this.pos<this.expression.length;)if("'"!=this.expression.charAt(this.pos)||"\\"==b.slice(-1))b+=this.expression.charAt(this.pos),
this.pos++;else{this.pos++;this.tokennumber=this.unescape(b,c);a=!0;break}return a},isConst:function(){var a,b;for(b in this.consts){var c=b.length;a=this.expression.substr(this.pos,c);if(b===a)return this.tokennumber=this.consts[b],this.pos+=c,!0}return!1},isOperator:function(){var a=this.expression.charCodeAt(this.pos);if(43===a)this.tokenprio=0,this.tokenindex="+";else if(45===a)this.tokenprio=0,this.tokenindex="-";else if(124===a)if(124===this.expression.charCodeAt(this.pos+1))this.pos++,this.tokenprio=
0,this.tokenindex="||";else return!1;else if(42===a)this.tokenprio=1,this.tokenindex="*";else if(47===a)this.tokenprio=2,this.tokenindex="/";else if(37===a)this.tokenprio=2,this.tokenindex="%";else if(94===a)this.tokenprio=3,this.tokenindex="^";else return!1;this.pos++;return!0},isSign:function(){var a=this.expression.charCodeAt(this.pos-1);return 45===a||43===a?!0:!1},isPositiveSign:function(){return 43===this.expression.charCodeAt(this.pos-1)?!0:!1},isNegativeSign:function(){return 45===this.expression.charCodeAt(this.pos-
1)?!0:!1},isLeftParenth:function(){return 40===this.expression.charCodeAt(this.pos)?(this.pos++,this.tmpprio+=10,!0):!1},isRightParenth:function(){return 41===this.expression.charCodeAt(this.pos)?(this.pos++,this.tmpprio-=10,!0):!1},isComma:function(){return 44===this.expression.charCodeAt(this.pos)?(this.pos++,this.tokenprio=-1,this.tokenindex=",",!0):!1},isWhite:function(){var a=this.expression.charCodeAt(this.pos);return 32===a||9===a||10===a||13===a?(this.pos++,!0):!1},isOp1:function(){for(var a=
"",b=this.pos;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!=c&&("0">c||"9"<c)))break;a+=c}return 0<a.length&&a in this.ops1?(this.tokenindex=a,this.tokenprio=5,this.pos+=a.length,!0):!1},isOp2:function(){for(var a="",b=this.pos;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!=c&&("0">c||"9"<c)))break;a+=c}return 0<a.length&&a in this.ops2?(this.tokenindex=
a,this.tokenprio=5,this.pos+=a.length,!0):!1},isVar:function(){for(var a="",b=this.pos;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!=c&&("0">c||"9"<c)))break;a+=c}b=this.pos;c=this.expression.indexOf("}",this.pos);"{"==this.expression.charAt(b)&&c>b&&(a=this.expression.substring(b,c+1));return 0<a.length?(this.tokenindex=a,this.tokenprio=4,this.pos+=a.length,!0):!1},isComment:function(){return 47===this.expression.charCodeAt(this.pos-
1)&&42===this.expression.charCodeAt(this.pos)?(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0):!1}};return a.Parser=A}("undefined"===typeof exports?{}:exports);epiviz.utils.Iterable=function(){};epiviz.utils.Iterable.prototype.foreach=function(a){};epiviz.utils.IterableArray=function(a){this._array=a};epiviz.utils.IterableArray.prototype.foreach=function(a){for(var c=0;c<this._array.length&&!a(this._array[c]);++c);};
epiviz.Config=function(a){this.workspacesDataProvider=this.dataProviders=this.defaultWorkspaceSettings=this.navigationDelay=this.navigationStepRatio=this.zoomoutRatio=this.zoominRatio=this.chartSaverLocation=this.dataServerLocation=null;this.cacheUpdateIntervalMilliseconds=3E4;this.colorPalettesMap=this.colorPalettes=this.clustering=this.chartCustomSettings=this.chartSettings=this.chartTypes=this.maxSearchResults=null;if(a){for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);if((a=epiviz.ui.WebArgsManager.WEB_ARGS["websocket-host"])&&
a.length)for(c=0;c<a.length;++c)this.dataProviders.push(sprintf("epiviz.data.WebsocketDataProvider,%s,%s",epiviz.data.WebsocketDataProvider.DEFAULT_ID+"-"+c,a[c]))}var b={};this.colorPalettes.forEach(function(a){b[a.id()]=a});this.colorPalettesMap=b};epiviz.Config.SETTINGS={};epiviz.Config.DEFAULT_DATA_PROVIDER_ID="umd";epiviz.Config.DEFAULT_WORKSPACE_NAME="Default Workspace";epiviz.Config.EPIVIZ_V1_COLORS="#025167 #e7003e #ffcd00 #057d9f #970026 #ffe373 #ff8100".split(" ");
epiviz.Config.COLORS_BRIGHT="#1859a9 #ed2d2e #008c47 #010101 #f37d22 #662c91 #a11d20 #b33893".split(" ");epiviz.Config.COLORS_LIGHT="#b8d2eb #f2aeac #d8e4aa #cccccc #f2d1b0 #d4b2d3 #ddb8a9 #ebbfd9".split(" ");epiviz.Config.COLORS_MEDIUM="#599ad3 #f1595f #79c36a #727272 #f9a65a #9e66ab #cd7058 #d77fb3".split(" ");epiviz.Config.COLORS_D3_CAT10="#1f77b4 #ff7f0e #2ca02c #d62728 #9467bd #8c564b #e377c2 #7f7f7f #bcbd22 #17becf".split(" ");epiviz.Config.COLORS_D3_CAT20="#1f77b4 #aec7e8 #ff7f0e #ffbb78 #2ca02c #98df8a #d62728 #ff9896 #9467bd #c5b0d5 #8c564b #c49c94 #e377c2 #f7b6d2 #7f7f7f #c7c7c7 #bcbd22 #dbdb8d #17becf #9edae5".split(" ");
epiviz.Config.COLORS_D3_CAT20B="#393b79 #5254a3 #6b6ecf #9c9ede #637939 #8ca252 #b5cf6b #cedb9c #8c6d31 #bd9e39 #e7ba52 #e7cb94 #843c39 #ad494a #d6616b #e7969c #7b4173 #a55194 #ce6dbd #de9ed6".split(" ");epiviz.Config.COLORS_D3_CAT20C="#3182bd #6baed6 #9ecae1 #c6dbef #e6550d #fd8d3c #fdae6b #fdd0a2 #31a354 #74c476 #a1d99b #c7e9c0 #756bb1 #9e9ac8 #bcbddc #dadaeb #636363 #969696 #bdbdbd #d9d9d9".split(" ");
epiviz.Config.VisualizationPropertySettings={WIDTH:"width",HEIGHT:"height",MARGINS:"margins",COLORS:"colors",DECORATIONS:"decorations"};epiviz.events={};epiviz.events.EventListener=function(a){this._id=epiviz.events.EventListener._nextId++;this._updateCallback=a};epiviz.events.EventListener._nextId=0;epiviz.events.EventListener.prototype.update=function(a){this._updateCallback(a)};epiviz.events.EventListener.prototype.id=function(){return this._id};
epiviz.events.Event=function(){this._count=0;this._listeners={};this._firing=!1};epiviz.events.Event.prototype.addListener=function(a){this._listeners[a.id()]||++this._count;this._listeners[a.id()]=a};epiviz.events.Event.prototype.removeListener=function(a){this._listeners[a.id()]&&(delete this._listeners[a.id()],--this._count)};
epiviz.events.Event.prototype.notify=function(a){if(!this._firing&&0!=this._count){this._firing=!0;for(var c in this._listeners)this._listeners.hasOwnProperty(c)&&this._listeners[c].update(a);this._firing=!1}};epiviz.events.Event.prototype.isFiring=function(){return this._firing};epiviz.events.EventResult=function(){this.value=this.errorMessage=this.success=null};epiviz.data={};epiviz.data.MessageType={REQUEST:"request",RESPONSE:"response"};
epiviz.data.Request=function(a,c,b){this._id=a;this._args=c;this._method=b};epiviz.data.Request.Method={GET:"get",POST:"post"};
epiviz.data.Request.Action={GET_ROWS:"getRows",GET_VALUES:"getValues",GET_MEASUREMENTS:"getMeasurements",SEARCH:"search",GET_SEQINFOS:"getSeqInfos",SAVE_WORKSPACE:"saveWorkspace",DELETE_WORKSPACE:"deleteWorkspace",GET_WORKSPACES:"getWorkspaces",GET_HIERARCHY:"getHierarchy",PROPAGATE_HIERARCHY_CHANGES:"propagateHierarchyChanges",ADD_MEASUREMENTS:"addMeasurements",REMOVE_MEASUREMENTS:"removeMeasurements",ADD_SEQINFOS:"addSeqInfos",REMOVE_SEQNAMES:"removeSeqNames",ADD_CHART:"addChart",REMOVE_CHART:"removeChart",
CLEAR_DATASOURCE_GROUP_CACHE:"clearDatasourceGroupCache",FLUSH_CACHE:"flushCache",NAVIGATE:"navigate",REDRAW:"redraw",GET_CURRENT_LOCATION:"getCurrentLocation",WRITE_DEBUG_MSG:"writeMsg"};epiviz.data.Request.createRequest=function(a,c){return new epiviz.data.Request(epiviz.data.Request._nextId++,a,c||epiviz.data.Request.Method.GET)};epiviz.data.Request.fromRawObject=function(a){return new epiviz.data.Request(a.requestId,a.data)};epiviz.data.Request._nextId=0;epiviz.data.Request.prototype.id=function(){return this._id};
epiviz.data.Request.prototype.type=function(){return epiviz.data.MessageType.REQUEST};epiviz.data.Request.prototype.method=function(){return this._method};epiviz.data.Request.prototype.joinArgs=function(a,c){a=a||"=";c=c||"&";var b=sprintf("requestId%s%s",a,this._id),d;for(d in this._args)if(this._args.hasOwnProperty(d))if(Array.isArray(this._args[d]))for(var e=0;e<this._args[d].length;++e)b+=sprintf("%s%s[]%s%s",c,d,a,this._args[d][e]);else b+=sprintf("%s%s%s%s",c,d,a,this._args[d]||"");return b};
epiviz.data.Request.prototype.isEmpty=function(){for(var a in this._args)if(this._args.hasOwnProperty(a))return!1;return!0};epiviz.data.Request.prototype.get=function(a){return a in this._args?this._args[a]:null};epiviz.data.Request.prototype.raw=function(){return{requestId:this._id,type:this.type(),data:epiviz.utils.mapCopy(this._args)}};epiviz.data.Request.emptyRequest=function(){return epiviz.data.Request.createRequest({})};
epiviz.data.Request.getRows=function(a,c){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_ROWS,datasource:a.id(),seqName:c?c.seqName():void 0,start:c?c.start():void 0,end:c?c.end():void 0,metadata:a.metadata()})};
epiviz.data.Request.getValues=function(a,c){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_VALUES,datasource:a.datasource().id(),measurement:a.id(),seqName:c?c.seqName():void 0,start:c?c.start():void 0,end:c?c.end():void 0})};epiviz.data.Request.getMeasurements=function(){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_MEASUREMENTS})};
epiviz.data.Request.search=function(a,c){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.SEARCH,q:a||"",maxResults:c})};epiviz.data.Request.getSeqInfos=function(){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_SEQINFOS})};
epiviz.data.Request.saveWorkspace=function(a,c){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.SAVE_WORKSPACE,id:a.id(),name:a.name(),content:encodeURIComponent(JSON.stringify(a.raw(c).content))},epiviz.data.Request.Method.POST)};epiviz.data.Request.deleteWorkspace=function(a){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.DELETE_WORKSPACE,id:a.id()},epiviz.data.Request.Method.POST)};
epiviz.data.Request.getWorkspaces=function(a,c){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_WORKSPACES,q:a||"",ws:c})};epiviz.data.Request.getHierarchy=function(a,c){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_HIERARCHY,datasourceGroup:a,nodeId:c})};
epiviz.data.Request.propagateHierarchyChanges=function(a,c,b){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.PROPAGATE_HIERARCHY_CHANGES,datasourceGroup:a,selection:c,order:b})};epiviz.data.RequestStack=function(){this._requests=[];this._callbacks={};this._dataMap={}};epiviz.data.RequestStack.prototype.pushRequest=function(a,c){this._requests.push(a);this._callbacks[a.id()]=c};
epiviz.data.RequestStack.prototype.serveData=function(a){if(this._callbacks[a.id()])if(0<this._requests.length&&this._requests[0].id()==a.id()){var c=this._callbacks[a.id()];delete this._callbacks[a.id()];this._requests=this._requests.slice(1);for(c(a.data());0<this._requests.length&&this._requests[0].id()in this._dataMap;)c=this._callbacks[this._requests[0].id()],a=this._dataMap[this._requests[0].id()],delete this._callbacks[this._requests[0].id()],delete this._dataMap[this._requests[0].id()],this._requests=
this._requests.slice(1),c(a)}else this._dataMap[a.id()]=a.data()};epiviz.data.RequestStack.prototype.clear=function(){this._requests=[];this._callbacks={};this._dataMap={}};epiviz.data.Response=function(a,c){this._id=a;this._data=c};epiviz.data.Response.prototype.id=function(){return this._id};epiviz.data.Response.prototype.data=function(){return this._data};epiviz.data.Response.prototype.type=function(){return epiviz.data.MessageType.RESPONSE};
epiviz.data.Response.prototype.raw=function(){return{requestId:this._id,type:this.type(),data:this._data}};epiviz.data.Response.fromRawObject=function(a){return new epiviz.data.Response(a.requestId,a.data)};epiviz.measurements={};
epiviz.measurements.Measurement=function(a,c,b,d,e,f,g,h,l,m,n,q){var t=epiviz.measurements.Measurement.Type;this._id=a;this._name=c;this._type=b;this._datasource=b==t.RANGE?this:new epiviz.measurements.Measurement(d,d,t.RANGE,d,e,f,null,"Blocks Track",null,null,null,q);this._datasourceGroup=e;this._dataprovider=f;this._formula=g||null;this._defaultChartType=h||null;this._annotation=l||null;this._minValue=m||0===m?m:null;this._maxValue=n||0===n?n:null;this._metadata=q||null};
epiviz.measurements.Measurement.Type={FEATURE:"feature",RANGE:"range",UNORDERED:"unordered"};epiviz.measurements.Measurement.Type.isOrdered=function(a){return a==epiviz.measurements.Measurement.Type.FEATURE||a==epiviz.measurements.Measurement.Type.RANGE};epiviz.measurements.Measurement.Type.hasValues=function(a){return a==epiviz.measurements.Measurement.Type.FEATURE||a==epiviz.measurements.Measurement.Type.UNORDERED};epiviz.measurements.Measurement.prototype.id=function(){return this._id};
epiviz.measurements.Measurement.prototype.name=function(){return this._name};epiviz.measurements.Measurement.prototype.type=function(){return this._type};epiviz.measurements.Measurement.prototype.datasource=function(){return this._datasource};epiviz.measurements.Measurement.prototype.datasourceId=function(){return this._datasource.id()};epiviz.measurements.Measurement.prototype.datasourceGroup=function(){return this._datasourceGroup};epiviz.measurements.Measurement.prototype.dataprovider=function(){return this._dataprovider};
epiviz.measurements.Measurement.prototype.formula=function(){return this._formula};epiviz.measurements.Measurement.prototype.formulaStr=function(){if(!this._formula)return"";var a=this._formula.referredMeasurements,c=this._formula.expression.toString(),b;for(b in a)a.hasOwnProperty(b)&&(c=c.replace(new RegExp("\\{"+b+"\\}","g")," {"+a[b].name()+"} "));return c};
epiviz.measurements.Measurement.prototype.evaluate=function(a){var c={},b;for(b in this._formula.referredMeasurements)if(this._formula.referredMeasurements.hasOwnProperty(b)){var d=this._formula.referredMeasurements[b];c["{"+b+"}"]=d.isComputed()?d.evaluate(a):a.get(d)}return this._formula.expression.evaluate(c)};
epiviz.measurements.Measurement.prototype.evaluateArr=function(a){var c={},b;for(b in this._formula.referredMeasurements)if(this._formula.referredMeasurements.hasOwnProperty(b)){var d=this._formula.referredMeasurements[b];c["{"+b+"}"]=d.isComputed()?d.evaluateArr(a):a.get(d)}return this._formula.expression.evaluateArr(c)};epiviz.measurements.Measurement.prototype.defaultChartType=function(){return this._defaultChartType};epiviz.measurements.Measurement.prototype.annotation=function(){return this._annotation};
epiviz.measurements.Measurement.prototype.minValue=function(){return this._minValue};epiviz.measurements.Measurement.prototype.maxValue=function(){return this._maxValue};epiviz.measurements.Measurement.prototype.metadata=function(){return this._metadata||[]};
epiviz.measurements.Measurement.prototype.componentMeasurements=function(){var a=new epiviz.measurements.MeasurementSet;if(!this._formula)return a.add(this),a;for(var c in this._formula.referredMeasurements)this._formula.referredMeasurements.hasOwnProperty(c)&&a.addAll(this._formula.referredMeasurements[c].componentMeasurements());return a};epiviz.measurements.Measurement.prototype.isComputed=function(){return this._formula?!0:!1};
epiviz.measurements.Measurement.prototype.raw=function(a){if(this._formula){var c=this._formula.referredMeasurements,b={},d;for(d in c)c.hasOwnProperty(d)&&(b[d]=a.get(c[d]))}return{id:this._id,name:this._name,type:this._type,datasourceId:this._datasource._id,datasourceGroup:this._datasourceGroup,dataprovider:this._dataprovider,formula:this._formula?{expression:this._formula.expression.toString(),referredMeasurements:b}:null,defaultChartType:this._defaultChartType,annotation:this._annotation,minValue:this._minValue,
maxValue:this._maxValue,metadata:this._metadata}};epiviz.measurements.Measurement.prototype.toString=function(){return this.name()};
epiviz.measurements.Measurement.fromRawObject=function(a,c){var b=null;if(a.formula){for(var b=epiviz.utils.ExpressionParser.parse(a.formula.expression),d={},e=b.variables(),f=0;f<e.length;++f)if(epiviz.utils.stringStartsWith(e[f],"{")&&epiviz.utils.stringEndsWith(e[f],"}")){var g=parseInt(e[f].substring(1,e[f].length-1));d[g]=c[a.formula.referredMeasurements[g]]}b={expression:b,referredMeasurements:d}}return new epiviz.measurements.Measurement(a.id,a.name,a.type,a.datasourceId,a.datasourceGroup,
a.dataprovider,b,a.defaultChartType,a.annotation,a.minValue,a.maxValue,a.metadata)};epiviz.measurements.MeasurementSet=function(a){this._measurementTree={};this._size=0;this._order=[];a&&this.addAll(a)};
epiviz.measurements.MeasurementSet.prototype.add=function(a){a.dataprovider()in this._measurementTree||(this._measurementTree[a.dataprovider()]={});a.type()in this._measurementTree[a.dataprovider()]||(this._measurementTree[a.dataprovider()][a.type()]={});a.datasourceGroup()in this._measurementTree[a.dataprovider()][a.type()]||(this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]={});a.datasource().id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]||(this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()]=
{});if(a.id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()])return!1;this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()]={measurement:a,index:this._order.length};this._order.push({measurement:a,contained:!0});++this._size;return!0};
epiviz.measurements.MeasurementSet.prototype.remove=function(a){if(!(a.dataprovider()in this._measurementTree&&a.type()in this._measurementTree[a.dataprovider()]&&a.datasourceGroup()in this._measurementTree[a.dataprovider()][a.type()]&&a.datasource().id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]&&a.id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()]))return!1;this._order[this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()].index].contained=
!1;delete this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()];--this._size;return!0};epiviz.measurements.MeasurementSet.prototype.addAll=function(a){if(!a||!a.size())return!1;var c=!1,b=this;a.foreach(function(a){b.add(a)&&(c=!0);return!1});return c};epiviz.measurements.MeasurementSet.prototype.removeAll=function(a){var c=!1,b=this;a.foreach(function(a){b.remove(a)&&(c=!0);return!1});return c};
epiviz.measurements.MeasurementSet.prototype.foreach=function(a,c){for(var b=this.iterator(),d=b.first(),e=0;null!==d&&(c&&!c(d)||!a(d,e));d=b.next(),++e);};epiviz.measurements.MeasurementSet.prototype.iterator=function(){return new epiviz.measurements.MeasurementSet.Iterator(this)};epiviz.measurements.MeasurementSet.prototype.subset=function(a){var c=new epiviz.measurements.MeasurementSet;this.foreach(function(a){c.add(a)},a);return c};
epiviz.measurements.MeasurementSet.prototype.map=function(a){var c=new epiviz.measurements.MeasurementSet;this.foreach(function(b){c.add(a(b))});return c};epiviz.measurements.MeasurementSet.prototype.size=function(){return this._size};
epiviz.measurements.MeasurementSet.prototype.contains=function(a){return a.dataprovider()in this._measurementTree&&a.type()in this._measurementTree[a.dataprovider()]&&a.datasourceGroup()in this._measurementTree[a.dataprovider()][a.type()]&&a.datasource().id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]?a.id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()]:!1};epiviz.measurements.MeasurementSet.prototype.first=function(){return this.iterator().first()};
epiviz.measurements.MeasurementSet.prototype.get=function(a){if(a>=this._size||0>a)return null;if(this._size==this._order.length)return this._order[a].measurement;var c=null;this.foreach(function(b,d){return d==a?(c=b,!0):!1});return c};epiviz.measurements.MeasurementSet.prototype.toArray=function(){var a=Array(this._size);this.foreach(function(c,b){a[b]=c});return a};
epiviz.measurements.MeasurementSet.prototype.sorted=function(a){a=this.toArray().sort(a);var c=new epiviz.measurements.MeasurementSet;a.forEach(function(a){c.add(a)});return c};epiviz.measurements.MeasurementSet.prototype.raw=function(){var a=Array(this._size);this.foreach(function(c,b){a[b]=c.raw()});return a};epiviz.measurements.MeasurementSet.Iterator=function(a){this._parent=a;this._lastIndex=null};
epiviz.measurements.MeasurementSet.Iterator.prototype.first=function(){if(0==this._parent.size())return null;for(var a=0;a<this._parent._order.length;++a)if(this._parent._order[a].contained)return this._lastIndex=a,this._parent._order[a].measurement;throw Error("Inconsistent MeasurementSet with size() > 0 and no first element");};
epiviz.measurements.MeasurementSet.Iterator.prototype.next=function(){if(null===this._lastIndex)throw Error("Iterator.next() called before calling Iterator.first()");for(var a=this._lastIndex+1;a<this._parent._order.length;++a)if(this._parent._order[a].contained)return this._lastIndex=a,this._parent._order[a].measurement;this._lastIndex=this._parent._order.length;return null};epiviz.measurements.MeasurementHashtable=function(){this._size=0;this._measurementTree={};this._order=[]};
epiviz.measurements.MeasurementHashtable.prototype.put=function(a,c){if(this.contains(a)){var b=this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()];this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()]={key:a,value:c,index:b.index};this._order[b.index]={key:a,value:c,contained:!0}}else a.dataprovider()in this._measurementTree||(this._measurementTree[a.dataprovider()]={}),a.type()in this._measurementTree[a.dataprovider()]||
(this._measurementTree[a.dataprovider()][a.type()]={}),a.datasourceGroup()in this._measurementTree[a.dataprovider()][a.type()]||(this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]={}),a.datasource().id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]||(this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()]={}),this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()]={key:a,
value:c,index:this._order.length},this._order.push({key:a,value:c,contained:!0}),++this._size};epiviz.measurements.MeasurementHashtable.prototype.get=function(a){return this.contains(a)?this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()].value:null};
epiviz.measurements.MeasurementHashtable.prototype.remove=function(a){if(!this.contains(a))return!1;var c=this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()];delete this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()];this._order[c.index].contained=!1;--this._size;return!0};
epiviz.measurements.MeasurementHashtable.prototype.contains=function(a){return a.dataprovider()in this._measurementTree&&a.type()in this._measurementTree[a.dataprovider()]&&a.datasourceGroup()in this._measurementTree[a.dataprovider()][a.type()]&&a.datasource().id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]?a.id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()]:!1};
epiviz.measurements.MeasurementHashtable.prototype.clear=function(){this._size=0;this._measurementTree={};this._order=[]};epiviz.measurements.MeasurementHashtable.prototype.isEmpty=function(){return 0==this._size};epiviz.measurements.MeasurementHashtable.prototype.size=function(){return this._size};epiviz.measurements.MeasurementHashtable.prototype.foreach=function(a,c){for(var b=this.iterator(),d=b.first(),e=0;null!==d&&(c&&!c(d.key)||!a(d.key,d.value,e));d=b.next(),++e);};
epiviz.measurements.MeasurementHashtable.prototype.first=function(){return this.iterator().first()};epiviz.measurements.MeasurementHashtable.prototype.sorted=function(a){var c=new epiviz.measurements.MeasurementHashtable,b=this._order.slice(0);b.sort(function(b,c){return a(b.key,c.key)});b.forEach(function(a){a.contained&&c.put(a.key,a.value)});return c};epiviz.measurements.MeasurementHashtable.prototype.keys=function(){var a=[];this._order.forEach(function(c){c.contained&&a.push(c.key)});return a};
epiviz.measurements.MeasurementHashtable.prototype.iterator=function(){return new epiviz.measurements.MeasurementHashtable.Iterator(this)};epiviz.measurements.MeasurementHashtable.Iterator=function(a){this._parent=a;this._lastIndex=null};
epiviz.measurements.MeasurementHashtable.Iterator.prototype.first=function(){if(0==this._parent.size())return null;for(var a=0;a<this._parent._order.length;++a)if(this._parent._order[a].contained)return this._lastIndex=a,{key:this._parent._order[a].key,value:this._parent._order[a].value};throw Error("Inconsistent MeasurementHashtable with size() > 0 and no first element");};
epiviz.measurements.MeasurementHashtable.Iterator.prototype.next=function(){if(null===this._lastIndex)throw Error("Iterator.next() called before calling Iterator.first()");for(var a=this._lastIndex+1;a<this._parent._order.length;++a)if(this._parent._order[a].contained)return this._lastIndex=a,{key:this._parent._order[a].key,value:this._parent._order[a].value};this._lastIndex=this._parent._order.length;return null};
epiviz.measurements.MeasurementsManager=function(){this._requestMeasurements=new epiviz.events.Event;this._measurementsAdded=new epiviz.events.Event;this._measurementsRemoved=new epiviz.events.Event;this._computedMeasurementsAdded=new epiviz.events.Event;this._computedMeasurementsRemoved=new epiviz.events.Event;this._measurements=new epiviz.measurements.MeasurementSet;this._computedMeasurements=new epiviz.measurements.MeasurementSet};epiviz.measurements.MeasurementsManager.prototype.initialize=function(){this._requestMeasurements.notify()};
epiviz.measurements.MeasurementsManager.prototype.onRequestMeasurements=function(){return this._requestMeasurements};epiviz.measurements.MeasurementsManager.prototype.onMeasurementsAdded=function(){return this._measurementsAdded};epiviz.measurements.MeasurementsManager.prototype.onMeasurementsRemoved=function(){return this._measurementsRemoved};epiviz.measurements.MeasurementsManager.prototype.onComputedMeasurementsAdded=function(){return this._computedMeasurementsAdded};
epiviz.measurements.MeasurementsManager.prototype.onComputedMeasurementsRemoved=function(){return this._computedMeasurementsRemoved};epiviz.measurements.MeasurementsManager.prototype.measurements=function(){return this._measurements};epiviz.measurements.MeasurementsManager.prototype.computedMeasurements=function(){return this._computedMeasurements};
epiviz.measurements.MeasurementsManager.prototype.addMeasurements=function(a){if(a&&a.size()){var c=this;this._measurements.addAll(a);var b=new epiviz.measurements.MeasurementSet;a.foreach(function(a){a.isComputed()&&(b.add(a),c._computedMeasurements.add(a))});this._measurementsAdded.notify(a);0<b.size()&&this._computedMeasurementsAdded.notify(b)}};
epiviz.measurements.MeasurementsManager.prototype.removeMeasurements=function(a){var c=this;this._measurements.removeAll(a);var b=new epiviz.measurements.MeasurementSet;a.foreach(function(a){a.isComputed()&&(b.add(a),c._computedMeasurements.remove(a))});this._measurementsRemoved.notify(a);0<b.size()&&this._computedMeasurementsRemoved.notify(b)};epiviz.measurements.MeasurementsManager.prototype.addMeasurement=function(a){var c=new epiviz.measurements.MeasurementSet;c.add(a);this.addMeasurements(c)};
epiviz.measurements.MeasurementsManager.prototype.removeMeasurement=function(a){var c=new epiviz.measurements.MeasurementSet;c.add(a);this.removeMeasurements(c)};
epiviz.data.DataProvider=function(a){this._id=a;this._requestAddSeqInfos=new epiviz.events.Event;this._requestRemoveSeqNames=new epiviz.events.Event;this._requestAddMeasurements=new epiviz.events.Event;this._requestRemoveMeasurements=new epiviz.events.Event;this._requestAddChart=new epiviz.events.Event;this._requestRemoveChart=new epiviz.events.Event;this._requestFlushCache=new epiviz.events.Event;this._requestClearDatasourceGroupCache=new epiviz.events.Event;this._requestNavigate=new epiviz.events.Event;
this._requestRedraw=new epiviz.events.Event;this._requestCurrentLocation=new epiviz.events.Event};epiviz.data.DataProvider.prototype.id=function(){return this._id};epiviz.data.DataProvider.prototype.getData=function(a,c){c(epiviz.data.Response.fromRawObject({requestId:a.id(),data:null}))};epiviz.data.DataProvider.prototype.onRequestAddSeqInfos=function(){return this._requestAddSeqInfos};epiviz.data.DataProvider.prototype.onRequestRemoveSeqNames=function(){return this._requestRemoveSeqNames};
epiviz.data.DataProvider.prototype.onRequestAddMeasurements=function(){return this._requestAddMeasurements};epiviz.data.DataProvider.prototype.onRequestRemoveMeasurements=function(){return this._requestRemoveMeasurements};epiviz.data.DataProvider.prototype.onRequestAddChart=function(){return this._requestAddChart};epiviz.data.DataProvider.prototype.onRequestRemoveChart=function(){return this._requestRemoveChart};epiviz.data.DataProvider.prototype.onRequestFlushCache=function(){return this._requestFlushCache};
epiviz.data.DataProvider.prototype.onRequestClearDatasourceGroupCache=function(){return this._requestClearDatasourceGroupCache};epiviz.data.DataProvider.prototype.onRequestNavigate=function(){return this._requestNavigate};epiviz.data.DataProvider.prototype.onRequestRedraw=function(){return this._requestRedraw};epiviz.data.DataProvider.prototype.onRequestCurrentLocation=function(){return this._requestCurrentLocation};
epiviz.data.DataProviderFactory=function(a){this._config=a;this._providers={};for(var c=this._size=0;c<this._config.dataProviders.length;++c){a=this._config.dataProviders[c].split(",");var b=epiviz.utils.evaluateFullyQualifiedTypeName(a[0]);b&&(a=epiviz.utils.applyConstructor(b,a.slice(1)),this._providers[a.id()]=a,++this._size)}a=new epiviz.data.EmptyResponseDataProvider;this._providers[a.id()]=a;++this._size;a=this._config.workspacesDataProvider.split(",");c=epiviz.utils.evaluateFullyQualifiedTypeName(a[0]);
this._workspacesDataProvider=epiviz.utils.applyConstructor(c,a.slice(1))};epiviz.data.DataProviderFactory.prototype.foreach=function(a){for(var c in this._providers)if(this._providers.hasOwnProperty(c)&&a(this._providers[c]))break};epiviz.data.DataProviderFactory.prototype.isEmpty=function(){return!this._size};epiviz.data.DataProviderFactory.prototype.size=function(){return this._size};epiviz.data.DataProviderFactory.prototype.get=function(a){return a in this._providers?this._providers[a]:null};
epiviz.data.DataProviderFactory.prototype.workspacesDataProvider=function(){return this._workspacesDataProvider};
epiviz.data.Cache=function(a,c){this._config=a;this._dataProviderFactory=c;this._data={};this._measurementRequestStackMap=new epiviz.measurements.MeasurementHashtable;this._measurementPendingRequestsMap=new epiviz.measurements.MeasurementHashtable;this._lastRequest=null;if(0<this._config.cacheUpdateIntervalMilliseconds){var b=this;this._intervalId=window.setTimeout(function(){b._clearUnneededData()},a.cacheUpdateIntervalMilliseconds)}};
epiviz.data.Cache.prototype.getData=function(a,c,b){var d=epiviz.measurements.Measurement.Type,e=this;this._lastRequest=epiviz.datatypes.GenomicRange.fromStartEnd(a.seqName(),a.start()-a.width(),a.end()+a.width());0<this._config.cacheUpdateIntervalMilliseconds&&(window.clearInterval(this._intervalId),this._intervalId=window.setTimeout(function(){e._clearUnneededData()},this._config.cacheUpdateIntervalMilliseconds));var f=this._extractComputedMeasurements(c);this._updateComputedMeasurementsData(f);
this._serveAvailableData(a,c,b);f=[a,epiviz.datatypes.GenomicRange.fromStartEnd(a.seqName(),Math.max(a.start()-a.width(),0),a.start()),new epiviz.datatypes.GenomicRange(a.seqName(),a.end(),a.width())];this._calcMeasurementNeededRanges(f,c).foreach(function(f,h){var l=e._measurementRequestStackMap.get(f);l||(l=new epiviz.data.RequestStack,e._measurementRequestStackMap.put(f,l));var m;if(0==h.length)m=epiviz.data.Request.emptyRequest(),l.pushRequest(m,function(){e._handleResponse(b,a,c,m,null,f,null)}),
l.serveData(new epiviz.data.Response(m.id(),{}));else for(var n=0;n<h.length;++n){m=f.type()==d.RANGE?epiviz.data.Request.getRows(f,h[n]):epiviz.data.Request.getValues(f,h[n]);(function(d,h){l.pushRequest(h,function(l){e._handleResponse(b,a,c,h,d,f,l)})})(h[n],m);var q=e._measurementPendingRequestsMap.get(f);q||(q={},e._measurementPendingRequestsMap.put(f,q));q[m.id()]=h[n];(e._dataProviderFactory.get(f.dataprovider())||e._dataProviderFactory.get(epiviz.data.EmptyResponseDataProvider.DEFAULT_ID)).getData(m,
function(a){l.serveData(a)})}})};
epiviz.data.Cache.prototype._handleResponse=function(a,c,b,d,e,f,g){e&&(e=f.type()==epiviz.measurements.Measurement.Type.RANGE?new epiviz.datatypes.GenomicRangeArray(f,e,g.globalStartIndex,g.values,g.useOffset):new epiviz.datatypes.FeatureValueArray(f,e,g.globalStartIndex,g.values),this._mergeData(f,e));e=this._extractComputedMeasurements(b);this._updateComputedMeasurementsData(e);(f=this._measurementPendingRequestsMap.get(f))&&delete f[d.id()];this._serveAvailableData(c,b,a)};
epiviz.data.Cache.prototype._serveAvailableData=function(a,c,b){var d=epiviz.measurements.Measurement.Type,e=this,f=[],g;for(g in c)if(c.hasOwnProperty(g)){var h=c[g],l=!0,m=new epiviz.measurements.MeasurementHashtable;(function(b){h.foreach(function(c){var f=e._data[c.datasourceGroup()];if(!f||!f.rowData()||c.type()==d.FEATURE&&!f.values(c))return l=!1,!0;var g=f.rowData(),f=c.type()==d.FEATURE?f.values(c):null,g=a.subtract(g.boundaries());if(g.length||f&&(g=a.subtract(f.boundaries()),g.length))return l=
!1,!0;b.put(c,new epiviz.datatypes.MeasurementGenomicDataWrapper(c,e._data[c.datasourceGroup()]));return!1})})(m);l&&(b(g,new epiviz.datatypes.MapGenomicData(m)),f.push(g))}for(b=0;b<f.length;++b)delete c[f[b]]};
epiviz.data.Cache.prototype._calcMeasurementNeededRanges=function(a,c){var b=epiviz.measurements.Measurement.Type,d=this,e=new epiviz.measurements.MeasurementHashtable,f;for(f in c)if(c.hasOwnProperty(f)){var g=new epiviz.measurements.MeasurementSet;(function(a){c[f].foreach(function(b){b.componentMeasurements().foreach(function(b){a.add(b);a.add(b.datasource())});b.isComputed()||a.add(b.datasource())})})(g);g.foreach(function(c){var f=null,f=d._data[c.datasourceGroup()];if(!f||c.type()==b.FEATURE&&
!f.values(c))f=a.slice(0);else{var g=c.type()==b.FEATURE?f.values(c):f.rowData();if(g)for(var f=[],g=g.boundaries(),n=0;n<a.length;++n)f=f.concat(a[n].subtract(g));else f=a.slice(0)}if(g=d._measurementPendingRequestsMap.get(c))for(n=0;n<f.length;++n)for(var q in g)if(g.hasOwnProperty(q)){var t=f[n].subtract(g[q]);Array.prototype.splice.apply(f,[n,1].concat(t));if(n>=f.length)break}e.put(c,f)})}return e};
epiviz.data.Cache.prototype._extractComputedMeasurements=function(a){var c=new epiviz.measurements.MeasurementSet,b;for(b in a)a.hasOwnProperty(b)&&a[b].foreach(function(a){a.isComputed()&&c.add(a)});return c};epiviz.data.Cache.prototype._mergeData=function(a,c){var b=epiviz.measurements.Measurement.Type,d=this._data[a.datasourceGroup()];d||(d=new epiviz.datatypes.PartialSummarizedExperiment,this._data[a.datasourceGroup()]=d);a.type()==b.RANGE?d.addRowData(c):d.addValues(c)};
epiviz.data.Cache.prototype._clearUnneededData=function(){if(this._lastRequest){console.log(sprintf("Clearing data outside of range [%7s%10s%10s]",this._lastRequest.seqName(),this._lastRequest.start(),this._lastRequest.end()));var a={},c;for(c in this._data)this._data.hasOwnProperty(c)&&(a[c]=this._data[c].trim(this._lastRequest));this._data=a}};
epiviz.data.Cache.prototype._updateComputedMeasurementsData=function(a){var c=this,b=epiviz.datatypes.GenomicRange;a.foreach(function(a){var e=c._data[a.datasourceGroup()];if(!e)return!1;var f=a.componentMeasurements(),g=null,h=null,l=null;f.foreach(function(a){a=e.values(a);if(!a||!a.boundaries())return l=h=g=null,!0;if(null===l)return g=a.globalStartIndex(),h=a.size(),l=a.boundaries(),null===g;if(a.boundaries().seqName()!=l.seqName())return h=0,!0;if(g<a.globalStartIndex()){h-=a.globalStartIndex()-
g;if(0>h)return h=0,!0;g=a.globalStartIndex();var c=a.boundaries().start(),d=l.end();h>a.size()&&(h=a.size(),d=a.boundaries().end());l=b.fromStartEnd(l.seqName(),c,d)}else if(c=a.size()-g+a.globalStartIndex(),h>c){h=c;if(0>=h)return h=0,!0;l=b.fromStartEnd(l.seqName(),l.start(),a.boundaries().end())}return 0==h?!0:!1});if(null===l)return!1;var m=e.values(a);if(m&&(null===g||m.globalStartIndex()<g&&m.globalStartIndex()+m.size()>g+h))return!1;var n=new epiviz.measurements.MeasurementHashtable,q=null;
if(m&&m.size())return f.foreach(function(a){var b=e.values(a),c=[];if(null!==g)for(var d=g;d<m.globalStartIndex();++d)c.push(b.getByGlobalIndex(d));n.put(a,c)}),q=new epiviz.datatypes.FeatureValueArray(a,b.fromStartEnd(l.seqName(),l.start(),m.boundaries().start()),g,a.evaluateArr(n)),c._mergeData(a,q),n=new epiviz.measurements.MeasurementHashtable,f.foreach(function(a){var b=e.values(a),c=[];if(null!==g)for(var d=m.globalStartIndex()+m.size();d<g+h;++d)c.push(b.getByGlobalIndex(d));n.put(a,c)}),q=
new epiviz.datatypes.FeatureValueArray(a,b.fromStartEnd(l.seqName(),m.boundaries().end(),l.end()),m.globalStartIndex()+m.size(),a.evaluateArr(n)),c._mergeData(a,q),!1;n=new epiviz.measurements.MeasurementHashtable;f.foreach(function(a){var b=e.values(a),c=[];if(null!==g)for(var d=g;d<g+h;++d)c.push(b.getByGlobalIndex(d));n.put(a,c)});q=new epiviz.datatypes.FeatureValueArray(a,l,g,a.evaluateArr(n));c._mergeData(a,q);return!1})};
epiviz.data.Cache.prototype.flush=function(){this._data={};this._measurementRequestStackMap.foreach(function(a,c){c.clear()});this._measurementPendingRequestsMap.clear()};
epiviz.data.Cache.prototype.clearDatasourceGroupCache=function(a){delete this._data[a];this._measurementRequestStackMap.foreach(function(b,c){b.datasourceGroup()==a&&c.clear()});var c=[];this._measurementPendingRequestsMap.foreach(function(b,e){b.datasourceGroup()==a&&c.push(b)});for(var b=0;b<c.length;++b)this._measurementPendingRequestsMap.put(c[b],{})};
epiviz.data.DataManager=function(a,c){this._config=a;this._measurements=new epiviz.measurements.MeasurementSet;this._dataProviderFactory=c;this._cache=new epiviz.data.Cache(a,c);this._requestAddMeasurements=new epiviz.events.Event;this._requestRemoveMeasurements=new epiviz.events.Event;this._requestAddChart=new epiviz.events.Event;this._requestRemoveChart=new epiviz.events.Event;this._requestAddSeqInfos=new epiviz.events.Event;this._requestRemoveSeqNames=new epiviz.events.Event;this._requestNavigate=
new epiviz.events.Event;this._requestRedraw=new epiviz.events.Event;this._flushCache=new epiviz.events.Event;this._clearDatasourceGroupCache=new epiviz.events.Event;this._requestCurrentLocation=new epiviz.events.Event;this._registerProviderAddMeasurements();this._registerProviderRemoveMeasurements();this._registerProviderAddChart();this._registerProviderRemoveChart();this._registerProviderAddSeqInfos();this._registerProviderRemoveSeqNames();this._registerProviderNavigate();this._registerProviderRedraw();
this._registerProviderFlushCache();this._registerProviderClearDatasourceGroupCache();this._registerProviderGetCurrentLocation()};epiviz.data.DataManager.prototype.onRequestAddMeasurements=function(){return this._requestAddMeasurements};epiviz.data.DataManager.prototype.onRequestRemoveMeasurements=function(){return this._requestRemoveMeasurements};epiviz.data.DataManager.prototype.onRequestAddChart=function(){return this._requestAddChart};epiviz.data.DataManager.prototype.onRequestRemoveChart=function(){return this._requestRemoveChart};
epiviz.data.DataManager.prototype.onRequestAddSeqInfos=function(){return this._requestAddSeqInfos};epiviz.data.DataManager.prototype.onRequestRemoveSeqNames=function(){return this._requestRemoveSeqNames};epiviz.data.DataManager.prototype.onRequestNavigate=function(){return this._requestNavigate};epiviz.data.DataManager.prototype.onRequestRedraw=function(){return this._requestRedraw};epiviz.data.DataManager.prototype.onClearDatasourceGroupCache=function(){return this._clearDatasourceGroupCache};
epiviz.data.DataManager.prototype.onFlushCache=function(){return this._flushCache};epiviz.data.DataManager.prototype.onRequestCurrentLocation=function(){return this._requestCurrentLocation};
epiviz.data.DataManager.prototype.getSeqInfos=function(a){var c=this,b=0,d={},e=[];this._dataProviderFactory.foreach(function(f){f.getData(epiviz.data.Request.getSeqInfos(),function(f){if(f=f.data())for(var h=0;h<f.length;++h)f[h][0]in d||(e.push(epiviz.datatypes.SeqInfo.fromRawObject(f[h])),d[f[h][0]]=!0);++b<c._dataProviderFactory.size()||a(e.sort(epiviz.datatypes.SeqInfo.compare))})})};
epiviz.data.DataManager.prototype.getMeasurements=function(a){var c=this,b=new epiviz.measurements.MeasurementSet,d=0;this._dataProviderFactory.foreach(function(e){e.getData(epiviz.data.Request.getMeasurements(),function(f){if(f=f.data())for(var g=f.id?f.id.length||0:0,h=0;h<g;++h)b.add(new epiviz.measurements.Measurement(f.id[h],f.name[h],f.type[h],f.datasourceId[h],f.datasourceGroup[h],e.id(),null,f.defaultChartType[h],f.annotation[h],f.minValue[h],f.maxValue[h],f.metadata[h]));++d<c._dataProviderFactory.size()||
a(b)})})};epiviz.data.DataManager.prototype.getData=function(a,c,b){this._cache.getData(a,c,b)};epiviz.data.DataManager.prototype.getHierarchy=function(a,c){for(var b in a)if(a.hasOwnProperty(b))var d=a[b];var e=d.dataprovider;e||d.measurements.foreach(function(a){return a.dataprovider()?(e=a.dataprovider(),!0):!1});this._dataProviderFactory.get(e).getData(epiviz.data.Request.getHierarchy(d.datasourceGroup,d.customData),function(a){c(b,a.data())})};
epiviz.data.DataManager.prototype.propagateHierarchyChanges=function(a,c){for(var b in a)if(a.hasOwnProperty(b)){var d=a[b],e=d.dataprovider;e||d.measurements.foreach(function(a){return a.dataprovider()?(e=a.dataprovider(),!0):!1});var f=this._dataProviderFactory.get(e);(function(a){f.getData(epiviz.data.Request.propagateHierarchyChanges(d.datasourceGroup,d.customData.selection,d.customData.order),function(b){c(a,b.data())})})(b)}};
epiviz.data.DataManager.prototype.getWorkspaces=function(a,c,b){var d=this._dataProviderFactory.workspacesDataProvider();if(!d)throw Error("Invalid data provider for workspaces (see Config.workspaceDataProvider)");d.getData(epiviz.data.Request.getWorkspaces(c,b),function(b){b=b.data();var c=[];if(b&&b.length)for(var d=0;d<b.length;++d)c.push({id:b[d].id,name:b[d].name,content:JSON.parse(b[d].content)});a(c)})};
epiviz.data.DataManager.prototype.saveWorkspace=function(a,c,b){var d=this._dataProviderFactory.workspacesDataProvider();if(!d)throw Error("Invalid data provider for workspaces (see Config.workspaceDataProvider)");d.getData(epiviz.data.Request.saveWorkspace(a,c),function(a){a=a.data();b(a)})};
epiviz.data.DataManager.prototype.deleteWorkspace=function(a){var c=this._dataProviderFactory.workspacesDataProvider();if(!c)throw Error("Invalid data provider for workspaces (see Config.workspaceDataProvider)");c.getData(epiviz.data.Request.deleteWorkspace(a),function(a){a.data()})};
epiviz.data.DataManager.prototype.search=function(a,c){var b=this,d=this._dataProviderFactory.size(),e=[];this._dataProviderFactory.foreach(function(f){f.getData(epiviz.data.Request.search(c,b._config.maxSearchResults),function(b){(b=b.data())&&epiviz.utils.arrayAppend(e,b);--d;d||a(e)})})};epiviz.data.DataManager.prototype.flushCache=function(){this._cache.flush();this._flushCache.notify()};
epiviz.data.DataManager.prototype.clearDatasourceGroupCache=function(a){this._cache.clearDatasourceGroupCache(a);this._clearDatasourceGroupCache.notify({datasourceGroup:a})};epiviz.data.DataManager.prototype._registerProviderAddMeasurements=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestAddMeasurements().addListener(new epiviz.events.EventListener(function(b){a._requestAddMeasurements.notify(b)}))})};
epiviz.data.DataManager.prototype._registerProviderRemoveMeasurements=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestRemoveMeasurements().addListener(new epiviz.events.EventListener(function(b){a._requestRemoveMeasurements.notify(b)}))})};epiviz.data.DataManager.prototype._registerProviderAddChart=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestAddChart().addListener(new epiviz.events.EventListener(function(b){a._requestAddChart.notify(b)}))})};
epiviz.data.DataManager.prototype._registerProviderRemoveChart=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestRemoveChart().addListener(new epiviz.events.EventListener(function(b){a._requestRemoveChart.notify(b)}))})};
epiviz.data.DataManager.prototype._registerProviderAddSeqInfos=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestAddSeqInfos().addListener(new epiviz.events.EventListener(function(b){for(var c=[],e=0;e<b.seqInfos.length;++e)c.push(epiviz.datatypes.SeqInfo.fromRawObject(b.seqInfos[e]));a._requestAddSeqInfos.notify({seqInfos:c,result:b.result})}))})};epiviz.data.DataManager.prototype._registerProviderRemoveSeqNames=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestRemoveSeqNames().addListener(new epiviz.events.EventListener(function(b){a._requestRemoveSeqNames.notify(b)}))})};
epiviz.data.DataManager.prototype._registerProviderNavigate=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestNavigate().addListener(new epiviz.events.EventListener(function(b){a._requestNavigate.notify(b)}))})};epiviz.data.DataManager.prototype._registerProviderRedraw=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestRedraw().addListener(new epiviz.events.EventListener(function(b){a._requestRedraw.notify(b)}))})};
epiviz.data.DataManager.prototype._registerProviderClearDatasourceGroupCache=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestClearDatasourceGroupCache().addListener(new epiviz.events.EventListener(function(b){a.clearDatasourceGroupCache(b.datasourceGroup);b.result.success=!0}))})};
epiviz.data.DataManager.prototype._registerProviderFlushCache=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestFlushCache().addListener(new epiviz.events.EventListener(function(b){a.flushCache();b.result.success=!0}))})};epiviz.data.DataManager.prototype._registerProviderGetCurrentLocation=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestCurrentLocation().addListener(new epiviz.events.EventListener(function(b){a._requestCurrentLocation.notify(b)}))})};
epiviz.data.EmptyResponseDataProvider=function(){epiviz.data.DataProvider.call(this,epiviz.data.EmptyResponseDataProvider.DEFAULT_ID)};epiviz.data.EmptyResponseDataProvider.prototype=epiviz.utils.mapCopy(epiviz.data.DataProvider.prototype);epiviz.data.EmptyResponseDataProvider.constructor=epiviz.data.EmptyResponseDataProvider;epiviz.data.EmptyResponseDataProvider.DEFAULT_ID="empty";
epiviz.data.EmptyResponseDataProvider.prototype.getData=function(a,c){var b=a.id();switch(a.get("action")){case epiviz.data.Request.Action.GET_ROWS:c(epiviz.data.Response.fromRawObject({data:{values:{id:null,start:[],end:[],strand:[],metadata:{my_metadata:[]}},globalStartIndex:null,useOffset:!1},requestId:b}));break;case epiviz.data.Request.Action.GET_VALUES:c(epiviz.data.Response.fromRawObject({data:{values:[],globalStartIndex:null},requestId:b}));break;case epiviz.data.Request.Action.GET_MEASUREMENTS:c(epiviz.data.Response.fromRawObject({requestId:a.id(),
data:{id:[],name:[],type:[],datasourceId:[],datasourceGroup:[],defaultChartType:[],annotation:[],minValue:[],maxValue:[],metadata:[]}}));break;case epiviz.data.Request.Action.GET_SEQINFOS:c(epiviz.data.Response.fromRawObject({requestId:a.id(),data:[]}));break;case epiviz.data.Request.Action.SEARCH:c(epiviz.data.Response.fromRawObject({requestId:a.id(),data:[]}));break;case epiviz.data.Request.Action.SAVE_WORKSPACE:c(epiviz.data.Response.fromRawObject({requestId:a.id(),data:[]}));break;case epiviz.data.Request.Action.DELETE_WORKSPACE:c(epiviz.data.Response.fromRawObject({requestId:a.id(),
data:[]}));break;case epiviz.data.Request.Action.GET_WORKSPACES:c(epiviz.data.Response.fromRawObject({requestId:a.id(),data:[]}));break;default:epiviz.data.DataProvider.prototype.getData.call(this,a,c)}};
epiviz.data.WebsocketDataProvider=function(a,c){epiviz.data.DataProvider.call(this,a||epiviz.data.WebsocketDataProvider.DEFAULT_ID);this._websocketHost=c;this._socket=null;this._useUI="true"!=epiviz.ui.WebArgsManager.WEB_ARGS.websocketNoUI;this._debug="true"==epiviz.ui.WebArgsManager.WEB_ARGS.debug;this._callbacks={};this._requestsStack=[];this._initialize()};epiviz.data.WebsocketDataProvider.prototype=epiviz.utils.mapCopy(epiviz.data.DataProvider.prototype);
epiviz.data.WebsocketDataProvider.constructor=epiviz.data.WebsocketDataProvider;epiviz.data.WebsocketDataProvider.DEFAULT_ID="websocket";
epiviz.data.WebsocketDataProvider.prototype._initialize=function(){if(this._websocketHost&&"None"!=this._websocketHost)try{this._socket=new WebSocket(this._websocketHost);this._log("WebSocket - status "+this._socket.readyState);var a=this;this._socket.onopen=function(){a._onSocketOpen()};this._socket.onmessage=function(b){a._onSocketMessage(b)};this._socket.onclose=function(){a._onSocketClose()}}catch(c){this._log(c.toString())}};
epiviz.data.WebsocketDataProvider.prototype._onSocketOpen=function(){for(var a=0;a<this._requestsStack.length;++a)this._socket.send(this._requestsStack[a]);this._requestsStack=[]};epiviz.data.WebsocketDataProvider.prototype._onSocketClose=function(){this._socket=null};epiviz.data.WebsocketDataProvider.prototype._sendMessage=function(a){this.connected()&&this._socket.readyState?this._socket.send(a):this._requestsStack.push(a)};
epiviz.data.WebsocketDataProvider.prototype._onSocketMessage=function(a){this._log("Local Controller Received: "+a.data);var c=JSON.parse(a.data);if(c.type==epiviz.data.MessageType.RESPONSE)a=epiviz.data.Response.fromRawObject(c),c=this._callbacks[a.id()],delete this._callbacks[a.id()],c(a);else if(c.type==epiviz.data.MessageType.REQUEST)switch(a=epiviz.data.Request.Action,c=epiviz.data.Request.fromRawObject(c),c.get("action")){case a.ADD_MEASUREMENTS:this._addMeasurements(c);break;case a.REMOVE_MEASUREMENTS:this._removeMeasurements(c);
break;case a.ADD_SEQINFOS:this._addSeqInfos(c);break;case a.REMOVE_SEQNAMES:this._removeSeqNames(c);break;case a.ADD_CHART:this._addChart(c);break;case a.REMOVE_CHART:this._removeChart(c);break;case a.CLEAR_DATASOURCE_GROUP_CACHE:this._clearDatasourceGroupCache(c);break;case a.FLUSH_CACHE:this._flushCache(c);break;case a.NAVIGATE:this._navigate(c);break;case a.REDRAW:this._redraw(c);break;case a.GET_CURRENT_LOCATION:this._getCurrentLocation(c);break;case a.WRITE_DEBUG_MSG:this._writeDebugMsg(c)}};
epiviz.data.WebsocketDataProvider.prototype._log=function(a){this._debug&&console.log(a)};epiviz.data.WebsocketDataProvider.prototype._fireEvent=function(a,c){this._useUI?a.notify(c):c.result.success=!0};epiviz.data.WebsocketDataProvider.prototype.connected=function(){return null!=this._socket};epiviz.data.WebsocketDataProvider.prototype.getData=function(a,c){var b=JSON.stringify(a.raw());this._callbacks[a.id()]=c;this._sendMessage(b)};
epiviz.data.WebsocketDataProvider.prototype._addMeasurements=function(a){for(var c=new epiviz.events.EventResult,b=new epiviz.measurements.MeasurementSet,d=JSON.parse(a.get("measurements")),e=0;e<d.length;++e)b.add(new epiviz.measurements.Measurement(d[e].id,d[e].name,d[e].type,d[e].datasourceId,d[e].datasourceGroup,this.id(),null,d[e].defaultChartType,d[e].annotation,d[e].minValue,d[e].maxValue,d[e].metadata));this._fireEvent(this.onRequestAddMeasurements(),{measurements:b,result:c});a=new epiviz.data.Response(a.id(),
c);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._removeMeasurements=function(a){for(var c=new epiviz.events.EventResult,b=new epiviz.measurements.MeasurementSet,d=JSON.parse(a.get("measurements")),e=0;e<d.length;++e)b.add(new epiviz.measurements.Measurement(d[e].id,d[e].name,d[e].type,d[e].datasourceId,d[e].datasourceGroup,this.id(),null,d[e].defaultChartType,d[e].annotation,d[e].minValue,d[e].maxValue,d[e].metadata));this._fireEvent(this.onRequestRemoveMeasurements(),{measurements:b,result:c});a=new epiviz.data.Response(a.id(),
c);this._sendMessage(JSON.stringify(a.raw()))};epiviz.data.WebsocketDataProvider.prototype._addSeqInfos=function(a){var c=new epiviz.events.EventResult,b=JSON.parse(a.get("seqInfos"));this._fireEvent(this.onRequestAddSeqInfos(),{seqInfos:b,result:c});a=new epiviz.data.Response(a.id(),c);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._removeSeqNames=function(a){var c=new epiviz.events.EventResult,b=JSON.parse(a.get("seqNames"));this._fireEvent(this.onRequestRemoveSeqNames(),{seqNames:b,result:c});a=new epiviz.data.Response(a.id(),c);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._addChart=function(a){for(var c=new epiviz.events.EventResult,b=new epiviz.measurements.MeasurementSet,d=JSON.parse(a.get("measurements")),e=0;e<d.length;++e)b.add(new epiviz.measurements.Measurement(d[e].id,d[e].name,d[e].type,d[e].datasourceId,d[e].datasourceGroup,this.id(),null,d[e].defaultChartType,d[e].annotation,d[e].minValue,d[e].maxValue,d[e].metadata));this._fireEvent(this.onRequestAddChart(),{type:a.get("type"),measurements:b,result:c});a=new epiviz.data.Response(a.id(),
c);this._sendMessage(JSON.stringify(a.raw()))};epiviz.data.WebsocketDataProvider.prototype._removeChart=function(a){var c=a.get("chartId"),b=new epiviz.events.EventResult;this._fireEvent(this.onRequestRemoveChart(),{id:c,result:b});a=new epiviz.data.Response(a.id(),b);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._clearDatasourceGroupCache=function(a){var c=new epiviz.events.EventResult;this._fireEvent(this.onRequestClearDatasourceGroupCache(),{datasourceGroup:a.get("datasourceGroup"),result:c});a=new epiviz.data.Response(a.id(),c);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._flushCache=function(a){var c=new epiviz.events.EventResult;this._fireEvent(this.onRequestFlushCache(),{result:c});a=new epiviz.data.Response(a.id(),c);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._navigate=function(a){var c=JSON.parse(a.get("range")),b=new epiviz.events.EventResult;this._fireEvent(this.onRequestNavigate(),{range:epiviz.datatypes.GenomicRange.fromStartEnd(c.seqName,c.start,c.end),result:b});a=new epiviz.data.Response(a.id(),b);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._redraw=function(a){var c=new epiviz.events.EventResult;this._fireEvent(this.onRequestRedraw(),{result:c});a=new epiviz.data.Response(a.id(),c);this._sendMessage(JSON.stringify(a.raw()))};epiviz.data.WebsocketDataProvider.prototype._getCurrentLocation=function(a){var c=new epiviz.events.EventResult;this._fireEvent(this.onRequestCurrentLocation(),{result:c});a=new epiviz.data.Response(a.id(),c);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._writeDebugMsg=function(a){var c=a.get("msg"),b=document.createElement("pre");b.innerHTML=c.replace(/&/g,"&amp;").replace(/\\</g,"&lt;");a=new epiviz.data.Response(a.id(),{msg:"that msg"});document.getElementById("chart-container").appendChild(b);this._sendMessage(JSON.stringify(a.raw()))};epiviz.data.WebServerDataProvider=function(a,c){epiviz.data.DataProvider.call(this,a||epiviz.Config.DEFAULT_DATA_PROVIDER_ID);this._serverEndpoint=c||epiviz.data.WebServerDataProvider.DEFAULT_SERVER_ENDPOINT};
epiviz.data.WebServerDataProvider.prototype=epiviz.utils.mapCopy(epiviz.data.DataProvider.prototype);epiviz.data.WebServerDataProvider.constructor=epiviz.data.WebServerDataProvider;epiviz.data.WebServerDataProvider.DEFAULT_SERVER_ENDPOINT="data/main.php";
epiviz.data.WebServerDataProvider.prototype.getData=function(a,c){if(!a.isEmpty())if(a.method()==epiviz.data.Request.Method.GET){var b=sprintf("%s?%s",this._serverEndpoint,a.joinArgs());epiviz.data.WebServerDataProvider.makeGetRequest(b,function(a){c(epiviz.data.Response.fromRawObject(a))})}else epiviz.data.WebServerDataProvider.makePostRequest(this._serverEndpoint,a.joinArgs(),function(a){c(epiviz.data.Response.fromRawObject(a))})};
epiviz.data.WebServerDataProvider.makeGetRequest=function(a,c){var b=$.ajax({type:"get",url:a,dataType:"json",async:!0,cache:!1,processData:!0});b.done(function(a){c(a)});b.fail(function(a,b,c){});b.always(function(){})};
epiviz.data.WebServerDataProvider.makePostRequest=function(a,c,b){a=$.ajax({type:"post",url:a,data:c,dataType:"json",async:!0,cache:!1,processData:!0});a.done(function(a,c,f){b(a)});a.fail(function(a,b,c){console.error("The following error occured: "+b,c);$("#php-response").append(a.responseText)});a.always(function(){})};epiviz.datatypes={};epiviz.datatypes.SeqInfo=function(a,c,b){this.seqName=a;this.min=c;this.max=b};
epiviz.datatypes.SeqInfo.prototype.raw=function(){return[this.seqName,this.min,this.max]};epiviz.datatypes.SeqInfo.fromRawObject=function(a){return new epiviz.datatypes.SeqInfo(a[0],parseFloat(a[1]),parseFloat(a[2]))};
epiviz.datatypes.SeqInfo.compare=function(a,c){var b=a.seqName.replace(/\D/g,""),d=c.seqName.replace(/\D/g,"");return""==b||""==d||!epiviz.utils.stringStartsWith(a.seqName,b)&&!epiviz.utils.stringEndsWith(a.seqName,b)||!epiviz.utils.stringStartsWith(c.seqName,d)&&!epiviz.utils.stringEndsWith(c.seqName,d)?a.seqName<c.seqName?-1:a.seqName>c.seqName?1:0:parseInt(b)-parseInt(d)};
epiviz.datatypes.GenomicArray=function(a,c,b,d){this._measurement=a;this._boundaries=c;this._globalStartIndex=b;this._values=d};epiviz.datatypes.GenomicArray.prototype.boundaries=function(){return this._boundaries};epiviz.datatypes.GenomicArray.prototype.globalStartIndex=function(){return this._globalStartIndex};epiviz.datatypes.GenomicArray.prototype.measurement=function(){return this._measurement};
epiviz.datatypes.GenomicArray.prototype.get=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicArray.prototype.size=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicArray.prototype.getByGlobalIndex=function(a){return this.get(a-this._globalStartIndex)};epiviz.datatypes.GenomicArray.prototype.concatValues=function(a,c){throw Error("unimplemented abstract method");};
epiviz.datatypes.GenomicArray.prototype.createNew=function(a,c,b,d){throw Error("unimplemented abstract method");};
epiviz.datatypes.GenomicArray.prototype.merge=function(a){if(!a||void 0==a.boundaries())return this;if(this.boundaries().seqName()!=a.boundaries().seqName()||this.boundaries().start()>a.boundaries().end()||a.boundaries().start()>this.boundaries().end())throw Error("Two genomic arrays can only be merged if they overlap or are in continuation to one another");var c=this.boundaries().start()<a.boundaries().start()?this:a,b=c==this?a:this;if(c.boundaries().end()>=b.boundaries().end())return c;var d=void 0!=
c.globalStartIndex()&&void 0!=b.globalStartIndex()?c.globalStartIndex()+c.size()-b.globalStartIndex():0;a=c.measurement();var e=void 0!=c.globalStartIndex()?c.globalStartIndex():b.globalStartIndex(),f=epiviz.datatypes.GenomicRange.fromStartEnd(c.boundaries().seqName(),c.boundaries().start(),b.boundaries().end()),c=c.concatValues(b,d);return this.createNew(a,f,e,c)};
epiviz.datatypes.GenomicRangeArray=function(a,c,b,d,e){epiviz.datatypes.GenomicArray.call(this,a,c,b,d);this._id=d.id;this._start=d.start;this._end=d.end;this._strand=d.strand||null;this._metadata=d.metadata;this._size=null;if(e)for(a=1;a<this._start.length;++a)this._start[a]+=this._start[a-1],this._end&&(this._end[a]+=this._end[a-1])};epiviz.datatypes.GenomicRangeArray.prototype=epiviz.utils.mapCopy(epiviz.datatypes.GenomicArray.prototype);epiviz.datatypes.GenomicRangeArray.constructor=epiviz.datatypes.GenomicRangeArray;
epiviz.datatypes.GenomicRangeArray.prototype.createNew=function(a,c,b,d){return new epiviz.datatypes.GenomicRangeArray(a,c,b,d)};epiviz.datatypes.GenomicRangeArray.prototype.get=function(a){return 0>a||a>=this.size()?null:new epiviz.datatypes.GenomicRangeArray.RowItemWrapper(this,a)};
epiviz.datatypes.GenomicRangeArray.prototype.size=function(){void 0==this._size&&(this._size=Math.max(this._id?this._id.length:0,this._start?this._start.length:0,this._end?this._end.length:0,this._metadata&&Object.keys(this._metadata).length?Math.max.apply(void 0,$.map(this._metadata,function(a){return a.length})):0));return this._size};
epiviz.datatypes.GenomicRangeArray.prototype.concatValues=function(a,c){var b=null;if(Array.isArray(this._strand)||Array.isArray(a._strand)||this._strand!=a._strand)var b=Array.isArray(this._strand)?this._strand:epiviz.utils.fillArray(this.size(),this._strand),d=Array.isArray(a._strand)?a._strand:epiviz.utils.fillArray(a.size(),a._strand),b=b.concat(d.slice(c));else b=this._strand;var d=this._id?this._id.concat(a._id.slice(c)):null,e=this._start.concat(a._start.slice(c)),f=this._end?this._end.concat(a._end.slice(c)):
null,g={},h;for(h in this._metadata)this._metadata.hasOwnProperty(h)&&(g[h]=this._metadata[h].concat(a._metadata[h].slice(c)));return{id:d,start:e,end:f,strand:b,metadata:g}};
epiviz.datatypes.GenomicRangeArray.prototype.trim=function(a){if(void 0==this.globalStartIndex()||!this.size()||!a||!this.boundaries()||this.boundaries().seqName()!=a.seqName())return null;var c=Math.max(this.boundaries().start(),a.start()),b=Math.min(this.boundaries().end(),a.end());if(b<=c)return null;a=epiviz.datatypes.GenomicRange.fromStartEnd(a.seqName(),c,b);for(var b=c=-1,d=0;d<this.size();++d)0>c&&this.end(d)>=a.start()&&(c=d),this._start[d]<a.end()&&(b=d+1);if(b<=c)return null;var e;if(0<=
c&&b>=c){d={id:this._id?this._id.slice(c,b):null,start:this._start.slice(c,b),end:this._end?this._end.slice(c,b):null,strand:Array.isArray(this._strand)?this._strand.slice(c,b):this._strand,metadata:{}};for(e in this._metadata)this._metadata.hasOwnProperty(e)&&(d.metadata[e]=this._metadata[e].slice(c,b));e=this.globalStartIndex()+c}else{d={id:this._id?[]:null,start:[],end:this._end?[]:null,strand:Array.isArray(this._strand)?[]:this._strand,metadata:{}};for(e in this._metadata)this._metadata.hasOwnProperty(e)&&
(d.metadata[e]=[]);e=null}return new epiviz.datatypes.GenomicRangeArray(this.measurement(),a,e,d)};epiviz.datatypes.GenomicRangeArray.prototype.ranges=function(){return this};epiviz.datatypes.GenomicRangeArray.prototype.foreach=function(a){for(var c=this.size(),b=0;b<c&&!a(this.get(b));++b);};epiviz.datatypes.GenomicRangeArray.prototype.metadataColumns=function(){return this._metadata?Object.keys(this._metadata):[]};
epiviz.datatypes.GenomicRangeArray.prototype.id=function(a){return this._id?this._id[a]:this.globalStartIndex()+a};epiviz.datatypes.GenomicRangeArray.prototype.start=function(a){return this._start?this._start[a]:void 0};epiviz.datatypes.GenomicRangeArray.prototype.end=function(a){return this._end?this._end[a]:this.start(a)};epiviz.datatypes.GenomicRangeArray.prototype.strand=function(a){return Array.isArray(this._strand)?this._strand[a]:this._strand};
epiviz.datatypes.GenomicRangeArray.prototype.metadata=function(a,c){return this._metadata&&this._metadata[a]?this._metadata[a][c]:null};epiviz.datatypes.GenomicRangeArray.prototype.rowMetadata=function(a){var c={},b;for(b in this._metadata)this._metadata.hasOwnProperty(b)&&(c[b]=this._metadata[b][a]);return c};
epiviz.datatypes.GenomicRangeArray.prototype.toString=function(){var a,c,b;this.boundaries()?(a=this.boundaries().seqName(),c=this.boundaries().start(),b=this.boundaries().end()):a=c=b="*";a=sprintf("%25s",this.measurement().name().substr(0,22))+sprintf(" [%6s%10s%10s]",a,c,b);c=sprintf("%10s:","id");b=sprintf("%10s:","idx");var d=sprintf("%10s:","chr"),e=sprintf("%10s:","start"),f=sprintf("%10s:","end");if(void 0!=this.globalStartIndex())for(var g=this.globalStartIndex();g<this.globalStartIndex()+
this.size();++g){var h=this.getByGlobalIndex(g);c+=sprintf("%10s",h.id());b+=sprintf("%10s",g);d+=sprintf("%10s",h.seqName());e+=sprintf("%10s",h.start());f+=sprintf("%10s",h.end())}return[a,c,b,d,e,f].join("\n")};epiviz.datatypes.GenomicRangeArray.RowItemWrapper=function(a,c){this._index=c;this._parent=a};epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.parent=function(){return this._parent};epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.id=function(){return this._parent.id(this._index)};
epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.seqName=function(){return this._parent.boundaries()?this._parent.boundaries().seqName():void 0};epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.start=function(){return this._parent.start(this._index)};epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.end=function(){return this._parent.end(this._index)};epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.index=function(){return this._index};
epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.globalIndex=function(){return this._index+this._parent.globalStartIndex()};epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.equals=function(a){return a?this==a?!0:a.seqName()==this.seqName()&&a.start()==this.start()&&a.end()==this.end():!1};epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.strand=function(){return this._parent.strand(this._index)};
epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.metadata=function(a){return this._parent.metadata(a,this._index)};epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.rowMetadata=function(){return this._parent.rowMetadata(this._index)};epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.overlapsWith=function(a){return a?this==a?!0:this.seqName()!=a.seqName()?!1:this.start()<a.end()&&this.end()>a.start():!1};
epiviz.datatypes.FeatureValueArray=function(a,c,b,d){epiviz.datatypes.GenomicArray.call(this,a,c,b,d)};epiviz.datatypes.FeatureValueArray.prototype=epiviz.utils.mapCopy(epiviz.datatypes.GenomicArray.prototype);epiviz.datatypes.FeatureValueArray.constructor=epiviz.datatypes.FeatureValueArray;epiviz.datatypes.FeatureValueArray.prototype.createNew=function(a,c,b,d){return new epiviz.datatypes.FeatureValueArray(a,c,b,d)};epiviz.datatypes.FeatureValueArray.prototype.get=function(a){return this._values[a]};
epiviz.datatypes.FeatureValueArray.prototype.size=function(){return this._values?this._values.length:0};epiviz.datatypes.FeatureValueArray.prototype.concatValues=function(a,c){if(!a||!a.size())return this._values;this._values||(this._values=[]);return this._values.concat(a._values.slice(c))};
epiviz.datatypes.FeatureValueArray.prototype.trim=function(a,c,b){if(void 0==this.globalStartIndex()||!this.size()||void 0==c||!a||!this.boundaries()||this.boundaries().seqName()!=a.seqName())return null;var d=Math.max(this.boundaries().start(),a.start()),e=Math.min(this.boundaries().end(),a.end());if(e<=d)return null;a=epiviz.datatypes.GenomicRange.fromStartEnd(a.seqName(),d,e);d=Math.max(c,this.globalStartIndex())-this.globalStartIndex();c=Math.min(c+b,this.globalStartIndex()+this.size())-this.globalStartIndex();
if(c<=d)return null;c=this._values.slice(d,c);return new epiviz.datatypes.FeatureValueArray(this.measurement(),a,d+this.globalStartIndex(),c)};
epiviz.datatypes.FeatureValueArray.prototype.toString=function(){var a,c,b;this.boundaries()?(a=this.boundaries().seqName(),c=this.boundaries().start(),b=this.boundaries().end()):a=c=b="*";a=sprintf("%25s",this.measurement().name().substr(0,22))+sprintf(" [%6s%10s%10s]",a,c,b);c=sprintf("%10s:","idx");b=sprintf("%10s:","val");if(void 0!=this.globalStartIndex())for(var d=this.globalStartIndex();d<this.globalStartIndex()+this.size();++d){var e=this.getByGlobalIndex(d);c+=sprintf("%10s",d);b+=sprintf("%10s",
e)}return[a,c,b].join("\n")};epiviz.datatypes.PartialSummarizedExperiment=function(){this._rowData=null;this._values=new epiviz.measurements.MeasurementHashtable};epiviz.datatypes.PartialSummarizedExperiment.prototype.ranges=function(){return this.rowData()};epiviz.datatypes.PartialSummarizedExperiment.prototype.rowData=function(){return this._rowData};
epiviz.datatypes.PartialSummarizedExperiment.prototype.addRowData=function(a){a&&(!this._rowData||this._rowData.boundaries().seqName()!=a.boundaries().seqName()||this._rowData.boundaries().start()>a.boundaries().end()||this._rowData.boundaries().end()<a.boundaries().start()||a.measurement().type()==epiviz.measurements.Measurement.Type.UNORDERED?this._rowData=a:this._rowData=this._rowData.merge(a))};
epiviz.datatypes.PartialSummarizedExperiment.prototype.addValues=function(a){if(a){var c=this._values.get(a.measurement());!c||c.boundaries().seqName()!=a.boundaries().seqName()||c.boundaries().start()>a.boundaries().end()||c.boundaries().end()<a.boundaries().start()||a.measurement().type()==epiviz.measurements.Measurement.Type.UNORDERED?this._values.put(a.measurement(),a):this._values.put(a.measurement(),c.merge(a))}};
epiviz.datatypes.PartialSummarizedExperiment.prototype.trim=function(a){var c=new epiviz.datatypes.PartialSummarizedExperiment;this._rowData&&c.addRowData(this._rowData.trim(a));c.rowData()&&this._values.foreach(function(b,d){c.addValues(d.trim(a,c.rowData().globalStartIndex(),c.rowData().size()))});return c};epiviz.datatypes.PartialSummarizedExperiment.prototype.values=function(a){return this._values.get(a)};
epiviz.datatypes.PartialSummarizedExperiment.prototype.calcMinGlobalIndex=function(){var a=this._rowData?this._rowData.globalStartIndex():null;this._values&&this._values.foreach(function(c,b){b&&void 0!=b.globalStartIndex()&&(void 0==a||a>b.globalStartIndex())&&(a=b.globalStartIndex())});return a};
epiviz.datatypes.PartialSummarizedExperiment.prototype.calcMaxGlobalIndex=function(){var a=this._rowData&&void 0!=this._rowData.globalStartIndex()?this._rowData.globalStartIndex()+this._rowData.size():null;this._values&&this._values.foreach(function(c,b){b&&void 0!=b.globalStartIndex()&&(void 0==a||a<b.globalStartIndex()+b.size())&&(a=b.globalStartIndex()+b.size())});return a};
epiviz.datatypes.PartialSummarizedExperiment.prototype.toString=function(){var a="",c=this.calcMinGlobalIndex(),b=this.calcMaxGlobalIndex(),a=a+sprintf("%25s",this._rowData&&this._rowData.measurement()?this._rowData.measurement().name().substr(0,22):"[undefined datasource]"),d,e,f,g,h;this._rowData&&this._rowData.boundaries()?(d=this._rowData.boundaries().seqName(),e=this._rowData.boundaries().start(),f=this._rowData.boundaries().end(),g=void 0!=this._rowData.globalStartIndex()?this._rowData.globalStartIndex():
"*",h=this._rowData.size()):(d=e=f=g="*",h=0);var a=a+sprintf(" [%6s%10s%10s] [globalStartIndex: %10s] [size: %7s]\n",d,e,f,g,h),l=sprintf("%15s%15s%15s%15s%15s","id","idx","chr","start","end");this._values&&this._values.foreach(function(b,c){a+=sprintf("%25s",b.name().substr(0,22));c&&c.boundaries()?(d=c.boundaries().seqName(),e=c.boundaries().start(),f=c.boundaries().end()):d=e=f="*";a+=sprintf(" [%6s%10s%10s] [globalStartIndex: %10s] [size: %7s]\n",d,e,f,void 0!=c.globalStartIndex()?c.globalStartIndex():
"*",c.size());l+=sprintf("%25s",b.name().substr(0,22))});for(var a=a+(l+"\n"),m=c;m<b;++m)this._rowData&&void 0!=this._rowData.globalStartIndex()&&this._rowData.globalStartIndex()<=m&&this._rowData.globalStartIndex()+this._rowData.size()>m?(g=this._rowData.getByGlobalIndex(m),c=g.id(),d=g.seqName(),e=g.start(),f=g.end()):c=d=e=f="*",a+=sprintf("%15s%15s%15s%15s%15s",c,m,d,e,f),this._values&&this._values.foreach(function(b,c){a=c&&void 0!=c.globalStartIndex()&&c.globalStartIndex()<=m&&c.globalStartIndex()+
c.size()>m?a+sprintf("%25s",c.getByGlobalIndex(m)):a+sprintf("%25s","*")}),a+="\n";return a};epiviz.datatypes.MeasurementGenomicData=function(){};epiviz.datatypes.MeasurementGenomicData.prototype.get=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.MeasurementGenomicData.prototype.getRow=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.MeasurementGenomicData.prototype.measurement=function(){throw Error("unimplemented abstract method");};
epiviz.datatypes.MeasurementGenomicData.prototype.globalStartIndex=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.MeasurementGenomicData.prototype.globalEndIndex=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.MeasurementGenomicData.prototype.size=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.MeasurementGenomicData.prototype.getByGlobalIndex=function(a){throw Error("unimplemented abstract method");};
epiviz.datatypes.MeasurementGenomicData.prototype.getRowByGlobalIndex=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.MeasurementGenomicData.prototype.binarySearchStarts=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.MeasurementGenomicDataWrapper=function(a,c){this._measurement=a;this._container=c;this._globalStartIndex=this._size=null};
epiviz.datatypes.MeasurementGenomicDataWrapper.prototype.get=function(a){var c=this._container.rowData(),b=null,d=this.globalStartIndex(),e=null,f=b=null,g=this.size();if(!g||a>=g||0>a)return new epiviz.datatypes.GenomicData.ValueItem(f,e,b,this._measurement);if(void 0!=d){if(this._measurement.type()==epiviz.measurements.Measurement.Type.FEATURE||this._measurement.type()==epiviz.measurements.Measurement.Type.UNORDERED)b=this._container.values(this._measurement),e=d-b.globalStartIndex()+a,b=b.get(e);
e=d-c.globalStartIndex()+a;e=c.get(e);f=d+a}return new epiviz.datatypes.GenomicData.ValueItem(f,e,b,this._measurement)};epiviz.datatypes.MeasurementGenomicDataWrapper.prototype.getRow=function(a){var c=this._container.rowData(),b=this.globalStartIndex(),d=null,e=this.size();if(!e||a>=e||0>a)return d;void 0!=b&&(a=b-c.globalStartIndex()+a,d=c.get(a));return d};epiviz.datatypes.MeasurementGenomicDataWrapper.prototype.measurement=function(){return this._measurement};
epiviz.datatypes.MeasurementGenomicDataWrapper.prototype.globalStartIndex=function(){if(null!==this._globalStartIndex)return this._globalStartIndex;var a=null,c=this._container.rowData().globalStartIndex();if(null===c)return c;if(this._measurement.type()==epiviz.measurements.Measurement.Type.FEATURE||this._measurement.type()==epiviz.measurements.Measurement.Type.UNORDERED){a=this._container.values(this._measurement);if(!a.globalStartIndex())return a.globalStartIndex();c=Math.max(c,a.globalStartIndex())}return this._globalStartIndex=
c};epiviz.datatypes.MeasurementGenomicDataWrapper.prototype.globalEndIndex=function(){var a=this.globalStartIndex();return null==a?null:a+this.size()};
epiviz.datatypes.MeasurementGenomicDataWrapper.prototype.size=function(){if(null!==this._size)return this._size;var a=this.globalStartIndex();if(void 0==a)return 0;var c=this._container.rowData(),b=this._container.values(this._measurement),c=c.size()-a+c.globalStartIndex();if(this._measurement.type()==epiviz.measurements.Measurement.Type.FEATURE||this._measurement.type()==epiviz.measurements.Measurement.Type.UNORDERED)c=Math.min(c,b.size()-a+b.globalStartIndex());return this._size=Math.max(0,c)};
epiviz.datatypes.MeasurementGenomicDataWrapper.prototype.getByGlobalIndex=function(a){var c=this.globalStartIndex();return void 0==c?new epiviz.datatypes.GenomicData.ValueItem(null,null,null,this._measurement):this.get(a-c)};epiviz.datatypes.MeasurementGenomicDataWrapper.prototype.getRowByGlobalIndex=function(a){var c=this.globalStartIndex();return void 0==c?null:this.getRow(a-c)};
epiviz.datatypes.MeasurementGenomicDataWrapper.prototype.binarySearchStarts=function(a){var c=this._container.rowData();if(0==this.size()||!c||0==c.size()||c.start(0)>=a.end()||c.start(c.size()-1)<=a.start())return{index:null,length:0};for(var b=0,d=c.size()-1,e,f=null;b<=d;)e=Math.floor(.5*(b+d)),c.start(e)==a.start()?(f=e,d=e-1):c.start(e)<a.start()?b=e+1:d=e-1;null===f&&(f=b);for(var b=0,d=c.size()-1,g=null;b<=d;)e=Math.floor(.5*(b+d)),c.start(e)==a.end()?(g=e,b=e+1):c.start(e)<a.end()?b=e+1:d=
e-1;null===g&&(g=b-1);a=Math.max(f+c.globalStartIndex(),this.globalStartIndex());c=Math.min(g+c.globalStartIndex(),this.globalStartIndex()+this.size()-1);return{index:a-this.globalStartIndex(),length:c-a+1}};epiviz.datatypes.MeasurementGenomicDataArrayWrapper=function(a,c,b){this._measurement=a;this._items=c;this._itemsByGlobalIndex=b};epiviz.datatypes.MeasurementGenomicDataArrayWrapper.prototype.get=function(a){return this._items&&0<=a&&a<this._items.length?this._items[a]:null};
epiviz.datatypes.MeasurementGenomicDataArrayWrapper.prototype.getRow=function(a){return this._items&&0<=a&&a<this._items.length?this._items[a].rowItem:null};epiviz.datatypes.MeasurementGenomicDataArrayWrapper.prototype.measurement=function(){return this._measurement};epiviz.datatypes.MeasurementGenomicDataArrayWrapper.prototype.globalStartIndex=function(){return this._items&&this._items.length?this._items[0].globalIndex:null};
epiviz.datatypes.MeasurementGenomicDataArrayWrapper.prototype.globalEndIndex=function(){return this._items&&this._items.length?this._items[this._items.length-1].globalIndex+1:null};epiviz.datatypes.MeasurementGenomicDataArrayWrapper.prototype.size=function(){return this._items?this._items.length:0};epiviz.datatypes.MeasurementGenomicDataArrayWrapper.prototype.getByGlobalIndex=function(a){return this._itemsByGlobalIndex&&a in this._itemsByGlobalIndex?this._itemsByGlobalIndex[a]:null};
epiviz.datatypes.MeasurementGenomicDataArrayWrapper.prototype.getRowByGlobalIndex=function(a){return this._itemsByGlobalIndex&&a in this._itemsByGlobalIndex?this._itemsByGlobalIndex[a].rowItem:null};
epiviz.datatypes.MeasurementGenomicDataArrayWrapper.prototype.binarySearchStarts=function(a){if(!this._items||!this._items.length||this._items[0].rowItem.start()>a.end()||this._items[this._items.length-1].rowItem.start()<a.start())return{index:null,length:0};for(var c=0,b=this._items.length-1,d,e=null;c<=b;)d=Math.floor(.5*(c+b)),this._items[d].rowItem.start()==a.start()?(e=d,b=d-1):this._items[d].rowItem.start()<a.start()?c=d+1:b=d-1;null===e&&(e=c);for(var c=0,b=this._items.length-1,f=null;c<=b;)d=
Math.floor(.5*(c+b)),this._items[d].rowItem.start()==a.end()?(f=d,c=d+1):this._items[d].rowItem.start()<a.end()?c=d+1:b=d-1;null===f&&(f=c-1);return{index:e,length:f+1-e}};epiviz.datatypes.GenomicData=function(){};epiviz.datatypes.GenomicData.prototype.ready=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.prototype.isReady=function(){throw Error("unimplemented abstract method");};
epiviz.datatypes.GenomicData.prototype.firstSeries=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.prototype.getSeries=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.prototype.get=function(a,c){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.prototype.getRow=function(a,c){throw Error("unimplemented abstract method");};
epiviz.datatypes.GenomicData.prototype.measurements=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.prototype.globalStartIndex=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.prototype.globalEndIndex=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.prototype.size=function(a){throw Error("unimplemented abstract method");};
epiviz.datatypes.GenomicData.prototype.getByGlobalIndex=function(a,c){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.prototype.getRowByGlobalIndex=function(a,c){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.prototype.binarySearchStarts=function(a,c){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.prototype.foreach=function(a){throw Error("unimplemented abstract method");};
epiviz.datatypes.GenomicData.ValueItem=function(a,c,b,d){this.globalIndex=a;this.rowItem=c;this.value=0===b||b?b:null;this.measurement=d};epiviz.datatypes.GenomicData.RowItem=function(){};epiviz.datatypes.GenomicData.RowItem.prototype.id=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.RowItem.prototype.seqName=function(){throw Error("unimplemented abstract method");};
epiviz.datatypes.GenomicData.RowItem.prototype.start=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.RowItem.prototype.end=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.RowItem.prototype.globalIndex=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.RowItem.prototype.strand=function(){throw Error("unimplemented abstract method");};
epiviz.datatypes.GenomicData.RowItem.prototype.metadata=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.RowItem.prototype.rowMetadata=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.RowItemImpl=function(a,c,b,d,e,f,g){this._id=a;this._seqName=c;this._start=b;this._end=d;this._globalIndex=e;this._strand=f;this._rowMetadata=g};epiviz.datatypes.RowItemImpl.prototype.id=function(){return this._id};
epiviz.datatypes.RowItemImpl.prototype.seqName=function(){return this._seqName};epiviz.datatypes.RowItemImpl.prototype.start=function(){return this._start};epiviz.datatypes.RowItemImpl.prototype.end=function(){return this._end};epiviz.datatypes.RowItemImpl.prototype.globalIndex=function(){return this._globalIndex};epiviz.datatypes.RowItemImpl.prototype.strand=function(){return this._strand};epiviz.datatypes.RowItemImpl.prototype.metadata=function(a){a=this._rowMetadata[a];return void 0==a?null:a};
epiviz.datatypes.RowItemImpl.prototype.rowMetadata=function(){return this._rowMetadata};epiviz.datatypes.MapGenomicData=function(a){this._measurements=(this._map=a)?a.keys():null;this._mapLoaded=new epiviz.deferred.Deferred;this._map&&this._mapLoaded.resolve()};epiviz.datatypes.MapGenomicData.prototype.ready=function(a){this._mapLoaded.done(a)};epiviz.datatypes.MapGenomicData.prototype.isReady=function(){return this._mapLoaded.state()==epiviz.deferred.Deferred.State.RESOLVED};
epiviz.datatypes.MapGenomicData.prototype._setMap=function(a){if(this._map)throw Error("MapGenomicData is immutable");if(this._map=a)this._measurements=a.keys(),this._mapLoaded.resolve()};epiviz.datatypes.MapGenomicData.prototype.firstSeries=function(){return 0==this._map.size()?null:this._map.first().value};epiviz.datatypes.MapGenomicData.prototype.getSeries=function(a){return this._map.get(a)};epiviz.datatypes.MapGenomicData.prototype.get=function(a,c){var b=this._map.get(a);return b?b.get(c):null};
epiviz.datatypes.MapGenomicData.prototype.getRow=function(a,c){var b=this._map.get(a);return b?b.getRow(c):null};epiviz.datatypes.MapGenomicData.prototype.measurements=function(){return this._measurements};epiviz.datatypes.MapGenomicData.prototype.globalStartIndex=function(a){return(a=this._map.get(a))?a.globalStartIndex():null};epiviz.datatypes.MapGenomicData.prototype.globalEndIndex=function(a){return(a=this._map.get(a))?a.globalEndIndex():null};
epiviz.datatypes.MapGenomicData.prototype.size=function(a){return(a=this._map.get(a))?a.size():null};epiviz.datatypes.MapGenomicData.prototype.getByGlobalIndex=function(a,c){var b=this._map.get(a);return b?b.getByGlobalIndex(c):null};epiviz.datatypes.MapGenomicData.prototype.getRowByGlobalIndex=function(a,c){var b=this._map.get(a);return b?b.getRowByGlobalIndex(c):null};
epiviz.datatypes.MapGenomicData.prototype.binarySearchStarts=function(a,c){var b=this._map.get(a);return b?b.binarySearchStarts(c):{index:null,length:0}};epiviz.datatypes.MapGenomicData.prototype.foreach=function(a){this._map.foreach(function(c,b,d){a(c,b,d)})};epiviz.datatypes.ItemFilteredGenomicData=function(a,c){epiviz.datatypes.MapGenomicData.call(this);this._data=a;this._filter=c;this._deferredInit=null;this._initialize()};epiviz.datatypes.ItemFilteredGenomicData.prototype=epiviz.utils.mapCopy(epiviz.datatypes.MapGenomicData.prototype);
epiviz.datatypes.ItemFilteredGenomicData.constructor=epiviz.datatypes.ItemFilteredGenomicData;
epiviz.datatypes.ItemFilteredGenomicData.prototype._initialize=function(){if(this._deferredInit)return this._deferredInit;this._deferredInit=new epiviz.deferred.Deferred;var a=this,c=this._filter,b=this._data;b.ready(function(){c.preMark()(b).done(function(d){var e=new epiviz.measurements.MeasurementHashtable,f=b.measurements();epiviz.utils.deferredFor(f.length,function(a){var h=new epiviz.deferred.Deferred,l=f[a],m=[],n={};epiviz.utils.deferredFor(b.size(l),function(a){var e=new epiviz.deferred.Deferred,
f=b.get(l,a);c.mark()(f,b,d).done(function(a){a&&(m.push(f),n[f.globalIndex]=f);e.resolve()});return e}).done(function(){e.put(l,new epiviz.datatypes.MeasurementGenomicDataArrayWrapper(l,m,n));h.resolve()});return h}).done(function(){a._setMap(e);a._deferredInit.resolve()})})});return this._deferredInit};epiviz.datatypes.MeasurementOrderedGenomicData=function(a,c){epiviz.datatypes.MapGenomicData.call(this);this._data=a;this._order=c;this._deferredInit=null;this._initialize()};
epiviz.datatypes.MeasurementOrderedGenomicData.prototype=epiviz.utils.mapCopy(epiviz.datatypes.MapGenomicData.prototype);epiviz.datatypes.MeasurementOrderedGenomicData.constructor=epiviz.datatypes.MeasurementOrderedGenomicData;
epiviz.datatypes.MeasurementOrderedGenomicData.prototype._initialize=function(){if(this._deferredInit)return this._deferredInit;this._deferredInit=new epiviz.deferred.Deferred;var a=this,c=this._data,b=this._order;c.ready(function(){b.preMark()(c).done(function(d){var e=new epiviz.measurements.MeasurementHashtable,f=c.measurements(),g=new epiviz.measurements.MeasurementHashtable;epiviz.utils.deferredFor(f.length,function(a){var e=new epiviz.deferred.Deferred,m=f[a];b.mark()(m,c,d).done(function(a){g.put(m,
a);e.resolve()});return e}).done(function(){f.sort(function(a,b){var c=g.get(a),d=g.get(b);return c==d?0:c<d?-1:1});f.forEach(function(a){e.put(a,c.getSeries(a))});a._setMap(e);a._deferredInit.resolve()})})});return this._deferredInit};epiviz.datatypes.MeasurementAggregatedGenomicData=function(a,c,b){epiviz.datatypes.MapGenomicData.call(this);this._data=a;this._groupByMarker=c;this._aggregator=b;this._deferredInit=null;this._initialize()};
epiviz.datatypes.MeasurementAggregatedGenomicData.prototype=epiviz.utils.mapCopy(epiviz.datatypes.MapGenomicData.prototype);epiviz.datatypes.MeasurementAggregatedGenomicData.constructor=epiviz.datatypes.MeasurementAggregatedGenomicData;
epiviz.datatypes.MeasurementAggregatedGenomicData.prototype._initialize=function(){if(this._deferredInit)return this._deferredInit;this._deferredInit=new epiviz.deferred.Deferred;var a=this,c=this._groupByMarker,b=this._data;b.ready(function(){c.preMark()(b).done(function(d){var e=new epiviz.measurements.MeasurementHashtable,f={},g=b.measurements();epiviz.utils.deferredFor(g.length,function(a){var e=new epiviz.deferred.Deferred,m=g[a];c.mark()(m,b,d).done(function(a){a in f||(f[a]=[]);f[a].push(m);
e.resolve()});return e}).done(function(){var c={},d,g;for(d in f)if(f.hasOwnProperty(d)){g=f[d];var n=d+"-group",q=d,t=g[0].type(),x=g[0].datasourceId(),u=g[0].datasourceGroup(),E=g[0].dataprovider(),A=g[0].defaultChartType(),H=epiviz.utils.mapCopy(g[0].annotation()),I=g[0].minValue(),y=g[0].maxValue(),D=["errMinus","errPlus"].concat(g[0].metadata()),F={};D.forEach(function(a){F[a]=a});f[d].forEach(function(a){x!=a.datasourceId()&&(x="*");u!=a.datasourceGroup()&&(u="*");E!=a.dataprovider()&&(E="*");
A!=a.defaultChartType()&&(A="*");var b=a.annotation();if(H!=b)if(void 0==H)H=epiviz.utils.mapCopy(b);else if(void 0!=b)for(var c in b)b.hasOwnProperty(c)&&(c in H?H[c]!=b[c]&&(H[c]="*"):H[c]=b[c]);I=Math.min(I,a.minValue());y=Math.max(y,a.maxValue());a.metadata().forEach(function(a){a in F||(F[a]=a,D.push(a))})});c[d]=new epiviz.measurements.Measurement(n,q,t,x,u,E,null,A,H,I,y,D)}for(d in f)if(f.hasOwnProperty(d)){n=c[d];q=[];t={};g=f[d];for(var G=Math.min.apply(void 0,g.map(function(a){return b.globalStartIndex(a)})),
N=Math.max.apply(void 0,g.map(function(a){return b.globalEndIndex(a)})),M=G;M<N;++M){var P=g.map(function(a){return b.getByGlobalIndex(a,M)}).filter(function(a){return a});P.length&&(G=P.map(function(a){return a.value}),G=a._aggregator.aggregate(d,g,G),P=P[0].rowItem,P=new epiviz.datatypes.RowItemImpl(P.id(),P.seqName(),P.start(),P.end(),P.globalIndex(),P.strand(),epiviz.utils.mapCombine(P.rowMetadata()||{},{errMinus:G.errMinus,errPlus:G.errPlus})),G=new epiviz.datatypes.GenomicData.ValueItem(M,P,
G.value,n),q.push(G),t[M]=G)}g=new epiviz.datatypes.MeasurementGenomicDataArrayWrapper(n,q,t);e.put(n,g)}a._setMap(e);a._deferredInit.resolve()})})});return this._deferredInit};epiviz.ui={};epiviz.ui.controls={};epiviz.ui.controls.Control=function(a,c,b){this._container=a;this._title=c||"";this._id=b||epiviz.utils.generatePseudoGUID(6)};epiviz.ui.controls.Control.prototype.initialize=function(){};epiviz.ui.controls.Control.prototype.id=function(){return this._id};
epiviz.ui.controls.Control.prototype.title=function(){return this._title};epiviz.ui.controls.Dialog=function(a,c){this._container=$("#dialogs");this._title=a;this._id=epiviz.ui.controls.Dialog.generateId();this._handlers=c;this._container.append(sprintf('<div id="%s" title="%s" style="display: none;"></div>',this._id,this._title));this._dialog=null};epiviz.ui.controls.Dialog._nextIdIndex=0;epiviz.ui.controls.Dialog.generateId=function(){return sprintf("dialog-%s",epiviz.utils.generatePseudoGUID(5))};
epiviz.ui.controls.Dialog.prototype.show=function(){};epiviz.ui.charts={};epiviz.ui.charts.transform={};epiviz.ui.charts.transform.clustering={};epiviz.ui.charts.transform.clustering.ClusterNode=function(){};epiviz.ui.charts.transform.clustering.ClusterNode.prototype.weight=function(){};epiviz.ui.charts.transform.clustering.ClusterNode.prototype.children=function(){};epiviz.ui.charts.transform.clustering.ClusterNode.prototype.data=function(){};
epiviz.ui.charts.transform.clustering.ClusterNode.prototype.sort=function(a){};epiviz.ui.charts.transform.clustering.ClusterNode.prototype.copy=function(){};epiviz.ui.charts.transform.clustering.ClusterNode.prototype.distance=function(){};epiviz.ui.charts.transform.clustering.ClusterNode.prototype.sorted=function(){};epiviz.ui.charts.transform.clustering.ClusterSubtree=function(a,c){this._children=a;this._weight=null;this._distance=c;this._sorted=!1};
epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.weight=function(){if(void 0==this._weight){for(var a=0,c=0;c<this._children.length;++c)a+=this._children[c].weight();this._weight=a}return this._weight};epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.children=function(){return this._children};epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.data=function(){for(var a=[],c=0;c<this._children.length;++c)a=a.concat(this._children[c].data());return a};
epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.sort=function(a){if(!this.sorted()&&(this._children.sort(function(a,c){return a.weight()-c.weight()}),a)){for(var c=0;c<this._children.length;++c)this._children[c].sort(a);this._sorted=!0}};epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.copy=function(){for(var a=[],c=0;c<this._children.length;++c)a.push(this._children[c].copy());return new epiviz.ui.charts.transform.clustering.ClusterSubtree(a)};
epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.distance=function(){return this._distance};epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.sorted=function(){return this._sorted};epiviz.ui.charts.transform.clustering.ClusterLeaf=function(a){this._dataIndex=a};epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.weight=function(){return 1};epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.children=function(){return[]};
epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.data=function(){return[this._dataIndex]};epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.sort=function(){};epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.copy=function(){return new epiviz.ui.charts.transform.clustering.ClusterLeaf(this._dataIndex)};epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.distance=function(){return 0};epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.sorted=function(){return!0};
epiviz.ui.charts.transform.clustering.ClusterTree=function(a,c){this._root=a;this._data=c};epiviz.ui.charts.transform.clustering.ClusterTree.prototype.root=function(){return this._root};epiviz.ui.charts.transform.clustering.ClusterTree.prototype.orderedData=function(){this._root.sorted()||this._root.sort(!0);for(var a=this._root.data(),c=[],b=0;b<a.length;++b)c.push(this._data[a[b]]);return c};epiviz.ui.charts.transform.clustering.ClusteringMetric=function(){};
epiviz.ui.charts.transform.clustering.ClusteringMetric.prototype.distance=function(a,c){};epiviz.ui.charts.transform.clustering.ClusteringMetric.prototype.id=function(){};epiviz.ui.charts.transform.clustering.ClusteringLinkage=function(){};epiviz.ui.charts.transform.clustering.ClusteringLinkage.prototype.link=function(a,c){};epiviz.ui.charts.transform.clustering.ClusteringLinkage.prototype.id=function(){};epiviz.ui.charts.transform.clustering.HierarchicalClusteringAlgorithm=function(){};
epiviz.ui.charts.transform.clustering.HierarchicalClusteringAlgorithm.prototype.cluster=function(a,c,b){};epiviz.ui.charts.transform.clustering.HierarchicalClusteringAlgorithm.prototype.id=function(){};epiviz.ui.charts.transform.clustering.EuclideanMetric=function(){};
epiviz.ui.charts.transform.clustering.EuclideanMetric.prototype.distance=function(a,c){if(void 0==a||void 0==c)return null;var b=a.length,d=0,e=0,f=0,g;for(g=0;g<b;++g)if(void 0!=a[g]&&void 0!=c[g]){++d;var h=a[g]-c[g],e=e+h,f=f+h*h}0<d&&(e/=d);return f+(b-d)*e*e};epiviz.ui.charts.transform.clustering.EuclideanMetric.prototype.id=function(){return"euclidean"};epiviz.ui.charts.transform.clustering.CompleteLinkage=function(){};
epiviz.ui.charts.transform.clustering.CompleteLinkage.prototype.link=function(a,c){var b=Array(a.length-1);if(c[0]<c[1]){var d=c[0];c[0]=c[1];c[1]=d}for(var e=d=0;d<a.length;++d,++e)if(d==c[0]||d==c[1])--e;else{b[e]=a[d].slice(0);b[e].splice(c[0],1);b[e].splice(c[1],1);var f=[d<c[0]?a[d][c[0]]:a[c[0]][d],d<c[1]?a[d][c[1]]:a[c[1]][d]];b[e].push(Math.max(f[0],f[1]))}b[b.length-1]=Array(b.length);return b};epiviz.ui.charts.transform.clustering.CompleteLinkage.prototype.id=function(){return"complete"};
epiviz.ui.charts.transform.clustering.NoneClustering=function(){};epiviz.ui.charts.transform.clustering.NoneClustering.prototype.cluster=function(a,c,b){c=[];for(b=0;b<a.length;++b)c.push(new epiviz.ui.charts.transform.clustering.ClusterLeaf(b));c=new epiviz.ui.charts.transform.clustering.ClusterSubtree(c,0);return new epiviz.ui.charts.transform.clustering.ClusterTree(c,a)};epiviz.ui.charts.transform.clustering.NoneClustering.prototype.id=function(){return"none"};
epiviz.ui.charts.transform.clustering.AgglomerativeClustering=function(){};
epiviz.ui.charts.transform.clustering.AgglomerativeClustering.prototype.cluster=function(a,c,b){var d,e,f=Array(a.length);for(d=0;d<a.length;++d)for(f[d]=Array(a.length),e=d+1;e<a.length;++e)f[d][e]=c.distance(a[d],a[e]);c=[];for(d=0;d<a.length;++d)c.push(new epiviz.ui.charts.transform.clustering.ClusterLeaf(d));for(;1<c.length;){e=epiviz.utils.indexOfMin(f,!0);d=e.index;e=new epiviz.ui.charts.transform.clustering.ClusterSubtree([c[d[0]],c[d[1]]],e.min);if(d[0]<d[1]){var g=d[0];d[0]=d[1];d[1]=g}c.splice(d[0],
1);c.splice(d[1],1);c.push(e);f=b.link(f,d)}return new epiviz.ui.charts.transform.clustering.ClusterTree(c[0],a)};epiviz.ui.charts.transform.clustering.AgglomerativeClustering.prototype.id=function(){return"agglomerative"};
epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory=function(a){this._config=a;this._algorithms={};this._metrics={};this._linkages={};var c;for(c=0;c<a.clustering.algorithms.length;++c){var b=epiviz.utils.evaluateFullyQualifiedTypeName(a.clustering.algorithms[c]),b=epiviz.utils.applyConstructor(b);this._algorithms[b.id()]=b}for(c=0;c<a.clustering.metrics.length;++c)b=epiviz.utils.evaluateFullyQualifiedTypeName(a.clustering.metrics[c]),b=epiviz.utils.applyConstructor(b),this._metrics[b.id()]=
b;for(c=0;c<a.clustering.linkages.length;++c)b=epiviz.utils.evaluateFullyQualifiedTypeName(a.clustering.linkages[c]),b=epiviz.utils.applyConstructor(b),this._linkages[b.id()]=b};epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory._instance=null;epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.instance=function(){return epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory._instance};
epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.initialize=function(a){epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory._instance=new epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory(a)};epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.prototype.algorithm=function(a){return this._algorithms[a]};epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.prototype.metric=function(a){return this._metrics[a]};
epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.prototype.linkage=function(a){return this._linkages[a]};epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.prototype.algorithms=function(){return Object.keys(this._algorithms)};epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.prototype.metrics=function(){return Object.keys(this._metrics)};epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.prototype.linkages=function(){return Object.keys(this._linkages)};
epiviz.ui.charts.markers={};epiviz.ui.charts.markers.MeasurementAggregator=function(a,c){this._id=a;this._aggregator=c};epiviz.ui.charts.markers.MeasurementAggregator.prototype.aggregate=function(a,c,b){return this._aggregator(a,c,b)};epiviz.ui.charts.markers.MeasurementAggregator.prototype.id=function(){return this._id};
epiviz.ui.charts.markers.MeasurementAggregators={"mean-stdev":new epiviz.ui.charts.markers.MeasurementAggregator("mean-stdev",function(a,c,b){if(!b||0==b.length)return null;var d=b.reduce(function(a,b){return a+b})/b.length;a=b.map(function(a){return(a-d)*(a-d)}).reduce(function(a,b){return a+b})/b.length;a=Math.sqrt(a);return{value:d,errMinus:d-a,errPlus:d+a}}),quartiles:new epiviz.ui.charts.markers.MeasurementAggregator("quartiles",function(a,c,b){if(!b||0==b.length)return null;b=b.slice(0).sort(function(a,
b){return a-b});a=b.length;c=Math.floor(.5*a);var d=Math.ceil(.5*a);return{value:.5*(b[Math.floor(.5*(a-1))]+b[c]),errMinus:.5*(b[Math.floor(.5*(c-1))]+b[Math.floor(.5*c)]),errPlus:.5*(b[d+Math.floor(.5*(a-d-1))]+b[d+Math.floor(.5*(a-d))])}}),count:new epiviz.ui.charts.markers.MeasurementAggregator("count",function(a,c,b){return b&&0!=b.length?{value:b.length}:0}),min:new epiviz.ui.charts.markers.MeasurementAggregator("min",function(a,c,b){return b&&0!=b.length?{value:Math.min.apply(void 0,b)}:null}),
max:new epiviz.ui.charts.markers.MeasurementAggregator("max",function(a,c,b){return b&&0!=b.length?{value:Math.max.apply(void 0,b)}:null}),sum:new epiviz.ui.charts.markers.MeasurementAggregator("sum",function(a,c,b){return b&&0!=b.length?{value:b.reduce(function(a,b){return a+b})}:null})};
epiviz.ui.charts.markers.VisualizationMarker=function(a,c,b,d,e){this._type=a;this._id=c||epiviz.utils.generatePseudoGUID(6);this._name=b||"Custom Marker "+this._id;this._preMarkStr=d||"";this._markStr=e||"";var f=new epiviz.deferred.Deferred,g=null;epiviz.caja.cajole(this._preMarkStr).done(function(a){g=a;f.resolve()});this._preMark=function(a){var b=new epiviz.deferred.Deferred;f.done(function(){var c=g(a);b.resolve(c)});return b};var h=new epiviz.deferred.Deferred,l=null;epiviz.caja.cajole(this._markStr).done(function(a){l=
a;h.resolve()});this._mark=function(a,b,c){var d=new epiviz.deferred.Deferred;h.done(function(){var e=l(a,b,c);d.resolve(e)});return d}};epiviz.ui.charts.markers.VisualizationMarker.prototype.type=function(){return this._type};epiviz.ui.charts.markers.VisualizationMarker.prototype.id=function(){return this._id};epiviz.ui.charts.markers.VisualizationMarker.prototype.name=function(){return this._name};epiviz.ui.charts.markers.VisualizationMarker.prototype.preMark=function(){return this._preMark};
epiviz.ui.charts.markers.VisualizationMarker.prototype.mark=function(){return this._mark};epiviz.ui.charts.markers.VisualizationMarker.prototype.preMarkStr=function(){return this._preMarkStr};epiviz.ui.charts.markers.VisualizationMarker.prototype.markStr=function(){return this._markStr};epiviz.ui.charts.markers.VisualizationMarker.Type={FILTER:"filter",COLOR_BY_ROW:"colorByRow",ORDER_BY_MEASUREMENTS:"orderByMeasurements",COLOR_BY_MEASUREMENTS:"colorByMeasurements",GROUP_BY_MEASUREMENTS:"groupByMeasurements"};
epiviz.ui.charts.markers.VisualizationMarker.prototype.raw=function(){return{type:this._type,id:this._id,name:this._name,preMark:this._preMarkStr,mark:this._markStr}};epiviz.ui.charts.markers.VisualizationMarker.fromRawObject=function(a){return new epiviz.ui.charts.markers.VisualizationMarker(a.type,a.id,a.name,a.preMark,a.mark)};epiviz.ui.charts.Margins=function(a,c,b,d){this._top=a;this._left=c;this._bottom=b;this._right=d};
epiviz.ui.charts.Margins.ZERO_MARGIN=new epiviz.ui.charts.Margins(0,0,0,0);epiviz.ui.charts.Margins.prototype.top=function(){return this._top};epiviz.ui.charts.Margins.prototype.left=function(){return this._left};epiviz.ui.charts.Margins.prototype.bottom=function(){return this._bottom};epiviz.ui.charts.Margins.prototype.right=function(){return this._right};
epiviz.ui.charts.Margins.prototype.sumAxis=function(a){switch(a){case epiviz.ui.charts.Axis.X:return this._left+this._right;case epiviz.ui.charts.Axis.Y:return this._top+this._bottom;default:throw Error("Invalid argument: "+a);}};epiviz.ui.charts.Margins.prototype.raw=function(){return{top:this._top,left:this._left,bottom:this._bottom,right:this._right}};epiviz.ui.charts.Margins.fromRawObject=function(a){return new epiviz.ui.charts.Margins(a.top,a.left,a.bottom,a.right)};
epiviz.ui.charts.Margins.prototype.copy=function(){return new epiviz.ui.charts.Margins(this._top,this._left,this._bottom,this._right)};epiviz.ui.charts.Margins.prototype.equals=function(a){return a?this==a?!0:this._top==a._top&&this._left==a._left&&this._bottom==a._bottom&&this._right==a._right:!1};epiviz.ui.charts.ColorPalette=function(a,c,b){this._colors=a;this._id=b||epiviz.utils.generatePseudoGUID(6);this._name=c||"Custom ("+this._id+")";this._keyIndices={};this._nKeys=0};
epiviz.ui.charts.ColorPalette.prototype.id=function(){return this._id};epiviz.ui.charts.ColorPalette.prototype.name=function(){return this._name};epiviz.ui.charts.ColorPalette.prototype.get=function(a){return this._colors[a%this._colors.length]};epiviz.ui.charts.ColorPalette.prototype.getByKey=function(a){var c=this._keyIndices[a];void 0==c&&(c=this._nKeys,this._keyIndices[a]=this._nKeys,++this._nKeys);return this.get(c)};epiviz.ui.charts.ColorPalette.prototype.size=function(){return this._colors.length};
epiviz.ui.charts.ColorPalette.prototype.equals=function(a){return this==a?!0:a?epiviz.utils.arraysEqual(this._colors,a._colors):!1};epiviz.ui.charts.ColorPalette.prototype.copy=function(){return new epiviz.ui.charts.ColorPalette(this._colors.slice(0))};epiviz.ui.charts.ColorPalette.prototype.raw=function(a){return a&&this._id in a.colorPalettesMap?{id:this._id}:{id:this._id,name:this._name,colors:this._colors}};
epiviz.ui.charts.ColorPalette.fromRawObject=function(a,c){return $.isArray(a)?new epiviz.ui.charts.ColorPalette(a):c&&a.id in c.colorPalettesMap?c.colorPalettesMap[a.id]:new epiviz.ui.charts.ColorPalette(a.colors,a.name,a.id)};epiviz.ui.charts.Axis={X:"x",Y:"y"};epiviz.ui.charts.CustomSetting=function(a,c,b,d,e){this.id=a;this.type=c;this.defaultValue=b;this.label=d||a;this.possibleValues=e||null};
epiviz.ui.charts.CustomSetting.Type={NUMBER:"number",STRING:"string",ARRAY:"array",BOOLEAN:"boolean",CATEGORICAL:"categorical",MEASUREMENTS_METADATA:"measurementsMetadata",MEASUREMENTS_ANNOTATION:"measurementsAnnotation"};epiviz.ui.charts.CustomSetting.DEFAULT="default";epiviz.ui.charts.VisObject=function(){};epiviz.ui.charts.VisObject.prototype.regionStart=function(){return null};epiviz.ui.charts.VisObject.prototype.regionEnd=function(){return null};
epiviz.ui.charts.VisObject.prototype.getMetadata=function(a,c,b){return null};epiviz.ui.charts.VisObject.prototype.getStart=function(a,c){return null};epiviz.ui.charts.VisObject.prototype.getEnd=function(a,c){return null};epiviz.ui.charts.VisObject.prototype.metadataColumns=function(){return null};epiviz.ui.charts.VisObject.prototype.dimensions=function(){return[0,0]};epiviz.ui.charts.VisObject.prototype.metadataLooseCompare=function(){return!1};
epiviz.ui.charts.VisObject.prototype.overlapsWith=function(a){if(!a)return!1;if(this===a)return!0;var c,b,d,e=this.dimensions(),f=a.dimensions();if(!(e[0]&&f[0]||void 0!=this.regionStart()&&void 0!=a.regionStart()&&void 0!=this.regionEnd()&&void 0!=a.regionEnd()))return!1;if(!e[0]){if(!f[0])return this.regionStart()<a.regionEnd()&&this.regionEnd()>a.regionStart();for(b=0;b<f[1];++b)if(c=a.getStart(0,b),d=a.getEnd(0,b),void 0!=c&&void 0!=d&&this.regionStart()<d&&this.regionEnd()>c)return!0;return!1}var g=
epiviz.utils.arrayIntersection(this.metadataColumns(),a.metadataColumns());if(g.length){for(c=0;c<e[1];++c)for(b=0;b<f[1];++b){var h=!0;for(d=0;d<g.length;++d){var l=this.metadataLooseCompare()||a.metadataLooseCompare(),m=this.getMetadata(0,c,g[d]),n=a.getMetadata(0,b,g[d]);if(!l&&m!=n||l&&0>m.indexOf(n)&&0>n.indexOf(m)){h=!1;break}}if(h)return!0}return!1}for(c=0;c<e[1];++c)for(b=0;b<f[1];++b)if(this.getStart(0,c)<a.getEnd(0,b)&&this.getEnd(0,c)>a.getStart(0,b))return!0;return!1};
epiviz.ui.charts.VisualizationProperties=function(a,c,b,d,e,f,g,h,l){this.width=a;this.height=c;this.margins=b;this.visConfigSelection=d;this.colors=e;this.modifiedMethods=f;this.customSettingsValues=g||{};this.customSettingsDefs=h||[];this.chartMarkers=l||[]};
epiviz.ui.charts.VisualizationProperties.prototype.copy=function(){var a=new epiviz.ui.controls.VisConfigSelection(this.visConfigSelection.measurements?new epiviz.measurements.MeasurementSet(this.visConfigSelection.measurements):void 0,this.visConfigSelection.datasource,this.visConfigSelection.datasourceGroup,this.visConfigSelection.dataprovider,epiviz.utils.mapCopy(this.visConfigSelection.annotation),this.visConfigSelection.defaultChartType,this.visConfigSelection.minSelectedMeasurements);return new epiviz.ui.charts.VisualizationProperties(this.width,
this.height,this.margins?this.margins.copy():this.margins,a,this.colors,this.modifiedMethods?epiviz.utils.mapCopy(this.modifiedMethods):this.modifiedMethods,this.customSettingsValues?epiviz.utils.mapCopy(this.customSettingsValues):this.customSettingsValues,this.customSettingsDefs?this.customSettingsDefs.slice(0):this.customSettingsDefs,this.chartMarkers.slice(0))};epiviz.ui.charts.VisEventArgs=function(a,c){this.id=a;this.args=c};
epiviz.ui.charts.DisplayType={MEASUREMENT_VIS:{name:"measurement-vis",PLOT:{name:"plot"},TRACK:{name:"track"}},DATA_STRUCTURE:{name:"data-structure",HIERARCHY:{name:"hierarchy"}}};epiviz.ui.charts.DisplayType.is=function(a,c){var b=function(a,c){if(a.name==c.name)return!0;for(var f in c)if(c.hasOwnProperty(f)&&"name"!=f&&b(a,c[f]))return!0;return!1};return b(a,c)};
epiviz.ui.charts.Visualization=function(a,c,b){this._id=a;this._container=c;this._properties=b;this._originalMethods={};this._hasModifiedMethods=!1;this._lastModifiedMethod="draw";var d=this;if(b.modifiedMethods){var e=new epiviz.deferred.Deferred,f=b.modifiedMethods,g=Object.keys(f),h={},l=0,m;for(m in f)f.hasOwnProperty(m)&&"_setModifiedMethods"!=m&&function(a){epiviz.caja.cajole(f[a],epiviz.caja.buildChartMethodContext()).done(function(b){b&&(h[a]=b,l+=1,l>=g.length&&e.resolve())})}(m);e.done(function(){for(var a in h)h.hasOwnProperty(a)&&
(d._originalMethods[a]=d[a],d[a]=h[a],d._lastModifiedMethod=a);d._hasModifiedMethods=!0;d.draw()})}this._customSettingsValues={};for(a=0;a<b.customSettingsDefs.length;++a)switch(c=b.customSettingsDefs[a],m=b.customSettingsValues[c.id],c.type){case epiviz.ui.charts.CustomSetting.Type.BOOLEAN:this._customSettingsValues[c.id]=!1===m||m?m:c.defaultValue;break;case epiviz.ui.charts.CustomSetting.Type.NUMBER:this._customSettingsValues[c.id]=0===m||m?m:c.defaultValue;break;case epiviz.ui.charts.CustomSetting.Type.STRING:this._customSettingsValues[c.id]=
""===m||m?m:c.defaultValue;break;case epiviz.ui.charts.CustomSetting.Type.MEASUREMENTS_METADATA:var n={};b.visConfigSelection.measurements.foreach(function(a){a.metadata().forEach(function(a){n[a]=a})});c.possibleValues=Object.keys(n);c.possibleValues.sort();m=m||c.defaultValue;this._customSettingsValues[c.id]=m in n?m:c.possibleValues.length?c.possibleValues[0]:"";break;case epiviz.ui.charts.CustomSetting.Type.MEASUREMENTS_ANNOTATION:n={name:"name"};b.visConfigSelection.measurements.foreach(function(a){(a=
a.annotation())&&Object.keys(a).forEach(function(a){n[a]=a})});c.possibleValues=Object.keys(n);c.possibleValues.sort();m=m||c.defaultValue;this._customSettingsValues[c.id]=m in n?m:c.possibleValues.length?c.possibleValues[0]:"";break;default:this._customSettingsValues[c.id]=m||c.defaultValue}this._svgId=sprintf("%s-svg",this._id);this._lastRange=this._lastData=this._unalteredData=this._svg=null;this._slide=0;this._zoom=1;this._markers=b.chartMarkers;this._markersMap={};this._markersIndices={};this._markers.forEach(function(a,
b){a&&(d._markersMap[a.id()]=a,d._markersIndices[a.id()]=b)});this._autoPropagateChanges=!0;this._hover=new epiviz.events.Event;this._unhover=new epiviz.events.Event;this._select=new epiviz.events.Event;this._deselect=new epiviz.events.Event;this._save=new epiviz.events.Event;this._remove=new epiviz.events.Event;this._colorsChanged=new epiviz.events.Event;this._methodsModified=new epiviz.events.Event;this._methodsReset=new epiviz.events.Event;this._markersModified=new epiviz.events.Event;this._customSettingsChanged=
new epiviz.events.Event;this._sizeChanged=new epiviz.events.Event;this._marginsChanged=new epiviz.events.Event;this._dataWaitStart=new epiviz.events.Event;this._dataWaitEnd=new epiviz.events.Event};epiviz.ui.charts.Visualization.SVG_MARGIN=20;
epiviz.ui.charts.Visualization.prototype._initialize=function(){"100%"==this._properties.height&&(this._properties.height=this._container.height()-epiviz.ui.charts.Visualization.SVG_MARGIN);"100%"==this._properties.width&&(this._properties.width=this._container.width()-epiviz.ui.charts.Visualization.SVG_MARGIN);var a=this.width(),c=this.height();this._container.addClass("visualization-container");this._container.append(sprintf('<svg id="%s" class="visualization" width="%s" height="%s"><style type="text/css"></style><defs></defs></svg>',
this._svgId,a,c));this._svg=d3.select("#"+this._svgId);this._widthDif=$("#"+this._svgId).width()-(this._container.width()-epiviz.ui.charts.Visualization.SVG_MARGIN);this._heightDif=c-(this._container.height()-epiviz.ui.charts.Visualization.SVG_MARGIN);this._properties.width=a;this._properties.height=c;var b=this;this._container.click(function(){b._deselect.notify(new epiviz.ui.charts.VisEventArgs(b._id))})};
epiviz.ui.charts.Visualization.prototype._clearAxes=function(a){a=a||this._svg;a.selectAll(".xAxis").remove();a.selectAll(".yAxis").remove()};
epiviz.ui.charts.Visualization.prototype._drawAxes=function(a,c,b,d,e,f,g,h,l,m,n,q,t,x){e=e||this._svg;h=h||this.margins();g=g||this.height();f=f||this.width();var u=e.select(".axes"),E=u.select(".xAxis-grid");x=u.select(".yAxis-grid");var A=u.select(".xAxis-line");m=u.select(".yAxis-line");u.empty()&&(u=e.append("g").attr("class","axes"));E.empty()&&(E=u.append("g").attr("class","xAxis xAxis-grid"));x.empty()&&(x=u.append("g").attr("class","yAxis yAxis-grid"));A.empty()&&(A=u.append("g").attr("class",
"xAxis xAxis-line"));m.empty()&&(m=u.append("g").attr("class","yAxis yAxis-line"));a&&(E.attr("transform","translate("+h.left()+", "+h.top()+")").selectAll("line.x").data(a.ticks(b)).enter().append("line").attr("x1",a).attr("x2",a).attr("y1",0).attr("y2",g-h.top()-h.bottom()).style("stroke","#eeeeee").style("shape-rendering","crispEdges"),e=l||(n?function(a){return n[a]}:function(a){var b=d3.format("s");a=Math.round(1E3*a)/1E3;return b(a)}),b=d3.svg.axis().scale(a).orient("bottom").ticks(b).tickFormat(e),
A.attr("transform","translate("+h.left()+", "+(g-h.bottom())+")").call(b),n&&(g="rotate(-90)",t&&(g+="translate(0,"+(a(.5)-a(0))+")"),A.selectAll("text").style("text-anchor","end").attr("dx","-.8em").attr("dy","-0.5em").attr("transform",g)));c&&(x.attr("transform","translate("+h.left()+", "+h.top()+")").selectAll("line.y").data(c.ticks(d-1)).enter().append("line").attr("x1",0).attr("x2",f-h.left()-h.right()).attr("y1",c).attr("y2",c).style("stroke","#eeeeee").style("shape-rendering","crispEdges"),
a=q?function(a){return q[a]}:function(a){var b=d3.format("s");a=Math.round(1E3*a)/1E3;return b(a)},c=d3.svg.axis().ticks(d-1).scale(c).orient("left").tickFormat(a),m.attr("transform","translate("+h.left()+", "+h.top()+")").call(c))};
epiviz.ui.charts.Visualization.prototype._drawTitle=function(){var a=this._svg.selectAll(".visualization-title"),c=epiviz.ui.charts.Visualization.CustomSettings;(c=this.customSettingsValues()[c.TITLE])&&""!=c.trim()?(a.empty()&&(a=this._svg.append("text").attr("class","visualization-title").attr("text-anchor","middle")),a.attr("x",.5*this.width()).attr("y",25).text(c)):a.empty()||a.remove()};
epiviz.ui.charts.Visualization.prototype.resize=function(a,c){a&&(this._properties.width=a);c&&(this._properties.height=c);this.draw();this._sizeChanged.notify(new epiviz.ui.charts.VisEventArgs(this._id,{width:this._properties.width,height:this._properties.height}))};epiviz.ui.charts.Visualization.prototype.updateSize=function(){this.resize(this._widthDif+this._container.width()-epiviz.ui.charts.Visualization.SVG_MARGIN,this._heightDif+this._container.height()-epiviz.ui.charts.Visualization.SVG_MARGIN)};
epiviz.ui.charts.Visualization.prototype.draw=function(a,c){void 0!=a&&(this._lastRange=a);void 0!=c&&(this._unalteredData=this._lastData=c,this._dataWaitEnd.notify(new epiviz.ui.charts.VisEventArgs(this._id)));this._svg.attr("width",this.width()).attr("height",this.height());this._drawTitle();return[]};epiviz.ui.charts.Visualization.prototype.container=function(){return this._container};epiviz.ui.charts.Visualization.prototype.id=function(){return this._id};
epiviz.ui.charts.Visualization.prototype.properties=function(){return this._properties};epiviz.ui.charts.Visualization.prototype.height=function(){return this._properties.height};epiviz.ui.charts.Visualization.prototype.width=function(){return this._properties.width};epiviz.ui.charts.Visualization.prototype.margins=function(){return this._properties.margins};epiviz.ui.charts.Visualization.prototype.colors=function(){return this._properties.colors};
epiviz.ui.charts.Visualization.prototype.setColors=function(a){a&&!a.equals(this._properties.colors)&&(this._properties.colors=a,this.draw(),this._colorsChanged.notify(new epiviz.ui.charts.VisEventArgs(this._id,this._properties.colors)))};epiviz.ui.charts.Visualization.prototype.colorLabels=function(){var a=Array(this.measurements().size());this.measurements().foreach(function(c,b){a[b]=c.name()});return a};epiviz.ui.charts.Visualization.prototype.measurements=function(){return this.properties().visConfigSelection.measurements};
epiviz.ui.charts.Visualization.prototype.customSettingsValues=function(){return this._customSettingsValues};
epiviz.ui.charts.Visualization.prototype.setCustomSettingsValues=function(a){if(this._customSettingsValues!=a&&a&&!epiviz.utils.mapEquals(this._customSettingsValues,a)){var c=epiviz.ui.charts.Visualization.CustomSettings,b=a[c.TITLE]||"",d=(this._customSettingsValues[c.TITLE]||"").trim().length,b=b.trim().length;if(!(d*b)&&d+b){var d=20*epiviz.utils.sign(b-d),b=a[c.MARGIN_TOP]||this._properties.margins.top(),e=a[c.MARGIN_LEFT]||this._properties.margins.left(),f=a[c.MARGIN_RIGHT]||this._properties.margins.right(),
g=a[c.MARGIN_BOTTOM]||this._properties.margins.bottom();a[c.MARGIN_TOP]=b+d;a[c.MARGIN_LEFT]=e;a[c.MARGIN_RIGHT]=f;a[c.MARGIN_BOTTOM]=g}d=this._customSettingsValues[epiviz.ui.charts.ChartType.CustomSettings.MEASUREMENT_GROUPS_AGGREGATOR];b=a[epiviz.ui.charts.ChartType.CustomSettings.MEASUREMENT_GROUPS_AGGREGATOR];this._customSettingsValues=a;c.MARGIN_TOP in a&&c.MARGIN_BOTTOM in a&&c.MARGIN_LEFT in a&&c.MARGIN_RIGHT in a&&(this._properties.margins=new epiviz.ui.charts.Margins(a[c.MARGIN_TOP],a[c.MARGIN_LEFT],
a[c.MARGIN_BOTTOM],a[c.MARGIN_RIGHT]),this._marginsChanged.notify(new epiviz.ui.charts.VisEventArgs(this._id,this._properties.margins)));if(d!=b){var h=this;this.transformData(this._lastRange,this._unalteredData).done(function(){h.draw()})}else this.draw();this._customSettingsChanged.notify(new epiviz.ui.charts.VisEventArgs(this._id,a))}};
epiviz.ui.charts.Visualization.prototype.setModifiedMethods=function(a){var c=this,b=!1;if(a){var d=Object.keys(a),e=new epiviz.deferred.Deferred,f=0,g={},h;for(h in a)a.hasOwnProperty(h)&&"_setModifiedMethods"!=h&&this[h].toString()!=a[h]&&(h in this._originalMethods||(this._originalMethods[h]=this[h]),function(c){epiviz.caja.cajole(a[c],epiviz.caja.buildChartMethodContext()).done(function(a){a&&(g[c]=a,b=!0,f+=1,f>=d.length&&e.resolve())})}(h));e.done(function(){if(b){for(var d in g)g.hasOwnProperty(d)&&
(c[d]=g[d],c._lastModifiedMethod=d);c._hasModifiedMethods=!0;c.draw();c._methodsModified.notify(new epiviz.ui.charts.VisEventArgs(c._id,a))}})}};epiviz.ui.charts.Visualization.prototype.hasModifiedMethods=function(){return this._hasModifiedMethods};epiviz.ui.charts.Visualization.prototype.lastModifiedMethod=function(){return this._lastModifiedMethod};
epiviz.ui.charts.Visualization.prototype.resetModifiedMethods=function(){if(this._hasModifiedMethods){for(var a in this._originalMethods)this._originalMethods.hasOwnProperty(a)&&(this[a]=this._originalMethods[a]);this._hasModifiedMethods=!1;this.draw();this._methodsReset.notify(new epiviz.ui.charts.VisEventArgs(this._id))}};
epiviz.ui.charts.Visualization.prototype.putMarker=function(a){if(a){var c;if(a.id()in this._markersMap){c=this._markersIndices[a.id()];var b=this._markers[c];if(b==a||b.type()==a.type()&&b.preMarkStr()==a.preMarkStr()&&b.markStr()==a.markStr())return;this._markers[c]=a}else c=this._markers.length,this._markers.push(a),this._markersIndices[a.id()]=c;this._markersMap[a.id()]=a;var d=this;this.transformData(this._lastRange,this._unalteredData).done(function(){d.draw()});this._markersModified.notify(new epiviz.ui.charts.VisEventArgs(this._id,
this._markers))}};epiviz.ui.charts.Visualization.prototype.removeMarker=function(a){if(a in this._markersMap){this._markers[this._markersIndices[a]]=null;delete this._markersMap[a];delete this._markersIndices[a];var c=this;this.transformData(this._lastRange,this._unalteredData).done(function(){c.draw()});this._markersModified.notify(new epiviz.ui.charts.VisEventArgs(this._id,this._markers))}};
epiviz.ui.charts.Visualization.prototype.getMarker=function(a){return a&&a in this._markersMap?this._markersMap[a]:null};epiviz.ui.charts.Visualization.prototype.displayType=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.Visualization.prototype.autoPropagateChanges=function(){return this._autoPropagateChanges};epiviz.ui.charts.Visualization.prototype.setAutoPropagateChanges=function(a){this._autoPropagateChanges=a};
epiviz.ui.charts.Visualization.prototype.transformData=function(a,c){var b=this._lastRange;void 0!=a&&(this._lastRange=a);void 0!=c&&(this._unalteredData=this._lastData=c);b&&a&&b.overlapsWith(a)&&b.width()==a.width()&&(this._slide=a.start()-b.start());b&&a&&b.overlapsWith(a)&&b.width()!=a.width()&&(this._zoom=b.width()/a.width());b=new epiviz.deferred.Deferred;b.resolve();return b};epiviz.ui.charts.Visualization.prototype.onHover=function(){return this._hover};
epiviz.ui.charts.Visualization.prototype.onUnhover=function(){return this._unhover};epiviz.ui.charts.Visualization.prototype.onSelect=function(){return this._select};epiviz.ui.charts.Visualization.prototype.onDeselect=function(){return this._deselect};
epiviz.ui.charts.Visualization.prototype.doHover=function(a){var c=this._container.find(".items"),b=c.find("> .hovered"),d=c.find("> .selected"),e=d.find("> .hovered"),f=function(){return a.overlapsWith(d3.select(this).data()[0])},c=c.find("> .item").filter(f);b.append(c);c=d.find("> .item").filter(f);e.append(c)};
epiviz.ui.charts.Visualization.prototype.doUnhover=function(){var a=this._container.find(".items"),c=a.find("> .hovered"),b=a.find("> .selected"),d=b.find("> .hovered");a.prepend(c.children());b.prepend(d.children())};
epiviz.ui.charts.Visualization.prototype.doSelect=function(a){var c=this._container.find(".items"),b=c.find("> .hovered"),d=c.find("> .selected"),e=d.find("> .hovered"),f=function(){return a.overlapsWith(d3.select(this).data()[0])},c=c.find("> .item").filter(f);d.append(c);c=b.find("> .item").filter(f);e.append(c)};
epiviz.ui.charts.Visualization.prototype.doDeselect=function(){var a=this._container.find(".items"),c=a.find("> .hovered"),b=a.find("> .selected"),d=b.find("> .hovered");a.prepend(b.find("> .item"));c.prepend(d.children())};epiviz.ui.charts.Visualization.prototype.onSave=function(){return this._save};epiviz.ui.charts.Visualization.prototype.onRemove=function(){return this._remove};epiviz.ui.charts.Visualization.prototype.onColorsChanged=function(){return this._colorsChanged};
epiviz.ui.charts.Visualization.prototype.onMethodsModified=function(){return this._methodsModified};epiviz.ui.charts.Visualization.prototype.onMethodsReset=function(){return this._methodsReset};epiviz.ui.charts.Visualization.prototype.onMarkersModified=function(){return this._markersModified};epiviz.ui.charts.Visualization.prototype.onCustomSettingsChanged=function(){return this._customSettingsChanged};epiviz.ui.charts.Visualization.prototype.onSizeChanged=function(){return this._sizeChanged};
epiviz.ui.charts.Visualization.prototype.onMarginsChanged=function(){return this._marginsChanged};epiviz.ui.charts.Visualization.prototype.onDataWaitStart=function(){return this._dataWaitStart};epiviz.ui.charts.Visualization.prototype.onDataWaitEnd=function(){return this._dataWaitEnd};
epiviz.ui.charts.Visualization.CustomSettings={TITLE:"title",MARGIN_LEFT:"marginLeft",MARGIN_RIGHT:"marginRight",MARGIN_TOP:"marginTop",MARGIN_BOTTOM:"marginBottom",X_MIN:"xMin",X_MAX:"xMax",Y_MIN:"yMin",Y_MAX:"yMax",COL_LABEL:"colLabel",ROW_LABEL:"rowLabel"};
epiviz.ui.charts.VisualizationType=function(a){var c=epiviz.Config.VisualizationPropertySettings;this._config=a;this._defaultSettings=epiviz.utils.mapCombine(epiviz.utils.mapCombine(a.chartSettings[this.typeName()],a.chartSettings[this.chartDisplayType()],!0),a.chartSettings["default"],!0);this._defaultWidth=this._defaultSettings[c.WIDTH];this._defaultHeight=this._defaultSettings[c.HEIGHT];this._defaultMargins=this._defaultSettings[c.MARGINS];this._defaultColors=a.colorPalettesMap[this._defaultSettings[c.COLORS]];
this._decorations=this._defaultSettings[c.DECORATIONS];this._customSettingsValues=a.chartCustomSettings[this.typeName()]||null};epiviz.ui.charts.VisualizationType.DisplayType={PLOT:"plot",TRACK:"track",DATA_STRUCTURE:"data-structure"};epiviz.ui.charts.VisualizationType.prototype.createNew=function(a,c,b){throw Error("unimplemented abstract method");};epiviz.ui.charts.VisualizationType.prototype.typeName=function(){throw Error("unimplemented abstract method");};
epiviz.ui.charts.VisualizationType.prototype.chartName=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.VisualizationType.prototype.chartHtmlAttributeName=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.VisualizationType.prototype.chartDisplayType=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.VisualizationType.prototype.measurementsFilter=function(){return function(a){return!0}};
epiviz.ui.charts.VisualizationType.prototype.isRestrictedToSameDatasourceGroup=function(){return!1};epiviz.ui.charts.VisualizationType.prototype.isRestrictedToRangeMeasurements=function(){return!1};epiviz.ui.charts.VisualizationType.prototype.isRestrictedToFeatureMeasurements=function(){return!this.isRestrictedToRangeMeasurements()};epiviz.ui.charts.VisualizationType.prototype.minSelectedMeasurements=function(){return 1};epiviz.ui.charts.VisualizationType.prototype.chartContainer=function(){return epiviz.ui.ControlManager.CHART_TYPE_CONTAINERS[this.chartDisplayType()]};
epiviz.ui.charts.VisualizationType.prototype.cssClass=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.VisualizationType.prototype.defaultWidth=function(){return this._defaultWidth};epiviz.ui.charts.VisualizationType.prototype.defaultHeight=function(){return this._defaultHeight};epiviz.ui.charts.VisualizationType.prototype.defaultMargins=function(){return this._defaultMargins};epiviz.ui.charts.VisualizationType.prototype.defaultColors=function(){return this._defaultColors};
epiviz.ui.charts.VisualizationType.prototype.decorations=function(){return this._decorations};epiviz.ui.charts.VisualizationType.prototype.customSettingsValues=function(){return this._customSettingsValues};
epiviz.ui.charts.VisualizationType.prototype.customSettingsDefs=function(){return[new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.TITLE,epiviz.ui.charts.CustomSetting.Type.STRING,"","Title"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.MARGIN_TOP,epiviz.ui.charts.CustomSetting.Type.NUMBER,this._defaultMargins.top(),"Top margin"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.MARGIN_BOTTOM,epiviz.ui.charts.CustomSetting.Type.NUMBER,
this._defaultMargins.bottom(),"Bottom margin"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.MARGIN_LEFT,epiviz.ui.charts.CustomSetting.Type.NUMBER,this._defaultMargins.left(),"Left margin"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.MARGIN_RIGHT,epiviz.ui.charts.CustomSetting.Type.NUMBER,this._defaultMargins.right(),"Right margin")]};
epiviz.ui.charts.ChartObject=function(a,c,b,d,e,f,g,h){epiviz.ui.charts.VisObject.call(this);this.id=a;this.start=c;this.end=b;this.values=d;this.seriesIndex=e;this.valueItems=f;this.measurements=g;this.cssClasses=h};epiviz.ui.charts.ChartObject.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.VisObject.prototype);epiviz.ui.charts.ChartObject.constructor=epiviz.ui.charts.ChartObject;epiviz.ui.charts.ChartObject.prototype.regionStart=function(){return this.start};
epiviz.ui.charts.ChartObject.prototype.regionEnd=function(){return this.end};epiviz.ui.charts.ChartObject.prototype.getMetadata=function(a,c,b){return this.valueItems?this.valueItems[a][c].rowItem.metadata(b):null};epiviz.ui.charts.ChartObject.prototype.getStart=function(a,c){return this.valueItems[a][c].rowItem.start()};epiviz.ui.charts.ChartObject.prototype.getEnd=function(a,c){return this.valueItems[a][c].rowItem.end()};epiviz.ui.charts.ChartObject.prototype.metadataColumns=function(){return Object.keys(this.valueItems[0][0].rowItem.rowMetadata())};
epiviz.ui.charts.ChartObject.prototype.dimensions=function(){var a=[];return this.valueItems?(a.push(this.valueItems.length),this.valueItems.length?a.push(this.valueItems[0].length):a.push(0),a):[0,0]};epiviz.ui.charts.Chart=function(a,c,b){epiviz.ui.charts.Visualization.call(this,a,c,b);this._nBins=100;this._globalIndexColorLabels=this._measurementColorLabels=this._binSize=null};epiviz.ui.charts.Chart.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Visualization.prototype);
epiviz.ui.charts.Chart.constructor=epiviz.ui.charts.Chart;epiviz.ui.charts.Chart.prototype._initialize=function(){epiviz.ui.charts.Visualization.prototype._initialize.call(this);this._svg.classed("base-chart",!0)};
epiviz.ui.charts.Chart.prototype._addFilters=function(){var a=this._svg.append("defs"),c=a.append("filter").attr("id",this.id()+"-glow");c.append("feGaussianBlur").attr("id","gaussianBlur").attr("stdDeviation","2").attr("result","blurResult");c.append("feComposite").attr("id","composite").attr("in","SourceGraphic").attr("in2","blurResult").attr("operator","over");c=a.append("filter").attr("id",this.id()+"-contour");c.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation","1").attr("result",
"blur");c.append("feColorMatrix").attr("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 10 -1 ").attr("result","colorMatrix");c.append("feFlood").attr("result","fillColor").attr("flood-color","#800000").attr("in","blur");c.append("feComposite").attr("result","composite").attr("in","fillColor").attr("in2","colorMatrix").attr("operator","atop");c.append("feComposite").attr("in","SourceGraphic").attr("in2","composite").attr("operator","atop");a=a.append("filter").attr("id",this.id()+"-dropshadow").attr("filterUnits",
"userSpaceOnUse").attr("color-interpolation-filters","sRGB");c=a.append("feComponentTransfer").attr("in","SourceAlpha");c.append("feFuncR").attr("type","discrete").attr("tableValues","1");c.append("feFuncG").attr("type","discrete").attr("tableValues",198/255);c.append("feFuncB").attr("type","discrete").attr("tableValues","0");a.append("feGaussianBlur").attr("stdDeviation","2");a.append("feOffset").attr("dx","0").attr("dy","0").attr("result","shadow");a.append("feComposite").attr("in","SourceGraphic").attr("in2",
"shadow").attr("operator","over")};epiviz.ui.charts.Chart.prototype.draw=function(a,c){epiviz.ui.charts.Visualization.prototype.draw.call(this,a,c);a&&(this._binSize=Math.ceil((a.end()-a.start())/this._nBins));return[]};
epiviz.ui.charts.Chart.prototype.transformData=function(a,c){var b=new epiviz.deferred.Deferred,d=this;epiviz.ui.charts.Visualization.prototype.transformData.call(this,a,c).done(function(){d._lastData?d._lastData.ready(function(){var a=!1;d._lastData.measurements().every(function(b){a=b.type()!==epiviz.measurements.Measurement.Type.RANGE;return!a});if(a){var c;d._markers.every(function(a){a&&a.type()==epiviz.ui.charts.markers.VisualizationMarker.Type.GROUP_BY_MEASUREMENTS&&(c=a);return!c});if(c){var g=
epiviz.ui.charts.markers.MeasurementAggregators[d.customSettingsValues()[epiviz.ui.charts.ChartType.CustomSettings.MEASUREMENT_GROUPS_AGGREGATOR]];d._lastData=new epiviz.datatypes.MeasurementAggregatedGenomicData(d._lastData,c,g)}}var h;d._markers.every(function(a){a&&a.type()==epiviz.ui.charts.markers.VisualizationMarker.Type.FILTER&&(h=a);return!h});h&&(d._lastData=new epiviz.datatypes.ItemFilteredGenomicData(d._lastData,h));var l;d._markers.every(function(a){a&&a.type()==epiviz.ui.charts.markers.VisualizationMarker.Type.ORDER_BY_MEASUREMENTS&&
(l=a);return!l});l&&(d._lastData=new epiviz.datatypes.MeasurementOrderedGenomicData(d._lastData,l));d._lastData.ready(function(){var a=d._lastData;if(a.isReady()){var c=new epiviz.deferred.Deferred,e;d._markers.every(function(a){a&&a.type()==epiviz.ui.charts.markers.VisualizationMarker.Type.COLOR_BY_MEASUREMENTS&&(e=a);return!e});d._measurementColorLabels=null;if(e){var f=new epiviz.measurements.MeasurementHashtable;e.preMark()(a).done(function(b){var g=a.measurements();epiviz.utils.deferredFor(g.length,
function(c){var d=new epiviz.deferred.Deferred;e.mark()(g[c],a,b).done(function(a){f.put(g[c],a);d.resolve()});return d}).done(function(){d._measurementColorLabels=f;c.resolve()})})}else c.resolve();var g=new epiviz.deferred.Deferred,h;d._markers.every(function(a){a&&a.type()==epiviz.ui.charts.markers.VisualizationMarker.Type.COLOR_BY_ROW&&(h=a);return!h});d._globalIndexColorLabels=null;if(h){var l={};h.preMark()(a).done(function(b){var c=a.firstSeries();epiviz.utils.deferredFor(c.size(),function(d){var e=
new epiviz.deferred.Deferred;h.mark()(c.getRow(d),a,b).done(function(a){l[d+c.globalStartIndex()]=a;e.resolve()});return e}).done(function(){d._globalIndexColorLabels=l;g.resolve()})})}else g.resolve();c.done(function(){g.state()==epiviz.deferred.Deferred.State.RESOLVED&&(d._dataWaitEnd.notify(new epiviz.ui.charts.VisEventArgs(d.id())),b.resolve())});g.done(function(){c.state()==epiviz.deferred.Deferred.State.RESOLVED&&(d._dataWaitEnd.notify(new epiviz.ui.charts.VisEventArgs(d.id())),b.resolve())})}})}):
b.resolve()});return b};epiviz.ui.charts.Chart.prototype.properties=function(){return epiviz.ui.charts.Visualization.prototype.properties.call(this)};epiviz.ui.charts.Track=function(a,c,b){epiviz.ui.charts.Chart.call(this,a,c,b);this._highlightGroup=this._background=null};epiviz.ui.charts.Track.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Chart.prototype);epiviz.ui.charts.Track.constructor=epiviz.ui.charts.Track;
epiviz.ui.charts.Track.prototype._initialize=function(){this._properties.width="100%";epiviz.ui.charts.Chart.prototype._initialize.call(this);var a=this;this._highlightGroup=this._svg.append("g").attr("class","track-highlight");this._background=this._svg.append("rect").attr("class","chart-background").attr("x",0).attr("y",0).attr("width","100%").attr("height","100%").attr("fill","#ffffff").attr("fill-opacity","0");this._background.on("mouseover",function(){a._captureMouseHover()}).on("mousemove",
function(){a._captureMouseHover()}).on("mouseout",function(){a._unhover.notify(new epiviz.ui.charts.VisEventArgs(a.id()))})};epiviz.ui.charts.Track.prototype.draw=function(a,c,b,d){a=epiviz.ui.charts.Chart.prototype.draw.call(this,a,c);this._drawLegend();return a};epiviz.ui.charts.Track.prototype.displayType=function(){return epiviz.ui.charts.VisualizationType.DisplayType.TRACK};
epiviz.ui.charts.Track.prototype.doHover=function(a){epiviz.ui.charts.Chart.prototype.doHover.call(this,a);if(void 0!=a.start&&void 0!=a.end&&this._lastRange){this._highlightGroup.selectAll("rect").remove();this._highlightGroup.attr("transform","translate("+this.margins().left()+", 0)");var c=epiviz.ui.charts.Axis,b=d3.scale.linear().domain([this._lastRange.start(),this._lastRange.end()]).range([0,this.width()-this.margins().sumAxis(c.X)]),c=[];if(a.measurements&&a.measurements.length)for(var d=0;d<
a.valueItems[0].length;++d){var e=a.valueItems[0][d].rowItem;c.push({start:e.start(),end:e.end()})}else c.push({start:a.start,end:a.end});this._highlightGroup.selectAll("rect").data(c,function(a){return sprintf("%s-%s",a.start,a.end)}).enter().append("rect").style("fill",this.colors().get(0)).style("fill-opacity","0.1").attr("x",function(a){var c=b(a.end+1)-b(a.start),d=Math.max(5,c);return b(a.start)+.5*c-.5*d}).attr("width",function(a){return Math.max(5,b(a.end+1)-b(a.start))}).attr("y",0).attr("height",
this.height())}};epiviz.ui.charts.Track.prototype.doUnhover=function(){epiviz.ui.charts.Chart.prototype.doUnhover.call(this);this._highlightGroup.selectAll("rect").remove()};
epiviz.ui.charts.Track.prototype._captureMouseHover=function(){if(this._lastRange){this._unhover.notify(new epiviz.ui.charts.VisEventArgs(this.id()));var a=d3.scale.linear().domain([0,this.width()]).range([this._lastRange.start(),this._lastRange.end()])(d3.mouse(this._background[0][0])[0])-this._binSize/2,c=a+this._binSize,a=new epiviz.ui.charts.ChartObject(sprintf("%s-highlight",this.id()),a,c);this._hover.notify(new epiviz.ui.charts.VisEventArgs(this.id(),a))}};
epiviz.ui.charts.Track.prototype._drawLegend=function(){var a=this;this._svg.selectAll(".chart-title").remove();this._svg.selectAll(".chart-title-color ").remove();if(this._lastData&&this._lastData.isReady()){var c=this._lastData.measurements(),b=this._svg.selectAll(".chart-title").data(c).enter().append("text").attr("class","chart-title").attr("font-weight","bold").attr("fill",function(b,c){return a._measurementColorLabels?a.colors().getByKey(a._measurementColorLabels.get(b)):a.colors().get(c)}).attr("y",
a.margins().top()-5).text(function(a,b){return a.name()}),d=0,e=[];$("#"+this.id()+" .chart-title").each(function(a){e.push(d);d+=this.getBBox().width+15});b.attr("x",function(b,c){return a.margins().left()+10+e[c]});this._svg.selectAll(".chart-title-color").data(c).enter().append("circle").attr("class","chart-title-color").attr("cx",function(b,c){return a.margins().left()+4+e[c]}).attr("cy",a.margins().top()-9).attr("r",4).style("shape-rendering","auto").style("stroke-width","0").style("fill",function(b,
c){return a._measurementColorLabels?a.colors().getByKey(a._measurementColorLabels.get(b)):a.colors().get(c)})}};epiviz.ui.charts.Plot=function(a,c,b){epiviz.ui.charts.Chart.call(this,a,c,b)};epiviz.ui.charts.Plot.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Chart.prototype);epiviz.ui.charts.Plot.constructor=epiviz.ui.charts.Plot;epiviz.ui.charts.Plot.prototype.displayType=function(){return epiviz.ui.charts.VisualizationType.DisplayType.PLOT};
epiviz.ui.charts.ChartType=function(a){epiviz.ui.charts.VisualizationType.call(this,a)};epiviz.ui.charts.ChartType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.VisualizationType.prototype);epiviz.ui.charts.ChartType.constructor=epiviz.ui.charts.ChartType;epiviz.ui.charts.ChartType.prototype.createNew=function(a,c,b){throw Error("unimplemented abstract method");};
epiviz.ui.charts.ChartType.prototype.customSettingsDefs=function(){var a=epiviz.ui.charts.VisualizationType.prototype.customSettingsDefs.call(this);if(this.isRestrictedToRangeMeasurements())return a;var c=Object.keys(epiviz.ui.charts.markers.MeasurementAggregators);return a.concat([new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.ChartType.CustomSettings.MEASUREMENT_GROUPS_AGGREGATOR,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,c[0],"Aggregator for measurement groups",c)])};
epiviz.ui.charts.ChartType.CustomSettings={MEASUREMENT_GROUPS_AGGREGATOR:"measurementGroupsAggregator"};epiviz.ui.charts.TrackType=function(a){epiviz.ui.charts.ChartType.call(this,a)};epiviz.ui.charts.TrackType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.ChartType.prototype);epiviz.ui.charts.TrackType.constructor=epiviz.ui.charts.TrackType;epiviz.ui.charts.TrackType.prototype.chartDisplayType=function(){return epiviz.ui.charts.VisualizationType.DisplayType.TRACK};
epiviz.ui.charts.TrackType.prototype.cssClass=function(){return"track-container ui-widget-content"};epiviz.ui.charts.PlotType=function(a){epiviz.ui.charts.ChartType.call(this,a)};epiviz.ui.charts.PlotType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.ChartType.prototype);epiviz.ui.charts.PlotType.constructor=epiviz.ui.charts.PlotType;epiviz.ui.charts.PlotType.prototype.chartDisplayType=function(){return epiviz.ui.charts.VisualizationType.DisplayType.PLOT};
epiviz.ui.charts.PlotType.prototype.cssClass=function(){return"plot-container ui-widget-content"};epiviz.ui.charts.ChartFactory=function(a){this._config=a;this._types={};for(var c=this._size=0;c<a.chartTypes.length;++c)this.register(a.chartTypes[c])};epiviz.ui.charts.ChartFactory.prototype.size=function(){return this._size};epiviz.ui.charts.ChartFactory.prototype.registerType=function(a){a.typeName()in this._types||++this._size;this._types[a.typeName()]=a};
epiviz.ui.charts.ChartFactory.prototype.unregisterType=function(a){if(!(a.typeName()in this._types))return!1;--this._size;delete this._types[a.typeName()];return!0};epiviz.ui.charts.ChartFactory.prototype.register=function(a){a=epiviz.utils.evaluateFullyQualifiedTypeName(a);if(!a)return!1;this.registerType(new a(this._config));return!0};epiviz.ui.charts.ChartFactory.prototype.unregister=function(a){return(a=epiviz.utils.evaluateFullyQualifiedTypeName(a))?this.unregisterType(new a(this._config)):!1};
epiviz.ui.charts.ChartFactory.prototype.get=function(a){return a&&a in this._types?this._types[a]:null};epiviz.ui.charts.ChartFactory.prototype.foreach=function(a){for(var c in this._types)if(this._types.hasOwnProperty(c)&&a(c,this._types[c]))break};epiviz.ui.charts.decoration={};epiviz.ui.charts.decoration.VisualizationDecoration=function(a,c,b){this._visualization=a;this._otherDecoration=c;this._config=b};
epiviz.ui.charts.decoration.VisualizationDecoration.prototype.decorate=function(){this._otherDecoration&&this._otherDecoration.decorate()};epiviz.ui.charts.decoration.VisualizationDecoration.prototype.visualization=function(){return this._visualization};epiviz.ui.charts.decoration.VisualizationDecoration.prototype.otherDecoration=function(){return this._otherDecoration};epiviz.ui.charts.decoration.VisualizationDecoration.prototype.config=function(){return this._config};
epiviz.ui.charts.decoration.ChartOptionButton=function(a,c,b){epiviz.ui.charts.decoration.VisualizationDecoration.call(this,a,c,b);this.isChartOptionButton=!0};epiviz.ui.charts.decoration.ChartOptionButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.VisualizationDecoration.prototype);epiviz.ui.charts.decoration.ChartOptionButton.constructor=epiviz.ui.charts.decoration.ChartOptionButton;
epiviz.ui.charts.decoration.ChartOptionButton.prototype.decorate=function(){epiviz.ui.charts.decoration.VisualizationDecoration.prototype.decorate.call(this);if(this.isChartOptionButton){for(var a=0,c=this.otherDecoration();c;c=c.otherDecoration())c.isChartOptionButton&&++a;var b=$(sprintf('<button style="position: absolute; top: 5px; right: %spx">%s</button>',5+30*a,this._text())).appendTo(this.visualization().container()).button(this._renderOptions()).click(this._click());this.visualization().container().mousemove(function(){b.show()}).mouseleave(function(){b.hide()})}};
epiviz.ui.charts.decoration.ChartOptionButton.prototype._click=function(){return function(){}};epiviz.ui.charts.decoration.ChartOptionButton.prototype._renderOptions=function(){return{}};epiviz.ui.charts.decoration.ChartOptionButton.prototype._text=function(){return""};epiviz.ui.charts.decoration.RemoveChartButton=function(a,c){epiviz.ui.charts.decoration.ChartOptionButton.call(this,a,c)};epiviz.ui.charts.decoration.RemoveChartButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.ChartOptionButton.prototype);
epiviz.ui.charts.decoration.RemoveChartButton.constructor=epiviz.ui.charts.decoration.RemoveChartButton;epiviz.ui.charts.decoration.RemoveChartButton.prototype._click=function(){var a=this;return function(){a.visualization().onRemove().notify(new epiviz.ui.charts.VisEventArgs(a.visualization().id()))}};epiviz.ui.charts.decoration.RemoveChartButton.prototype._renderOptions=function(){return{icons:{primary:"ui-icon ui-icon-cancel"},text:!1}};
epiviz.ui.charts.decoration.RemoveChartButton.prototype._text=function(){return"Remove"};epiviz.ui.charts.decoration.SaveChartButton=function(a,c){epiviz.ui.charts.decoration.ChartOptionButton.call(this,a,c)};epiviz.ui.charts.decoration.SaveChartButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.ChartOptionButton.prototype);epiviz.ui.charts.decoration.SaveChartButton.constructor=epiviz.ui.charts.decoration.SaveChartButton;
epiviz.ui.charts.decoration.SaveChartButton.prototype._click=function(){var a=this;return function(){a.visualization().onSave().notify(new epiviz.ui.charts.VisEventArgs(a.visualization().id()))}};epiviz.ui.charts.decoration.SaveChartButton.prototype._renderOptions=function(){return{icons:{primary:"ui-icon ui-icon-disk"},text:!1}};epiviz.ui.charts.decoration.SaveChartButton.prototype._text=function(){return"Save"};
epiviz.ui.charts.decoration.ChartColorsButton=function(a,c,b){epiviz.ui.charts.decoration.ChartOptionButton.call(this,a,c,b)};epiviz.ui.charts.decoration.ChartColorsButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.ChartOptionButton.prototype);epiviz.ui.charts.decoration.ChartColorsButton.constructor=epiviz.ui.charts.decoration.ChartColorsButton;
epiviz.ui.charts.decoration.ChartColorsButton.prototype._click=function(){var a=this;return function(){var c=a.visualization().colorLabels();(new epiviz.ui.controls.ColorPickerDialog({ok:function(b){a.visualization().setColors(b)},cancel:function(){},reset:function(){}},c,a.config().colorPalettes,a.visualization().colors())).show()}};epiviz.ui.charts.decoration.ChartColorsButton.prototype._renderOptions=function(){return{icons:{primary:"ui-icon ui-icon-colorpicker"},text:!1}};
epiviz.ui.charts.decoration.ChartColorsButton.prototype._text=function(){return"Colors"};epiviz.ui.charts.decoration.CustomSettingsButton=function(a,c){epiviz.ui.charts.decoration.ChartOptionButton.call(this,a,c)};epiviz.ui.charts.decoration.CustomSettingsButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.ChartOptionButton.prototype);epiviz.ui.charts.decoration.CustomSettingsButton.constructor=epiviz.ui.charts.decoration.CustomSettingsButton;
epiviz.ui.charts.decoration.CustomSettingsButton.prototype._click=function(){var a=this;return function(){(new epiviz.ui.controls.CustomSettingsDialog("Edit custom settings",{ok:function(c){a.visualization().setCustomSettingsValues(c)},cancel:function(){}},a.visualization().properties().customSettingsDefs,a.visualization().customSettingsValues())).show()}};epiviz.ui.charts.decoration.CustomSettingsButton.prototype._renderOptions=function(){return{icons:{primary:"ui-icon ui-icon-gear"},text:!1}};
epiviz.ui.charts.decoration.CustomSettingsButton.prototype._text=function(){return"Custom settings"};epiviz.ui.charts.decoration.ToggleTooltipButton=function(a,c){epiviz.ui.charts.decoration.VisualizationDecoration.call(this,a,c);this.isChartOptionButton=!0;this._checked=!1};epiviz.ui.charts.decoration.ToggleTooltipButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.VisualizationDecoration.prototype);epiviz.ui.charts.decoration.ToggleTooltipButton.constructor=epiviz.ui.charts.decoration.ToggleTooltipButton;
epiviz.ui.charts.decoration.ToggleTooltipButton.prototype.decorate=function(){epiviz.ui.charts.decoration.VisualizationDecoration.prototype.decorate.call(this);for(var a=0,c=this.otherDecoration();c;c=c.otherDecoration())c.isChartOptionButton&&++a;var b=this,c=sprintf("%s-tooltip-button",this.visualization().id());this.visualization().container().append(sprintf('<div id="%1$s-container" style="position: absolute; top: 5px; right: %2$spx"><input type="checkbox" id="%1$s" %3$s /><label for="%1$s" >Toggle tooltip</label></div>',
c,5+30*a,this._checked?'checked="checked"':""));var d=$("#"+c),e=$("#"+c+"-container");d.button({text:!1,icons:{primary:"ui-icon-comment"}}).click(function(){b._checked=d.is(":checked")});this.visualization().container().mousemove(function(){e.show()}).mouseleave(function(){e.hide()})};epiviz.ui.charts.decoration.ToggleTooltipButton.prototype.checked=function(){return this._checked};
epiviz.ui.charts.decoration.CodeButton=function(a,c,b){epiviz.ui.charts.decoration.ChartOptionButton.call(this,a,c,b);this.isCodeButton=!0;this._controlCreators=[];a=!0;var d;for(c=this.otherDecoration();c;c=c.otherDecoration())c.isCodeButton&&(a=!1,d=c);d&&d._addControlCreator(this._controlCreator(),this._saveHandler(),this._cancelHandler());(this.isChartOptionButton=a)&&this._addControlCreator(this._controlCreator(),this._saveHandler(),this._cancelHandler())};
epiviz.ui.charts.decoration.CodeButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.ChartOptionButton.prototype);epiviz.ui.charts.decoration.CodeButton.constructor=epiviz.ui.charts.decoration.CodeButton;
epiviz.ui.charts.decoration.CodeButton.prototype._click=function(){var a=this;return function(){(new epiviz.ui.controls.CodeDialog("Chart Code",{save:function(c){c.forEach(function(b,c){a._controlCreators[c].save(b)})},cancel:function(){a._controlCreators.forEach(function(a){a.cancel()})}},a._controlCreators.map(function(a){return a.creator}))).show()}};epiviz.ui.charts.decoration.CodeButton.prototype._renderOptions=function(){return{icons:{primary:"ui-icon ui-icon-pencil"},text:!1}};
epiviz.ui.charts.decoration.CodeButton.prototype._text=function(){return"Code"};epiviz.ui.charts.decoration.CodeButton.prototype._addControlCreator=function(a,c,b){this._controlCreators.push({creator:a,save:c,cancel:b})};epiviz.ui.charts.decoration.CodeButton.prototype._controlCreator=function(){return null};epiviz.ui.charts.decoration.CodeButton.prototype._saveHandler=function(){return null};epiviz.ui.charts.decoration.CodeButton.prototype._cancelHandler=function(){return null};
epiviz.ui.charts.decoration.EditCodeButton=function(a,c,b){epiviz.ui.charts.decoration.CodeButton.call(this,a,c,b)};epiviz.ui.charts.decoration.EditCodeButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.CodeButton.prototype);epiviz.ui.charts.decoration.EditCodeButton.constructor=epiviz.ui.charts.decoration.EditCodeButton;
epiviz.ui.charts.decoration.EditCodeButton.prototype._controlCreator=function(){var a=this;return function(c){return new epiviz.ui.controls.EditCodeControl(c,"Edit Code",null,a.visualization(),a.visualization().lastModifiedMethod(),a.visualization().hasModifiedMethods())}};epiviz.ui.charts.decoration.EditCodeButton.prototype._saveHandler=function(){var a=this;return function(c){c.hasModifiedMethods?a.visualization().setModifiedMethods(c.modifiedMethods):a.visualization().resetModifiedMethods()}};
epiviz.ui.charts.decoration.EditCodeButton.prototype._cancelHandler=function(){return function(){}};epiviz.ui.charts.decoration.MarkerCodeButton=function(a,c,b){epiviz.ui.charts.decoration.CodeButton.call(this,a,c,b)};epiviz.ui.charts.decoration.MarkerCodeButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.CodeButton.prototype);epiviz.ui.charts.decoration.MarkerCodeButton.constructor=epiviz.ui.charts.decoration.MarkerCodeButton;
epiviz.ui.charts.decoration.MarkerCodeButton.prototype._controlCreator=function(){var a=this;return function(c){var b=a.visualization().getMarker(a.markerId()),d,e;b&&(d=b.preMarkStr(),e=b.markStr());d=d||a.preMarkTemplate();e=e||a.markTemplate();return new epiviz.ui.controls.MarkerCodeControl(c,a.markerLabel(),null,a.visualization(),d,e,void 0!=b)}};
epiviz.ui.charts.decoration.MarkerCodeButton.prototype._saveHandler=function(){var a=this;return function(c){c.enabled?a.visualization().putMarker(a.createMarker(c.preMark,c.mark)):a.visualization().removeMarker(a.markerId())}};epiviz.ui.charts.decoration.MarkerCodeButton.prototype._cancelHandler=function(){return function(){}};
epiviz.ui.charts.decoration.MarkerCodeButton.prototype.createMarker=function(a,c){return new epiviz.ui.charts.markers.VisualizationMarker(this.markerType(),this.markerId(),this.markerLabel(),a,c)};epiviz.ui.charts.decoration.MarkerCodeButton.prototype.markerType=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.decoration.MarkerCodeButton.prototype.markerLabel=function(){throw Error("unimplemented abstract method");};
epiviz.ui.charts.decoration.MarkerCodeButton.prototype.markerId=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.decoration.MarkerCodeButton.prototype.preMarkTemplate=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.decoration.MarkerCodeButton.prototype.markTemplate=function(){throw Error("unimplemented abstract method");};
epiviz.ui.charts.decoration.ChartFilterCodeButton=function(a,c,b){epiviz.ui.charts.decoration.MarkerCodeButton.call(this,a,c,b)};epiviz.ui.charts.decoration.ChartFilterCodeButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.MarkerCodeButton.prototype);epiviz.ui.charts.decoration.ChartFilterCodeButton.constructor=epiviz.ui.charts.decoration.ChartFilterCodeButton;epiviz.ui.charts.decoration.ChartFilterCodeButton.prototype.markerType=function(){return epiviz.ui.charts.markers.VisualizationMarker.Type.FILTER};
epiviz.ui.charts.decoration.ChartFilterCodeButton.prototype.markerLabel=function(){return"User Filter"};epiviz.ui.charts.decoration.ChartFilterCodeButton.prototype.markerId=function(){return"user-filter"};epiviz.ui.charts.decoration.ChartFilterCodeButton.prototype.preMarkTemplate=function(){return"/**\n * This method is called once before every draw, for all data available to the visualization,\n * for initialization. Its result can be used inside the filter method.\n * @param {epiviz.datatypes.GenomicData} [data]\n * @returns {InitialVars}\n * @template InitialVars\n */\nfunction(data) {\n  // TODO: Your code here\n  return null;\n}\n"};
epiviz.ui.charts.decoration.ChartFilterCodeButton.prototype.markTemplate=function(){return"/**\n * This method is called for every data object. If it returns false, the object will not be drawn.\n * @param {epiviz.datatypes.GenomicData.ValueItem} [item]\n * @param {epiviz.datatypes.GenomicData} [data]\n * @param {InitialVars} [preMarkResult]\n * @returns {boolean}\n * @template InitialVars\n */\nfunction(item, data, preMarkResult) {\n  // TODO: Your code here\n  return true;\n}\n"};
epiviz.ui.charts.decoration.HierarchyFilterCodeButton=function(a,c,b){epiviz.ui.charts.decoration.MarkerCodeButton.call(this,a,c,b)};epiviz.ui.charts.decoration.HierarchyFilterCodeButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.MarkerCodeButton.prototype);epiviz.ui.charts.decoration.HierarchyFilterCodeButton.constructor=epiviz.ui.charts.decoration.HierarchyFilterCodeButton;epiviz.ui.charts.decoration.HierarchyFilterCodeButton.prototype.markerType=function(){return epiviz.ui.charts.markers.VisualizationMarker.Type.FILTER};
epiviz.ui.charts.decoration.HierarchyFilterCodeButton.prototype.markerLabel=function(){return"User Filter"};epiviz.ui.charts.decoration.HierarchyFilterCodeButton.prototype.markerId=function(){return"user-filter"};epiviz.ui.charts.decoration.HierarchyFilterCodeButton.prototype.preMarkTemplate=function(){return"/**\n * This method is called once before every draw, for all data available to the visualization,\n * for initialization. Its result can be used inside the filter method.\n * @param {epiviz.ui.charts.tree.Node} [root]\n * @returns {InitialVars}\n * @template InitialVars\n */\nfunction(root) {\n  // TODO: Your code here\n  return null;\n}\n"};
epiviz.ui.charts.decoration.HierarchyFilterCodeButton.prototype.markTemplate=function(){return"/**\n * This method is called for every data object. If it returns false, the object will not be drawn.\n * @param {epiviz.ui.charts.tree.Node} [node]\n * @param {epiviz.ui.charts.tree.Node} [root]\n * @param {InitialVars} [preMarkResult]\n * @returns {boolean}\n * @template InitialVars\n */\nfunction(node, root, preMarkResult) {\n  // TODO: Your code here\n  return true;\n}\n"};
epiviz.ui.charts.decoration.ChartColorByRowCodeButton=function(a,c,b){epiviz.ui.charts.decoration.MarkerCodeButton.call(this,a,c,b)};epiviz.ui.charts.decoration.ChartColorByRowCodeButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.MarkerCodeButton.prototype);epiviz.ui.charts.decoration.ChartColorByRowCodeButton.constructor=epiviz.ui.charts.decoration.ChartColorByRowCodeButton;epiviz.ui.charts.decoration.ChartColorByRowCodeButton.prototype.markerType=function(){return epiviz.ui.charts.markers.VisualizationMarker.Type.COLOR_BY_ROW};
epiviz.ui.charts.decoration.ChartColorByRowCodeButton.prototype.markerLabel=function(){return"Color By"};epiviz.ui.charts.decoration.ChartColorByRowCodeButton.prototype.markerId=function(){return"color-by"};epiviz.ui.charts.decoration.ChartColorByRowCodeButton.prototype.preMarkTemplate=function(){return"/**\n * This method is called once before every draw, for all data available to the visualization,\n * for initialization. Its result can be used inside the filter method.\n * @param {epiviz.datatypes.GenomicData} [data]\n * @returns {InitialVars}\n * @template InitialVars\n */\nfunction(data) {\n  // TODO: Your code here\n  return null;\n}\n"};
epiviz.ui.charts.decoration.ChartColorByRowCodeButton.prototype.markTemplate=function(){return"/**\n * This method is called for every data object. If it returns false, the object will not be drawn.\n * @param {epiviz.datatypes.GenomicData.RowItem} [row]\n * @param {epiviz.datatypes.GenomicData} [data]\n * @param {InitialVars} [preMarkResult]\n * @returns {string}\n * @template InitialVars\n */\nfunction(row, data, preMarkResult) {\n  // TODO: Your code here\n  return row.metadata('colLabel');\n}\n"};
epiviz.ui.charts.decoration.ChartOrderByMeasurementsCodeButton=function(a,c,b){epiviz.ui.charts.decoration.MarkerCodeButton.call(this,a,c,b)};epiviz.ui.charts.decoration.ChartOrderByMeasurementsCodeButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.MarkerCodeButton.prototype);epiviz.ui.charts.decoration.ChartOrderByMeasurementsCodeButton.constructor=epiviz.ui.charts.decoration.ChartOrderByMeasurementsCodeButton;
epiviz.ui.charts.decoration.ChartOrderByMeasurementsCodeButton.prototype.markerType=function(){return epiviz.ui.charts.markers.VisualizationMarker.Type.ORDER_BY_MEASUREMENTS};epiviz.ui.charts.decoration.ChartOrderByMeasurementsCodeButton.prototype.markerLabel=function(){return"Order By"};epiviz.ui.charts.decoration.ChartOrderByMeasurementsCodeButton.prototype.markerId=function(){return"order-by-measurements"};
epiviz.ui.charts.decoration.ChartOrderByMeasurementsCodeButton.prototype.preMarkTemplate=function(){return"/**\n * This method is called once before every draw, for all data available to the visualization,\n * for initialization. Its result can be used inside the filter method.\n * @param {epiviz.datatypes.GenomicData} [data]\n * @returns {InitialVars}\n * @template InitialVars\n */\nfunction(data) {\n  // TODO: Your code here\n  return null;\n}\n"};
epiviz.ui.charts.decoration.ChartOrderByMeasurementsCodeButton.prototype.markTemplate=function(){return"/**\n * @param {epiviz.measurements.Measurement} m\n * @param {epiviz.datatypes.GenomicData} [data]\n * @param {InitialVars} [preMarkResult]\n * @returns {string|number}\n * @template InitialVars\n */\nfunction(m, data, preMarkResult) {\n  // TODO: Your code here\n  return 0;\n}\n"};
epiviz.ui.charts.decoration.ChartColorByMeasurementsCodeButton=function(a,c,b){epiviz.ui.charts.decoration.MarkerCodeButton.call(this,a,c,b)};epiviz.ui.charts.decoration.ChartColorByMeasurementsCodeButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.MarkerCodeButton.prototype);epiviz.ui.charts.decoration.ChartColorByMeasurementsCodeButton.constructor=epiviz.ui.charts.decoration.ChartColorByMeasurementsCodeButton;
epiviz.ui.charts.decoration.ChartColorByMeasurementsCodeButton.prototype.markerType=function(){return epiviz.ui.charts.markers.VisualizationMarker.Type.COLOR_BY_MEASUREMENTS};epiviz.ui.charts.decoration.ChartColorByMeasurementsCodeButton.prototype.markerLabel=function(){return"Color by Measurements"};epiviz.ui.charts.decoration.ChartColorByMeasurementsCodeButton.prototype.markerId=function(){return"color-by-measurements"};
epiviz.ui.charts.decoration.ChartColorByMeasurementsCodeButton.prototype.preMarkTemplate=function(){return"/**\n * This method is called once before every draw, for all data available to the visualization,\n * for initialization. Its result can be used inside the filter method.\n * @param {epiviz.datatypes.GenomicData} [data]\n * @returns {InitialVars}\n * @template InitialVars\n */\nfunction(data) {\n  // TODO: Your code here\n  return null;\n}\n"};
epiviz.ui.charts.decoration.ChartColorByMeasurementsCodeButton.prototype.markTemplate=function(){return"/**\n * @param {epiviz.measurements.Measurement} m\n * @param {epiviz.datatypes.GenomicData} [data]\n * @param {InitialVars} [preMarkResult]\n * @returns {string|number}\n * @template InitialVars\n */\nfunction(m, data, preMarkResult) {\n  // TODO: Your code here\n  return 0;\n}\n"};
epiviz.ui.charts.decoration.ChartGroupByMeasurementsCodeButton=function(a,c,b){epiviz.ui.charts.decoration.MarkerCodeButton.call(this,a,c,b)};epiviz.ui.charts.decoration.ChartGroupByMeasurementsCodeButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.MarkerCodeButton.prototype);epiviz.ui.charts.decoration.ChartGroupByMeasurementsCodeButton.constructor=epiviz.ui.charts.decoration.ChartGroupByMeasurementsCodeButton;
epiviz.ui.charts.decoration.ChartGroupByMeasurementsCodeButton.prototype.markerType=function(){return epiviz.ui.charts.markers.VisualizationMarker.Type.GROUP_BY_MEASUREMENTS};epiviz.ui.charts.decoration.ChartGroupByMeasurementsCodeButton.prototype.markerLabel=function(){return"Group by"};epiviz.ui.charts.decoration.ChartGroupByMeasurementsCodeButton.prototype.markerId=function(){return"group-by-measurements"};
epiviz.ui.charts.decoration.ChartGroupByMeasurementsCodeButton.prototype.preMarkTemplate=function(){return"/**\n * This method is called once before every draw, for all data available to the visualization,\n * for initialization. Its result can be used inside the filter method.\n * @param {epiviz.datatypes.GenomicData} [data]\n * @returns {InitialVars}\n * @template InitialVars\n */\nfunction(data) {\n  // TODO: Your code here\n  return null;\n}\n"};
epiviz.ui.charts.decoration.ChartGroupByMeasurementsCodeButton.prototype.markTemplate=function(){return"/**\n * @param {epiviz.measurements.Measurement} m\n * @param {epiviz.datatypes.GenomicData} [data]\n * @param {InitialVars} [preMarkResult]\n * @returns {string}\n * @template InitialVars\n */\nfunction(m, data, preMarkResult) {\n  // TODO: Your code here\n  return 0;\n}\n"};epiviz.ui.charts.decoration.ChartResize=function(a,c){epiviz.ui.charts.decoration.VisualizationDecoration.call(this,a,c)};
epiviz.ui.charts.decoration.ChartResize.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.VisualizationDecoration.prototype);epiviz.ui.charts.decoration.ChartResize.constructor=epiviz.ui.charts.decoration.ChartResize;epiviz.ui.charts.decoration.ChartResize.prototype.decorate=function(){epiviz.ui.charts.decoration.VisualizationDecoration.prototype.decorate.call(this);var a=this;this.visualization().container().resizable({stop:function(c,b){a.visualization().updateSize()}})};
epiviz.ui.charts.decoration.ChartTooltip=function(a,c){epiviz.ui.charts.decoration.VisualizationDecoration.call(this,a,c)};epiviz.ui.charts.decoration.ChartTooltip.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.VisualizationDecoration.prototype);epiviz.ui.charts.decoration.ChartTooltip.constructor=epiviz.ui.charts.decoration.ChartTooltip;
epiviz.ui.charts.decoration.ChartTooltip.prototype.decorate=function(){epiviz.ui.charts.decoration.VisualizationDecoration.prototype.decorate.call(this);for(var a=void 0,c=this.otherDecoration();c;c=c.otherDecoration())if(c.constructor==epiviz.ui.charts.decoration.ToggleTooltipButton){a=c;break}var b=this;this.visualization().container().tooltip({items:".item",content:function(){if(!a.checked())return!1;var c=d3.select(this).data()[0];return c.valueItems[0].length>c.measurements.length+c.measurements[0].metadata().length?
b._horizontalContent(c):b._verticalContent(c)},track:!0,show:!1})};
epiviz.ui.charts.decoration.ChartTooltip.prototype._horizontalContent=function(a){for(var c=a.measurements[0].metadata(),b=sprintf("%s%s%s",void 0!=a.start&&void 0!=a.end?"<th><b>Start</b></th><th><b>End</b></th>":"",c?"<th><b>"+c.join("</b></th><th><b>")+"</b></th>":"",a.values?"<th><b>"+a.measurements.join("</b></th><th><b>")+"</b></th>":""),d="",e=0;e<a.valueItems[0].length&&10>e;++e){var f="",g=a.valueItems[0][e].rowItem,h=Globalize.format(g.start(),"n0"),l=Globalize.format(g.end(),"n0");void 0!=
h&&void 0!=l&&(f+=sprintf("<td>%s</td><td>%s</td>",h,l));g=g.rowMetadata();if(c&&g)for(h=0;h<c.length;++h)l=g[c[h]]||"",f+=sprintf("<td>%s</td>",15>=l.length?l:l.substr(0,15)+"...");if(a.values)for(g=0;g<a.measurements.length;++g)f+=sprintf("<td>%s</td>",Globalize.format(a.valueItems[g][e].value,"n3"));d+=sprintf("<tr>%s</tr>",f)}e<a.valueItems[0].length&&(d+=sprintf('<tr><td colspan="%s" style="text-align: center;">...</td></tr>',2+(c?c.length:0)+(a.values?a.measurements.length:0)));return sprintf('<table class="tooltip-table"><thead><tr>%s</tr></thead><tbody>%s</tbody></table>',
b,d)};
epiviz.ui.charts.decoration.ChartTooltip.prototype._verticalContent=function(a){var c=[],b=[0,0];if(void 0!=a.start&&void 0!=a.end){var d=["Start"],e=["End"];a.valueItems[0].every(function(a,b){d.push(Globalize.format(a.rowItem.start(),"n0"));e.push(Globalize.format(a.rowItem.end(),"n0"));return 5>b});c.push(d);c.push(e);b=[0,2]}var f=a.measurements[0].metadata(),g=[b[1],b[1]+f.length];f.forEach(function(b){var d=[b];a.valueItems[0].every(function(a,c){var e=a.rowItem.metadata(b);15<e.length&&(e=
e.substr(0,15)+"...");d.push(e);return 5>c});c.push(d)});f=[g[1],g[1]];a.values&&(f=[g[1],g[1]+a.measurements.length],a.measurements.forEach(function(b,d){var e=[b.name()];a.valueItems[d].every(function(a,b){e.push(Globalize.format(a.value,"n3"));return 5>b});c.push(e)}));var h=f[1];10<h&&(b[1]=1,g[1]=Math.min(g[1],g[0]+4),h=b[1]-b[0]+g[1]-g[0]+f[1]-f[0],10<h&&(f[1]-=h-10));var h="",l;for(l=b[0];l<b[1];++l)h+="<tr><td><b>"+c[l][0]+"</b></td><td>"+c[l].slice(1).join("</td><td>")+"</td></tr>";for(l=
g[0];l<g[1];++l)h+="<tr><td><b>"+c[l][0]+"</b></td><td>"+c[l].slice(1).join("</td><td>")+"</td></tr>";for(l=f[0];l<f[1];++l)h+="<tr><td><b>"+c[l][0]+"</b></td><td>"+c[l].slice(1).join("</td><td>")+"</td></tr>";return'<table class="tooltip-table"><tbody>'+h+"</tbody></table>"};epiviz.ui.charts.decoration.ChartLoaderAnimation=function(a,c){epiviz.ui.charts.decoration.VisualizationDecoration.call(this,a,c);this._loaderTimeout=0;this._animationShowing=!1};
epiviz.ui.charts.decoration.ChartLoaderAnimation.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.VisualizationDecoration.prototype);epiviz.ui.charts.decoration.ChartLoaderAnimation.constructor=epiviz.ui.charts.decoration.ChartLoaderAnimation;
epiviz.ui.charts.decoration.ChartLoaderAnimation.prototype.decorate=function(){epiviz.ui.charts.decoration.VisualizationDecoration.prototype.decorate.call(this);var a=this;this.visualization().onDataWaitStart().addListener(new epiviz.events.EventListener(function(){a._addLoaderAnimation()}));this.visualization().onDataWaitEnd().addListener(new epiviz.events.EventListener(function(){a._removeLoaderAnimation()}));this.visualization().onSizeChanged().addListener(new epiviz.events.EventListener(function(){a._animationShowing&&
a._addLoaderAnimation()}))};
epiviz.ui.charts.decoration.ChartLoaderAnimation.prototype._addLoaderAnimation=function(){this._loaderTimeout&&clearTimeout(this._loaderTimeout);var a=function(){c._animationShowing=!0;var a=c.visualization(),d=a.container();d.find(".chart-loader").remove();d.append(sprintf('<div class="loader-icon %s" style="top: %spx; left: %spx;"></div>',"chart-loader",Math.floor(.5*a.height()),Math.floor(.5*a.width())));d.find(".chart-loader").activity({segments:8,steps:5,opacity:.3,width:4,space:0,length:10,
color:"#0b0b0b",speed:1})},c=this;this._animationShowing?a():this._loaderTimeout=setTimeout(a,500)};epiviz.ui.charts.decoration.ChartLoaderAnimation.prototype._removeLoaderAnimation=function(){this._loaderTimeout&&clearTimeout(this._loaderTimeout);this._animationShowing=!1;this.visualization().container().find(".chart-loader").remove()};
epiviz.ui.charts.ChartManager=function(a){this._config=a;this._charts={};this._chartsOrder={};this._resizeInterval=null;this._chartAdded=new epiviz.events.Event;this._chartRemoved=new epiviz.events.Event;this._chartsOrderChanged=new epiviz.events.Event;this._chartsCleared=new epiviz.events.Event;this._chartColorsChanged=new epiviz.events.Event;this._chartMethodsModified=new epiviz.events.Event;this._chartMethodsReset=new epiviz.events.Event;this._chartMarkersModified=new epiviz.events.Event;this._chartCustomSettingsChanged=
new epiviz.events.Event;this._chartSizeChanged=new epiviz.events.Event;this._chartMarginsChanged=new epiviz.events.Event;this._chartRequestHierarchy=new epiviz.events.Event;this._chartPropagateHierarchyChanges=new epiviz.events.Event;this._registerWindowResize()};
epiviz.ui.charts.ChartManager.prototype.addChart=function(a,c,b,d){b=b||sprintf("%s-%s-%s",a.chartDisplayType(),a.chartHtmlAttributeName(),epiviz.utils.generatePseudoGUID(5));var e=a.cssClass(),f=$("#"+a.chartContainer()),g=f.find(".accordion"),h=g.find(".vis-container");if(0==g.length){var g=$('<div class="accordion"></div>').appendTo(f),l=a.chartDisplayType();g.append(sprintf('<h3><a href="#"><b><span style="color: #025167">Views by %s</span></b></a></h3>',epiviz.ui.ControlManager.DISPLAY_TYPE_LABELS[l]));
h=$('<div class="vis-container"></div>').appendTo(g);g.multiAccordion();g.multiAccordion("option","active","all");var m=this;h.sortable({stop:function(a,b){var c=h.find(".visualization-container").map(function(a,b){return $(b).attr("id")});epiviz.utils.arraysEqual(c,m._chartsOrder[l])||(m._chartsOrder[l]=c,m._chartsOrderChanged.notify(m._chartsOrder))}})}h.append(sprintf('<div id="%s" class="%s"></div>',b,e));e=h.find("#"+b);d=d||new epiviz.ui.charts.VisualizationProperties(a.defaultWidth(),a.defaultHeight(),
a.defaultMargins(),c,a.defaultColors(),null,a.customSettingsValues(),a.customSettingsDefs(),[],null);c=a.createNew(b,e,d);this._charts[b]=c;this._registerChartHover(c);this._registerChartUnhover(c);this._registerChartSelect(c);this._registerChartDeselect(c);this._registerChartColorsChanged(c);this._registerChartMethodsModified(c);this._registerChartMethodsReset(c);this._registerChartMarkersModified(c);this._registerChartCustomSettingsChanged(c);this._registerChartSizeChanged(c);this._registerChartMarginsChanged(c);
this._registerChartRemove(c);this._registerChartSave(c);this._registerChartRequestHierarchy(c);this._registerChartPropagateHierarchyChanges(c);if(a.decorations()){e=void 0;for(f=0;f<a.decorations().length;++f)(g=epiviz.utils.evaluateFullyQualifiedTypeName(a.decorations()[f]))&&(e=epiviz.utils.applyConstructor(g,[c,e,this._config]));e&&e.decorate()}a.chartDisplayType()in this._chartsOrder||(this._chartsOrder[a.chartDisplayType()]=[]);this._chartsOrder[a.chartDisplayType()].push(b);this._chartAdded.notify(new epiviz.ui.charts.VisEventArgs(b,
{type:a,properties:d,chartsOrder:this._chartsOrder}));return b};epiviz.ui.charts.ChartManager.prototype.removeChart=function(a){$("#"+a).remove();var c=this._charts[a];delete this._charts[a];this._chartsOrder[c.displayType()].splice(this._chartsOrder[c.displayType()].indexOf(a),1);c=$("#"+epiviz.ui.ControlManager.CHART_TYPE_CONTAINERS[c.displayType()]);0==c.find(".accordion").find(".vis-container").children().length&&c.empty();this._chartRemoved.notify(new epiviz.ui.charts.VisEventArgs(a,this._chartsOrder))};
epiviz.ui.charts.ChartManager.prototype.chartsMeasurements=function(){var a={},c;for(c in this._charts)this._charts.hasOwnProperty(c)&&this._charts[c].displayType()!=epiviz.ui.charts.VisualizationType.DisplayType.DATA_STRUCTURE&&(a[c]=this._charts[c].measurements());return a};epiviz.ui.charts.ChartManager.prototype.updateCharts=function(a,c,b){b=b||Object.keys(this._charts);for(var d=0;d<b.length;++d)if(this._charts.hasOwnProperty(b[d])){var e=this._charts[b[d]];e&&function(b){b.transformData(a,c).done(function(){b.draw()})}(e)}};
epiviz.ui.charts.ChartManager.prototype.clear=function(){this._charts={};this._chartsOrder={};var a=epiviz.ui.ControlManager.CHART_TYPE_CONTAINERS,c;for(c in a)a.hasOwnProperty(c)&&$("#"+a[c]).empty();this._chartsCleared.notify()};epiviz.ui.charts.ChartManager.prototype.dataWaitStart=function(a,c){if(a&&this._charts[a])this._charts[a].onDataWaitStart().notify(new epiviz.ui.charts.VisEventArgs(a));else for(var b in this._charts)this._charts.hasOwnProperty(b)&&c&&c[this._charts[b]]&&this._charts[b].onDataWaitStart().notify(new epiviz.ui.charts.VisEventArgs(b))};
epiviz.ui.charts.ChartManager.prototype.onChartAdded=function(){return this._chartAdded};epiviz.ui.charts.ChartManager.prototype.onChartRemoved=function(){return this._chartRemoved};epiviz.ui.charts.ChartManager.prototype.onChartsOrderChanged=function(){return this._chartsOrderChanged};epiviz.ui.charts.ChartManager.prototype.onChartsCleared=function(){return this._chartsCleared};epiviz.ui.charts.ChartManager.prototype.onChartColorsChanged=function(){return this._chartColorsChanged};
epiviz.ui.charts.ChartManager.prototype.onChartMethodsModified=function(){return this._chartMethodsModified};epiviz.ui.charts.ChartManager.prototype.onChartMethodsReset=function(){return this._chartMethodsReset};epiviz.ui.charts.ChartManager.prototype.onChartMarkersModified=function(){return this._chartMarkersModified};epiviz.ui.charts.ChartManager.prototype.onChartCustomSettingsChanged=function(){return this._chartCustomSettingsChanged};
epiviz.ui.charts.ChartManager.prototype.onChartSizeChanged=function(){return this._chartSizeChanged};epiviz.ui.charts.ChartManager.prototype.onChartMarginsChanged=function(){return this._chartMarginsChanged};epiviz.ui.charts.ChartManager.prototype.onChartRequestHierarchy=function(){return this._chartRequestHierarchy};epiviz.ui.charts.ChartManager.prototype.onChartPropagateHierarchyChanges=function(){return this._chartPropagateHierarchyChanges};
epiviz.ui.charts.ChartManager.prototype._registerWindowResize=function(){var a=this;$(window).resize(function(){null!==a._resizeInterval&&window.clearTimeout(a._resizeInterval);a._resizeInterval=window.setTimeout(function(){for(var c in a._charts)a._charts.hasOwnProperty(c)&&a._charts[c].updateSize();a._resizeInterval=null},500)})};
epiviz.ui.charts.ChartManager.prototype._registerChartHover=function(a){var c=this;a.onHover().addListener(new epiviz.events.EventListener(function(a){for(var d in c._charts)c._charts.hasOwnProperty(d)&&c._charts[d].doHover(a.args)}))};epiviz.ui.charts.ChartManager.prototype._registerChartUnhover=function(a){var c=this;a.onUnhover().addListener(new epiviz.events.EventListener(function(){for(var a in c._charts)c._charts.hasOwnProperty(a)&&c._charts[a].doUnhover()}))};
epiviz.ui.charts.ChartManager.prototype._registerChartSelect=function(a){var c=this;a.onSelect().addListener(new epiviz.events.EventListener(function(a){a=a.args;for(var d in c._charts)c._charts.hasOwnProperty(d)&&c._charts[d].doSelect(a)}))};epiviz.ui.charts.ChartManager.prototype._registerChartDeselect=function(a){var c=this;a.onDeselect().addListener(new epiviz.events.EventListener(function(){for(var a in c._charts)c._charts.hasOwnProperty(a)&&c._charts[a].doDeselect()}))};
epiviz.ui.charts.ChartManager.prototype._registerChartRemove=function(a){var c=this;a.onRemove().addListener(new epiviz.events.EventListener(function(a){c.removeChart(a.id)}))};epiviz.ui.charts.ChartManager.prototype._registerChartSave=function(a){var c=this;a.onSave().addListener(new epiviz.events.EventListener(function(a){(new epiviz.ui.controls.SaveSvgAsImageDialog({ok:function(){},cancel:function(){}},a.id,c._config.dataServerLocation+c._config.chartSaverLocation)).show()}))};
epiviz.ui.charts.ChartManager.prototype._registerChartColorsChanged=function(a){var c=this;a.onColorsChanged().addListener(new epiviz.events.EventListener(function(a){c._chartColorsChanged.notify(a)}))};epiviz.ui.charts.ChartManager.prototype._registerChartMethodsModified=function(a){var c=this;a.onMethodsModified().addListener(new epiviz.events.EventListener(function(a){c._chartMethodsModified.notify(a)}))};
epiviz.ui.charts.ChartManager.prototype._registerChartMethodsReset=function(a){var c=this;a.onMethodsReset().addListener(new epiviz.events.EventListener(function(a){c._chartMethodsReset.notify(a)}))};epiviz.ui.charts.ChartManager.prototype._registerChartMarkersModified=function(a){var c=this;a.onMarkersModified().addListener(new epiviz.events.EventListener(function(a){c._chartMarkersModified.notify(a)}))};
epiviz.ui.charts.ChartManager.prototype._registerChartCustomSettingsChanged=function(a){var c=this;a.onCustomSettingsChanged().addListener(new epiviz.events.EventListener(function(a){c._chartCustomSettingsChanged.notify(a)}))};epiviz.ui.charts.ChartManager.prototype._registerChartSizeChanged=function(a){var c=this;a.onSizeChanged().addListener(new epiviz.events.EventListener(function(a){c._chartSizeChanged.notify(a)}))};
epiviz.ui.charts.ChartManager.prototype._registerChartMarginsChanged=function(a){var c=this;a.onMarginsChanged().addListener(new epiviz.events.EventListener(function(a){c._chartMarginsChanged.notify(a)}))};epiviz.ui.charts.ChartManager.prototype._registerChartRequestHierarchy=function(a){var c=this;a.displayType()==epiviz.ui.charts.VisualizationType.DisplayType.DATA_STRUCTURE&&a.onRequestHierarchy().addListener(new epiviz.events.EventListener(function(a){c._chartRequestHierarchy.notify(a)}))};
epiviz.ui.charts.ChartManager.prototype._registerChartPropagateHierarchyChanges=function(a){var c=this;a.displayType()==epiviz.ui.charts.VisualizationType.DisplayType.DATA_STRUCTURE&&a.onPropagateHierarchyChanges().addListener(new epiviz.events.EventListener(function(a){c._chartPropagateHierarchyChanges.notify(a)}))};epiviz.workspaces={};epiviz.workspaces.UserManager=function(a){this._config=a};
epiviz.workspaces.UserManager.USER_STATUS=epiviz.workspaces.UserManager.USER_STATUS||{loggedIn:!1,userData:null,oauthProvider:null};epiviz.workspaces.UserManager.prototype.toggleLogin=function(){epiviz.workspaces.UserManager.USER_STATUS.loggedIn?this._logout():this._login()};epiviz.workspaces.UserManager.prototype._login=function(){var a=window.location.toString();0<a.length&&(a=encodeURIComponent(a));window.location=this._config.dataServerLocation+"login.php?location="+a};
epiviz.workspaces.UserManager.prototype._logout=function(){var a=window.location.toString();0<a.length&&(a=encodeURIComponent(a));window.location=this._config.dataServerLocation+"logout.php?logout&location="+a};
epiviz.workspaces.Workspace=function(a,c,b){this._id=a;this._name=c;this._range=b.range;this._chartsOrder={};this._chartsById={};for(var d in b.charts)if(b.charts.hasOwnProperty(d))for(this._chartsOrder[d]=[],a=0;a<b.charts[d].length;++a)this._chartsById[b.charts[d][a].id]=b.charts[d][a],this._chartsOrder[d].push(b.charts[d][a].id);this._computedMeasurements=b.computedMeasurements||new epiviz.measurements.MeasurementSet;this._changed=!1;this._contentChanged=new epiviz.events.Event};
epiviz.workspaces.Workspace.DEFAULT_WORKSPACE_NAME=epiviz.Config.DEFAULT_WORKSPACE_NAME;epiviz.workspaces.Workspace.prototype.id=function(){return this._id};epiviz.workspaces.Workspace.prototype.name=function(){return this._name};epiviz.workspaces.Workspace.prototype.range=function(){return this._range};epiviz.workspaces.Workspace.prototype.charts=function(){var a={},c;for(c in this._chartsOrder)if(this._chartsOrder.hasOwnProperty(c)){a[c]=[];for(var b=0;b<this._chartsOrder[c].length;++b)a[c].push(this._chartsById[this._chartsOrder[c][b]])}return a};
epiviz.workspaces.Workspace.prototype.chartsOrder=function(){return this._chartsOrder};epiviz.workspaces.Workspace.prototype.computedMeasurements=function(){return this._computedMeasurements};epiviz.workspaces.Workspace.prototype.chartAdded=function(a,c,b,d){this._chartsById[a]={id:a,type:c,properties:b.copy()};this._chartsOrder=d;this._setChanged()};epiviz.workspaces.Workspace.prototype.chartRemoved=function(a,c){this._chartsById[a]&&(delete this._chartsById[a],this._chartsOrder=c,this._setChanged())};
epiviz.workspaces.Workspace.prototype.chartSizeChanged=function(a,c,b){!this._chartsById[a]||this._chartsById[a].properties.width==c&&this._chartsById[a].properties.height==b||(this._chartsById[a].properties.width=c,this._chartsById[a].properties.height=b,this._setChanged())};epiviz.workspaces.Workspace.prototype.chartMarginsChanged=function(a,c){this._chartsById[a].properties.margins.equals(c)||(this._chartsById[a].properties.margins=c?c.copy():c,this._setChanged())};
epiviz.workspaces.Workspace.prototype.chartColorsChanged=function(a,c){this._chartsById[a].properties.colors.equals(c)||(this._chartsById[a].properties.colors=c,this._setChanged())};epiviz.workspaces.Workspace.prototype.chartMethodsModified=function(a,c){epiviz.utils.mapEquals(this._chartsById[a].properties.modifiedMethods,c)||(this._chartsById[a].properties.modifiedMethods=epiviz.utils.mapCombine(c,this._chartsById[a].properties.modifiedMethods),this._setChanged())};
epiviz.workspaces.Workspace.prototype.chartMethodsReset=function(a){this._chartsById[a].properties.modifiedMethods&&0!=Object.keys(this._chartsById[a].properties.modifiedMethods).length&&(this._chartsById[a].properties.modifiedMethods={},this._setChanged())};epiviz.workspaces.Workspace.prototype.chartMarkersModified=function(a,c){epiviz.utils.arraysEqual(this._chartsById[a].properties.chartMarkers,c)||(this._chartsById[a].properties.chartMarkers=c.filter(function(a){return null!=a}),this._setChanged())};
epiviz.workspaces.Workspace.prototype.chartCustomSettingsChanged=function(a,c){epiviz.utils.mapEquals(this._chartsById[a].properties.customSettingsValues,c)||(this._chartsById[a].properties.customSettingsValues=c?epiviz.utils.mapCopy(c):c,this._setChanged())};epiviz.workspaces.Workspace.prototype.locationChanged=function(a){this._range.equals(a)||(this._range=a,this._setChanged())};
epiviz.workspaces.Workspace.prototype.computedMeasurementsAdded=function(a){var c=this._computedMeasurements.size();this._computedMeasurements.addAll(a);c!=this._computedMeasurements.size()&&this._setChanged()};epiviz.workspaces.Workspace.prototype.computedMeasurementsRemoved=function(a){var c=this._computedMeasurements.size();this._computedMeasurements.removeAll(a);c!=this._computedMeasurements.size()&&this._setChanged()};
epiviz.workspaces.Workspace.prototype.chartsOrderChanged=function(a){this._chartsOrder=a;this._setChanged()};epiviz.workspaces.Workspace.prototype.changed=function(){return this._changed};epiviz.workspaces.Workspace.prototype.resetChanged=function(){this._changed=!1};epiviz.workspaces.Workspace.prototype._setChanged=function(){this._changed=!0;this._contentChanged.notify(this)};
epiviz.workspaces.Workspace.prototype.copy=function(a,c){var b=this.charts();return new epiviz.workspaces.Workspace(c||null,a,{range:this._range,computedMeasurements:new epiviz.measurements.MeasurementSet(this._computedMeasurements),charts:b})};
epiviz.workspaces.Workspace.prototype.raw=function(a){var c=new epiviz.measurements.MeasurementHashtable,b={};this._computedMeasurements.foreach(function(a){var b;a.componentMeasurements().foreach(function(a){var b=c.get(a);null===b&&(b=c.size(),c.put(a,b))});var d=a.formula().referredMeasurements,e;for(e in d)d.hasOwnProperty(e)&&(b=c.get(d[e]),null===b&&(b=c.size(),c.put(d[e],b)));b=c.get(a);null===b&&(b=c.size(),c.put(a,b))});for(var d in this._chartsOrder)if(this._chartsOrder.hasOwnProperty(d)){b[d]=
[];for(var e=0;e<this._chartsOrder[d].length;++e){var f=this._chartsById[this._chartsOrder[d][e]],g=f.properties,h=[];(function(a){g.visConfigSelection.measurements.foreach(function(b){var d=c.get(b);null===d&&(d=c.size(),c.put(b,d));a.push(d)})})(h);b[d].push({id:f.id,type:f.type.typeName(),properties:{width:g.width,height:g.height,margins:g.margins.raw(),visConfigSelection:{measurements:h,datasource:g.visConfigSelection.datasource,datasourceGroup:g.visConfigSelection.datasourceGroup,dataprovider:g.visConfigSelection.dataprovider,
annotation:g.visConfigSelection.annotation,defaultChartType:g.visConfigSelection.defaultChartType,minSelectedMeasurements:g.visConfigSelection.minSelectedMeasurements,customData:g.visConfigSelection.customData},colors:g.colors.raw(a),modifiedMethods:epiviz.utils.mapCopy(g.modifiedMethods),customSettings:g.customSettingsValues||null,chartMarkers:g.chartMarkers.map(function(a){return a.raw()})}})}}var l=Array(c.size());c.foreach(function(a,b){l[b]=a.raw(c)});return{id:this._id,name:this._name,content:{range:this._range.raw(),
measurements:l,charts:b}}};
epiviz.workspaces.Workspace.fromRawObject=function(a,c,b){var d,e=Array(a.content.measurements.length),f=new epiviz.measurements.MeasurementSet;for(d=0;d<a.content.measurements.length;++d)a.content.measurements[d].formula||(e[d]=epiviz.measurements.Measurement.fromRawObject(a.content.measurements[d]));for(d=0;d<a.content.measurements.length;++d)a.content.measurements[d].formula&&(e[d]=epiviz.measurements.Measurement.fromRawObject(a.content.measurements[d],e),f.add(e[d]));var g={},h;for(h in a.content.charts)if(a.content.charts.hasOwnProperty(h))for(g[h]=
[],d=0;d<a.content.charts[h].length;++d){var l=a.content.charts[h][d],m,n=l.properties.visConfigSelection,q=n?n.measurements:l.properties.measurements;if(q){m=new epiviz.measurements.MeasurementSet;for(var t=0;t<q.length;++t)m.add(e[q[t]])}n=n?new epiviz.ui.controls.VisConfigSelection(m,n.datasource,n.datasourceGroup,n.dataprovider,n.annotation,n.defaultChartType,n.minSelectedMeasurements,n.customData):new epiviz.ui.controls.VisConfigSelection(m);(q=c.get(l.type))&&g[h].push({id:l.id,type:q,properties:new epiviz.ui.charts.VisualizationProperties(l.properties.width,
l.properties.height,epiviz.ui.charts.Margins.fromRawObject(l.properties.margins),n,epiviz.ui.charts.ColorPalette.fromRawObject(l.properties.colors,b),l.properties.modifiedMethods,l.properties.customSettings,q.customSettingsDefs(),l.properties.chartMarkers?l.properties.chartMarkers.map(function(a){return epiviz.ui.charts.markers.VisualizationMarker.fromRawObject(a)}):[])})}return new epiviz.workspaces.Workspace(a.id,a.name,{range:epiviz.datatypes.GenomicRange.fromRawObject(a.content.range),computedMeasurements:f,
charts:g})};epiviz.workspaces.Workspace.prototype.onContentChanged=function(){return this._contentChanged};
epiviz.workspaces.WorkspaceManager=function(a,c,b,d,e){this._config=a;this._locationManager=c;this._measurementsManager=b;this._chartManager=d;this._chartFactory=e;this._workspacesByName=this._workspaces=this._unchangedActiveWorkspace=this._activeWorkspace=null;this._workspacesLoaded=new epiviz.events.Event;this._activeWorkspaceChanged=new epiviz.events.Event;this._activeWorkspaceChanging=!1;this._requestWorkspaces=new epiviz.events.Event;this._activeWorkspaceContentChanged=new epiviz.events.Event;
var f=this;this._activeWorkspaceContentChangedListener=new epiviz.events.EventListener(function(a){f._activeWorkspaceContentChanged.notify(a)});this._registerLocationChanged();this._registerComputedMeasurementAdded();this._registerComputedMeasurementRemoved();this._registerChartAdded();this._registerChartRemoved();this._registerChartsOrderChanged();this._registerChartColorsChanged();this._registerChartMethodsModified();this._registerChartMethodsReset();this._registerChartMarkersModified();this._registerChartSizeChanged();
this._registerChartMarginsChanged();this._registerChartCustomSettingsChanged()};epiviz.workspaces.WorkspaceManager.prototype.activeWorkspace=function(){return this._activeWorkspace||null};epiviz.workspaces.WorkspaceManager.prototype.get=function(a){return a&&this._workspaces?this._workspaces[a]||null:null};epiviz.workspaces.WorkspaceManager.prototype.getByName=function(a){return a&&this._workspacesByName?this._workspacesByName[a]||null:null};
epiviz.workspaces.WorkspaceManager.prototype.initialize=function(){this._requestWorkspaces.notify({activeWorkspaceId:epiviz.ui.WebArgsManager.WEB_ARGS.ws||epiviz.ui.WebArgsManager.WEB_ARGS.workspace||null})};
epiviz.workspaces.WorkspaceManager.prototype.updateWorkspaces=function(a,c,b,d){if(a){this._workspaces={};this._workspacesByName={};for(var e=0;e<a.length;++e)null!==a[e].id()&&(this._workspaces[a[e].id()]=a[e],this._workspacesByName[a[e].name()]=a[e])}c||(c=a&&a.length?a[0]:epiviz.workspaces.Workspace.fromRawObject(this._config.defaultWorkspaceSettings,this._chartFactory,this._config));e=this._activeWorkspace;this._activeWorkspace=c;this._unchangedActiveWorkspace=d?d:c?c.copy(c.name(),c.id()):null;
e&&e.onContentChanged().removeListener(this._activeWorkspaceContentChangedListener);this._activeWorkspace&&this._activeWorkspace.onContentChanged().addListener(this._activeWorkspaceContentChangedListener);c=epiviz.ui.WebArgsManager.WEB_ARGS;d=void 0!=c.seqName?c.seqName:this._activeWorkspace.range().seqName();var f=null,g=null;"undefined"!=c.start&&(f=parseInt(c.start)||this._activeWorkspace.range().start());"undefined"!=c.end&&(g=parseInt(c.end)||this._activeWorkspace.range().end());this._activeWorkspace.locationChanged(epiviz.datatypes.GenomicRange.fromStartEnd(d,
f,g));this._workspacesLoaded.notify({activeWorkspace:this._activeWorkspace,workspaces:a});this._activeWorkspaceChanged.notify({oldValue:e,newValue:this._activeWorkspace,workspaceId:this._activeWorkspace.id()||b})};epiviz.workspaces.WorkspaceManager.prototype.updateWorkspace=function(a){this._workspaces[a.id()]=a;this._workspacesByName[a.name()]=a};
epiviz.workspaces.WorkspaceManager.prototype.deleteActiveWorkspace=function(){var a=this._activeWorkspace;if(a&&a.id()){delete this._workspaces[a.id()];delete this._workspacesByName[a.name()];var c=null,b;for(b in this._workspaces)if(this._workspaces.hasOwnProperty(b)){c=this._workspaces[b];break}c||(c=epiviz.workspaces.Workspace.fromRawObject(this._config.defaultWorkspaceSettings,this._chartFactory,this._config));this._unchangedActiveWorkspace=(this._activeWorkspace=c)?c.copy(c.name(),c.id()):null;
c=a.range().seqName();b=a.range().start();var d=a.range().end();this._activeWorkspace.locationChanged(epiviz.datatypes.GenomicRange.fromStartEnd(c,b,d));this._activeWorkspaceChanged.notify({oldValue:a,newValue:this._activeWorkspace,workspaceId:this._activeWorkspace.id()})}};
epiviz.workspaces.WorkspaceManager.prototype.revertActiveWorkspace=function(){if(this._unchangedActiveWorkspace){var a=this._activeWorkspace,c=a.range().seqName(),b=a.range().start(),a=a.range().end();this._activeWorkspace=this._unchangedActiveWorkspace.copy(this._unchangedActiveWorkspace.name(),this._unchangedActiveWorkspace.id());this._activeWorkspace.locationChanged(epiviz.datatypes.GenomicRange.fromStartEnd(c,b,a));this._activeWorkspaceChanged.notify({oldValue:null,newValue:this._activeWorkspace,
workspaceId:this._activeWorkspace.id()})}};epiviz.workspaces.WorkspaceManager.prototype.onWorkspacesLoaded=function(){return this._workspacesLoaded};epiviz.workspaces.WorkspaceManager.prototype.onActiveWorkspaceChanged=function(){return this._activeWorkspaceChanged};epiviz.workspaces.WorkspaceManager.prototype.startChangingActiveWorkspace=function(){this._activeWorkspaceChanging=!0};epiviz.workspaces.WorkspaceManager.prototype.endChangingActiveWorkspace=function(){this._activeWorkspaceChanging=!1};
epiviz.workspaces.WorkspaceManager.prototype.activeWorkspaceChanging=function(){return this._activeWorkspaceChanging};epiviz.workspaces.WorkspaceManager.prototype.onRequestWorkspaces=function(){return this._requestWorkspaces};epiviz.workspaces.WorkspaceManager.prototype.onActiveWorkspaceContentChanged=function(){return this._activeWorkspaceContentChanged};
epiviz.workspaces.WorkspaceManager.prototype.changeActiveWorkspace=function(a,c){if((c=c||this._workspaces[a])&&c!==this._activeWorkspace){var b=this._activeWorkspace;this._unchangedActiveWorkspace=(this._activeWorkspace=c)?this._activeWorkspace.copy(this._activeWorkspace.name(),this._activeWorkspace.id()):null;this._activeWorkspaceChanged.notify({oldValue:b,newValue:this._activeWorkspace,workspaceId:a})}};
epiviz.workspaces.WorkspaceManager.prototype._registerLocationChanged=function(){var a=this;this._locationManager.onCurrentLocationChanged().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.locationChanged(c.newValue)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartAdded=function(){var a=this;this._chartManager.onChartAdded().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartAdded(c.id,c.args.type,c.args.properties,c.args.chartsOrder)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartRemoved=function(){var a=this;this._chartManager.onChartRemoved().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartRemoved(c.id,c.args)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartsOrderChanged=function(){var a=this;this._chartManager.onChartsOrderChanged().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartsOrderChanged(c)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartColorsChanged=function(){var a=this;this._chartManager.onChartColorsChanged().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartColorsChanged(c.id,c.args)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartMethodsModified=function(){var a=this;this._chartManager.onChartMethodsModified().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartMethodsModified(c.id,c.args)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartMethodsReset=function(){var a=this;this._chartManager.onChartMethodsReset().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartMethodsReset(c.id)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartMarkersModified=function(){var a=this;this._chartManager.onChartMarkersModified().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartMarkersModified(c.id,c.args)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartCustomSettingsChanged=function(){var a=this;this._chartManager.onChartCustomSettingsChanged().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartCustomSettingsChanged(c.id,c.args)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartSizeChanged=function(){var a=this;this._chartManager.onChartSizeChanged().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartSizeChanged(c.id,c.args.width,c.args.height)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartMarginsChanged=function(){var a=this;this._chartManager.onChartMarginsChanged().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartMarginsChanged(c.id,c.args)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerComputedMeasurementAdded=function(){var a=this;this._measurementsManager.onComputedMeasurementsAdded().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.computedMeasurementsAdded(c)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerComputedMeasurementRemoved=function(){var a=this;this._measurementsManager.onComputedMeasurementsRemoved().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.computedMeasurementsRemoved(c)}))};epiviz.localstorage={};epiviz.localstorage.LocalStorageManager=function(){};epiviz.localstorage.LocalStorageManager.WORKSPACE="workspace";
epiviz.localstorage.LocalStorageManager.prototype.initialize=function(){};epiviz.localstorage.LocalStorageManager.prototype.getWorkspace=function(a,c){if("undefined"===typeof Storage)return null;var b=localStorage.getItem(epiviz.localstorage.LocalStorageManager.WORKSPACE);return b?epiviz.workspaces.Workspace.fromRawObject(JSON.parse(b),a,c):null};
epiviz.localstorage.LocalStorageManager.prototype.saveWorkspace=function(a,c){if("undefined"!==typeof Storage){var b=a.raw(c);localStorage.setItem(epiviz.localstorage.LocalStorageManager.WORKSPACE,JSON.stringify(b))}};epiviz.datatypes.GenomicRange=function(a,c,b){void 0!=b&&0>b&&(b=-b,void 0!=c&&(c-=b));this._seqname=a;this._start=c;this._width=b};epiviz.datatypes.GenomicRange.fromStartEnd=function(a,c,b){return new epiviz.datatypes.GenomicRange(a,c,void 0!=c&&void 0!=b?b-c:void 0)};
epiviz.datatypes.GenomicRange.prototype.seqName=function(){return this._seqname};epiviz.datatypes.GenomicRange.prototype.start=function(){return this._start};epiviz.datatypes.GenomicRange.prototype.width=function(){return this._width};epiviz.datatypes.GenomicRange.prototype.end=function(){return void 0!=this._start&&void 0!=this._width?this._start+this._width:void 0};epiviz.datatypes.GenomicRange.prototype.isEmpty=function(){return 0>=this._width};
epiviz.datatypes.GenomicRange.prototype.subtract=function(a){return!a||a.seqName()!=this._seqname||a.isEmpty()||a.start()>=this.end()||this._start>=a.end()?[this]:a.start()<=this._start&&a.end()>=this.end()?[]:a.start()>this._start&&a.end()<this.end()?[epiviz.datatypes.GenomicRange.fromStartEnd(this._seqname,this._start,a.start()),epiviz.datatypes.GenomicRange.fromStartEnd(this._seqname,a.end(),this.end())]:a.start()>this._start?[epiviz.datatypes.GenomicRange.fromStartEnd(this._seqname,this._start,
a.start())]:[epiviz.datatypes.GenomicRange.fromStartEnd(this._seqname,a.end(),this.end())]};epiviz.datatypes.GenomicRange.prototype.equals=function(a){return a?a==this?!0:this._seqname==a._seqname&&this._start==a._start&&this._width==a._width:!1};epiviz.datatypes.GenomicRange.prototype.overlapsWith=function(a){return a?this==a?!0:this.seqName()!=a.seqName()?!1:this.start()<a.end()&&this.end()>a.start():!1};
epiviz.datatypes.GenomicRange.prototype.raw=function(){return{seqName:this._seqname,start:this._start,width:this._width}};epiviz.datatypes.GenomicRange.fromRawObject=function(a){return new epiviz.datatypes.GenomicRange(a.seqName,a.start,a.width)};
epiviz.ui.LocationManager=function(a){this._seqInfos={};this._timeout=this._lastUnfilledRequest=this._currentLocation=null;this._navigationDelay=a.navigationDelay;this._currentLocationChanged=new epiviz.events.Event;this._seqInfosUpdated=new epiviz.events.Event;this._requestSeqInfos=new epiviz.events.Event};epiviz.ui.LocationManager.prototype.initialize=function(){this._requestSeqInfos.notify()};
epiviz.ui.LocationManager.prototype.changeCurrentLocation=function(a){if(!this._currentLocationChanged.isFiring()){this._lastUnfilledRequest=a;null!==this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null);var c=this;a=function(){var a=c._lastUnfilledRequest;null!==a&&c._doChangeCurrentLocation(a)};this._navigationDelay?this._timeout=window.setTimeout(a,this._navigationDelay):a()}};
epiviz.ui.LocationManager.prototype._doChangeCurrentLocation=function(a){var c=this._currentLocation,b=a.seqName();if(!(a.seqName()in this._seqInfos)){if(!c)return;b=c.seqName()}var d=void 0,e=void 0;this._seqInfos[b]&&void 0!=this._seqInfos[b].min&&void 0!=this._seqInfos[b].max&&(d=void 0!=a.start()&&a.start()>=this._seqInfos[b].min?a.start():this._seqInfos[b].min,e=void 0!=a.width()?d+a.width():d+9999);void 0!=d&&void 0!=e&&e>this._seqInfos[b].max&&(d=Math.max(this._seqInfos[b].min,this._seqInfos[b].max-
e+d),e=this._seqInfos[b].max);this._lastUnfilledRequest=null;this._currentLocation=epiviz.datatypes.GenomicRange.fromStartEnd(b,d,e);this._currentLocationChanged.notify({oldValue:c,newValue:this._currentLocation})};epiviz.ui.LocationManager.prototype.currentLocation=function(){return this._currentLocation};epiviz.ui.LocationManager.prototype.lastUnfilledLocationChangeRequest=function(){return this._lastUnfilledRequest};
epiviz.ui.LocationManager.prototype.updateSeqInfos=function(a){this._seqInfos={};for(var c=0;c<a.length;++c)this._seqInfos[a[c].seqName]=a[c];this._seqInfosUpdated.notify(a);null!==this._lastUnfilledRequest&&(this._lastUnfilledRequest.seqName()in this._seqInfos?this._doChangeCurrentLocation(this._lastUnfilledRequest):0<a.length&&(a=new epiviz.datatypes.GenomicRange(a[0].name(),this._lastUnfilledRequest.start(),this._lastUnfilledRequest.width()),this._doChangeCurrentLocation(a)))};
epiviz.ui.LocationManager.prototype.addSeqInfos=function(a){for(var c=0;c<a.length;++c)this._seqInfos[a[c].seqName]||(this._seqInfos[a[c].seqName]=a[c]);a=[];for(var b in this._seqInfos)this._seqInfos.hasOwnProperty(b)&&a.push(this._seqInfos[b]);this._seqInfosUpdated.notify(a)};
epiviz.ui.LocationManager.prototype.removeSeqNames=function(a){for(var c=0;c<a.length;++c)delete this._seqInfos[a[c]];a=[];for(var b in this._seqInfos)this._seqInfos.hasOwnProperty(b)&&a.push(this._seqInfos[b]);this._seqInfosUpdated.notify(a);this._currentLocation.seqName()in this._seqInfos||this.changeCurrentLocation(new epiviz.datatypes.GenomicRange(a[0].seqName,this._currentLocation.start(),this._currentLocation.width()))};epiviz.ui.LocationManager.prototype.seqInfos=function(){return this._seqInfos};
epiviz.ui.LocationManager.prototype.onCurrentLocationChanged=function(){return this._currentLocationChanged};epiviz.ui.LocationManager.prototype.onSeqInfosUpdated=function(){return this._seqInfosUpdated};epiviz.ui.LocationManager.prototype.onRequestSeqInfos=function(){return this._requestSeqInfos};
epiviz.ui.ControlManager=function(a,c,b,d,e){this._config=a;this._chartFactory=c;this._chartManager=b;this._measurementsManager=d;this._locationManager=e;this._addChart=new epiviz.events.Event;this._activeWorkspaceChanged=new epiviz.events.Event;this._saveWorkspace=new epiviz.events.Event;this._deleteActiveWorkspace=new epiviz.events.Event;this._revertActiveWorkspace=new epiviz.events.Event;this._loginLinkClicked=new epiviz.events.Event;this._searchWorkspaces=new epiviz.events.Event;this._search=
new epiviz.events.Event;this._activeWorkspaceInfo=null;this._stepRatio=a.navigationStepRatio;this._zoominRatio=a.zoominRatio;this._zoomoutRatio=a.zoomoutRatio};epiviz.ui.ControlManager.CHART_TYPE_CONTAINERS={plot:"feature-view",track:"location-view","data-structure":"data-structure-view"};epiviz.ui.ControlManager.DISPLAY_TYPE_LABELS={plot:"Feature",track:"Location","data-structure":"Data Structure"};
epiviz.ui.ControlManager.prototype.initialize=function(){this._initializeChromosomeSelector();this._initializeLocationTextbox();this._initializeNavigationButtons();this._initializeZoomButtons();this._initializeLocationSettingsDialog();this._initializeChartMenus();this._initializeComputedMeasurementsMenu();this._initializeHelpButton();this._initializeSearchBox();this._initializeWorkspaceSaving();this._initializeLoginLink();this._initializeLayout();this._checkBrowserCompatibility();this._registerLocationChanged();
this._registerSeqInfosUpdated()};epiviz.ui.ControlManager.prototype.onAddChart=function(){return this._addChart};epiviz.ui.ControlManager.prototype.onActiveWorkspaceChanged=function(){return this._activeWorkspaceChanged};epiviz.ui.ControlManager.prototype.onSaveWorkspace=function(){return this._saveWorkspace};epiviz.ui.ControlManager.prototype.onDeleteActiveWorkspace=function(){return this._deleteActiveWorkspace};epiviz.ui.ControlManager.prototype.onRevertActiveWorkspace=function(){return this._revertActiveWorkspace};
epiviz.ui.ControlManager.prototype.onLoginLinkClicked=function(){return this._loginLinkClicked};epiviz.ui.ControlManager.prototype.onSearchWorkspaces=function(){return this._searchWorkspaces};epiviz.ui.ControlManager.prototype.onSearch=function(){return this._search};
epiviz.ui.ControlManager.prototype._updateSeqNames=function(a){var c=$("#chromosome-selector");c.empty();for(var b=0;b<a.length;++b){var d=sprintf('<option value="%s"%s>%s</option>',a[b].seqName,this._locationManager.currentLocation()&&a[b].seqName==this._locationManager.currentLocation().seqName()?'selected="selected"':"",a[b].seqName);c.append(d)}c.selectmenu()};
epiviz.ui.ControlManager.prototype._updateSelectedLocation=function(a){if(a){this._locationManager.changeCurrentLocation(a);a=this._locationManager.currentLocation();$("#text-location").val(Globalize.format(a.start(),"n0")+" - "+Globalize.format(a.end(),"n0"));var c=$("#chromosome-selector");c.val(a.seqName());c.selectmenu()}};
epiviz.ui.ControlManager.prototype.updateSelectedWorkspace=function(a){var c=this,b=$("#save-workspace-text"),d=this._activeWorkspaceInfo;b.val(a.name);this._activeWorkspaceInfo=a;this._activeWorkspaceChanged.notify({oldValue:d,newValue:a,cancel:function(){b.val(d.name);c._activeWorkspaceInfo=d}})};
epiviz.ui.ControlManager.prototype._initializeChromosomeSelector=function(){var a=$("#chromosome-selector");a.selectmenu({style:"popup",width:"90",maxHeight:"100",menuWidth:"90"});var c=this;a.change(function(){var a=c._locationManager.lastUnfilledLocationChangeRequest()||c._locationManager.currentLocation(),d=$(this).val();c._updateSelectedLocation(new epiviz.datatypes.GenomicRange(d,a.start(),a.width()))})};
epiviz.ui.ControlManager.prototype._initializeLocationTextbox=function(){var a=this;$("#text-location").keypress(function(c){if(13!=c.which)return!0;try{var b=$(this).val().split("-"),d=Globalize.parseInt(b[0]),e=Globalize.parseInt(b[1]),f=a._locationManager.lastUnfilledLocationChangeRequest()||a._locationManager.currentLocation();a._updateSelectedLocation(epiviz.datatypes.GenomicRange.fromStartEnd(f.seqName(),d,e));return!0}catch(g){return!1}})};
epiviz.ui.ControlManager.prototype._initializeNavigationButtons=function(){var a=this;$("#moveright").button({icons:{primary:"ui-icon ui-icon-seek-next"},text:!1}).click(function(){var c=a._locationManager.lastUnfilledLocationChangeRequest()||a._locationManager.currentLocation(),b=c.start()+Math.round(c.width()*a._stepRatio);a._updateSelectedLocation(new epiviz.datatypes.GenomicRange(c.seqName(),b,c.width()))});$("#moveleft").button({icons:{primary:"ui-icon ui-icon-seek-prev"},text:!1}).click(function(){var c=
a._locationManager.lastUnfilledLocationChangeRequest()||a._locationManager.currentLocation(),b=c.start()-Math.round(c.width()*a._stepRatio);a._updateSelectedLocation(new epiviz.datatypes.GenomicRange(c.seqName(),b,c.width()))})};
epiviz.ui.ControlManager.prototype._initializeZoomButtons=function(){var a=this,c=$("#zoomin");c.button({icons:{primary:"ui-icon ui-icon-zoomin"},text:!1});var b=$("#zoomout");b.button({icons:{primary:"ui-icon ui-icon-zoomout"},text:!1});var d=function(b){var c=a._locationManager.lastUnfilledLocationChangeRequest()||a._locationManager.currentLocation(),d=c.start()+.5*c.width();b=Math.round(c.width()*b);d=Math.round(d-.5*b);a._updateSelectedLocation(new epiviz.datatypes.GenomicRange(c.seqName(),d,
b))};c.click(function(){d(a._zoominRatio)});b.click(function(){d(a._zoomoutRatio)})};
epiviz.ui.ControlManager.prototype._initializeLocationSettingsDialog=function(){var a=this;$("#location-settings").button({text:!1,icons:{primary:"ui-icon ui-icon-gear"}}).click(function(){$("#location-settings-dialog").dialog("open")});$("#location-settings-dialog").dialog({autoOpen:!1,resizable:!1,width:"300",buttons:{Ok:function(){a._zoominRatio=$("#zoomin-ratio-text").val();a._zoomoutRatio=$("#zoomout-ratio-text").val();a._stepRatio=$("#navigation-step-ratio-text").val();$(this).dialog("close")},
Cancel:function(){$("#zoomin-ratio-text").val(Globalize.format(a._zoominRatio,"n3"));$("#zoomout-ratio-text").val(Globalize.format(a._zoomoutRatio,"n3"));$("#navigation-step-ratio-text").val(Globalize.format(a._stepRatio,"n6"));$(this).dialog("close")}},modal:!0});$("#zoomout-ratio-text").spinner({min:1.001,max:1E3,step:.001,start:1.2,numberFormat:"n3"}).val(a._zoomoutRatio);$("#zoomin-ratio-text").spinner({min:.001,max:.999,step:.01,start:.8,numberFormat:"n3"}).val(a._zoominRatio);$("#navigation-step-ratio-text").spinner({min:1E-6,
max:1,step:1E-6,start:.2,numberFormat:"n6"}).val(a._stepRatio)};
epiviz.ui.ControlManager.prototype._initializeChartMenus=function(){var a=this,c=$("#vis-menu");$("#vis-menu-button").button({text:!1,icons:{primary:"ui-icon ui-icon-scatterplot",secondary:"ui-icon-triangle-1-s"}}).click(function(){var a=c.is(":visible");$(".dropdown-menu").find(">:first-child").hide();a||c.show().position({my:"left top",at:"left bottom",of:this});$(document).one("click",function(){c.hide()});return!1});var b={},d=epiviz.ui.ControlManager.DISPLAY_TYPE_LABELS;this._chartFactory.foreach(function(a,
c){c.chartDisplayType()in b||(b[c.chartDisplayType()]=[]);b[c.chartDisplayType()].push(c)});for(var e in b)b.hasOwnProperty(e)&&($(sprintf('<li class="ui-widget-header">%s</li>',d[e])).appendTo(c),b[e].forEach(function(b,d){var e=sprintf("%s-menu-add-%s",b.chartDisplayType(),b.chartHtmlAttributeName());c.append(sprintf('<li><a href="javascript:void(0)" id="%s">Add New %s</a></li>',e,b.chartName()));$("#"+e).click(function(){var c=[];b.isRestrictedToSameDatasourceGroup()&&c.push(new epiviz.ui.controls.DatasourceGroupWizardStep);
b.chartDisplayType()!=epiviz.ui.charts.VisualizationType.DisplayType.DATA_STRUCTURE&&c.push(new epiviz.ui.controls.MeaurementsWizardStep);if(c.length){var d=a._measurementsManager.measurements().subset(b.measurementsFilter());d.addAll(a._measurementsManager.measurements().map(function(a){return a.datasource()}).subset(b.measurementsFilter()));(new epiviz.ui.controls.Wizard(sprintf("Add new %s",b.chartName()),{finish:function(c){a._addChart.notify({type:b,visConfigSelection:c})}},c,new epiviz.ui.controls.VisConfigSelection(d,
void 0,void 0,void 0,void 0,b.chartName(),b.minSelectedMeasurements()),"750",void 0,b.isRestrictedToSameDatasourceGroup())).show()}else a._addChart.notify({type:b,visConfigSelection:new epiviz.ui.controls.VisConfigSelection(a._measurementsManager.measurements().subset(b.measurementsFilter()))})})}));c.hide().menu()};
epiviz.ui.ControlManager.prototype._initializeComputedMeasurementsMenu=function(){var a=this;$("#computed-measurements-button").button({text:!1,icons:{primary:"ui-icon ui-icon-calculator"}}).click(function(){(new epiviz.ui.controls.ComputedMeasurementsDialog("Computed Measurements",{add:function(c){a._measurementsManager.addMeasurement(c)},remove:function(c){a._measurementsManager.removeMeasurement(c)},close:function(){}},a._measurementsManager.measurements(),a._chartManager.chartsMeasurements())).show()})};
epiviz.ui.ControlManager.prototype._initializeHelpButton=function(){$("#help-button").button({text:!1,icons:{primary:"ui-icon ui-icon-help"}}).click(function(){window.open("http://epiviz.github.io/","_blank").focus()})};
epiviz.ui.ControlManager.prototype._initializeSearchBox=function(){var a=this,c=$("#search-box");c.watermark("Find Gene/Probe");c.autocomplete({source:function(b,c){a._search.notify({searchTerm:b.term,callback:function(a){for(var b=[],g=0;g<a.length;++g)b.push({value:a[g].probe||a[g].gene,label:a[g].probe||a[g].gene,html:a[g].probe?sprintf("<b>%s</b>, %s, [%s: %s - %s]",a[g].probe,a[g].gene,a[g].seqName,Globalize.format(a[g].start,"n0"),Globalize.format(a[g].end,"n0")):sprintf("<b>%s</b>, [%s: %s - %s]",
a[g].gene,a[g].seqName,Globalize.format(a[g].start,"n0"),Globalize.format(a[g].end,"n0")),range:epiviz.datatypes.GenomicRange.fromStartEnd(a[g].seqName,a[g].start,a[g].end)});c(b)}})},minLength:1,select:function(b,c){var e=a._locationManager.lastUnfilledLocationChangeRequest()||a._locationManager.currentLocation(),f=c.item.range.seqName(),g=Math.round(c.item.range.start()+.5*c.item.range.width()-.5*e.width()),e=e.width();a._updateSelectedLocation(new epiviz.datatypes.GenomicRange(f,g,e))},focus:function(a){a.preventDefault()},
open:function(){},close:function(){}}).data("autocomplete")._renderItem=function(a,c){return $("<li></li>").data("item.autocomplete",c).append(sprintf("<a>%s</a>",c.html)).appendTo(a)}};
epiviz.ui.ControlManager.prototype._initializeWorkspaceSaving=function(){var a=this,c=$("#save-workspace-text"),b=$("#save-workspace-button"),d=$("#revert-workspace-button"),e=$("#delete-workspace-button");b.button({text:!1,icons:{primary:"ui-icon-disk"}}).click(function(){var b=null;try{var d=c.val();/[a-zA-Z0-9_\s]+/g.exec(d)==d?epiviz.workspaces.UserManager.USER_STATUS.loggedIn?a._saveWorkspace.notify({name:d,id:d==a._activeWorkspaceInfo.name?a._activeWorkspaceInfo.id:null}):(b=new epiviz.ui.controls.MessageDialog("User not logged in",
{Yes:function(){a._loginLinkClicked.notify()},No:function(){}},"You need to log in in order to save the workspace. Do you wish to log in now?",epiviz.ui.controls.MessageDialog.Icon.QUESTION),b.show()):(b=new epiviz.ui.controls.MessageDialog("Invalid workspace name",{Ok:function(){$(this).remove()}},"Invalid workspace name: "+d,epiviz.ui.controls.MessageDialog.Icon.ERROR),b.show())}catch(e){b=new epiviz.ui.controls.MessageDialog("Error",{ok:function(){$(this).remove()}},"An error occurred while trying to save workspace: "+
e.message,epiviz.ui.controls.MessageDialog.Icon.ERROR),b.show()}});e.button({text:!1,icons:{primary:"ui-icon-trash"}}).click(function(b){epiviz.workspaces.UserManager.USER_STATUS.loggedIn&&(new epiviz.ui.controls.MessageDialog("Delete active workspace",{Yes:function(){a._deleteActiveWorkspace.notify()},No:function(){}},"Are you sure you want to delete the active workspace?",epiviz.ui.controls.MessageDialog.Icon.QUESTION)).show()});d.button({text:!1,icons:{primary:"ui-icon-arrowreturnthick-1-w"}}).click(function(b){(new epiviz.ui.controls.MessageDialog("Delete active workspace",
{Yes:function(){a._revertActiveWorkspace.notify()},No:function(){}},"Are you sure you want to revert the changes on the active workspace?",epiviz.ui.controls.MessageDialog.Icon.QUESTION)).show()});c.watermark("Save Workspace Name");c.autocomplete({source:function(b,c){a._searchWorkspaces.notify({searchTerm:b.term,callback:function(a){for(var b=[],d=0;d<a.length;++d)b.push({value:a[d].id,label:a[d].name,html:sprintf("<b>%s</b> %s",a[d].name,a[d].id||"")});c(b)}})},minLength:0,select:function(b,d){b.preventDefault();
a.updateSelectedWorkspace({id:d.item.value||c.val(),name:d.item.label})},focus:function(a){a.preventDefault()},open:function(){},close:function(){}}).data("autocomplete")._renderItem=function(a,b){return $("<li></li>").data("item.autocomplete",b).append(sprintf("<a>%s</a>",b.html)).appendTo(a)};c.click(function(){c.autocomplete("search","")})};epiviz.ui.ControlManager.prototype._initializeLoginLink=function(){var a=this;$("#login-link").live({click:function(){a._loginLinkClicked.notify()}})};
epiviz.ui.ControlManager.prototype._initializeLayout=function(){$("body").layout({applyDefaultStyles:!0,east__size:390,east__minSize:390,east__initHidden:!0,north__resizable:!1,north__initHidden:!1,south__initHidden:!0,east__initClosed:!0})};
epiviz.ui.ControlManager.prototype._checkBrowserCompatibility=function(){0<epiviz.utils.getInternetExplorerVersion()&&(new epiviz.ui.controls.MessageDialog("Browser compatibility warning",{Ok:function(){}},"EpiViz works best on Google Chrome, Apple Safari or Mozilla Firefox. Please open it using one of those browsers.",epiviz.ui.controls.MessageDialog.Icon.ERROR)).show()};epiviz.ui.ControlManager.prototype._registerLocationChanged=function(){var a=this;this._locationManager.onCurrentLocationChanged().addListener(new epiviz.events.EventListener(function(c){a._updateSelectedLocation(c.newValue)}))};
epiviz.ui.ControlManager.prototype._registerSeqInfosUpdated=function(){var a=this;this._locationManager.onSeqInfosUpdated().addListener(new epiviz.events.EventListener(function(c){a._updateSeqNames(c)}))};epiviz.ui.WebArgsManager=function(a,c){this._locationManager=a;this._workspaceManager=c;this._registerLocationChanged();this._registerActiveWorkspaceChanged()};epiviz.ui.WebArgsManager.WEB_ARGS=epiviz.ui.WebArgsManager.WEB_ARGS||{};
epiviz.ui.WebArgsManager.prototype._updateUrl=function(){var a="?",c=epiviz.ui.WebArgsManager.WEB_ARGS;!("ws"in c)&&"workspace"in c&&(c.ws=c.workspace,delete c.workspace);for(var b in c)if(c.hasOwnProperty(b))if(Array.isArray(c[b]))for(var d,e=0;e<c[b].length;++e)d=c[b][e],void 0==d&&(d="undefined"),a+=sprintf("%s[]=%s&",b,d);else d=c[b],void 0==d&&(d="undefined"),a+=sprintf("%s=%s&",b,d);c=epiviz.utils.getInternetExplorerVersion();if(0>c||10<=c)switch(window.location.protocol){case "http:":case "https:":history.replaceState(null,
"",a)}};epiviz.ui.WebArgsManager.prototype._registerLocationChanged=function(){var a=this;this._locationManager.onCurrentLocationChanged().addListener(new epiviz.events.EventListener(function(c){epiviz.ui.WebArgsManager.WEB_ARGS.seqName=c.newValue.seqName();epiviz.ui.WebArgsManager.WEB_ARGS.start=c.newValue.start();epiviz.ui.WebArgsManager.WEB_ARGS.end=c.newValue.end();a._updateUrl()}))};
epiviz.ui.WebArgsManager.prototype._registerActiveWorkspaceChanged=function(){var a=this;this._workspaceManager.onActiveWorkspaceChanged().addListener(new epiviz.events.EventListener(function(c){epiviz.ui.WebArgsManager.WEB_ARGS.ws=c.workspaceId||"";delete epiviz.ui.WebArgsManager.WEB_ARGS.workspace;a._updateUrl()}))};
epiviz.EpiViz=function(a,c,b,d,e,f,g,h,l,m,n){this._config=a;this._locationManager=c;this._measurementsManager=b;this._controlManager=d;this._dataManager=e;this._chartFactory=f;this._chartManager=g;this._workspaceManager=h;this._userManager=l;this._webArgsManager=m;this._cookieManager=n;this._registerRequestSeqInfos();this._registerRequestMeasurements();this._registerUiAddChart();this._registerUiSaveWorkspace();this._registerUiDeleteActiveWorkspace();this._registerUiRevertActiveWorkspace();this._registerUiLoginLinkClicked();
this._registerUiSearchWorkspaces();this._registerUiActiveWorkspaceChanged();this._registerUiSearch();this._registerChartRequestHierarchy();this._registerChartPropagateHierarchySelection();this._registerDataAddMeasurements();this._registerDataRemoveMeasurements();this._registerDataAddChart();this._registerDataRemoveChart();this._registerDataAddSeqInfos();this._registerDataRemoveSeqNames();this._registerDataNavigate();this._registerDataRedraw();this._registerDataGetCurrentLocation();this._registerRequestWorkspaces();
this._registerWorkspacesLoaded();this._registerActiveWorkspaceChanged();this._registerActiveWorkspaceContentChanged();this._registerLocationChanged()};epiviz.EpiViz.VERSION="3";epiviz.EpiViz.prototype.start=function(){this._cookieManager.initialize();this._controlManager.initialize();this._workspaceManager.initialize();this._measurementsManager.initialize();this._locationManager.initialize()};epiviz.EpiViz.prototype.config=function(){return this._config};
epiviz.EpiViz.prototype._addChart=function(a,c,b,d){b=this._chartManager.addChart(a,c,b,d);var e=this;if(a.chartDisplayType()==epiviz.ui.charts.VisualizationType.DisplayType.DATA_STRUCTURE)a={},a[b]=c,this._dataManager.getHierarchy(a,function(a,b){e._chartManager.updateCharts(void 0,b,[a])});else{var f=this._workspaceManager.activeWorkspace().range();this._chartManager.dataWaitStart(b);a={};a[b]=c.measurements;this._dataManager.getData(f,a,function(a,b){e._chartManager.updateCharts(f,b,[a])})}return b};
epiviz.EpiViz.prototype._registerRequestSeqInfos=function(){var a=this;this._locationManager.onRequestSeqInfos().addListener(new epiviz.events.EventListener(function(){a._dataManager.getSeqInfos(function(c){a._locationManager.updateSeqInfos(c)})}))};epiviz.EpiViz.prototype._registerRequestMeasurements=function(){var a=this;this._measurementsManager.onRequestMeasurements().addListener(new epiviz.events.EventListener(function(){a._dataManager.getMeasurements(function(c){a._measurementsManager.addMeasurements(c)})}))};
epiviz.EpiViz.prototype._registerRequestWorkspaces=function(){var a=this;this._workspaceManager.onRequestWorkspaces().addListener(new epiviz.events.EventListener(function(c){var b=a._cookieManager.getWorkspace(a._chartFactory,a._config);a._dataManager.getWorkspaces(function(d){for(var e=[],f=null,g=null,h=0;h<d.length;++h){var l=epiviz.workspaces.Workspace.fromRawObject(d[h],a._chartFactory,a._config);null===l.id()?f=l:(l.id()==c.activeWorkspaceId&&(b&&b.id()==c.activeWorkspaceId&&(g=l,l=b),f=l),
e.push(l))}!f&&b&&(g=a._workspaceManager.get(b.id()),g||(b=b.copy(b.name()),g=epiviz.workspaces.Workspace.fromRawObject(a._config.defaultWorkspaceSettings,a._chartFactory,a._config)),f=b);a._workspaceManager.updateWorkspaces(e,f,c.activeWorkspaceId,g);b||a._workspaceManager.activeWorkspace().resetChanged()},"",c.activeWorkspaceId)}))};
epiviz.EpiViz.prototype._registerUiAddChart=function(){var a=this;this._controlManager.onAddChart().addListener(new epiviz.events.EventListener(function(c){a._addChart(c.type,c.visConfigSelection)}))};
epiviz.EpiViz.prototype._registerUiSaveWorkspace=function(){var a=this;this._controlManager.onSaveWorkspace().addListener(new epiviz.events.EventListener(function(c){var b=a._workspaceManager.getByName(c.name),b=b?a._workspaceManager.activeWorkspace().copy(c.name,b.id()):a._workspaceManager.activeWorkspace().copy(c.name);a._dataManager.saveWorkspace(b,a._config,function(c){b=b.copy(b.name(),c);b.resetChanged();a._workspaceManager.updateWorkspace(b);a._workspaceManager.changeActiveWorkspace(c)})}))};
epiviz.EpiViz.prototype._registerUiDeleteActiveWorkspace=function(){var a=this;this._controlManager.onDeleteActiveWorkspace().addListener(new epiviz.events.EventListener(function(){a._dataManager.deleteWorkspace(a._workspaceManager.activeWorkspace());a._workspaceManager.deleteActiveWorkspace()}))};epiviz.EpiViz.prototype._registerUiRevertActiveWorkspace=function(){var a=this;this._controlManager.onRevertActiveWorkspace().addListener(new epiviz.events.EventListener(function(){a._workspaceManager.revertActiveWorkspace()}))};
epiviz.EpiViz.prototype._registerUiLoginLinkClicked=function(){var a=this;this._controlManager.onLoginLinkClicked().addListener(new epiviz.events.EventListener(function(){a._userManager.toggleLogin()}))};epiviz.EpiViz.prototype._registerUiSearchWorkspaces=function(){var a=this;this._controlManager.onSearchWorkspaces().addListener(new epiviz.events.EventListener(function(c){a._dataManager.getWorkspaces(function(a){c.callback(a)},c.searchTerm,c.searchTerm)}))};
epiviz.EpiViz.prototype._registerUiActiveWorkspaceChanged=function(){var a=this;this._controlManager.onActiveWorkspaceChanged().addListener(new epiviz.events.EventListener(function(c){var b=function(){c.newValue.id&&!a._workspaceManager.get(c.newValue.id)?a._dataManager.getWorkspaces(function(b){for(var e=null,f=0;f<b.length;++f){var g=epiviz.workspaces.Workspace.fromRawObject(b[f],a._chartFactory,a._config);if(null===g.id()){e=g;break}}e&&a._workspaceManager.changeActiveWorkspace(c.newValue.id,e)},
c.newValue.name,c.newValue.id):a._workspaceManager.changeActiveWorkspace(c.newValue.id)};epiviz.workspaces.UserManager.USER_STATUS.loggedIn&&!a._workspaceManager.activeWorkspaceChanging()&&a._workspaceManager.activeWorkspace().changed()?(new epiviz.ui.controls.MessageDialog("Discard workspace changes",{Yes:function(){b()},No:function(){c.cancel()}},"There are unsaved changes in the current workspace. Do you wish to discard them?",epiviz.ui.controls.MessageDialog.Icon.QUESTION)).show():b()}))};
epiviz.EpiViz.prototype._registerUiSearch=function(){var a=this;this._controlManager.onSearch().addListener(new epiviz.events.EventListener(function(c){a._dataManager.search(function(a){c.callback(a)},c.searchTerm)}))};
epiviz.EpiViz.prototype._registerChartRequestHierarchy=function(){var a=this;this._chartManager.onChartRequestHierarchy().addListener(new epiviz.events.EventListener(function(c){var b={};b[c.id]=c.args;a._dataManager.getHierarchy(b,function(b,c){a._chartManager.updateCharts(void 0,c,[b])})}))};
epiviz.EpiViz.prototype._registerChartPropagateHierarchySelection=function(){var a=this;this._chartManager.onChartPropagateHierarchyChanges().addListener(new epiviz.events.EventListener(function(c){var b={};b[c.id]=c.args;a._dataManager.propagateHierarchyChanges(b,function(b,c){a._chartManager.updateCharts(void 0,c,[b])})}))};
epiviz.EpiViz.prototype._registerDataAddMeasurements=function(){var a=this;this._dataManager.onRequestAddMeasurements().addListener(new epiviz.events.EventListener(function(c){try{a._measurementsManager.addMeasurements(c.measurements),c.result.success=!0}catch(b){c.result.success=!1,c.result.errorMessage=b.toString()}}))};
epiviz.EpiViz.prototype._registerDataRemoveMeasurements=function(){var a=this;this._dataManager.onRequestRemoveMeasurements().addListener(new epiviz.events.EventListener(function(c){try{a._measurementsManager.removeMeasurements(c.measurements),c.result.success=!0}catch(b){c.result.success=!1,c.result.errorMessage=b.toString()}}))};
epiviz.EpiViz.prototype._registerDataAddChart=function(){var a=this;this._dataManager.onRequestAddChart().addListener(new epiviz.events.EventListener(function(c){try{var b=a._chartFactory.get(c.type),d=a._addChart(b,new epiviz.ui.controls.VisConfigSelection(c.measurements));c.result.success=!0;c.result.value={id:d}}catch(e){c.result.success=!1,c.result.errorMessage=e.toString()}}))};
epiviz.EpiViz.prototype._registerDataRemoveChart=function(){var a=this;this._dataManager.onRequestRemoveChart().addListener(new epiviz.events.EventListener(function(c){try{a._chartManager.removeChart(c.id),c.result.success=!0}catch(b){c.result.success=!1,c.errorMessage=b.toString()}}))};
epiviz.EpiViz.prototype._registerDataAddSeqInfos=function(){var a=this;this._dataManager.onRequestAddSeqInfos().addListener(new epiviz.events.EventListener(function(c){try{a._locationManager.addSeqInfos(c.seqInfos),c.result.success=!0}catch(b){c.result.success=!1,c.errorMessage=b.toString()}}))};
epiviz.EpiViz.prototype._registerDataRemoveSeqNames=function(){var a=this;this._dataManager.onRequestRemoveSeqNames().addListener(new epiviz.events.EventListener(function(c){try{a._locationManager.removeSeqNames(c.seqNames),c.result.success=!0}catch(b){c.result.success=!1,c.errorMessage=b.toString()}}))};
epiviz.EpiViz.prototype._registerDataNavigate=function(){var a=this;this._dataManager.onRequestNavigate().addListener(new epiviz.events.EventListener(function(c){try{a._locationManager.changeCurrentLocation(c.range),c.result.success=!0}catch(b){c.result.success=!1,c.errorMessage=b.toString()}}))};
epiviz.EpiViz.prototype._registerDataRedraw=function(){var a=this;this._dataManager.onRequestRedraw().addListener(new epiviz.events.EventListener(function(c){try{var b=a._locationManager.currentLocation();a._locationManager.changeCurrentLocation(b);c.result.success=!0}catch(d){c.result.success=!1,c.errorMessage=d.toString()}}))};
epiviz.EpiViz.prototype._registerDataGetCurrentLocation=function(){var a=this;this._dataManager.onRequestCurrentLocation().addListener(new epiviz.events.EventListener(function(c){try{var b=a._locationManager.currentLocation();c.result.value={seqName:b.seqName(),start:b.start(),end:b.end()};c.result.success=!0}catch(d){c.result.success=!1,c.errorMessage=d.toString()}}))};epiviz.EpiViz.prototype._registerWorkspacesLoaded=function(){this._workspaceManager.onWorkspacesLoaded().addListener(new epiviz.events.EventListener(function(a){}))};
epiviz.EpiViz.prototype._registerActiveWorkspaceChanged=function(){var a=this;this._workspaceManager.onActiveWorkspaceChanged().addListener(new epiviz.events.EventListener(function(c){a._workspaceManager.startChangingActiveWorkspace();a._controlManager.updateSelectedWorkspace({id:c.newValue.id(),name:c.newValue.name()});a._locationManager.changeCurrentLocation(c.newValue.range());a._measurementsManager.removeMeasurements(a._measurementsManager.computedMeasurements());a._measurementsManager.addMeasurements(c.newValue.computedMeasurements());
a._chartManager.clear();c=c.newValue.charts();for(var b in c)if(c.hasOwnProperty(b))for(var d=0;d<c[b].length;++d)a._addChart(c[b][d].type,c[b][d].properties.visConfigSelection,c[b][d].id,c[b][d].properties.copy());a._workspaceManager.endChangingActiveWorkspace()}))};epiviz.EpiViz.prototype._registerActiveWorkspaceContentChanged=function(){var a=this;this._workspaceManager.onActiveWorkspaceContentChanged().addListener(new epiviz.events.EventListener(function(c){a._cookieManager.saveWorkspace(c,a._config)}))};
epiviz.EpiViz.prototype._registerLocationChanged=function(){var a=this;this._locationManager.onCurrentLocationChanged().addListener(new epiviz.events.EventListener(function(c){a._chartManager.dataWaitStart(void 0,function(a){return a.displayType()!=epiviz.ui.charts.VisualizationType.DisplayType.DATA_STRUCTURE});var b=a._chartManager.chartsMeasurements();a._dataManager.getData(c.newValue,b,function(b,e){a._chartManager.updateCharts(c.newValue,e,[b])})}))};
epiviz.ui.controls.VisConfigSelection=function(a,c,b,d,e,f,g,h){this.measurements=a;this.datasource=c;this.datasourceGroup=b;this.dataprovider=d;this.annotation=e;this.defaultChartType=f;this.minSelectedMeasurements=g||1;this.customData=h};
epiviz.ui.controls.DataTable=function(a,c,b,d,e,f){epiviz.ui.controls.Control.call(this,a);this._columns=c;this._rows=b;this._rowsArray=[];var g=this;this._rows.foreach(function(a){g._rowsArray.push(a)});this._rowParser=d;this._multiselect=e||!1;this._showColumnSelector=f||!1;this._columnSelector=this._table=null;this._selectedIndices=[];this._selectedIndicesMap={};this._lastSelection=this._deselectList=this._selectList=null};epiviz.ui.controls.DataTable.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Control.prototype);
epiviz.ui.controls.DataTable.constructor=epiviz.ui.controls.DataTable;epiviz.ui.controls.DataTable.ColumnType={STRING:"string",NUMBER:"number",BOOLEAN:"boolean"};
epiviz.ui.controls.DataTable.prototype.initialize=function(){this._container.append('<div class="epiviz-data-table"><table style="width: 100%!important;"><thead></thead><tbody></tbody><tfoot></tfoot></table></div>');this._table=this._container.find("table");var a=this._table.find("thead"),c=this._table.find("tfoot"),b=this._table.find("tbody"),d=sprintf("<tr><th>%s</th></tr>",this._columns.join("</th><th>"));a.append(d);c.append(d);var e=this;this._rows.foreach(function(a){for(var c="",d=0;d<e._columns.length;++d)c+=
sprintf("<td>%s</td>",e._rowParser(a,e._columns[d]));b.append(sprintf("<tr>%s</tr>",c))});c=Array(this._columns.length);for(a=0;a<this._columns.length;++a)c[a]={type:"text",bRegex:!0,bSmart:!0};this._table.dataTable({bJQueryUI:!0,sDom:'<"H"lfr>Tt<"F"ip>',oTableTools:{sRowSelect:this._multiselect?"multi":"single",aButtons:[],fnPreRowSelect:function(a,b,c){return e._preRowSelect(this,a,b,c)},fnRowSelected:function(a){return e._select(this,a)},fnRowDeselected:function(a){return e._select(this,a)}}}).columnFilter({aoColumns:c});
c=-1;for(a=0;a<this._columns.length;++a)this._columns[a].isVisible&&++c,this._table.fnSetColumnVis(a,this._columns[a].isVisible),this._columns[a].defaultFilter&&(this._table.fnFilter(this._columns[a].defaultFilter,a,!0,!0),this._table.find("tfoot").find(sprintf("th:eq(%s)",c)).find("input").removeClass("search_init").val(this._columns[a].defaultFilter));this._container.find(".ui-buttonset").first().attr("style","position: absolute!important;");if(this._showColumnSelector){this._container.find(".fg-toolbar").first().append(sprintf('<div style="float: right; margin-right: 5px;"><label>Selected Columns: </label><select class="%s" multiple="multiple" style=""><option value="-1">All</option></select></div>',
"epiviz-data-table-column-selector"));this._columnSelector=this._container.find(".epiviz-data-table-column-selector");for(a=0;a<this._columns.length;++a)c=sprintf('<option value="%s"%s%s>%s</option>',a,this._columns[a].isVisible?' selected="selected"':"",this._columns[a].isFixed?' disabled="disabled"':"",this._columns[a].name),this._columnSelector.append(c);this._columnSelector.dropdownchecklist({width:"80px",firstItemChecksAll:!0,onComplete:function(a){e._selectColumns(a)}})}};
epiviz.ui.controls.DataTable.prototype.selectedIndices=function(){return this._selectedIndices||[]};epiviz.ui.controls.DataTable.prototype.selectedRows=function(){if(!this._selectedIndices)return[];for(var a=Array(this._selectedIndices.length),c=0;c<this._selectedIndices.length;++c)a[c]=this._rowsArray[this._selectedIndices[c]];return a};
epiviz.ui.controls.DataTable.prototype._preRowSelect=function(a,c,b,d){c&&(this._selectList=this._deselectList=null,c.shiftKey&&1==b.length?(this._deselectList=a.fnGetSelected(),this._lastSelection||(this._lastSelection=b[0]),this._selectList=this._getRangeOfRows(this._lastSelection,b[0])):(this._lastSelection=b[0],c.ctrlKey||c.metaKey||(this._deselectList=a.fnGetSelected(),d||(this._selectList=b))));return!0};
epiviz.ui.controls.DataTable.prototype._getRangeOfRows=function(a,c){var b=this._table.fnGetPosition(a),d=this._table.fnGetPosition(c),e=this._table.fnSettings(),b=$.inArray(b,e.aiDisplay),d=$.inArray(d,e.aiDisplay),f=[];if(0<=b&&0<=d)for(var g=Math.min(b,d);g<=Math.max(b,d);++g)f.push(e.aoData[e.aiDisplay[g]].nTr);return 0<f.length?f:null};
epiviz.ui.controls.DataTable.prototype._select=function(a,c){var b;this._deselectList&&(b=this._deselectList,this._deselectList=null,a.fnDeselect(b));this._selectList&&(b=this._selectList,!this._multiselect&&0<b.length&&(b=[b[b.length-1]]),this._selectList=null,a.fnSelect(b));b=a.fnGetSelected();var d=Array(b.length),e={},f;for(f=0;f<b.length;++f)d[f]=this._table.fnGetPosition(b[f]),e[d[f]]=!0;for(f=0;f<this._selectedIndices.length;++f)e[this._selectedIndices[f]]||(delete this._selectedIndicesMap[this._selectedIndices[f]],
this._selectedIndices.splice(f,1),--f);for(f=0;f<d.length;++f)this._selectedIndicesMap[d[f]]||(this._selectedIndicesMap[d[f]]=!0,this._selectedIndices.push(d[f]));return!0};epiviz.ui.controls.DataTable.prototype._selectColumns=function(a){var c={},b;for(b=0;b<a.options.length;++b)a.options[b].selected&&a.options[b].value&&(c[parseInt(a.options[b].value)]=!0);for(b=0;b<this._columns.length;++b)this._table.fnSetColumnVis(b,c[b]||this._columns[b].isFixed)};
epiviz.ui.controls.DataTable.Column=function(a,c,b,d,e,f){this.id=a;this.name=c;this.type=b;this.isVisible=!d;this.isFixed=e||!1;this.defaultFilter=f||""};epiviz.ui.controls.DataTable.Column.prototype.toString=function(){return this.name};epiviz.ui.controls.Wizard=function(a,c,b,d,e,f,g){epiviz.ui.controls.Dialog.call(this,a,c);this._steps=b;this._initialData=d;this._width=e;this._height=f;this._showTabs=g||!1;this._tabs=null;this._initialize()};epiviz.ui.controls.Wizard.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);
epiviz.ui.controls.Wizard.constructor=epiviz.ui.controls.Wizard;
epiviz.ui.controls.Wizard.prototype._initialize=function(){var a=this;this._dialog=$("#"+this._id);this._dialog.append('<div class="wizard-dialog"><div class="wizard-tabs"><ul class="wizard-tabs-title-list"></ul></div></div>');this._tabs=this._dialog.find(".wizard-tabs");for(var c=this._tabs.find(".wizard-tabs-title-list"),b=0;b<this._steps.length;++b)c.append(sprintf('<li><a href="#%s-tab-%s">%s</a></li>',this._id,b,this._steps[b].title())),this._tabs.append(sprintf('<div id="%s-tab-%s"></div>',
this._id,b));this._showTabs||(c.css("visibility","hidden"),c.css("position","absolute"));this._tabs.tabs({activate:function(b,c){a._tabActivate(c)},disabled:epiviz.utils.range(this._steps.length-1,1)});this._dialog.dialog({autoOpen:!1,resizable:!0,width:this._width||void 0,height:this._height||void 0,buttons:{Back:function(){var b=a._tabs.tabs("option","active");0!=b&&(a._tabs.tabs("option","disabled",epiviz.utils.range(a._steps.length-b,b)),a._tabs.tabs("option","active",b-1))},Next:function(){var b=
a._tabs.tabs("option","active"),c=a._steps[b].next();c.error?(new epiviz.ui.controls.MessageDialog("Error",{Ok:function(){}},c.error,epiviz.ui.controls.MessageDialog.Icon.ERROR)).show():(a._steps[b+1].initialize($(sprintf("#%s-tab-%s",a._id,b+1)),c.data),a._tabs.tabs("option","disabled",epiviz.utils.range(a._steps.length-b-2,b+2)),a._tabs.tabs("option","active",b+1))},Finish:function(){var b=a._steps[a._steps.length-1].next();b.error?(new epiviz.ui.controls.MessageDialog("Error",{Ok:function(){}},
b.error,epiviz.ui.controls.MessageDialog.Icon.ERROR)).show():(a._handlers.finish&&a._handlers.finish(b.data),$(this).dialog("close"))},Cancel:function(){a._handlers.close&&a._handlers.close();$(this).dialog("close")}},modal:!0});1<this._steps.length?(this._dialog.parent().find('button:contains("Finish")').button("disable"),this._dialog.parent().find('button:contains("Next")').button("enable")):(this._dialog.parent().find('button:contains("Finish")').button("enable"),this._dialog.parent().find('button:contains("Next")').button("disable"));
this._steps[0].initialize($(sprintf("#%s-tab-0",a._id)),this._initialData)};epiviz.ui.controls.Wizard.prototype._tabActivate=function(a){a=this._tabs.tabs("option","active");var c=this._dialog.parent().find('button:contains("Finish")'),b=this._dialog.parent().find('button:contains("Next")');a==this._steps.length-1?(b.button("disable"),c.button("enable")):(b.button("enable"),c.button("disable"));this._tabs.tabs("option","disabled",epiviz.utils.range(this._steps.length-a-1,a+1))};
epiviz.ui.controls.Wizard.prototype.show=function(){var a=this;this._dialog.dialog("open");this._dialog.dialog("option","position","center");this._dialog.dialog({close:function(c,b){$(this).remove();a._dialog=null}})};epiviz.ui.controls.Wizard.Step=function(){};epiviz.ui.controls.Wizard.Step.prototype.initialize=function(a,c){};epiviz.ui.controls.Wizard.Step.prototype.next=function(){};epiviz.ui.controls.Wizard.Step.prototype.title=function(){};
epiviz.ui.controls.DatasourceGroupWizardStep=function(){this._data=this._dataTable=null};
epiviz.ui.controls.DatasourceGroupWizardStep.prototype.initialize=function(a,c){this._data=c;a.find(".epiviz-data-table").remove();var b=[new epiviz.ui.controls.DataTable.Column("datasourceGroup","Data Source Group",epiviz.ui.controls.DataTable.ColumnType.STRING)],d={};c.measurements.foreach(function(a){if(!c.dataprovider||c.dataprovider==a.dataprovider()){if(c.annotation)for(var b in c.annotation)if(c.annotation.hasOwnProperty(b)&&(!a.annotation()||a.annotation()[b]!=c.annotation[b]))return;d[a.datasourceGroup()]=
!0}});this._dataTable=new epiviz.ui.controls.DataTable(a,b,new epiviz.utils.IterableArray(Object.keys(d)),function(a){return a});this._dataTable.initialize()};
epiviz.ui.controls.DatasourceGroupWizardStep.prototype.next=function(){var a=this._dataTable?this._dataTable.selectedRows():[];if(0==a.length)return{error:"No rows selected"};this._data.datasourceGroup=a[0];return{data:new epiviz.ui.controls.VisConfigSelection(this._data.measurements.subset(function(c){return c.datasourceGroup()==a[0]}),this._data.datasource,this._data.datasourceGroup,this._data.dataprovider,this._data.annotation?epiviz.utils.mapCopy(this._data.annotation):this._data.annotation,this._data.defaultChartType,
this._data.minSelectedMeasurements,this._data.customData)}};epiviz.ui.controls.DatasourceGroupWizardStep.prototype.title=function(){return"Select Datasource Group"};epiviz.ui.controls.MeaurementsWizardStep=function(){this._measurements=this._data=this._dataTable=null};
epiviz.ui.controls.MeaurementsWizardStep.prototype.initialize=function(a,c){this._data=c;a.find(".epiviz-data-table").remove();var b=epiviz.ui.controls.DataTable.ColumnType,b=[new epiviz.ui.controls.DataTable.Column("id","Id",b.STRING,!0),new epiviz.ui.controls.DataTable.Column("name","Name",b.STRING,!1,!0),new epiviz.ui.controls.DataTable.Column("defaultChartType","Default Chart Type",b.STRING,!1,!0),new epiviz.ui.controls.DataTable.Column("type","Type",b.STRING,!0),new epiviz.ui.controls.DataTable.Column("datasourceId",
"Data Source",b.STRING,!0),new epiviz.ui.controls.DataTable.Column("datasourceGroup","Data Source Group",b.STRING,!0),new epiviz.ui.controls.DataTable.Column("dataprovider","Data Provider",b.STRING,!0),new epiviz.ui.controls.DataTable.Column("formulaStr","Formula",b.STRING,!0),new epiviz.ui.controls.DataTable.Column("annotation","Annotation",b.STRING)];this._measurements=c.measurements.subset(function(a){if(c.datasource&&c.datasource!=a.datasourceId()||c.datasourceGroup&&c.datasourceGroup!=a.datasourceGroup()||
c.dataprovider&&c.dataprovider!=a.dataprovider())return!1;if(c.annotation)for(var b in c.annotation)if(c.annotation.hasOwnProperty(b)&&(!a.annotation()||a.annotation()[b]!=c.annotation[b]))return!1;return!0});this._dataTable=new epiviz.ui.controls.DataTable(a,b,this._measurements,function(a,b){var c=null;switch(b.id){case "annotation":c=epiviz.utils.mapJoin(a.annotation(),": ","<br />");break;default:c=a[b.id]()}return 0===c||""===c||c?c:""},!0,!0);this._dataTable.initialize()};
epiviz.ui.controls.MeaurementsWizardStep.prototype.next=function(){var a=this._dataTable?this._dataTable.selectedRows():[];if(a.length<this._data.minSelectedMeasurements)return{error:"Minimum selected rows required is "+this._data.minSelectedMeasurements};for(var c=new epiviz.measurements.MeasurementSet,b=0;b<a.length;++b)c.add(a[b]);this._data.measurements=c;return{data:this._data}};epiviz.ui.controls.MeaurementsWizardStep.prototype.title=function(){return"Select Measurements"};
epiviz.ui.controls.MessageDialog=function(a,c,b,d){epiviz.ui.controls.Dialog.call(this,a,c);this._message=b;this._icon=d||epiviz.ui.controls.MessageDialog.Icon.INFO};epiviz.ui.controls.MessageDialog.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);epiviz.ui.controls.MessageDialog.constructor=epiviz.ui.controls.MessageDialog;epiviz.ui.controls.MessageDialog.Icon={INFO:"info",ERROR:"error",QUESTION:"question"};
epiviz.ui.controls.MessageDialog.prototype.show=function(){epiviz.ui.controls.Dialog.prototype.show.call(this);var a=epiviz.ui.controls.MessageDialog.Icon;if(!this._dialog){var c=this;this._dialog=$("#"+this._id);this._dialog.css("display","inline");this._dialog.append(sprintf('<div class="ui-state-%s ui-corner-all" style="margin: 5px; padding: 5px; height: auto;"><div class="ui-icon ui-icon-%s" style="float: left; margin-right: 5px;"></div><div class="dialog-text">%s</div></div>',this._icon==a.ERROR?
"error":"highlight",this._icon==a.ERROR?"alert":"info",this._message));var b={},d;for(d in this._handlers)this._handlers.hasOwnProperty(d)&&function(a){b[a]=function(){c._handlers[a]();$(this).dialog("close")}}(d);this._dialog.dialog({autoOpen:!1,resizable:!1,buttons:b,modal:!0});this._dialog.dialog({close:function(a,b){$(this).remove();c._dialog=null}})}this._dialog.dialog("open");this._dialog.dialog("option","position","center")};
epiviz.ui.controls.ColorPickerDialog=function(a,c,b,d){epiviz.ui.controls.Dialog.call(this,"Pick Colors",a);this._dialog=$("#"+this._id);this._dialog.append('<div class="color-picker-form" action="" style="width: 420px;"><div class="chart-picker" style="float: right;"></div></div>');var e=this._dialog.find(".color-picker-form");a="";for(var f=0;f<c.length;++f){var g=sprintf("color-%s",f);a+=sprintf('<tr><td><label>%s:&nbsp;</label></td><td><input type="text" name="%s" class="colorwell %s" value="%s" /></td></tr>',
c[f],g,g,d.get(f))}e.append(sprintf('<table class="color-picker-table">%s</table>',a));var h=$.farbtastic(sprintf("#%s .chart-picker",this._id)),l=$(sprintf("#%s .chart-picker",this._id)).css("opacity",.25),m;$(sprintf("#%s .colorwell",this._id)).each(function(){h.linkTo(this);$(this).css("opacity",.75)}).focus(function(){m&&$(m).css("opacity",.75).removeClass("colorwell-selected");h.linkTo(this);l.css("opacity",1);$(m=this).css("opacity",1).addClass("colorwell-selected")});e.append('<select class="palettes-selector"></select>');
var n=e.find(".palettes-selector"),q={};b&&b.forEach(function(a){n.append(sprintf('<option value="%s"%s>%s</option>',a.id(),a.id()==d.id()?' selected="selected"':"",a.name()));q[a.id()]=a});d.id()in q||(n.prepend(sprintf('<option value="%s" selected="selected">%s</option>',d.id(),d.name())),q[d.id()]=d);n.selectmenu({style:"popup",width:"200",maxHeight:"150",menuWidth:"200"});var t=function(){for(var a=e.find(".colorwell"),b=0;b<a.length;++b)h.linkTo($(a[b])),h.setColor(d.get(b));m&&h.linkTo(m)};
n.change(function(){d=q[$(this).val()];t()});var x=this;this._dialog.dialog({autoOpen:!1,resizable:!1,width:"440",buttons:{Ok:function(){for(var a=e.find(".colorwell"),b=!1,c=[],f=0;f<a.length;++f)c.push(a[f].value),c[f]!=d.get(f)&&(b=!0);b&&(d=new epiviz.ui.charts.ColorPalette(c));x._handlers.ok(d);$(this).dialog("close")},Cancel:function(){x._handlers.cancel();$(this).dialog("close")},Reset:function(){t();x._handlers.reset()}},modal:!0})};epiviz.ui.controls.ColorPickerDialog.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);
epiviz.ui.controls.ColorPickerDialog.constructor=epiviz.ui.controls.ColorPickerDialog;epiviz.ui.controls.ColorPickerDialog.prototype.show=function(){epiviz.ui.controls.Dialog.prototype.show.call(this);var a=this;this._dialog&&(this._dialog.dialog("open"),this._dialog.dialog("option","position","center"),this._dialog.dialog({close:function(c,b){$(this).remove();a._dialog=null}}))};
epiviz.ui.controls.SaveSvgAsImageDialog=function(a,c,b){epiviz.ui.controls.Dialog.call(this,"Save Chart SVG as Image",a);this._dialog=$("#"+this._id);this._dialog.append('<div class="save-svg-dialog"><label class="dialog-label">Choose file format:</label><br/><br/><div style="position:absolute; right:15px;"><select class="svg-file-format"><option value="pdf" selected="selected">PDF</option><option value="ps" >PS</option><option value="png" >PNG</option><option value="svg">SVG</option><option value="eps">EPS</option></select></div>'+
sprintf('<form name="%s-svg-save-form" method="POST">',this._id)+'<div><input type="hidden" name="svg" /><input type="hidden" name="format" /><br/><br/></div></form></div>');this._chartId=c;this._chartSaverLocation=b;var d=this;this._dialog.dialog({autoOpen:!1,resizable:!1,width:"200",buttons:{Ok:function(){var a=$("#"+d._chartId).find("svg").clone();a.attr("xmlns","http://www.w3.org/2000/svg");a.attr("version","1.1");var b=d._dialog.find(".svg-file-format"),c=document.forms[sprintf("%s-svg-save-form",
d._id)];c.action=d._chartSaverLocation;c.svg.value=$("<div>").append(a).html();c.format.value=b.val();c.submit();d._handlers.ok();$(this).dialog("close")},Cancel:function(){d._handlers.cancel();$(this).dialog("close")}},modal:!0})};epiviz.ui.controls.SaveSvgAsImageDialog.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);epiviz.ui.controls.SaveSvgAsImageDialog.constructor=epiviz.ui.controls.SaveSvgAsImageDialog;
epiviz.ui.controls.SaveSvgAsImageDialog.prototype.show=function(){epiviz.ui.controls.Dialog.prototype.show.call(this);var a=this;this._dialog&&(this._dialog.dialog("open"),this._dialog.dialog("option","position","center"),this._dialog.dialog({close:function(c,b){$(this).remove();a._dialog=null}}))};
epiviz.ui.controls.ComputedMeasurementsDialog=function(a,c,b,d){epiviz.ui.controls.Dialog.call(this,a,c);this._measurements=b;this._chartsMeasurements=d;this._measurementsList=this._maxTextBox=this._minTextBox=this._nameTextBox=this._idTextBox=this._expressionTextBox=null;this._addButtonProperties={text:!1,icons:{primary:"ui-icon ui-icon-plus"}};this._deleteButtonsProperties={text:!1,icons:{primary:"ui-icon ui-icon-trash"}};this._datasourceGroupMeasurements=this._selectedDatasourceGroup=this._tabs=
null;this._addTabs();this._addDialogContents();this._addDatasourceGroupTable(b)};epiviz.ui.controls.ComputedMeasurementsDialog.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);epiviz.ui.controls.ComputedMeasurementsDialog.constructor=epiviz.ui.controls.ComputedMeasurementsDialog;
epiviz.ui.controls.ComputedMeasurementsDialog.prototype.show=function(){epiviz.ui.controls.Dialog.prototype.show.call(this);var a=this;this._dialog&&(this._dialog.dialog("open"),this._dialog.dialog("option","position","center"),this._dialog.dialog({close:function(c,b){$(this).remove();a._dialog=null;a._handlers.close()}}))};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._addDatasourceGroupTable=function(a){var c=this,b=$(sprintf("#datasource-group-tab-%s",this._id)),d="",e={};a.foreach(function(a){a.type()==epiviz.measurements.Measurement.Type.FEATURE&&(a.datasourceGroup()in e||(e[a.datasourceGroup()]=[]),e[a.datasourceGroup()].push(a))});for(var f in e)e.hasOwnProperty(f)&&(d+=sprintf('<tr><td class="center">%s</td></tr>',f));b.append(sprintf('<table style="border-spacing:0; border-collapse:collapse; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: moz-none; -ms-user-select: none; user-select: none; width: 100%%;" class="computed-measurements-dialog-raw-table">%s</table>',
"<thead><tr><th>Data Source Group</th></tr></thead>"+d+"<tfoot><tr><th>Data Source Group</th></tr></tfoot>"));var g=b.find(".computed-measurements-dialog-raw-table").dataTable({bJQueryUI:!0,sDom:'<"H"lfr>Tt<"F"ip>',oTableTools:{sRowSelect:"single",aButtons:[],fnPreRowSelect:function(a,b,c){return!0},fnRowSelected:function(a){a=g.fnGetData(a[0]);c._selectedDatasourceGroup=a[0];c._datasourceGroupMeasurements=e[c._selectedDatasourceGroup]},fnRowDeselected:function(a){g.fnGetData(a[0])==c._selectedDatasourceGroup&&
(c._selectedDatasourceGroup=null,c._datasourceGroupMeasurements=null)}}});b.find(".DTTT_container").css("position","absolute")};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._addTabs=function(){var a=this;this._selectDialog().append('<div class="computed-measurements-dialog"><div class="computed-measurements-tabs"><ul>'+sprintf('<li><a href="#datasource-group-tab-%s">Data Source Group</a></li>',this._id)+sprintf('<li><a href="#formula-tab-%s">Expression</a></li>',this._id)+"</ul>"+sprintf('<div id="datasource-group-tab-%s"></div>',this._id)+sprintf('<div id="formula-tab-%s"></div>',this._id)+"</div></div>");this._tabs=
this._selectTabs();this._tabs.tabs({activate:function(c,b){a._tabActivate(b)}})};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._addDialogContents=function(){var a=this;this._selectDialog().dialog({autoOpen:!1,resizable:!0,width:"600",height:"550",buttons:{Back:function(){0!=a._tabs.tabs("option","active")&&a._tabs.tabs("option","active",0)},Next:function(){1!=a._tabs.tabs("option","active")&&a._tabs.tabs("option","active",1)},Add:function(){for(var c=epiviz.utils.ExpressionParser.parse(a._selectExpressionTextBox().val().trim()),b={},d=c.variables(),e=null,f=null,g=[],
h={},l=0;l<d.length;++l){var m=d[l];if(epiviz.utils.stringStartsWith(m,"{")&&epiviz.utils.stringEndsWith(m,"}")){var n=parseInt(m.substring(1,m.length-1)),m=a._datasourceGroupMeasurements[n];b[n]=m;if(null===e||e>m.minValue())e=m.minValue();if(null===f||f<m.maxValue())f=m.maxValue();if(m.metadata())for(n=0;n<m.metadata().length;++n)h[m.metadata()[n]]||(h[m.metadata()[n]]=!0,g.push(m.metadata()[n]))}}d=a._selectMinTextBox().val().trim();h=a._selectMaxTextBox().val().trim();e=d?parseFloat(d):e;f=h?
parseFloat(h):f;d=a._selectIdTextBox().val().trim()||epiviz.utils.generatePseudoGUID(5);c=new epiviz.measurements.Measurement(d,a._selectNameTextBox().val().trim()||"Unnamed ["+d+"]",epiviz.measurements.Measurement.Type.FEATURE,null,a._selectedDatasourceGroup,null,{referredMeasurements:b,expression:c},"any",null,e,f,g);b=a._datasourceGroupMeasurements.length;$(sprintf("#computed-measurement-measurements-%s",a._id)).append(sprintf('<div style="min-height: 30px; padding: 2px;"><div style="margin: 6px; float: left;">%1$s {<b>%2$s</b>}</div><div style="float: right;"><button id="delete-button-%2$s-%3$s" data-measurement="%2$s">Delete</button><button style="" id="measurement-button-%2$s-%3$s" data-measurement="%2$s">Insert %2$s</button></div></div>',
c.name(),b,a._id));$("#measurement-button-"+b+"-"+a._id).button(a._addButtonProperties).click(function(){a._addButtonClick($(this))});$("#delete-button-"+b+"-"+a._id).button(a._deleteButtonsProperties).click(function(){a._deleteButtonClick($(this))});a._datasourceGroupMeasurements.push(c);a._handlers.add(c)},Close:function(){a._handlers.close();$(this).dialog("close")}},modal:!0})};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._addButtonClick=function(a){a=a.data("measurement");var c=this._selectExpressionTextBox();c.val(c.val().trim()+" {"+a+"}")};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._deleteButtonClick=function(a){for(var c=a.data("measurement"),b=this._datasourceGroupMeasurements[c],d=0;d<this._datasourceGroupMeasurements.length;++d){var e=this._datasourceGroupMeasurements[d];if(null!=e&&e!==b&&e.isComputed()&&e.componentMeasurements().contains(b)){a=new epiviz.ui.controls.MessageDialog("Measurement cannot be deleted",{Ok:function(){}},"There are other measurements that depend on the one selected. Please delete those before deleting this.",
epiviz.ui.controls.MessageDialog.Icon.ERROR);a.show();return}}for(var f in this._chartsMeasurements)if(this._chartsMeasurements.hasOwnProperty(f)&&this._chartsMeasurements[f].contains(b)){a=new epiviz.ui.controls.MessageDialog("Measurement cannot be deleted",{Ok:function(){}},"There are charts using the selected measurement. Remove them from the workspace and then try again.",epiviz.ui.controls.MessageDialog.Icon.ERROR);a.show();return}this._datasourceGroupMeasurements[c]=null;a.parent().parent().remove();
this._handlers.remove(b)};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._tabActivate=function(a){if(0!=this._selectTabs().tabs("option","active")&&(a.newPanel.empty(),this._measurementsList=this._maxTextBox=this._minTextBox=this._expressionTextBox=this._nameTextBox=this._idTextBox=null,this._selectedDatasourceGroup)){a.newPanel.append(sprintf('<label for="computed-measurement-key-%1$s"><b>Id:</b></label> <input id="computed-measurement-key-%1$s" class="ui-widget-content ui-corner-all" style="padding: 2px;" type="text"/>&nbsp;<label for="computed-measurement-name-%1$s"><b>Name:</b></label> <input id="computed-measurement-name-%1$s" class="ui-widget-content ui-corner-all" style="padding: 2px;" type="text"/><br /><br /><div id="computed-measurement-measurements-%1$s" style="overflow: auto; max-height: 200px; border-style: solid; border-width: 1px; border-color: #999999;"></div><br/><label for="computed-measurement-min-%1$s"><b>Min:</b></label> <input id="computed-measurement-min-%1$s" class="ui-widget-content ui-corner-all" style="padding: 2px;" type="text"/>&nbsp;<label for="computed-measurement-max-%1$s"><b>Max:</b></label> <input id="computed-measurement-max-%1$s" class="ui-widget-content ui-corner-all" style="padding: 2px;" type="text"/><br/><div style="overflow: hidden; padding: 10px; padding-right: 20px; margin: 0px;"><textarea id="computed-measurement-expr-%1$s" class="ui-widget-content ui-corner-all" style="width: 100%%; height: 55px; padding: 5px; margin: 0; resize: none;"></textarea></div>',this._id));
a=this._selectMeasurementsList();for(var c="",b=0;b<this._datasourceGroupMeasurements.length;++b){var d=this._datasourceGroupMeasurements[b],e="";d.isComputed()&&(e='<button id="delete-button-%2$s-%3$s" data-measurement="%2$s">Delete %2$s</button>');c+=sprintf('<div style="min-height: 30px; padding: 2px;"><div style="margin: 6px; float: left;">%1$s {<b>%2$s</b>}</div><div style="float: right;">'+e+'<button style="" id="measurement-button-%2$s-%3$s" data-measurement="%2$s">Insert %2$s</button></div></div>',
d.name(),b,this._id)}a.append(c);for(var f=this,b=0;b<this._datasourceGroupMeasurements.length;++b)d=this._datasourceGroupMeasurements[b],d.isComputed()&&$("#delete-button-"+b+"-"+this._id).button(this._deleteButtonsProperties).click(function(){f._deleteButtonClick($(this))}),$("#measurement-button-"+b+"-"+this._id).button(this._addButtonProperties).click(function(){f._addButtonClick($(this))});this._selectIdTextBox().watermark("[auto]");this._selectNameTextBox().watermark("[auto]");this._selectMinTextBox().watermark("[auto]");
this._selectMaxTextBox().watermark("[auto]");this._selectExpressionTextBox().watermark("[expression; for example: {0} - {1}]")}};epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectDialog=function(){this._dialog||(this._dialog=$("#"+this._id));return this._dialog};epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectExpressionTextBox=function(){this._expressionTextBox||(this._expressionTextBox=$("#computed-measurement-expr-"+this._id));return this._expressionTextBox};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectIdTextBox=function(){this._idTextBox||(this._idTextBox=$("#computed-measurement-key-"+this._id));return this._idTextBox};epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectNameTextBox=function(){this._nameTextBox||(this._nameTextBox=$("#computed-measurement-name-"+this._id));return this._nameTextBox};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectMinTextBox=function(){this._minTextBox||(this._minTextBox=$("#computed-measurement-min-"+this._id));return this._minTextBox};epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectMaxTextBox=function(){this._maxTextBox||(this._maxTextBox=$("#computed-measurement-max-"+this._id));return this._maxTextBox};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectTabs=function(){this._tabs||(this._tabs=this._dialog.find(".computed-measurements-tabs"));return this._tabs};epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectMeasurementsList=function(){this._measurementsList||(this._measurementsList=$("#computed-measurement-measurements-"+this._id));return this._measurementsList};
epiviz.ui.controls.CustomSettingsDialog=function(a,c,b,d){epiviz.ui.controls.Dialog.call(this,a,c);this._customSettingsDefs=b;this._customSettingsValues=epiviz.utils.mapCopy(d)};epiviz.ui.controls.CustomSettingsDialog.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);epiviz.ui.controls.CustomSettingsDialog.constructor=epiviz.ui.controls.CustomSettingsDialog;
epiviz.ui.controls.CustomSettingsDialog.prototype.show=function(){epiviz.ui.controls.Dialog.prototype.show.call(this);var a=epiviz.ui.charts.CustomSetting.Type;if(!this._dialog){var c=this;this._dialog=$("#"+this._id);this._dialog.css("display","inline");var b,d,e,f,g="";for(b=0;b<this._customSettingsDefs.length;++b){d=sprintf("%s-%s",this._id,this._customSettingsDefs[b].id);var h=sprintf('<tr><td><label for="%s">%s</label></td><td style="text-align: right;">%%s</td></tr>',d,this._customSettingsDefs[b].label);
e=null;f=this._customSettingsValues[this._customSettingsDefs[b].id];switch(this._customSettingsDefs[b].type){case a.BOOLEAN:h=sprintf(h,sprintf('<div id="%1$s"><label for="%1$s-true">On</label><input type="radio" id="%1$s-true" name="%1$s" %2$s /><label for="%1$s-false">Off</label><input type="radio" id="%1$s-false" name="%1$s" %3$s /></div>',d,f?'checked="checked"':"",f?"":'checked="checked"'));break;case a.ARRAY:h=sprintf(h,sprintf('<input id="%s" value="%s" class="ui-widget-content ui-corner-all" style="text-align: right; padding: 5px;" />',
d,f.join(",")));break;case a.NUMBER:case a.STRING:h=sprintf(h,sprintf('<input id="%s" value="%s" class="ui-widget-content ui-corner-all" style="text-align: right; padding: 5px;" />',d,f));break;case a.CATEGORICAL:case a.MEASUREMENTS_METADATA:case a.MEASUREMENTS_ANNOTATION:var l="",m=this._customSettingsDefs[b];if(m.possibleValues)for(var n=0;n<m.possibleValues.length;++n)l+=sprintf('<option value="%1$s"%2$s>%1$s</option>',m.possibleValues[n],m.possibleValues[n]==f?'selected="selected"':"");f=sprintf('<select id="%s">%s</select>',
d,l);h=sprintf(h,f)}g+=h}g=sprintf('<div style="margin: 5px; padding: 5px; height: auto;"><table style="width: 100%%;">%s</table></div>',g);this._dialog.append(g);for(b=0;b<this._customSettingsDefs.length;++b)switch(d=sprintf("%s-%s",this._id,this._customSettingsDefs[b].id),e=$("#"+d),f=this._customSettingsValues[this._customSettingsDefs[b].id],this._customSettingsDefs[b].type){case a.BOOLEAN:e.buttonset();break;case a.NUMBER:case a.ARRAY:case a.STRING:e.watermark(this._customSettingsDefs[b].label);
break;case a.CATEGORICAL:case a.MEASUREMENTS_METADATA:case a.MEASUREMENTS_ANNOTATION:e.selectmenu()}this._dialog.dialog({autoOpen:!1,resizable:!1,buttons:{Ok:function(){for(var b=0;b<c._customSettingsDefs.length;++b){d=sprintf("%s-%s",c._id,c._customSettingsDefs[b].id);e=$("#"+d);var f=null;if(e.val()==epiviz.ui.charts.CustomSetting.DEFAULT)f=c._customSettingsDefs[b].defaultValue;else{var g=null;try{switch(c._customSettingsDefs[b].type){case a.BOOLEAN:var h=$("#"+d+" :radio:checked").attr("id"),f=
"true"==h.substr(h.lastIndexOf("-")+1);break;case a.NUMBER:f=e.val()==epiviz.ui.charts.CustomSetting.DEFAULT?c._customSettingsDefs[b].defaultValue:parseFloat(e.val());if(isNaN(f)){g=new epiviz.ui.controls.MessageDialog("Invalid property value",{Ok:function(){}},sprintf('Invalid value for setting "%s" (%s)',c._customSettingsDefs[b].label,c._customSettingsDefs[b].id),epiviz.ui.controls.MessageDialog.Icon.ERROR);g.show();return}break;case a.ARRAY:f=e.val().split(/[\s,]+/g);break;case a.STRING:case a.CATEGORICAL:case a.MEASUREMENTS_METADATA:case a.MEASUREMENTS_ANNOTATION:f=
e.val()}}catch(l){g=new epiviz.ui.controls.MessageDialog("Invalid property value",{Ok:function(){}},sprintf('Invalid value for setting "%s" (%s)',c._customSettingsDefs[b].label,c._customSettingsDefs[b].id),epiviz.ui.controls.MessageDialog.Icon.ERROR);g.show();return}}c._customSettingsValues[c._customSettingsDefs[b].id]=f}c._handlers.ok(c._customSettingsValues);$(this).dialog("close")},Cancel:function(){c._handlers.cancel();$(this).dialog("close")}},modal:!0});this._dialog.dialog({close:function(a,
b){$(this).remove();c._dialog=null}})}this._dialog.dialog("open");this._dialog.dialog("option","position","center")};epiviz.ui.controls.CodeControl=function(a,c,b,d){epiviz.ui.controls.Control.call(this,a,c,b);this._targetObj=d;this._text="// TODO: Your code here\n"};epiviz.ui.controls.CodeControl.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Control.prototype);epiviz.ui.controls.CodeControl.constructor=epiviz.ui.controls.CodeControl;epiviz.ui.controls.CodeControl.prototype.initialize=function(){};
epiviz.ui.controls.CodeControl.prototype.save=function(){};epiviz.ui.controls.CodeControl.prototype.revert=function(){};epiviz.ui.controls.CodeControl.prototype.text=function(){return this._text};epiviz.ui.controls.CodeControl.prototype.result=function(){return null};epiviz.ui.controls.EditCodeControl=function(a,c,b,d,e,f){epiviz.ui.controls.CodeControl.call(this,a,c,b,d);this._defaultMethod=e;this._editor=null;this._methodsCode={};this._selectedMethod=null;this._hasModifiedMethods=f||!1};
epiviz.ui.controls.EditCodeControl.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.CodeControl.prototype);epiviz.ui.controls.EditCodeControl.constructor=epiviz.ui.controls.EditCodeControl;
epiviz.ui.controls.EditCodeControl.prototype.initialize=function(){if(!this._editor){this._container.append('<div style="float: left; margin-right: 5px;"><select class="obj-methods"></select></div>'+sprintf('<div id="%1$s"><label for="%1$s-true">On</label><input type="radio" id="%1$s-true" name="%1$s" %2$s /><label for="%1$s-false">Off</label><input type="radio" id="%1$s-false" name="%1$s" %3$s /></div>',this.id()+"-switch",this._hasModifiedMethods?'checked="checked"':"",this._hasModifiedMethods?
"":'checked="checked"')+'<br /><div style="overflow-y: scroll; max-height: 500px;"><textarea autofocus="autofocus" class="code-edit"></textarea></div>');this._methodsSelector=this._container.find(".obj-methods");var a=this._container.find("#"+this.id()+"-switch");a.buttonset();var c=this,b=function(a){a=$("#"+c.id()+"-switch :radio:checked").attr("id");a="true"==a.substr(a.lastIndexOf("-")+1);c._editor&&c._editor.setOption("disableInput",!a);c._hasModifiedMethods=a};a.find("#"+this.id()+"-switch-true").on("change",
b);a.find("#"+this.id()+"-switch-false").on("change",b);var d=this._container.find(".code-edit"),a=[],b=this._targetObj,e;for(e in b)$.isFunction(b[e])&&a.push(e);a.sort();for(var f=0;f<a.length;++f){e=a[f];var g=0==f&&!this._defaultMethod||this._defaultMethod==e;this._methodsSelector.append(sprintf('<option value="%s"%s>%s</option>',e,g?' selected="selected"':"",e));g&&(this._text=b[e].toString(),this._selectedMethod=e)}this._methodsSelector.change(function(){c._methodsCode[c._selectedMethod]=c._editor.getValue();
var a=$(this).val(),b=c._methodsCode[a];b||(b=c._targetObj[a].toString(),c._methodsCode[a]=b);c._text=b;c._editor?c._editor.getDoc().setValue(c._text):d.val(c._text);c._selectedMethod=a});d.val(this._text);this._methodsSelector.selectmenu({style:"popup",width:"150",maxHeight:"150",menuWidth:"150"});this._editor=CodeMirror.fromTextArea(this._container.find(".code-edit")[0],{lineNumbers:!0,matchBrackets:!0,continueComments:"Enter",extraKeys:{"Ctrl-Q":"toggleComment"},autofocus:!0});this._editor.setOption("disableInput",
!this._hasModifiedMethods)}};epiviz.ui.controls.EditCodeControl.prototype.save=function(){this._methodsCode[this._selectedMethod]=this._editor.getValue();this._text=this._editor.getValue()};epiviz.ui.controls.EditCodeControl.prototype.revert=function(){this._editor&&this._editor.setOption("value",this._text)};
epiviz.ui.controls.EditCodeControl.prototype.modifiedMethods=function(){var a={},c;for(c in this._methodsCode)this._methodsCode.hasOwnProperty(c)&&this._methodsCode[c]!=this._targetObj[c].toString()&&(a[c]=this._methodsCode[c]);return a};epiviz.ui.controls.EditCodeControl.prototype.result=function(){return{hasModifiedMethods:this._hasModifiedMethods,modifiedMethods:this._hasModifiedMethods?this.modifiedMethods():{}}};
epiviz.ui.controls.MarkerCodeControl=function(a,c,b,d,e,f,g){epiviz.ui.controls.CodeControl.call(this,a,c,b,d);this._markEditor=this._editor=null;this._editorText=e;this._markText=f;this._enabled=g||!1};epiviz.ui.controls.MarkerCodeControl.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.CodeControl.prototype);epiviz.ui.controls.MarkerCodeControl.constructor=epiviz.ui.controls.MarkerCodeControl;
epiviz.ui.controls.MarkerCodeControl.prototype.initialize=function(){if(!this._editor){this._container.append(sprintf('<div id="%1$s"><label for="%1$s-true">On</label><input type="radio" id="%1$s-true" name="%1$s" %2$s /><label for="%1$s-false">Off</label><input type="radio" id="%1$s-false" name="%1$s" %3$s /></div>',this.id()+"-switch",this._enabled?'checked="checked"':"",this._enabled?"":'checked="checked"')+'<br /><div><label><b>Pre-mark Method</b></label></div><br /><div style="overflow-y: scroll; max-height: 250px;"><textarea autofocus="autofocus" class="pre-filter-code"></textarea></div><br/><div><label><b>Mark Method</b></label></div><br/><div style="overflow-y: scroll; max-height: 250px;"><textarea autofocus="autofocus" class="filter-code"></textarea></div>');
var a=this._container.find("#"+this.id()+"-switch");a.buttonset();var c=this,b=function(a){a=$("#"+c.id()+"-switch :radio:checked").attr("id");a="true"==a.substr(a.lastIndexOf("-")+1);c._editor&&c._editor.setOption("disableInput",!a);c._markEditor&&c._markEditor.setOption("disableInput",!a);c._enabled=a};a.find("#"+this.id()+"-switch-true").on("change",b);a.find("#"+this.id()+"-switch-false").on("change",b);a=this._container.find(".pre-filter-code");a.val(this._editorText);b=this._container.find(".filter-code");
b.val(this._markText);this._editor=CodeMirror.fromTextArea(a[0],{lineNumbers:!0,matchBrackets:!0,continueComments:"Enter",extraKeys:{"Ctrl-Q":"toggleComment"},autofocus:!0});this._editor.setOption("disableInput",!this._enabled);this._markEditor=CodeMirror.fromTextArea(b[0],{lineNumbers:!0,matchBrackets:!0,continueComments:"Enter",extraKeys:{"Ctrl-Q":"toggleComment"},autofocus:!0});this._markEditor.setOption("disableInput",!this._enabled)}};
epiviz.ui.controls.MarkerCodeControl.prototype.save=function(){this._editor&&(this._editorText=this._editor.getValue(),this._markText=this._markEditor.getValue())};epiviz.ui.controls.MarkerCodeControl.prototype.revert=function(){this._editor&&this._editor.setOption("value",this._editorText);this._markEditor&&this._markEditor.setOption("value",this._markText)};
epiviz.ui.controls.MarkerCodeControl.prototype.result=function(){return{enabled:this._enabled,preMark:this._enabled?this._editorText:null,mark:this._enabled?this._markText:null}};
epiviz.ui.controls.CodeDialog=function(a,c,b){epiviz.ui.controls.Dialog.call(this,a,c);this._controlCreators=b;this._dialog=$("#"+this._id);this._controls=[];var d=this;this._dialog.append('<div class="code-tabs"><ul></ul></div>');var e=this._dialog.find(".code-tabs"),f=e.find("ul");this._controlCreators.forEach(function(a,b){var c=d._id+"-code-tab-"+b;e.append(sprintf('<div id="%s"></div>',c));var m=e.find("#"+c),m=a(m);f.append(sprintf('<li><a href="#%s">%s</a></li>',c,m.title()));d._controls.push(m)});
e.tabs({activate:function(a,b){d._tabActivate(e)}});this._dialog.dialog({autoOpen:!1,resizable:!1,width:"800",buttons:{Save:function(){var a=[];d._controls.forEach(function(b){b.save();a.push(b.result())});d._handlers.save(a);$(this).dialog("close")},Cancel:function(){d._controls.forEach(function(a){a.revert()});d._handlers.cancel();$(this).dialog("close")}},modal:!0});this._dialog.dialog("option","position","center")};epiviz.ui.controls.CodeDialog.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);
epiviz.ui.controls.CodeDialog.constructor=epiviz.ui.controls.CodeDialog;epiviz.ui.controls.CodeDialog.prototype.show=function(){epiviz.ui.controls.Dialog.prototype.show.call(this);this._dialog.dialog("open");this._controls[0].initialize();this._dialog.dialog("option","position","center")};epiviz.ui.controls.CodeDialog.prototype._tabActivate=function(a){a=a.tabs("option","active");this._controls[a].initialize();this._dialog.dialog("option","position","center")};epiviz.plugins={};
epiviz.plugins.charts={};epiviz.plugins.charts.BlocksTrack=function(a,c,b){epiviz.ui.charts.Track.call(this,a,c,b);this._initialize()};epiviz.plugins.charts.BlocksTrack.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Track.prototype);epiviz.plugins.charts.BlocksTrack.constructor=epiviz.plugins.charts.BlocksTrack;epiviz.plugins.charts.BlocksTrack.prototype._initialize=function(){epiviz.ui.charts.Track.prototype._initialize.call(this);this._svg.classed("blocks-track",!0)};
epiviz.plugins.charts.BlocksTrack.prototype.draw=function(a,c,b,d){epiviz.ui.charts.Track.prototype.draw.call(this,a,c,b,d);c=this._lastData;a=this._lastRange;return c&&a&&c.isReady()?this._drawBlocks(a,c,b||0,d||1):[]};
epiviz.plugins.charts.BlocksTrack.prototype._drawBlocks=function(a,c,b,d){var e=epiviz.ui.charts.Axis,f=a.start(),g=a.end(),h=this.width(),l=this.height(),m=this.margins();this.measurements();var n=this.colors(),q=this.customSettingsValues()[epiviz.plugins.charts.BlocksTrackType.CustomSettings.MIN_BLOCK_DISTANCE],t=d3.scale.linear().domain([f,g]).range([0,h-m.sumAxis(e.X)]),x=b*(h-m.sumAxis(e.X))/(g-f);this._clearAxes();this._drawAxes(t,null,10,5);var u=this,E=[],A=0;c.foreach(function(b,c,d){d=[];
for(var e=0;e<c.size();++e){var f=c.get(e);if(!(f.rowItem.start()>a.end()||f.rowItem.end()<a.start())){var g=sprintf("item data-series-%s",A);if(null!==q&&0<d.length){var h=d[d.length-1],l=t(f.rowItem.start()),m=t(h.end);if(l-m<q){h.end=Math.max(h.end,f.rowItem.end());h.valueItems[0].push(f);h.id=sprintf("b-%s-%s-%s",A,h.start,h.end);continue}}d.push(new epiviz.ui.charts.ChartObject(sprintf("b-%s-%s-%s",A,f.rowItem.start(),f.rowItem.end()),f.rowItem.start(),f.rowItem.end(),null,A,[[f]],[b],g))}}E=
E.concat(d);++A});c=this._svg.select(".items");b=c.select(".selected");b=this._svg.select("#clip-"+this.id());c.empty()&&(b.empty()&&this._svg.select("defs").append("clipPath").attr("id","clip-"+this.id()).append("rect").attr("class","clip-path-rect"),c=this._svg.append("g").attr("class","items").attr("id",this.id()+"-gene-content").attr("clip-path","url(#clip-"+this.id()+")"),b=c.append("g").attr("class","selected"),c.append("g").attr("class","hovered"),b.append("g").attr("class","hovered"));c.attr("transform",
"translate("+m.left()+", "+m.top()+")");this._svg.select(".clip-path-rect").attr("x",0).attr("y",0).attr("width",h-m.sumAxis(e.X)).attr("height",l-m.sumAxis(e.Y));h=c.selectAll(".item").data(E,function(a){return a.id});h.enter().insert("rect",":first-child").attr("class",function(a){return a.cssClasses}).style("fill",function(a){return n.get(a.seriesIndex)}).attr("x",function(a){return t(a.start)/d+x}).attr("width",function(a){return d*(t(a.end+1)-t(a.start))}).on("mouseout",function(){u._unhover.notify(new epiviz.ui.charts.VisEventArgs(u.id()))}).on("mouseover",
function(a){u._hover.notify(new epiviz.ui.charts.VisEventArgs(u.id(),a))}).on("click",function(a){u._deselect.notify(new epiviz.ui.charts.VisEventArgs(u.id()));u._select.notify(new epiviz.ui.charts.VisEventArgs(u.id(),a));d3.event.stopPropagation()});h.attr("class",function(a){return a.cssClasses}).attr("height",l-m.sumAxis(e.Y)).attr("y",0).transition().duration(500).attr("x",function(a){return t(a.start)}).attr("width",function(a){return t(a.end+1)-t(a.start)});h.exit().transition().duration(500).attr("x",
function(a){return t(a.start)}).remove();return E};epiviz.plugins.charts.BlocksTrack.prototype.setColors=function(a){this.container().find(".items").remove();epiviz.ui.charts.Visualization.prototype.setColors.call(this,a)};epiviz.plugins.charts.BlocksTrackType=function(a){epiviz.ui.charts.TrackType.call(this,a)};epiviz.plugins.charts.BlocksTrackType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.TrackType.prototype);epiviz.plugins.charts.BlocksTrackType.constructor=epiviz.plugins.charts.BlocksTrackType;
epiviz.plugins.charts.BlocksTrackType.prototype.createNew=function(a,c,b){return new epiviz.plugins.charts.BlocksTrack(a,c,b)};epiviz.plugins.charts.BlocksTrackType.prototype.typeName=function(){return"epiviz.plugins.charts.BlocksTrack"};epiviz.plugins.charts.BlocksTrackType.prototype.chartName=function(){return"Blocks Track"};epiviz.plugins.charts.BlocksTrackType.prototype.chartHtmlAttributeName=function(){return"blocks"};
epiviz.plugins.charts.BlocksTrackType.prototype.isRestrictedToRangeMeasurements=function(){return!0};epiviz.plugins.charts.BlocksTrackType.prototype.measurementsFilter=function(){return function(a){return a.type()==epiviz.measurements.Measurement.Type.RANGE}};
epiviz.plugins.charts.BlocksTrackType.prototype.customSettingsDefs=function(){return epiviz.ui.charts.TrackType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.BlocksTrackType.CustomSettings.MIN_BLOCK_DISTANCE,epiviz.ui.charts.CustomSetting.Type.NUMBER,5,"Minimum block distance")])};epiviz.plugins.charts.BlocksTrackType.CustomSettings={MIN_BLOCK_DISTANCE:"minBlockDistance"};
epiviz.plugins.charts.LineTrack=function(a,c,b){epiviz.ui.charts.Track.call(this,a,c,b);this._initialize()};epiviz.plugins.charts.LineTrack.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Track.prototype);epiviz.plugins.charts.LineTrack.constructor=epiviz.plugins.charts.LineTrack;epiviz.plugins.charts.LineTrack.prototype._initialize=function(){epiviz.ui.charts.Track.prototype._initialize.call(this)};
epiviz.plugins.charts.LineTrack.prototype.draw=function(a,c,b,d){epiviz.ui.charts.Track.prototype.draw.call(this,a,c,b,d);c=this._lastData;a=this._lastRange;b=b||this._slide||0;d=d||this._zoom||1;this._slide=0;this._zoom=1;if(!c||!a)return[];var e=epiviz.ui.charts.CustomSetting,f=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.Y_MIN],g=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.Y_MAX];f==e.DEFAULT&&(f=null,this.measurements().foreach(function(a){null!==
a&&(null===f||a.minValue()<f)&&(f=a.minValue())}));g==e.DEFAULT&&(g=null,this.measurements().foreach(function(a){null!==a&&(null===g||a.maxValue()>g)&&(g=a.maxValue())}));null===f&&null===g&&(f=-1,g=1);null===f&&(f=g-1);null===g&&(g=f+1);var h=epiviz.ui.charts.Axis,e=d3.scale.linear().domain([a.start(),a.end()]).range([0,this.width()-this.margins().sumAxis(h.X)]),l=d3.scale.linear().domain([f,g]).range([this.height()-this.margins().sumAxis(h.Y),0]);this._clearAxes();this._drawAxes(e,l,10,5);b=b*(this.width()-
this.margins().sumAxis(h.X))/a.width();var m=this._svg.selectAll(".lines");m.empty()&&(m=this._svg.append("g").attr("class","lines").attr("transform","translate("+this.margins().left()+", "+this.margins().top()+")"));c.measurements().forEach(function(a,b){var c=m.selectAll(".line-series-index-"+b),d=m.selectAll(".point-series-index-"+b);c.empty()&&m.append("g").attr("class","line-series-index-"+b);d.empty()&&m.append("g").attr("class","point-series-index-"+b)});for(h=c.measurements().length;;++h){var n=
m.selectAll(".line-series-index-"+h),q=m.selectAll(".point-series-index-"+h);if(n.empty())break;n.remove();q.remove()}return this._drawLines(a,c,b,d,e,l)};
epiviz.plugins.charts.LineTrack.prototype._drawLines=function(a,c,b,d,e,f){var g=this.colors(),h=parseInt(this.customSettingsValues()[epiviz.plugins.charts.LineTrackType.CustomSettings.STEP]),l=this.customSettingsValues()[epiviz.plugins.charts.LineTrackType.CustomSettings.SHOW_POINTS],m=this.customSettingsValues()[epiviz.plugins.charts.LineTrackType.CustomSettings.SHOW_LINES],n=this.customSettingsValues()[epiviz.plugins.charts.LineTrackType.CustomSettings.SHOW_ERROR_BARS],q=this.customSettingsValues()[epiviz.plugins.charts.LineTrackType.CustomSettings.POINT_RADIUS],
t=this.customSettingsValues()[epiviz.plugins.charts.LineTrackType.CustomSettings.LINE_THICKNESS],x=this.customSettingsValues()[epiviz.plugins.charts.LineTrackType.CustomSettings.INTERPOLATION],u=this;d=d3.scale.linear().domain([0,this.width()-this.margins().sumAxis(epiviz.ui.charts.Axis.X)]).range([a.start(),a.end()])(b)-a.start();var E=epiviz.datatypes.GenomicRange.fromStartEnd(a.seqName(),Math.min(a.start(),a.start()+d),Math.max(a.end(),a.end()+d)),A=this._svg.select(".lines"),H=[];c.foreach(function(a,
c,d){var F=u._measurementColorLabels?g.getByKey(u._measurementColorLabels.get(a)):g.get(d),G=c.binarySearchStarts(E);if(0!=G.length){var N=Math.ceil(G.index/h)*h;G.length=Math.max(0,G.length-N+G.index);G.index=N;for(var N=epiviz.utils.range(G.length,G.index).filter(function(a){return!h||1>=h||0==(a-G.index)%h}),M=0;M<N.length;++M){var P=c.get(N[M]);H.push(new epiviz.ui.charts.ChartObject(sprintf("line_%s_%s",d,P.globalIndex),P.rowItem.start(),P.rowItem.end(),[P.value],d,[[P]],[a],sprintf("item data-series-%s",
d)))}var O=function(a){a=c.get(a);return e(a.rowItem.start())};a=function(a){a=c.get(a);return f(a.value)};m?(M=d3.svg.line().x(O).y(a).interpolate(x),P=A.select(".line-series-index-"+d).selectAll("path").data([N]),P.enter().append("path").attr("d",M).style("shape-rendering","auto").style("stroke-opacity","0.7").on("mouseover",function(){u._captureMouseHover()}).on("mousemove",function(){u._captureMouseHover()}).on("mouseout",function(){u._unhover.notify(new epiviz.ui.charts.VisEventArgs(u.id()))}),
P.attr("d",M).style("stroke",F).style("stroke-width",t).attr("transform","translate("+ +b+")").transition().duration(500).attr("transform","translate(0)")):A.select(".line-series-index-"+d).selectAll("path").remove();A.select(".point-series-index-"+d).selectAll("circle").remove();A.select(".point-series-index-"+d).selectAll(".error-bar").remove();l&&(M=A.select(".point-series-index-"+d).selectAll("circle").data(N),M.enter().append("circle").attr("class","point-series-index-"+d).attr("r",q).attr("cx",
O).attr("cy",a).attr("fill","none").attr("stroke",F).attr("transform","translate("+ +b+")").transition().duration(500).attr("transform","translate(0)"),M.on("mouseover",function(){u._captureMouseHover()}).on("mousemove",function(){u._captureMouseHover()}).on("mouseout",function(){u._unhover.notify(new epiviz.ui.charts.VisEventArgs(u.id()))}),M.exit().transition().duration(500).style("opacity",0).remove(),n&&(d=A.select(".point-series-index-"+d).selectAll(".error-bar").data(N),d.enter().append("g").attr("class",
"error-bar").each(function(a){var b;b=c.get(a).rowItem.metadata("errMinus");b=void 0!=b?f(b):null;var d;d=c.get(a).rowItem.metadata("errPlus");d=void 0!=d?f(d):null;null!=b&&null!=d&&(d3.select(this).append("line").attr("x1",O(a)).attr("x2",O(a)).attr("y1",b).attr("y2",d).style("stroke",F).style("shape-rendering","auto"),d3.select(this).append("line").attr("x1",O(a)-2).attr("x2",O(a)+2).attr("y1",b).attr("y2",b).style("stroke",F).style("shape-rendering","auto"),d3.select(this).append("line").attr("x1",
O(a)-2).attr("x2",O(a)+2).attr("y1",d).attr("y2",d).style("stroke",F).style("shape-rendering","auto"))}).attr("transform","translate("+ +b+")").transition().duration(500).attr("transform","translate(0)"),d.on("mouseover",function(){u._captureMouseHover()}).on("mousemove",function(){u._captureMouseHover()}).on("mouseout",function(){u._unhover.notify(new epiviz.ui.charts.VisEventArgs(u.id()))}),d.exit().transition().duration(500).style("opacity",0).remove()))}});return H};
epiviz.plugins.charts.LineTrackType=function(a){epiviz.ui.charts.TrackType.call(this,a)};epiviz.plugins.charts.LineTrackType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.TrackType.prototype);epiviz.plugins.charts.LineTrackType.constructor=epiviz.plugins.charts.LineTrackType;epiviz.plugins.charts.LineTrackType.prototype.createNew=function(a,c,b){return new epiviz.plugins.charts.LineTrack(a,c,b)};epiviz.plugins.charts.LineTrackType.prototype.typeName=function(){return"epiviz.plugins.charts.LineTrack"};
epiviz.plugins.charts.LineTrackType.prototype.chartName=function(){return"Line Track"};epiviz.plugins.charts.LineTrackType.prototype.chartHtmlAttributeName=function(){return"lines"};epiviz.plugins.charts.LineTrackType.prototype.measurementsFilter=function(){return function(a){return a.type()==epiviz.measurements.Measurement.Type.FEATURE}};
epiviz.plugins.charts.LineTrackType.prototype.customSettingsDefs=function(){return epiviz.ui.charts.TrackType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.STEP,epiviz.ui.charts.CustomSetting.Type.NUMBER,50,"Step"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.SHOW_POINTS,epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!1,"Show points"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.SHOW_LINES,
epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!0,"Show lines"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.SHOW_ERROR_BARS,epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!0,"Show error bars"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.POINT_RADIUS,epiviz.ui.charts.CustomSetting.Type.NUMBER,1,"Point radius"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.LINE_THICKNESS,epiviz.ui.charts.CustomSetting.Type.NUMBER,
1,"Line thickness"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.Y_MIN,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Min Y"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.Y_MAX,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Max Y"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.INTERPOLATION,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,
"linear","Interpolation","linear step-before step-after basis basis-open basis-closed bundle cardinal cardinal-open monotone".split(" "))])};epiviz.plugins.charts.LineTrackType.CustomSettings={STEP:"step",SHOW_POINTS:"showPoints",SHOW_ERROR_BARS:"showErrorBars",SHOW_LINES:"showLines",POINT_RADIUS:"pointRadius",LINE_THICKNESS:"lineThickness",INTERPOLATION:"interpolation"};epiviz.plugins.charts.StackedLineTrack=function(a,c,b){epiviz.ui.charts.Track.call(this,a,c,b);this._initialize()};
epiviz.plugins.charts.StackedLineTrack.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Track.prototype);epiviz.plugins.charts.StackedLineTrack.constructor=epiviz.plugins.charts.StackedLineTrack;epiviz.plugins.charts.StackedLineTrack.prototype._initialize=function(){epiviz.ui.charts.Track.prototype._initialize.call(this)};
epiviz.plugins.charts.StackedLineTrack.prototype.draw=function(a,c,b,d){epiviz.ui.charts.Track.prototype.draw.call(this,a,c,b,d);c=this._lastData;a=this._lastRange;b=b||this._slide;d=d||this._zoom;this._slide=0;this._zoom=1;if(!c||!a)return[];var e=epiviz.ui.charts.Axis;b=(b||0)*(this.width()-this.margins().sumAxis(e.X))/a.width();return this._drawLines(a,c,b,d||1)};
epiviz.plugins.charts.StackedLineTrack.prototype._drawLines=function(a,c,b,d){d=epiviz.ui.charts.Axis;var e=this.colors(),f=this.customSettingsValues()[epiviz.plugins.charts.StackedLineTrackType.CustomSettings.STEP],g=this.customSettingsValues()[epiviz.plugins.charts.StackedLineTrackType.CustomSettings.INTERPOLATION],h=this.customSettingsValues()[epiviz.plugins.charts.StackedLineTrackType.CustomSettings.OFFSET],l=this,m=d3.scale.linear().domain([0,this.width()-this.margins().sumAxis(d.X)]).range([a.start(),
a.end()])(b)-a.start();epiviz.datatypes.GenomicRange.fromStartEnd(a.seqName(),Math.min(a.start(),a.start()+m),Math.max(a.end(),a.end()+m));var n=[],q=[],t=c.firstSeries().globalStartIndex(),x=c.firstSeries().globalEndIndex();c.foreach(function(a,b){var c=b.globalStartIndex(),d=b.globalEndIndex();c>t&&(t=c);d<x&&(x=d)});var t=Math.ceil(t/f)*f,x=Math.floor(x/f)*f,u;c.foreach(function(a,b,c){for(var d=epiviz.utils.range((x-t)/f).map(function(a){return a*f+t}).filter(function(a){return b.getByGlobalIndex(a)}),
e=0;e<d.length;++e){var g=b.getByGlobalIndex(d[e]);n.push(new epiviz.ui.charts.ChartObject(sprintf("line_%s_%s",c,g.globalIndex),g.rowItem.start(),g.rowItem.end(),[g.value],c,[[g]],[a],sprintf("item data-series-%s",c)))}var h=[];d.forEach(function(a){h.push({x:b.getByGlobalIndex(a).rowItem.start(),y:b.getByGlobalIndex(a).value})});q.push(h);u||(u=[],d.forEach(function(a){a=b.getByGlobalIndex(a);u.push(a.rowItem.metadata("bacteria"))}))});var E=d3.scale.linear().domain([a.start(),a.end()]).range([0,
this.width()-this.margins().sumAxis(d.X)]);this._clearAxes();this._drawAxes(E,void 0,10);a=this._svg.select(".lines");a.empty()&&(a=this._svg.append("g").attr("class","lines").attr("transform","translate("+this.margins().left()+", "+this.margins().top()+")"));c=d3.layout.stack().offset(h)(q);var A=d3.scale.linear().domain([Math.min(0,d3.min(c,function(a){return d3.min(a,function(a){return a.y0+a.y})})),d3.max(c,function(a){return d3.max(a,function(a){return a.y0+a.y})})]).range([this.height()-this.margins().sumAxis(d.Y),
0]);d=d3.svg.area().x(function(a){return E(a.x)}).y0(function(a){return A(a.y0)}).y1(function(a){return A(a.y0+a.y)}).interpolate(g);g=a.selectAll("path").data(c);g.enter().append("path").attr("d",d).style("shape-rendering","auto").style("stroke-width","0").style("fill",function(a,b){return e.get(b)}).on("mouseover",function(){l._captureMouseHover()}).on("mousemove",function(){l._captureMouseHover()}).on("mouseout",function(){l._unhover.notify(new epiviz.ui.charts.VisEventArgs(l.id()))});g.attr("d",
d).style("fill",function(a,b){return e.get(b)}).attr("transform","translate("+ +b+")").transition().duration(500).attr("transform","translate(0)");return n};epiviz.plugins.charts.StackedLineTrackType=function(a){epiviz.ui.charts.TrackType.call(this,a)};epiviz.plugins.charts.StackedLineTrackType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.TrackType.prototype);epiviz.plugins.charts.StackedLineTrackType.constructor=epiviz.plugins.charts.StackedLineTrackType;
epiviz.plugins.charts.StackedLineTrackType.prototype.createNew=function(a,c,b){return new epiviz.plugins.charts.StackedLineTrack(a,c,b)};epiviz.plugins.charts.StackedLineTrackType.prototype.typeName=function(){return"epiviz.plugins.charts.StackedLineTrack"};epiviz.plugins.charts.StackedLineTrackType.prototype.chartName=function(){return"Stacked Track"};epiviz.plugins.charts.StackedLineTrackType.prototype.chartHtmlAttributeName=function(){return"stacked-lines"};
epiviz.plugins.charts.StackedLineTrackType.prototype.measurementsFilter=function(){return function(a){return a.type()==epiviz.measurements.Measurement.Type.FEATURE}};epiviz.plugins.charts.StackedLineTrackType.prototype.isRestrictedToSameDatasourceGroup=function(){return!0};
epiviz.plugins.charts.StackedLineTrackType.prototype.customSettingsDefs=function(){return epiviz.ui.charts.TrackType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.StackedLineTrackType.CustomSettings.STEP,epiviz.ui.charts.CustomSetting.Type.NUMBER,1,"Step"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.StackedLineTrackType.CustomSettings.OFFSET,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,"zero","Offset",["zero","wiggle"]),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.StackedLineTrackType.CustomSettings.INTERPOLATION,
epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,"basis","Interpolation","linear step-before step-after basis basis-open basis-closed bundle cardinal cardinal-open monotone".split(" "))])};epiviz.plugins.charts.StackedLineTrackType.CustomSettings={STEP:"step",OFFSET:"offset",INTERPOLATION:"interpolation"};
epiviz.plugins.charts.ScatterPlot=function(a,c,b){epiviz.ui.charts.Plot.call(this,a,c,b);this._legend=this._chartContent=null;this._measurementsX=[];this._measurementsY=[];var d=this;this.measurements().foreach(function(a,b){0==b%2?d._measurementsX.push(a):d._measurementsY.push(a)});this._yLabel=this._xLabel="";for(a=0;a<Math.min(this._measurementsX.length,this._measurementsY.length);++a)0<a&&(this._xLabel+=", ",this._yLabel+=", "),this._xLabel+=this._measurementsX[a].name(),this._yLabel+=this._measurementsY[a].name();
this._initialize()};epiviz.plugins.charts.ScatterPlot.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Plot.prototype);epiviz.plugins.charts.ScatterPlot.constructor=epiviz.plugins.charts.ScatterPlot;epiviz.plugins.charts.ScatterPlot.prototype._initialize=function(){epiviz.ui.charts.Plot.prototype._initialize.call(this);this._svg.classed("scatter-plot",!0);this._chartContent=this._svg.append("g").attr("class","chart-content");this._legend=this._svg.append("g").attr("class","chart-legend")};
epiviz.plugins.charts.ScatterPlot.prototype.draw=function(a,c){epiviz.ui.charts.Plot.prototype.draw.call(this,a,c);c=this._lastData;a=this._lastRange;return c&&a?this._drawCircles(a,c):[]};
epiviz.plugins.charts.ScatterPlot.prototype._drawCircles=function(a,c){var b=this,d=epiviz.ui.charts.Axis,e=Math.max(1,this.customSettingsValues()[epiviz.plugins.charts.ScatterPlotType.CustomSettings.CIRCLE_RADIUS_RATIO]*Math.min(this.width(),this.height())),f=Math.max(Math.floor(e),1),g=Math.min(this._measurementsX.length,this._measurementsY.length),h=c.firstSeries().globalStartIndex(),l=c.firstSeries().globalEndIndex();c.foreach(function(a,b){var c=b.globalStartIndex(),d=b.globalEndIndex();c>h&&
(h=c);d<l&&(l=d)});var m=l-h,n=this.margins(),q=this.width(),t=this.height(),x=epiviz.ui.charts.CustomSetting,u=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.Y_MIN],E=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.Y_MAX],A=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.X_MIN],H=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.X_MAX];A==x.DEFAULT&&(A=this._measurementsX[0].minValue());u==x.DEFAULT&&
(u=this._measurementsY[0].minValue());H==x.DEFAULT&&(H=this._measurementsX[0].maxValue());E==x.DEFAULT&&(E=this._measurementsY[0].maxValue());var I=epiviz.measurements.Measurement.Type.isOrdered(this._measurementsX[0].type()),x=d3.scale.linear().domain([A,H]).range([0,q-n.sumAxis(d.X)]),y=d3.scale.linear().domain([u,E]).range([t-n.sumAxis(d.Y),0]);this._clearAxes(this._chartContent);this._drawAxes(x,y,15,15,this._chartContent);var D,F,G=[];for(D=0;D<m;++D)if(F=D+h,(F=c.getSeries(this._measurementsX[0]).getRowByGlobalIndex(F))&&
(!I||void 0==a.start()||void 0==a.end()||F.start()<a.end()&&F.end()>a.start()))for(F=0;F<g;++F)G.push(F*m+D);var I={},g=[],N=1;for(D=0;D<G.length;++D){F=G[D]%m;var M=F+h;F=Math.floor(G[D]/m);var P=b._measurementsX[F],O=b._measurementsY[F],pa=c.getSeries(P).getByGlobalIndex(M),M=c.getSeries(O).getByGlobalIndex(M);if(pa&&M){var ka=sprintf("item data-series-%s",F),Ca=x(pa.value),ra=y(M.value),Ca=Math.floor(Ca/f)*f,ra=Math.floor(ra/f)*f,aa=null;I[ra]&&I[ra][Ca]?(aa=I[ra][Ca],aa.id+="_"+pa.globalIndex,
aa.start=Math.min(aa.start,pa.rowItem.start()),aa.end=Math.max(aa.end,pa.rowItem.end()),aa.values[0]=(aa.values[0]*aa.valueItems[0].length+pa.value)/(aa.valueItems[0].length+1),aa.values[1]=(aa.values[1]*aa.valueItems[1].length+M.value)/(aa.valueItems[1].length+1),aa.valueItems[0].push(pa),aa.valueItems[1].push(M),aa.valueItems[0].length>N&&(N=aa.valueItems[0].length)):(aa=new epiviz.ui.charts.ChartObject(sprintf("scatter_%s_%s",F,pa.globalIndex),pa.rowItem.start(),pa.rowItem.end(),[pa.value,M.value],
F,[[pa],[M]],[P,O],ka),I[ra]||(I[ra]={}),I[ra][Ca]=aa,g.push(aa))}}f=this._chartContent.select(".items");f.empty()&&(f=this._chartContent.append("g").attr("class","items"),m=f.append("g").attr("class","selected"),f.append("g").attr("class","hovered"),m.append("g").attr("class","hovered"));f=f.selectAll("circle").data(g,function(a){return a.id});f.enter().insert("circle",":first-child").attr("id",function(a){return sprintf("%s-item-%s-%s",b.id(),a.seriesIndex,a.valueItems[0][0].globalIndex)}).style("opacity",
0).style("fill-opacity",0).attr("r",0);f.each(function(a){d3.select(this).attr("cx",n.left()+(a.values[0]-A)*(q-n.sumAxis(d.X))/(H-A)).attr("cy",t-n.bottom()-(a.values[1]-u)*(t-n.sumAxis(d.Y))/(E-u)).attr("class",a.cssClasses).style("fill",b.colors().get(a.seriesIndex))});f.transition().duration(1E3).style("fill-opacity",function(a){return Math.max(.3,a.valueItems[0].length/N)}).style("opacity",null).attr("r",e);f.exit().transition().duration(1E3).style("opacity",0).attr("r",0).remove();f.on("mouseover",
function(a){b._hover.notify(new epiviz.ui.charts.VisEventArgs(b.id(),a))}).on("mouseout",function(){b._unhover.notify(new epiviz.ui.charts.VisEventArgs(b.id()))}).on("click",function(a){b._deselect.notify(new epiviz.ui.charts.VisEventArgs(b.id()));b._select.notify(new epiviz.ui.charts.VisEventArgs(b.id(),a));d3.event.stopPropagation()});return g};
epiviz.plugins.charts.ScatterPlot.prototype.colorLabels=function(){for(var a=Math.min(this._measurementsX.length,this._measurementsY.length),c=Array(a),b=0;b<a;++b)c[b]=sprintf("%s vs %s",this._measurementsX[b].name(),this._measurementsY[b].name());return c};
epiviz.plugins.charts.ScatterPlot.prototype._drawAxes=function(a,c,b,d,e,f,g,h){epiviz.ui.charts.Plot.prototype._drawAxes.call(this,a,c,b,d,e,f,g,h);this._legend.selectAll("text").remove();a=this._measurementsX;var l=this;this._legend.selectAll(".x-measurement").remove();this._legend.selectAll(".x-measurement-color").remove();c=this._legend.selectAll(".x-measurement").data(a).enter().append("text").attr("class","x-measurement").attr("font-weight","bold").attr("fill",function(a,b){return l.colors().get(b)}).attr("y",
this.height()-this.margins().bottom()+35).text(function(a,b){return a.name()});var m=0,n=[];$("#"+this.id()+" .x-measurement").each(function(a){n.push(m);m+=this.getBBox().width+15});c.attr("x",function(a,b){return.5*(l.width()-m)+7+n[b]});this._legend.selectAll(".x-measurement-color").data(a).enter().append("circle").attr("class","x-measurement-color").attr("cx",function(a,b){return.5*(l.width()-m)+1+n[b]}).attr("cy",this.height()-this.margins().bottom()+31).attr("r",4).style("shape-rendering","auto").style("stroke-width",
"0").style("fill",function(a,b){return l.colors().get(b)});c=this._measurementsY;this._legend.selectAll(".y-measurement").remove();this._legend.selectAll(".y-measurement-color").remove();c=this._legend.selectAll(".y-measurement").data(c).enter().append("text").attr("class","y-measurement").attr("font-weight","bold").attr("fill",function(a,b){return l.colors().get(b)}).attr("y",this.margins().left()-35).attr("transform","rotate(-90)").text(function(a,b){return a.name()});var q=0,t=[];$("#"+this.id()+
" .y-measurement").each(function(a){t.push(q);q+=this.getBBox().width+15});c.attr("x",function(a,b){return-l.height()+.5*(l.height()-q)+12+l.margins().top()+t[b]});this._legend.selectAll(".y-measurement-color").data(a).enter().append("circle").attr("class","y-measurement-color").attr("cx",function(a,b){return-l.height()+.5*(l.height()-q)+6+l.margins().top()+t[b]}).attr("cy",this.margins().left()-39).attr("transform","rotate(-90)").attr("r",4).style("shape-rendering","auto").style("stroke-width","0").style("fill",
function(a,b){return l.colors().get(b)})};epiviz.plugins.charts.ScatterPlotType=function(a){epiviz.ui.charts.PlotType.call(this,a)};epiviz.plugins.charts.ScatterPlotType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.PlotType.prototype);epiviz.plugins.charts.ScatterPlotType.constructor=epiviz.plugins.charts.ScatterPlotType;epiviz.plugins.charts.ScatterPlotType.prototype.createNew=function(a,c,b){return new epiviz.plugins.charts.ScatterPlot(a,c,b)};
epiviz.plugins.charts.ScatterPlotType.prototype.typeName=function(){return"epiviz.plugins.charts.ScatterPlot"};epiviz.plugins.charts.ScatterPlotType.prototype.chartName=function(){return"Scatter Plot"};epiviz.plugins.charts.ScatterPlotType.prototype.chartHtmlAttributeName=function(){return"scatter"};epiviz.plugins.charts.ScatterPlotType.prototype.measurementsFilter=function(){return function(a){return epiviz.measurements.Measurement.Type.hasValues(a.type())}};
epiviz.plugins.charts.ScatterPlotType.prototype.isRestrictedToSameDatasourceGroup=function(){return!0};epiviz.plugins.charts.ScatterPlotType.prototype.minSelectedMeasurements=function(){return 2};
epiviz.plugins.charts.ScatterPlotType.prototype.customSettingsDefs=function(){return epiviz.ui.charts.PlotType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.ScatterPlotType.CustomSettings.CIRCLE_RADIUS_RATIO,epiviz.ui.charts.CustomSetting.Type.NUMBER,.015,"Circle radius ratio"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.X_MIN,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,
"Min X"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.X_MAX,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Max X"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.Y_MIN,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Min Y"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.Y_MAX,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,
"Max Y")])};epiviz.plugins.charts.ScatterPlotType.CustomSettings={CIRCLE_RADIUS_RATIO:"circleRadiusRatio"};epiviz.plugins.charts.GenesTrack=function(a,c,b){epiviz.ui.charts.Track.call(this,a,c,b);this._initialize()};epiviz.plugins.charts.GenesTrack.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Track.prototype);epiviz.plugins.charts.GenesTrack.constructor=epiviz.plugins.charts.GenesTrack;
epiviz.plugins.charts.GenesTrack.prototype._initialize=function(){epiviz.ui.charts.Track.prototype._initialize.call(this);this._svg.classed("genes-track",!0)};epiviz.plugins.charts.GenesTrack.prototype.draw=function(a,c,b,d){epiviz.ui.charts.Track.prototype.draw.call(this,a,c,b,d);c=this._lastData;a=this._lastRange;if(!c||!a)return[];b=b||this._slide;d=d||this._zoom;this._slide=0;this._zoom=1;return this._drawGenes(a,c,b||0,d||1)};
epiviz.plugins.charts.GenesTrack.prototype._drawGenes=function(a,c,b,d){var e=epiviz.ui.charts.Axis,f=a.start(),g=a.end();a=this.width();var h=this.height(),l=this.margins(),m=d3.scale.linear().domain([f,g]).range([0,a-l.sumAxis(e.X)]),n=b*(a-l.sumAxis(e.X))/(g-f);this._clearAxes();this._drawAxes(m,null,10,5);var q=this,t=c.firstSeries();c=epiviz.utils.range(t.size()).map(function(a){a=t.get(a);var b=a.rowItem,c=sprintf("item gene-%s",b.metadata("gene"));return new epiviz.ui.charts.ChartObject(b.metadata("gene"),
b.start(),b.end(),null,0,[[a]],[t.measurement()],c)});d&&(this._svg.select(".items").remove(),this._svg.select("defs").select("#clip-"+this.id()).remove());d=this._svg.select(".items");b=d.select(".selected");d.empty()&&(this._svg.select("defs").append("clipPath").attr("id","clip-"+this.id()).append("rect").attr("x",0).attr("y",0).attr("width",a-l.sumAxis(e.X)).attr("height",h-l.sumAxis(e.Y)),d=this._svg.append("g").attr("class","items").attr("transform","translate("+l.left()+", "+l.top()+")").attr("id",
this.id()+"-gene-content").attr("clip-path","url(#clip-"+this.id()+")"),b=d.append("g").attr("class","selected"),d.append("g").attr("class","hovered"),b.append("g").attr("class","hovered"));e=d.selectAll(".item").data(c,function(a){return a.id});e.enter().insert("g",":first-child").on("mouseout",function(){q._unhover.notify(new epiviz.ui.charts.VisEventArgs(q.id()))}).on("mouseover",function(a){q._hover.notify(new epiviz.ui.charts.VisEventArgs(q.id(),a))}).on("click",function(a){q._deselect.notify(new epiviz.ui.charts.VisEventArgs(q.id()));
q._select.notify(new epiviz.ui.charts.VisEventArgs(q.id(),a));d3.event.stopPropagation()}).attr("transform","translate("+n+", 0) scale(1, 1)").each(function(a){q._drawGene(this,a,m)});n&&e.each(function(a){q._translateGene(this,a,n)});e.exit().transition().duration(500).style("opacity",0).remove();return c};
epiviz.plugins.charts.GenesTrack.prototype._translateGene=function(a,c,b){a=d3.select(a);c=a.attr("transform");var d=RegExp("translate\\([\\d\\.\\-]+[\\,\\s]+[\\d\\.\\-]+\\)","g"),e=RegExp("[\\d\\.\\-]+","g"),f=c.match(d)[0],e=parseFloat(f.match(e)[0]);c=c.replace(d,"translate("+(e-b)+", 0)");a.transition().duration(500).attr("transform",c)};
epiviz.plugins.charts.GenesTrack.prototype._drawGene=function(a,c,b){var d=epiviz.ui.charts.Axis,e=this,f=c.valueItems[0][0].rowItem,g=b(c.start),h=b(c.end),l="+"==f.strand()?1:-1,m=-l*(this.height()-this.margins().sumAxis(d.Y))*.25,n=f.metadata("exon_starts").split(",").map(function(a){return parseInt(a)}),q=f.metadata("exon_ends").split(",").map(function(a){return parseInt(a)}),t=d3.range(0,n.length),x=.08*this.height(),u=.16*this.height(),E=x*Math.sqrt(3)*.5;a=d3.select(a);a.attr("class",c.cssClasses);
a.append("polygon").attr("class","gene-body").style("fill",this.colors().get(0)).attr("points",function(){var a=null,b,a=.5*(e.height()-e.margins().sumAxis(d.Y)-x)+m;b=[a,a,a+.5*x,a+x,a+x];a="+"==f.strand()?[g,h,h+E,h,g]:[h,g,g-E,g,h];return sprintf("%s,%s %s,%s %s,%s %s,%s %s,%s",a[0],b[0],a[1],b[1],a[2],b[2],a[3],b[3],a[4],b[4])});a.append("g").attr("class","exons").style("fill",this.colors().get(1)).selectAll("rect").data(t).enter().append("rect").attr("x",function(a){return b(n[a])}).attr("y",
.5*(e.height()-u-e.margins().sumAxis(d.Y))+m).attr("width",function(a){return b(q[a])-b(n[a])}).attr("height",u);a.append("text").attr("class","gene-name").attr("x",g+2).attr("y",.5*(e.height()-e.margins().sumAxis(d.Y))+m-l*(x+2)).style("dominant-baseline","central").text(c.id)};epiviz.plugins.charts.GenesTrack.prototype.colorLabels=function(){return["Genes","Exons"]};
epiviz.plugins.charts.GenesTrack.prototype._drawAxes=function(a,c,b,d,e,f,g,h){epiviz.ui.charts.Track.prototype._drawAxes.call(this,a,c,b,d,e,f,g,h);a=epiviz.ui.charts.Axis;this._svg.select(".axes").append("g").attr("class","xAxis").append("line").attr("x1",this.margins().left()).attr("x2",this.width()-this.margins().left()).attr("y1",this.margins().top()+.5*(this.height()-this.margins().sumAxis(a.Y))).attr("y2",this.margins().top()+.5*(this.height()-this.margins().sumAxis(a.Y))).style("stroke","#555555").style("shape-rendering",
"crispEdges")};epiviz.plugins.charts.GenesTrackType=function(a){epiviz.ui.charts.TrackType.call(this,a)};epiviz.plugins.charts.GenesTrackType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.TrackType.prototype);epiviz.plugins.charts.GenesTrackType.constructor=epiviz.plugins.charts.GenesTrackType;epiviz.plugins.charts.GenesTrackType.prototype.createNew=function(a,c,b){return new epiviz.plugins.charts.GenesTrack(a,c,b)};epiviz.plugins.charts.GenesTrackType.prototype.typeName=function(){return"epiviz.plugins.charts.GenesTrack"};
epiviz.plugins.charts.GenesTrackType.prototype.chartName=function(){return"Genes Track"};epiviz.plugins.charts.GenesTrackType.prototype.chartHtmlAttributeName=function(){return"genes"};epiviz.plugins.charts.GenesTrackType.prototype.isRestrictedToRangeMeasurements=function(){return!0};epiviz.plugins.charts.GenesTrackType.prototype.measurementsFilter=function(){return function(a){return a.type()==epiviz.measurements.Measurement.Type.RANGE}};
epiviz.plugins.charts.HeatmapPlot=function(a,c,b){epiviz.ui.charts.Plot.call(this,a,c,b);this._chartContent=null;this._min=this.measurements().first().minValue();this._max=this.measurements().first().maxValue();this._colorScale=epiviz.utils.colorizeBinary(this._min,this._max,"#ffffff",this.colors().get(0));this._colorLabels=[];this._initialize()};epiviz.plugins.charts.HeatmapPlot.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Plot.prototype);epiviz.plugins.charts.HeatmapPlot.constructor=epiviz.plugins.charts.HeatmapPlot;
epiviz.plugins.charts.HeatmapPlot.prototype._initialize=function(){epiviz.ui.charts.Plot.prototype._initialize.call(this);this._svg.classed("heatmap-plot",!0);this._chartContent=this._svg.append("g").attr("class","chart-content")};epiviz.plugins.charts.HeatmapPlot.prototype.draw=function(a,c){epiviz.ui.charts.Plot.prototype.draw.call(this,a,c);c=this._lastData;a=this._lastRange;if(!c||!a)return[];var b=this._applyClustering(a,c);return this._drawCells(a,b)};
epiviz.plugins.charts.HeatmapPlot.prototype._applyClustering=function(a,c){var b=epiviz.measurements.Measurement.Type.isOrdered(this.measurements().first().type()),d=epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.instance(),e=d.algorithm(this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTERING_ALG]),f=d.metric(this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTERING_METRIC]),d=d.linkage(this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTERING_LINKAGE]),
g=[];c.foreach(function(c,d){for(var e=[],f=0;f<d.size();++f){var h=d.get(f).rowItem;(!b||void 0==a.start()||void 0==a.end()||h.start()<a.end()&&h.end()>=a.start())&&e.push(d.get(f).value)}g.push(e)});var e=e.cluster(g,f,d),h=e.root().data(),l=[];c.foreach(function(a){l.push(a)});f=[];for(d=0;d<h.length;++d)f[d]=l[h[d]];h=new epiviz.measurements.MeasurementHashtable;for(d=0;d<f.length;++d)h.put(f[d],c.getSeries(f[d]));this._drawDendrogram(e);return new epiviz.datatypes.MapGenomicData(h)};
epiviz.plugins.charts.HeatmapPlot.prototype._drawCells=function(a,c){var b=this,d=epiviz.ui.charts.Axis,e=this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.MAX_COLUMNS],f=c.firstSeries().globalStartIndex(),g=c.firstSeries().size()+f,h=[],l=epiviz.measurements.Measurement.Type.isOrdered(this.measurements().first().type());c.foreach(function(a,b){var c=b.globalStartIndex(),d=b.globalEndIndex();c>f&&(f=c);d<g&&(g=d);h.push(a)});var m=g-f,n=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.COL_LABEL],
q=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.ROW_LABEL],t=this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.DENDROGRAM_RATIO],t=this.width()*(1-t);this.height();var x=[],u={},E,A;for(E=0;E<m;++E){A=E+f;var H;c.foreach(function(a,b){return H=b.getRowByGlobalIndex(A)});if(H&&(!l||void 0==a.start()||void 0==a.end()||H.start()<a.end()&&H.end()>=a.start())){var I=H.metadata(n)||""+H.id();u[x.length]=A;x.push(I)}}var y=[],D={};c.foreach(function(a,
b,c){for(var d=Math.ceil(x.length/e),f=0,g=e,h=0;h<x.length;++h)if(A=u[h],d=b.getByGlobalIndex(A)){var l=null;0==f?(f=sprintf("item data-series-%s",c),l=new epiviz.ui.charts.ChartObject(sprintf("heatmap_%s_%s",c,A),d.rowItem.start(),d.rowItem.end(),[d.value],c,[[d]],[a],f),y.push(l),f=d=Math.ceil((x.length-h)/g),--g):(l=y[y.length-1],l.id+="_"+A,epiviz.measurements.Measurement.Type.isOrdered(b.measurement().type())&&(l.start=Math.min(l.start,d.rowItem.start()),l.end=Math.max(l.end,d.rowItem.end())),
l.values[0]=(l.values[0]*l.valueItems[0].length+d.value)/(l.valueItems[0].length+1),l.valueItems[0].push(d));0==c&&(D[A]=y.length-1);--f}});var F;this._min=c.measurements()[0].minValue();this._max=c.measurements()[0].maxValue();if(this._globalIndexColorLabels){l={};for(m=f;m<g;++m)l[this._globalIndexColorLabels[m]]=this._globalIndexColorLabels[m];this._colorLabels=Object.keys(l);F={};this._colorLabels.forEach(function(a,c){var d=b.colors().getByKey(a);F[a]=epiviz.utils.colorizeBinary(b._min,b._max,
"#ffffff",d)})}else this._colorLabels=[sprintf("Max",c.firstSeries().measurement().maxValue())],this._colorScale=epiviz.utils.colorizeBinary(this._min,this._max,"#ffffff",this.colors().get(0));var G=(l=Math.min(x.length,e))?(t-this.margins().sumAxis(d.X))/l:0,N=(this.height()-this.margins().sumAxis(d.Y))/c.measurements().length,d=this._chartContent.select(".items");d.empty()&&(d=this._chartContent.append("g").attr("class","items"),t=d.append("g").attr("class","selected"),d.append("g").attr("class",
"hovered"),t.append("g").attr("class","hovered"));d.attr("transform","translate("+this.margins().left()+", "+this.margins().top()+")");t=d.selectAll("rect").data(y,function(a){return a.id});t.enter().append("rect").attr("id",function(a){return sprintf("%s-item-%s-%s",b.id(),a.seriesIndex,a.valueItems[0][0].globalIndex)}).attr("class",function(a){return a.cssClasses}).style("opacity",0).style("fill-opacity",0).attr("x",function(a){return G*D[a.valueItems[0][0].globalIndex]}).attr("y",function(a){return N*
a.seriesIndex}).attr("width",G).attr("height",N).style("fill",function(a,c){return b._globalIndexColorLabels?F[b._globalIndexColorLabels[a.valueItems[0][0].globalIndex]](a.values[0]):b._colorScale(a.values[0])});t.transition().duration(1E3).style("fill-opacity",null).style("opacity",null).attr("x",function(a){return G*D[a.valueItems[0][0].globalIndex]}).attr("y",function(a){return N*a.seriesIndex}).attr("width",G).attr("height",N).style("fill",function(a){return b._globalIndexColorLabels?F[b._globalIndexColorLabels[a.valueItems[0][0].globalIndex]](a.values[0]):
b._colorScale(a.values[0])});t.exit().transition().duration(1E3).style("opacity",0).remove();t.on("mouseover",function(a){b._hover.notify(new epiviz.ui.charts.VisEventArgs(b.id(),a))}).on("mouseout",function(){b._unhover.notify(new epiviz.ui.charts.VisEventArgs(b.id()))}).on("click",function(a){b._deselect.notify(new epiviz.ui.charts.VisEventArgs(b.id()));b._select.notify(new epiviz.ui.charts.VisEventArgs(b.id(),a));d3.event.stopPropagation()});var t=d.selectAll(".col-text"),M=0;x.length>l?t.transition().duration(500).style("opacity",
0).remove():(t=t.data(x,function(a,b){return a+u[b]}),t.enter().append("text").attr("class","col-text").style("opacity","0").attr("x",0).attr("y",0).attr("transform",function(a,b){return"translate("+(b*G+.5*G)+",-5)rotate(-60)"}).text(function(a){return a}),t.transition().duration(500).attr("x",0).attr("y",0).attr("transform",function(a,b){return"translate("+(b*G+.5*G)+",-5)rotate(-60)"}).style("opacity",null).attr("fill",function(a,c){var d=c+f;return b._globalIndexColorLabels?b.colors().getByKey(b._globalIndexColorLabels[d]):
"#000000"}),t.exit().transition().duration(500).style("opacity",0).remove(),$("#"+this.id()+" .col-text").each(function(a){a=this.getBBox().width;M<a&&(M=a)}));d=d.selectAll(".row-text").data(h,function(a){return a.id()});d.enter().append("text").attr("class","row-text").attr("x",0).attr("y",0).attr("transform",function(a,b){return"translate(-5,"+(b*N+.5*N)+")rotate(30)"});d.text(function(a){return"name"==q?a.name():(a=a.annotation())&&q in a?a[q]:"<NA>"});d.transition().duration(500).attr("x",0).attr("y",
0).attr("transform",function(a,b){return"translate(-5,"+(b*N+.5*N)+")rotate(30)"});d.exit().remove();this._svg.selectAll(".chart-title").remove();this._svg.selectAll(".chart-title-color ").remove();d=this._svg.selectAll(".chart-title").data(["Min"].concat(this._colorLabels));d.enter().append("text").attr("class","chart-title").attr("font-weight","bold").attr("y",b.margins().top()-5-M);d.attr("fill",function(a,c){return 0==c?"#000000":b._globalIndexColorLabels?b.colors().getByKey(a):b.colors().get(0)}).text(function(a){return a});
var P=0,O=[];$("#"+this.id()+" .chart-title").each(function(a){O.push(P);P+=this.getBBox().width+15});d.attr("x",function(a,c){return b.margins().left()+10+O[c]});this._svg.selectAll(".chart-title-color").data(["Min"].concat(this._colorLabels)).enter().append("circle").attr("class","chart-title-color").attr("cx",function(a,c){return b.margins().left()+4+O[c]}).attr("cy",b.margins().top()-9-M).attr("r",4).style("shape-rendering","auto").style("stroke-width","0").attr("fill",function(a,c){return 0==
c?"#ffffff":b._globalIndexColorLabels?b.colors().getByKey(a):b.colors().get(0)}).style("stroke-width",function(a,b){return b?0:1}).style("stroke","#000000");return y};
epiviz.plugins.charts.HeatmapPlot.prototype._drawDendrogram=function(a){this._svg.select(".dendrogram").remove();var c=this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.DENDROGRAM_RATIO],b=0<c,d=this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.SHOW_DENDROGRAM_LABELS];if(b){this._svg.append("g").attr("class","dendrogram");var c=this.width()*c,b=this.height()-this.margins().sumAxis(epiviz.ui.charts.Axis.Y),e=this.margins().top(),f=this.width()-
c-this.margins().right();this._drawSubDendrogram(this._svg.select(".dendrogram"),a.root(),e,f,c,b,d)}};
epiviz.plugins.charts.HeatmapPlot.prototype._drawSubDendrogram=function(a,c,b,d,e,f,g){var h=c.children();if(0==h.length)return b+.5*f;for(var l=d3.scale.linear().domain([0,c.distance()]).range([0,e]),m=0,n,q,t=0;t<h.length;++t){var x=b+m,u=f/c.weight()*h[t].weight(),E=l(h[t].distance()),x=this._drawSubDendrogram(a,h[t],x,d,E,u,g);a.append("line").attr("x1",d+E).attr("x2",d+e).attr("y1",x).attr("y2",x).style("stroke","#555555").style("stroke-width",1).style("shape-rendering","auto");0==t&&g&&a.append("text").attr("class",
"row-text").attr("x",Math.max(d+10,d+.5*(E+e))).attr("y",x-10).style("text-anchor","middle").text(Globalize.format(c.distance(),"n2"));if(void 0==n||n>x)n=x;if(void 0==q||q<x)q=x;m+=f/c.weight()*h[t].weight()}a.append("line").attr("x1",d+e).attr("x2",d+e).attr("y1",n).attr("y2",q).style("stroke","#555555").style("stroke-width",1).style("shape-rendering","auto");return.5*(n+q)};epiviz.plugins.charts.HeatmapPlot.prototype.colorLabels=function(){return this._colorLabels};
epiviz.plugins.charts.HeatmapPlotType=function(a){epiviz.ui.charts.PlotType.call(this,a)};epiviz.plugins.charts.HeatmapPlotType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.PlotType.prototype);epiviz.plugins.charts.HeatmapPlotType.constructor=epiviz.plugins.charts.HeatmapPlotType;epiviz.plugins.charts.HeatmapPlotType.prototype.createNew=function(a,c,b){return new epiviz.plugins.charts.HeatmapPlot(a,c,b)};epiviz.plugins.charts.HeatmapPlotType.prototype.typeName=function(){return"epiviz.plugins.charts.HeatmapPlot"};
epiviz.plugins.charts.HeatmapPlotType.prototype.chartName=function(){return"Heatmap"};epiviz.plugins.charts.HeatmapPlotType.prototype.chartHtmlAttributeName=function(){return"heatmap"};epiviz.plugins.charts.HeatmapPlotType.prototype.measurementsFilter=function(){return function(a){return epiviz.measurements.Measurement.Type.hasValues(a.type())}};epiviz.plugins.charts.HeatmapPlotType.prototype.isRestrictedToSameDatasourceGroup=function(){return!0};
epiviz.plugins.charts.HeatmapPlotType.prototype.customSettingsDefs=function(){var a=epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.instance();return epiviz.ui.charts.PlotType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.COL_LABEL,epiviz.ui.charts.CustomSetting.Type.MEASUREMENTS_METADATA,"colLabel","Columns labels"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.ROW_LABEL,
epiviz.ui.charts.CustomSetting.Type.MEASUREMENTS_ANNOTATION,"name","Row labels"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.MAX_COLUMNS,epiviz.ui.charts.CustomSetting.Type.NUMBER,40,"Max columns"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTERING_ALG,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,a.algorithms()[0],"Clustering Algorithm",a.algorithms()),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTERING_METRIC,
epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,a.metrics()[0],"Clustering Metric",a.metrics()),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTERING_LINKAGE,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,a.linkages()[0],"Clustering Linkage",a.linkages()),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.DENDROGRAM_RATIO,epiviz.ui.charts.CustomSetting.Type.NUMBER,0,"Dendrogram Ratio"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.SHOW_DENDROGRAM_LABELS,
epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!0,"Show Dendrogram Labels")])};epiviz.plugins.charts.HeatmapPlotType.CustomSettings={MAX_COLUMNS:"maxColumns",CLUSTERING_ALG:"clusteringAlg",CLUSTERING_METRIC:"clusteringMetric",CLUSTERING_LINKAGE:"clusteringLinkage",DENDROGRAM_RATIO:"dendrogramRatio",SHOW_DENDROGRAM_LABELS:"showDendrogramLabels"};epiviz.plugins.charts.LinePlot=function(a,c,b){epiviz.ui.charts.Plot.call(this,a,c,b);this._initialize()};epiviz.plugins.charts.LinePlot.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Plot.prototype);
epiviz.plugins.charts.LinePlot.constructor=epiviz.plugins.charts.LinePlot;epiviz.plugins.charts.LinePlot.prototype._initialize=function(){epiviz.ui.charts.Plot.prototype._initialize.call(this);this._svg.classed("line-plot",!0)};
epiviz.plugins.charts.LinePlot.prototype.draw=function(a,c,b,d){epiviz.ui.charts.Plot.prototype.draw.call(this,a,c,b,d);c=this._lastData;a=this._lastRange;if(!c||!a)return[];b=epiviz.ui.charts.CustomSetting;var e=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.Y_MIN],f=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.Y_MAX],g=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.ROW_LABEL];e==b.DEFAULT&&(e=null,c.measurements().forEach(function(a){null!==
a&&(null===e||a.minValue()<e)&&(e=a.minValue())}));f==b.DEFAULT&&(f=null,c.measurements().forEach(function(a){null!==a&&(null===f||a.maxValue()>f)&&(f=a.maxValue())}));null===e&&null===f&&(e=-1,f=1);null===e&&(e=f-1);null===f&&(f=e+1);d=epiviz.ui.charts.Axis;b=d3.scale.linear().domain([0,c.measurements().length-1]).range([0,this.width()-this.margins().sumAxis(d.X)]);d=d3.scale.linear().domain([e,f]).range([this.height()-this.margins().sumAxis(d.Y),0]);this._clearAxes();this._drawAxes(b,d,c.measurements().length,
5,void 0,void 0,void 0,void 0,void 0,void 0,c.measurements().map(function(a){return"name"==g?a.name():(a=a.annotation())&&g in a?a[g]:"<NA>"}));var h=this._svg.selectAll(".lines");if(h.empty()){var h=this._svg.append("g").attr("class","lines items"),l=h.append("g").attr("class","selected");h.append("g").attr("class","hovered");l.append("g").attr("class","hovered")}h.attr("transform","translate("+this.margins().left()+", "+this.margins().top()+")");return this._drawLines(a,c,b,d)};
epiviz.plugins.charts.LinePlot.prototype._drawLines=function(a,c,b,d){var e=this.colors(),f=this.customSettingsValues()[epiviz.plugins.charts.LinePlotType.CustomSettings.SHOW_POINTS],g=this.customSettingsValues()[epiviz.plugins.charts.LinePlotType.CustomSettings.SHOW_LINES],h=this.customSettingsValues()[epiviz.plugins.charts.LinePlotType.CustomSettings.SHOW_ERROR_BARS],l=this.customSettingsValues()[epiviz.plugins.charts.LinePlotType.CustomSettings.POINT_RADIUS],m=this.customSettingsValues()[epiviz.plugins.charts.LinePlotType.CustomSettings.LINE_THICKNESS],
n=this.customSettingsValues()[epiviz.plugins.charts.LinePlotType.CustomSettings.INTERPOLATION],q=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.COL_LABEL],t=this,x=this._svg.select(".lines"),u=c.firstSeries().globalStartIndex(),E=c.firstSeries().globalEndIndex();c.foreach(function(a,b){var c=b.globalStartIndex(),d=b.globalEndIndex();c>u&&(u=c);d<E&&(E=d)});for(var A=E-u,H=epiviz.measurements.Measurement.Type.isOrdered(c.measurements()[0].type()),I,y,D=0;D<A;++D){var F=D+
u,G=c.firstSeries().getRowByGlobalIndex(F);if(!H||void 0==a.start()||void 0==a.end()||G.start()<a.end()&&G.end()>=a.start())void 0==I&&(I=F),y=F+1}u=I;E=y;A=y-I;this.width();var N=d3.svg.line().x(function(a){return b(a.x)}).y(function(a){return d(a.y)}).interpolate(n),M=function(a){return t._globalIndexColorLabels?t._globalIndexColorLabels[a.globalIndex()]:a.metadata(q)},P=function(a){return c.measurements().map(function(b,d){var e=c.getByGlobalIndex(b,a);return{x:d,y:e?e.value:null,errMinus:e?e.rowItem.metadata("errMinus"):
null,errPlus:e?e.rowItem.metadata("errPlus"):null}}).filter(function(a){return null!==a.y})};a=epiviz.utils.range(A,u);var O;g?(O=a.map(function(a){var b=c.firstSeries().getRowByGlobalIndex(a);return new epiviz.ui.charts.ChartObject(sprintf("line-series-%s",a),b.start(),b.end(),P(a),a,c.measurements().map(function(b,d){return[c.getByGlobalIndex(b,a)]}),c.measurements(),"")}),g=x.selectAll(".line-series").data(O,function(a){return a.id}),g.enter().insert("g",":first-child").attr("class","line-series item").style("opacity",
"0").on("mouseover",function(a){t._hover.notify(new epiviz.ui.charts.VisEventArgs(t.id(),a))}).on("mouseout",function(){t._unhover.notify(new epiviz.ui.charts.VisEventArgs(t.id()))}).each(function(a){d3.select(this).append("path").attr("class","bg-line").attr("d",N(a.values)).style("shape-rendering","auto").style("stroke-width",10).style("stroke","#dddddd").style("stroke-opacity","0.1");d3.select(this).append("path").attr("class","main-line").attr("d",N(a.values)).style("shape-rendering","auto")}),
g.transition().duration(500).style("opacity","0.7").each(function(a){var b=e.getByKey(M(c.firstSeries().getRowByGlobalIndex(a.seriesIndex)));d3.select(this).selectAll(".bg-line").attr("d",N(a.values));d3.select(this).selectAll(".main-line").attr("d",N(a.values)).style("stroke",b).style("stroke-width",m)}),g.exit().transition().duration(500).style("opacity","0").remove()):x.selectAll(".line-series").remove();f?(f=x.selectAll(".points").data(O,function(a){return a.id}),f.enter().append("g").attr("class",
"points").style("opacity","0"),f.each(function(a){d3.select(this).selectAll(".data-point").remove();var f=d3.select(this).selectAll(".data-point").data(a.values);f.enter().append("g").attr("class","data-point").each(function(f){d3.select(this).append("circle").attr("cx",function(a){return b(a.x)}).attr("cy",function(a){return d(a.y)}).attr("r",l).style("stroke-width",2).attr("fill","none").attr("stroke",e.getByKey(M(c.firstSeries().getRowByGlobalIndex(a.seriesIndex))));d3.select(this).selectAll(".error-bar").remove();
h&&void 0!=f.errMinus&&void 0!=f.errPlus&&(d3.select(this).append("line").attr("x1",b(f.x)).attr("x2",b(f.x)).attr("y1",d(f.errMinus)).attr("y2",d(f.errPlus)).style("stroke",e.getByKey(M(c.firstSeries().getRowByGlobalIndex(a.seriesIndex)))).style("stroke-width",2).attr("class","error-bar"),d3.select(this).append("line").attr("x1",b(f.x)-4).attr("x2",b(f.x)+4).attr("y1",d(f.errMinus)).attr("y2",d(f.errMinus)).style("stroke",e.getByKey(M(c.firstSeries().getRowByGlobalIndex(a.seriesIndex)))).style("stroke-width",
2).attr("class","error-bar"),d3.select(this).append("line").attr("x1",b(f.x)-4).attr("x2",b(f.x)+4).attr("y1",d(f.errPlus)).attr("y2",d(f.errPlus)).style("stroke",e.getByKey(M(c.firstSeries().getRowByGlobalIndex(a.seriesIndex)))).style("stroke-width",2).attr("class","error-bar"))});f.exit().remove()}).transition().duration(500).style("opacity","1"),f.exit().transition().duration(500).style("opacity","0").remove()):x.selectAll(".points").remove();var pa={};a.forEach(function(a){a=M(c.firstSeries().getRowByGlobalIndex(a));
pa[a]=a});this._svg.selectAll(".chart-title").remove();this._svg.selectAll(".chart-title-color").remove();f=this._svg.selectAll(".chart-title").data(Object.keys(pa));f.enter().append("text").attr("class","chart-title").attr("font-weight","bold").attr("y",t.margins().top()-5);f.attr("fill",function(a){return e.getByKey(a)}).text(function(a){return a});var ka=0,Ca=[];$("#"+this.id()+" .chart-title").each(function(a){Ca.push(ka);ka+=this.getBBox().width+15});f.attr("x",function(a,b){return t.margins().left()+
10+Ca[b]});this._svg.selectAll(".chart-title-color").data(Object.keys(pa)).enter().append("circle").attr("class","chart-title-color").attr("cx",function(a,b){return t.margins().left()+4+Ca[b]}).attr("cy",t.margins().top()-9).attr("r",4).style("shape-rendering","auto").style("stroke-width","0").style("fill",function(a){return e.getByKey(a)});return O};epiviz.plugins.charts.LinePlot.prototype.colorLabels=function(){for(var a=[],c=0;c<this.colors().size()&&20>c;++c)a.push("Color "+(c+1));return a};
epiviz.plugins.charts.LinePlotType=function(a){epiviz.ui.charts.PlotType.call(this,a)};epiviz.plugins.charts.LinePlotType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.PlotType.prototype);epiviz.plugins.charts.LinePlotType.constructor=epiviz.plugins.charts.LinePlotType;epiviz.plugins.charts.LinePlotType.prototype.createNew=function(a,c,b){return new epiviz.plugins.charts.LinePlot(a,c,b)};epiviz.plugins.charts.LinePlotType.prototype.typeName=function(){return"epiviz.plugins.charts.LinePlot"};
epiviz.plugins.charts.LinePlotType.prototype.chartName=function(){return"Line Plot"};epiviz.plugins.charts.LinePlotType.prototype.chartHtmlAttributeName=function(){return"line-plot"};epiviz.plugins.charts.LinePlotType.prototype.measurementsFilter=function(){return function(a){return a.type()==epiviz.measurements.Measurement.Type.FEATURE}};epiviz.plugins.charts.LinePlotType.prototype.isRestrictedToSameDatasourceGroup=function(){return!0};
epiviz.plugins.charts.LinePlotType.prototype.customSettingsDefs=function(){return epiviz.ui.charts.PlotType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.COL_LABEL,epiviz.ui.charts.CustomSetting.Type.MEASUREMENTS_METADATA,"colLabel","Columns labels"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.ROW_LABEL,epiviz.ui.charts.CustomSetting.Type.MEASUREMENTS_ANNOTATION,"name","Row labels"),
new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LinePlotType.CustomSettings.SHOW_POINTS,epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!1,"Show points"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LinePlotType.CustomSettings.SHOW_LINES,epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!0,"Show lines"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LinePlotType.CustomSettings.SHOW_ERROR_BARS,epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!0,"Show error bars"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LinePlotType.CustomSettings.POINT_RADIUS,
epiviz.ui.charts.CustomSetting.Type.NUMBER,4,"Point radius"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LinePlotType.CustomSettings.LINE_THICKNESS,epiviz.ui.charts.CustomSetting.Type.NUMBER,3,"Line thickness"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.Y_MIN,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Min Y"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.Y_MAX,epiviz.ui.charts.CustomSetting.Type.NUMBER,
epiviz.ui.charts.CustomSetting.DEFAULT,"Max Y"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LinePlotType.CustomSettings.INTERPOLATION,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,"basis","Interpolation","linear step-before step-after basis basis-open basis-closed bundle cardinal cardinal-open monotone".split(" "))])};
epiviz.plugins.charts.LinePlotType.CustomSettings={SHOW_POINTS:"showPoints",SHOW_ERROR_BARS:"showErrorBars",SHOW_LINES:"showLines",POINT_RADIUS:"pointRadius",LINE_THICKNESS:"lineThickness",INTERPOLATION:"interpolation"};epiviz.plugins.charts.StackedLinePlot=function(a,c,b){epiviz.ui.charts.Plot.call(this,a,c,b);this._initialize()};epiviz.plugins.charts.StackedLinePlot.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Plot.prototype);epiviz.plugins.charts.StackedLinePlot.constructor=epiviz.plugins.charts.StackedLinePlot;
epiviz.plugins.charts.StackedLinePlot.prototype._initialize=function(){epiviz.ui.charts.Plot.prototype._initialize.call(this);this._svg.classed("stacked-line-plot",!0)};
epiviz.plugins.charts.StackedLinePlot.prototype.draw=function(a,c,b,d){epiviz.ui.charts.Plot.prototype.draw.call(this,a,c,b,d);c=this._lastData;a=this._lastRange;if(!c||!a)return[];var e=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.ROW_LABEL];b=this.customSettingsValues()[epiviz.plugins.charts.StackedLinePlotType.CustomSettings.INTERPOLATION];d=0==b.indexOf("step")?c.measurements().length:c.measurements().length-1;var f=epiviz.ui.charts.Axis;d=d3.scale.linear().domain([0,
d]).range([0,this.width()-this.margins().sumAxis(f.X)]);this._clearAxes();this._drawAxes(d,void 0,c.measurements().length,5,void 0,void 0,void 0,void 0,void 0,void 0,c.measurements().map(function(a){return"name"==e?a.name():(a=a.annotation())&&e in a?a[e]:"<NA>"}),void 0,0==b.indexOf("step"));b=this._svg.selectAll(".lines");b.empty()&&(b=this._svg.append("g").attr("class","lines items"),f=b.append("g").attr("class","selected"),b.append("g").attr("class","hovered"),f.append("g").attr("class","hovered"));
b.attr("transform","translate("+this.margins().left()+", "+this.margins().top()+")");return this._drawLines(a,c,d)};
epiviz.plugins.charts.StackedLinePlot.prototype._drawLines=function(a,c,b){var d=epiviz.ui.charts.Axis,e=this.colors(),f=this.customSettingsValues()[epiviz.plugins.charts.StackedLinePlotType.CustomSettings.INTERPOLATION],g=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.COL_LABEL],h=this.customSettingsValues()[epiviz.plugins.charts.StackedLinePlotType.CustomSettings.OFFSET],l=this.customSettingsValues()[epiviz.plugins.charts.StackedLinePlotType.CustomSettings.SCALE_TO_PERCENT],
m=this,n=this._svg.select(".lines"),q=c.firstSeries().globalStartIndex(),t=c.firstSeries().globalEndIndex();c.foreach(function(a,b){var c=b.globalStartIndex(),d=b.globalEndIndex();c>q&&(q=c);d<t&&(t=d)});for(var x=t-q,u=epiviz.measurements.Measurement.Type.isOrdered(this.measurements().first().type()),E,A,H=0;H<x;++H){var I=H+q,y=c.firstSeries().getRowByGlobalIndex(I);y&&(!u||void 0==a.start()||void 0==a.end()||y.start()<a.end()&&y.end()>=a.start())&&(void 0==E&&(E=I),A=I+1)}var q=E,t=A,D=epiviz.utils.range(A-
E,q);if(0==D.length)return[];var F=null;l&&(F=new epiviz.measurements.MeasurementHashtable,c.measurements().forEach(function(a){var b=D.filter(function(b){return c.getByGlobalIndex(a,b)}).map(function(b){return c.getByGlobalIndex(a,b).value}).reduce(function(a,b){return a+b});F.put(a,b)}));var G=function(a){return m._globalIndexColorLabels?m._globalIndexColorLabels[a.globalIndex()]:a.metadata(g)},N=function(a){var b=[];"step-before"==f&&b.push({x:0,y:0});var d=c.measurements(),b=b.concat(d.map(function(d,
e){var f=l?F.get(d):1,f=f||1,g=c.getByGlobalIndex(d,a);return{x:b.length+e,y:g?g.value/f:null}}));"step-after"==f&&b.push({x:b.length,y:0});return b.filter(function(a){return null!==a.y})};a=D.filter(function(a){return c.firstSeries().getRowByGlobalIndex(a)}).map(function(a){var b=c.firstSeries().getRowByGlobalIndex(a),d=c.measurements();return new epiviz.ui.charts.ChartObject(sprintf("line-series-%s",a),b.start(),b.end(),N(a),a,d.map(function(b,d){return[c.getByGlobalIndex(b,a)]}),d,"")});var x=
D.map(function(a){return N(a)}),M=d3.layout.stack().offset(h)(x),P=d3.scale.linear().domain([Math.min(0,d3.min(M,function(a){return d3.min(a,function(a){return a.y0+a.y})})),d3.max(M,function(a){return d3.max(a,function(a){return a.y0+a.y})})]).range([this.height()-this.margins().sumAxis(d.Y),0]),O=d3.svg.area().x(function(a){return b(a.x)}).y0(function(a){return P(a.y0)}).y1(function(a){return P(a.y0+a.y)}).interpolate(f),d=n.selectAll(".line-series").data(a,function(a){return a.seriesIndex});d.enter().insert("path",
":first-child").attr("class","line-series item").attr("d",function(a,b){return O(M[b])}).style("opacity","0").style("shape-rendering","auto").style("fill",function(a,b){return e.getByKey(G(c.firstSeries().getRowByGlobalIndex(a.seriesIndex)))}).on("mouseover",function(a,b){m._hover.notify(new epiviz.ui.charts.VisEventArgs(m.id(),a))}).on("mouseout",function(){m._unhover.notify(new epiviz.ui.charts.VisEventArgs(m.id()))});d.transition().duration(500).style("opacity","0.7").attr("d",function(a,b){return O(M[b])}).style("fill",
function(a,b){return e.getByKey(G(c.firstSeries().getRowByGlobalIndex(a.seriesIndex)))});d.exit().transition().duration(500).style("opacity","0").remove();var pa={};D.forEach(function(a){c.firstSeries().getByGlobalIndex(a)&&(a=G(c.firstSeries().getRowByGlobalIndex(a)),pa[a]=a)});this._svg.selectAll(".chart-title").remove();this._svg.selectAll(".chart-title-color ").remove();d=this._svg.selectAll(".chart-title").data(Object.keys(pa));d.enter().append("text").attr("class","chart-title").attr("font-weight",
"bold").attr("y",m.margins().top()-5);d.attr("fill",function(a){return e.getByKey(a)}).text(function(a){return a});var ka=0,Ca=[];$("#"+this.id()+" .chart-title").each(function(a){Ca.push(ka);ka+=this.getBBox().width+15});d.attr("x",function(a,b){return m.margins().left()+10+Ca[b]});this._svg.selectAll(".chart-title-color").data(Object.keys(pa)).enter().append("circle").attr("class","chart-title-color").attr("cx",function(a,b){return m.margins().left()+4+Ca[b]}).attr("cy",m.margins().top()-9).attr("r",
4).style("shape-rendering","auto").style("stroke-width","0").attr("fill",function(a){return e.getByKey(a)});return a};epiviz.plugins.charts.StackedLinePlot.prototype.colorLabels=function(){for(var a=[],c=0;c<this.colors().size()&&20>c;++c)a.push("Color "+(c+1));return a};epiviz.plugins.charts.StackedLinePlotType=function(a){epiviz.ui.charts.PlotType.call(this,a)};epiviz.plugins.charts.StackedLinePlotType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.PlotType.prototype);
epiviz.plugins.charts.StackedLinePlotType.constructor=epiviz.plugins.charts.StackedLinePlotType;epiviz.plugins.charts.StackedLinePlotType.prototype.createNew=function(a,c,b){return new epiviz.plugins.charts.StackedLinePlot(a,c,b)};epiviz.plugins.charts.StackedLinePlotType.prototype.typeName=function(){return"epiviz.plugins.charts.StackedLinePlot"};epiviz.plugins.charts.StackedLinePlotType.prototype.chartName=function(){return"Stacked Plot"};
epiviz.plugins.charts.StackedLinePlotType.prototype.chartHtmlAttributeName=function(){return"stacked-line-plot"};epiviz.plugins.charts.StackedLinePlotType.prototype.measurementsFilter=function(){return function(a){return a.type()==epiviz.measurements.Measurement.Type.FEATURE}};epiviz.plugins.charts.StackedLinePlotType.prototype.isRestrictedToSameDatasourceGroup=function(){return!0};
epiviz.plugins.charts.StackedLinePlotType.prototype.customSettingsDefs=function(){return epiviz.ui.charts.PlotType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.COL_LABEL,epiviz.ui.charts.CustomSetting.Type.MEASUREMENTS_METADATA,"colLabel","Columns labels"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.ROW_LABEL,epiviz.ui.charts.CustomSetting.Type.MEASUREMENTS_ANNOTATION,"name","Row labels"),
new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.StackedLinePlotType.CustomSettings.OFFSET,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,"zero","Offset",["zero","wiggle"]),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.StackedLinePlotType.CustomSettings.INTERPOLATION,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,"step-after","Interpolation","linear step-before step-after basis basis-open basis-closed bundle cardinal cardinal-open monotone".split(" ")),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.StackedLinePlotType.CustomSettings.SCALE_TO_PERCENT,
epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!0,"Scale to Percent")])};epiviz.plugins.charts.StackedLinePlotType.CustomSettings={INTERPOLATION:"interpolation",OFFSET:"offset",SCALE_TO_PERCENT:"scaleToPercent"};
epiviz.main=function(){var a=new epiviz.Config(epiviz.Config.SETTINGS),c=new epiviz.ui.LocationManager(a),b=new epiviz.measurements.MeasurementsManager,d=new epiviz.ui.charts.ChartFactory(a),e=new epiviz.ui.charts.ChartManager(a),f=new epiviz.ui.ControlManager(a,d,e,b,c),g=new epiviz.data.DataProviderFactory(a),g=new epiviz.data.DataManager(a,g),h=new epiviz.workspaces.WorkspaceManager(a,c,b,e,d),l=new epiviz.localstorage.LocalStorageManager,m=new epiviz.workspaces.UserManager(a),n=new epiviz.ui.WebArgsManager(c,
h),c=new epiviz.EpiViz(a,c,b,f,g,d,e,h,m,n,l);epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.initialize(a);c.start()};goog.exportSymbol("epiviz.main",epiviz.main);
